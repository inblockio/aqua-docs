<!DOCTYPE html><!--TYUIaraO8R0geQ40dh84t--><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" href="/_next/static/media/797e433ab948586e-s.p.dbea232f.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="preload" href="/_next/static/media/caa3a2e1cccd8315-s.p.853070df.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="preload" as="image" href="/logo/aqua-logo.png"/><link rel="stylesheet" href="/_next/static/chunks/a06cf6f745569492.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/chunks/886c530034b0ea44.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/a6e47069aa2a5c7c.js"/><script src="/_next/static/chunks/4af27f77bd5de33b.js" async=""></script><script src="/_next/static/chunks/41110fe9573610ba.js" async=""></script><script src="/_next/static/chunks/turbopack-771160cd9c29df65.js" async=""></script><script src="/_next/static/chunks/a423cf2782ee23a6.js" async=""></script><script src="/_next/static/chunks/150ebe81571675a9.js" async=""></script><script src="/_next/static/chunks/4421a3eabdff5f47.js" async=""></script><script src="/_next/static/chunks/d96012bcfc98706a.js" async=""></script><script src="/_next/static/chunks/73e3194f06db260e.js" async=""></script><meta name="next-size-adjust" content=""/><title>Immutable Hyperlinks | Aqua Protocol</title><meta name="description" content="Shows how the Aqua URI&#x27;s can be used as immutable links.
"/><link rel="canonical" href="https://aqua-protocol.org/docs/v1.1.0/en/immutable-hyperlinks"/><meta property="og:title" content="Immutable Hyperlinks"/><meta property="og:description" content="Shows how the Aqua URI&#x27;s can be used as immutable links.
"/><meta property="og:url" content="https://aqua-protocol.org/docs/v1.1.0/en/immutable-hyperlinks"/><meta property="og:site_name" content="Documentation Platform"/><meta property="og:locale" content="en_US"/><meta property="og:type" content="article"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:title" content="Immutable Hyperlinks"/><meta name="twitter:description" content="Shows how the Aqua URI&#x27;s can be used as immutable links.
"/><link rel="icon" href="/logo/aqua-logo.png"/><link rel="apple-touch-icon" href="/apple-icon.png"/><script src="/_next/static/chunks/a6dad97d9634a72d.js" noModule=""></script></head><body class="font-sans antialiased"><div hidden=""><!--$--><!--/$--></div><!--$--><!--$?--><template id="B:0"></template><div class="max-w-4xl mx-auto px-2 md:px-6 py-8"><div class="animate-pulse space-y-4"><div class="h-8 bg-gray-200 rounded w-3/4"></div><div class="h-4 bg-gray-200 rounded w-1/2"></div><div class="space-y-3 mt-8"><div class="h-4 bg-gray-200 rounded"></div><div class="h-4 bg-gray-200 rounded w-5/6"></div><div class="h-4 bg-gray-200 rounded w-4/6"></div></div></div></div><!--/$--><!--$--><!--/$--><!--/$--><script>requestAnimationFrame(function(){$RT=performance.now()});</script><script src="/_next/static/chunks/a6e47069aa2a5c7c.js" id="_R_" async=""></script><div hidden id="S:0"><div class="min-h-screen bg-background"><header class="sticky top-0 z-50 w-full border-b border-border bg-background/95 backdrop-blur supports-backdrop-filter:bg-background/60"><div class="container flex h-16 items-center justify-between px-2 md:px-6 mx-auto"><div class="flex items-center gap-1"><button class="lg:hidden hover:bg-muted p-2 rounded-md transition-colors" aria-label="Toggle menu"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-menu h-5 w-5"><line x1="4" x2="20" y1="12" y2="12"></line><line x1="4" x2="20" y1="6" y2="6"></line><line x1="4" x2="20" y1="18" y2="18"></line></svg></button><a class="flex items-center gap-2" href="/"><img src="/logo/aqua-logo.png" alt="Aqua Protocol" class="h-12 w-auto object-contain"/><span class="font-semibold text-lg text-foreground">Aqua Protocol</span></a></div><div class="flex items-center gap-2"><div class="relative"><button class="flex items-center gap-2 px-3 py-2 text-sm text-foreground bg-muted rounded-md hover:bg-muted/80 transition-colors"><span class="font-medium">v1.1.0</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down h-4 w-4"><path d="m6 9 6 6 6-6"></path></svg></button></div><a href="https://github.com/inblockio" target="_blank" rel="noopener noreferrer" class="hidden md:flex items-center justify-center h-9 w-9 rounded-md hover:bg-muted transition-colors" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-github h-4 w-4"><path d="M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4"></path><path d="M9 18c-4.51 2-5-2-7-2"></path></svg></a><a href="https://twitter.com/inblockio" target="_blank" rel="noopener noreferrer" class="hidden md:flex items-center justify-center h-9 w-9 rounded-md hover:bg-muted transition-colors" aria-label="Twitter"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-twitter h-4 w-4"><path d="M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z"></path></svg></a><button class="flex items-center justify-center w-9 h-9 rounded-md border border-border bg-background hover:bg-accent transition-colors" aria-label="Toggle theme"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-sun h-4 w-4 text-foreground"><circle cx="12" cy="12" r="4"></circle><path d="M12 2v2"></path><path d="M12 20v2"></path><path d="m4.93 4.93 1.41 1.41"></path><path d="m17.66 17.66 1.41 1.41"></path><path d="M2 12h2"></path><path d="M20 12h2"></path><path d="m6.34 17.66-1.41 1.41"></path><path d="m19.07 4.93-1.41 1.41"></path></svg></button><div class="relative"><button class="flex items-center gap-1.5 px-2 h-9 rounded-md hover:bg-muted transition-colors" aria-label="Switch language"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-languages h-4 w-4"><path d="m5 8 6 6"></path><path d="m4 14 6-6 2-3"></path><path d="M2 5h12"></path><path d="M7 2h1"></path><path d="m22 22-5-10-5 10"></path><path d="M14 18h6"></path></svg><span class="text-xs font-bold uppercase">en</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down h-3 w-3 text-muted-foreground"><path d="m6 9 6 6 6-6"></path></svg></button></div></div></div></header><div class="lg:hidden fixed top-0 left-0 h-full w-72 bg-background border-r border-border z-50 transform transition-transform duration-300 ease-in-out -translate-x-full"><div class="flex flex-col h-full"><div class="shrink-0 px-4 py-4 border-b border-border"><a class="flex items-center gap-2 group justify-center" href="/"><img src="/logo/aqua-logo.png" alt="Aqua Protocol" class="w-18 object-contain"/><div class="flex flex-col"><span class="font-semibold text-foreground group-hover:text-primary transition-colors">Aqua Protocol</span><span class="text-xs text-muted-foreground line-clamp-1">Aqua</span></div></a></div><div class="shrink-0 px-4 pt-4 pb-2"><h2 class="text-xs font-semibold text-muted-foreground uppercase tracking-wider px-2">Documentation</h2></div><div class="flex-1 overflow-y-auto px-4 py-4"><nav class="space-y-1"><a class="flex items-center gap-2 px-3 py-2 text-sm rounded-xl transition-all text-foreground hover:text-foreground hover:bg-accent/50" href="/docs/v1.1.0/en/data-accounting">Data Accounting</a><a class="flex items-center gap-2 px-3 py-2 text-sm rounded-xl transition-all text-foreground hover:text-foreground hover:bg-accent/50" href="/docs/v1.1.0/en/data-governance">Data Governance</a><a class="flex items-center gap-2 px-3 py-2 text-sm rounded-xl transition-all text-foreground hover:text-foreground hover:bg-accent/50" href="/docs/v1.1.0/en/delegated-witnessing">Delegated Witnessing</a><a class="flex items-center gap-2 px-3 py-2 text-sm rounded-xl transition-all text-foreground hover:text-foreground hover:bg-accent/50" href="/docs/v1.1.0/en/design-principles">Design Principles</a><a class="flex items-center gap-2 px-3 py-2 text-sm rounded-xl transition-all text-foreground hover:text-foreground hover:bg-accent/50" href="/docs/v1.1.0/en/guardian">Guardian</a><a class="flex items-center gap-2 px-3 py-2 text-sm rounded-xl transition-all bg-primary/10 text-primary font-medium" href="/docs/v1.1.0/en/immutable-hyperlinks">Immutable Hyperlinks</a><a class="flex items-center gap-2 px-3 py-2 text-sm rounded-xl transition-all text-foreground hover:text-foreground hover:bg-accent/50" href="/docs/v1.1.0/en/assurance-levels">Assurance Levels (AAL)</a><a class="flex items-center gap-2 px-3 py-2 text-sm rounded-xl transition-all text-foreground hover:text-foreground hover:bg-accent/50" href="/docs/v1.1.0/en/concepts">Concepts </a><a class="flex items-center gap-2 px-3 py-2 text-sm rounded-xl transition-all text-foreground hover:text-foreground hover:bg-accent/50" href="/docs/v1.1.0/en/identity-protocol">Identity Protocol</a><a class="flex items-center gap-2 px-3 py-2 text-sm rounded-xl transition-all text-foreground hover:text-foreground hover:bg-accent/50" href="/docs/v1.1.0/en/introduction">Aqua Protocol Version 1</a><a class="flex items-center gap-2 px-3 py-2 text-sm rounded-xl transition-all text-foreground hover:text-foreground hover:bg-accent/50" href="/docs/v1.1.0/en/name-resolution">Aqua Name Resolution (ANS)</a><a class="flex items-center gap-2 px-3 py-2 text-sm rounded-xl transition-all text-foreground hover:text-foreground hover:bg-accent/50" href="/docs/v1.1.0/en/whitepaper">Whitepaper</a></nav></div></div></div><main class="container mx-auto px-2 md:px-6 py-8"><div class="flex"><div class="hidden lg:block"><aside class="w-64 shrink-0 sticky top-24 self-start"><div class="max-h-[calc(100vh-7rem)] overflow-y-auto bg-muted/30 dark:bg-muted/10 rounded-2xl p-4 border border-border/50"><h2 class="text-xs font-semibold text-muted-foreground uppercase tracking-wider mb-4 px-2">Documentation</h2><nav class="space-y-1"><a class="flex items-center gap-2 px-3 py-2 text-sm rounded-xl transition-all text-foreground hover:text-foreground hover:bg-accent/50" href="/docs/v1.1.0/en/data-accounting">Data Accounting</a><a class="flex items-center gap-2 px-3 py-2 text-sm rounded-xl transition-all text-foreground hover:text-foreground hover:bg-accent/50" href="/docs/v1.1.0/en/data-governance">Data Governance</a><a class="flex items-center gap-2 px-3 py-2 text-sm rounded-xl transition-all text-foreground hover:text-foreground hover:bg-accent/50" href="/docs/v1.1.0/en/delegated-witnessing">Delegated Witnessing</a><a class="flex items-center gap-2 px-3 py-2 text-sm rounded-xl transition-all text-foreground hover:text-foreground hover:bg-accent/50" href="/docs/v1.1.0/en/design-principles">Design Principles</a><a class="flex items-center gap-2 px-3 py-2 text-sm rounded-xl transition-all text-foreground hover:text-foreground hover:bg-accent/50" href="/docs/v1.1.0/en/guardian">Guardian</a><a class="flex items-center gap-2 px-3 py-2 text-sm rounded-xl transition-all bg-primary/10 text-primary font-medium" href="/docs/v1.1.0/en/immutable-hyperlinks">Immutable Hyperlinks</a><a class="flex items-center gap-2 px-3 py-2 text-sm rounded-xl transition-all text-foreground hover:text-foreground hover:bg-accent/50" href="/docs/v1.1.0/en/assurance-levels">Assurance Levels (AAL)</a><a class="flex items-center gap-2 px-3 py-2 text-sm rounded-xl transition-all text-foreground hover:text-foreground hover:bg-accent/50" href="/docs/v1.1.0/en/concepts">Concepts </a><a class="flex items-center gap-2 px-3 py-2 text-sm rounded-xl transition-all text-foreground hover:text-foreground hover:bg-accent/50" href="/docs/v1.1.0/en/identity-protocol">Identity Protocol</a><a class="flex items-center gap-2 px-3 py-2 text-sm rounded-xl transition-all text-foreground hover:text-foreground hover:bg-accent/50" href="/docs/v1.1.0/en/introduction">Aqua Protocol Version 1</a><a class="flex items-center gap-2 px-3 py-2 text-sm rounded-xl transition-all text-foreground hover:text-foreground hover:bg-accent/50" href="/docs/v1.1.0/en/name-resolution">Aqua Name Resolution (ANS)</a><a class="flex items-center gap-2 px-3 py-2 text-sm rounded-xl transition-all text-foreground hover:text-foreground hover:bg-accent/50" href="/docs/v1.1.0/en/whitepaper">Whitepaper</a></nav></div></aside></div><div class="flex-1 min-w-0"><div class="flex flex-col gap-2 px-2 md:px-8"><article class="flex-1 min-w-0"><nav class="flex items-center gap-2 text-sm text-muted-foreground mb-4" aria-label="Breadcrumb"><div class="flex items-center gap-2"><a class="hover:text-foreground transition-colors" href="/docs/v1.1.0/en">Docs</a></div><div class="flex items-center gap-2"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4"><path d="m9 18 6-6-6-6"></path></svg><span class="text-foreground font-medium">Immutable Hyperlinks</span></div></nav><div class="mb-8"><h1 class="text-4xl font-bold tracking-tight mb-3 text-foreground">Immutable Hyperlinks</h1><p class="text-lg text-muted-foreground leading-relaxed">Shows how the Aqua URI&#x27;s can be used as immutable links.
</p></div><div class="flex flex-wrap items-center gap-4 text-sm text-muted-foreground border-b border-border pb-4 mb-6"><div class="flex items-center gap-1.5"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clock h-4 w-4"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg><span>3<!-- --> min read</span></div></div><div class="prose prose-slate dark:prose-invert max-w-none prose-headings:scroll-mt-24 prose-headings:font-semibold prose-h1:text-4xl prose-h2:text-3xl prose-h2:mt-12 prose-h2:mb-4 prose-h3:text-2xl prose-h3:mt-8 prose-h3:mb-3 prose-p:text-base prose-p:leading-7 prose-p:text-muted-foreground prose-p:mb-4 prose-a:font-normal prose-a:transition-all prose-code:text-primary prose-code:bg-muted/50 prose-code:px-1.5 prose-code:py-0.5 prose-code:rounded-md prose-code:text-[13px] prose-code:font-mono prose-code:border prose-code:border-border/50 prose-code:before:content-none prose-code:after:content-none prose-pre:bg-transparent prose-pre:p-0 prose-ul:list-disc prose-ul:list-inside prose-ul:space-y-2 prose-ul:mb-4 prose-ol:list-decimal prose-ol:list-inside prose-ol:space-y-2 prose-ol:mb-4 prose-li:leading-7 prose-li:text-muted-foreground prose-strong:text-foreground prose-strong:font-semibold"><p class="text-base leading-7 text-muted-foreground mb-4">Traditional hyperlinks are usually
<a href="https://en.wikipedia.org/wiki/URL" class="text-primary hover:underline font-medium" target="_blank" rel="noopener noreferrer">URL&#x27;s</a> based on the
<a href="https://en.wikipedia.org/wiki/Domain_Name_System" class="text-primary hover:underline font-medium" target="_blank" rel="noopener noreferrer">DNS</a> structure.</p>
<p class="text-base leading-7 text-muted-foreground mb-4">This allows the resource to be routed via DNS and specified via the URL
on the remote server.</p>
<p class="text-base leading-7 text-muted-foreground mb-4">The limitations of URL&#x27;s is that they are not expressing a specific
state of the resource they represent. There is no way to verify if the content
of the page is consistent with the content of the page who send a URL.
For news pages this means that the content of the page could have changed. E.g.
two visitors of the same news page could see two different pages.</p>
<p class="text-base leading-7 text-muted-foreground mb-4">We need a better way to hyperlink so it&#x27;s sure, that what is linked
is consistent across domains and users. Therefore we introduce Aqua URI&#x27;s which are
used to enable the receive to verify the state of the resource.</p>
<h2 id="goal" class="text-2xl font-semibold tracking-tight mt-10 mb-4 text-foreground scroll-mt-24">Goal</h2>
<p class="text-base leading-7 text-muted-foreground mb-4">Use Immutable Hyperlinks as Unique Resource Identifiers (URI&#x27;s) to allow
a consistent referenciation of resources with the ability to verify them with the AQP.</p>
<h2 id="success-criteria" class="text-2xl font-semibold tracking-tight mt-10 mb-4 text-foreground scroll-mt-24">Success Criteria</h2>
<p class="text-base leading-7 text-muted-foreground mb-4">A Immutable Hyperlink schema which links to a specific state of a
resource. Instead of a stateless hyperlink we use verification_hash as a
URI which acts as the checksum to verify the retrieved revision.</p>
<h2 id="input" class="text-2xl font-semibold tracking-tight mt-10 mb-4 text-foreground scroll-mt-24">Input</h2>
<ul class="list-disc list-outside pl-5 space-y-2 mb-4 text-muted-foreground [&amp;_p]:mb-0 [&amp;_p]:inline [&amp;_ul]:ml-6 [&amp;_ol]:ml-6">
<li class="leading-7 [&amp;&gt;p]:mb-0 [&amp;&gt;p]:inline">file upload wizard is executed with file-data and description as
input</li>
<li class="leading-7 [&amp;&gt;p]:mb-0 [&amp;&gt;p]:inline">file is stored with in the service triggering a hook leading to the
calculation of</li>
<li class="leading-7 [&amp;&gt;p]:mb-0 [&amp;&gt;p]:inline">verification_hash (calculated with the file as input for
content_hash) which is stored in the revision_object (file or
database)</li>
</ul>
<p class="text-base leading-7 text-muted-foreground mb-4">Output</p>
<h6 id=""></h6>
<p class="text-base leading-7 text-muted-foreground mb-4">When linking the file it&#x27;s displayed in the following format: [SHA3-512
Hash|Descriptor Text]</p>
<h2 id="boundary-conditions" class="text-2xl font-semibold tracking-tight mt-10 mb-4 text-foreground scroll-mt-24">Boundary conditions</h2>
<ul class="list-disc list-outside pl-5 space-y-2 mb-4 text-muted-foreground [&amp;_p]:mb-0 [&amp;_p]:inline [&amp;_ul]:ml-6 [&amp;_ol]:ml-6">
<li class="leading-7 [&amp;&gt;p]:mb-0 [&amp;&gt;p]:inline">File is too big to be hashed. We support currently up to 50 MB.</li>
<li class="leading-7 [&amp;&gt;p]:mb-0 [&amp;&gt;p]:inline">File can&#x27;t be hashed for some reason (error during the process to
due an unexpected code execution)</li>
<li class="leading-7 [&amp;&gt;p]:mb-0 [&amp;&gt;p]:inline">File is empty (has no content)</li>
</ul>
<h2 id="implementation" class="text-2xl font-semibold tracking-tight mt-10 mb-4 text-foreground scroll-mt-24">Implementation</h2>
<p class="text-base leading-7 text-muted-foreground mb-4">We create Immutable Hyperlinks by moving from URL&#x27;s to sha3-512 hashes as
URI&#x27;s. These URI&#x27;s are globally unique and therefore collision resistant
as the namespace is sufficiently large. By using the hashes as links we
also refer to the state of the resource. As the hash is the
verification_hash of the resource it allows us to verify the integrity
of the resource with it.</p>
<p class="text-base leading-7 text-muted-foreground mb-4">We are referring to files with their SHA3-512 hash in this format
[SHA3-512|human_readable_filename]. Displayed is the human readable
filename white it&#x27;s stored with the full SHA3-512 hash which allows us
to be used as Immutable Hyperlinks.</p>
<p class="text-base leading-7 text-muted-foreground mb-4">To allow routing between resources we can add the <code class="px-1.5 py-0.5 rounded-md bg-muted/50 text-primary font-mono text-[13px] border border-border/50">&lt;domain_id&gt;</code> as a
prefix to the <code class="px-1.5 py-0.5 rounded-md bg-muted/50 text-primary font-mono text-[13px] border border-border/50">&lt;verification_hash&gt;</code> resulting in the following syntax:</p>
<p class="text-base leading-7 text-muted-foreground mb-4"><code class="px-1.5 py-0.5 rounded-md bg-muted/50 text-primary font-mono text-[13px] border border-border/50">example: aqua://&lt;domain_id&gt;/&lt;page_verification_hash&gt;</code></p>
<p class="text-base leading-7 text-muted-foreground mb-4">Note: Implementatstion specific to aqua-PKC:</p>
<ul class="list-disc list-outside pl-5 space-y-2 mb-4 text-muted-foreground [&amp;_p]:mb-0 [&amp;_p]:inline [&amp;_ul]:ml-6 [&amp;_ol]:ml-6">
<li class="leading-7 [&amp;&gt;p]:mb-0 [&amp;&gt;p]:inline">The verification_hash is stored in the content-slot &#x27;transclusion hashes&#x27; with the internal links which referne the resource.</li>
</ul></div><div class="mt-12 pt-6 border-t border-border flex items-center justify-between"><a href="https://github.com/inblockio/aqua-docs/edit/main/docs/v1.1.0/en/immutable-hyperlinks.mdx" target="_blank" rel="noopener noreferrer" class="flex items-center gap-2 text-sm text-muted-foreground hover:text-foreground transition-colors"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-file-pen h-4 w-4"><path d="M12.5 22H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v9.5"></path><path d="M14 2v4a2 2 0 0 0 2 2h4"></path><path d="M13.378 15.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z"></path></svg>Edit this page</a><a href="https://github.com/inblockio/issues/new" target="_blank" rel="noopener noreferrer" class="flex items-center gap-2 text-sm text-muted-foreground hover:text-foreground transition-colors"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-external-link h-4 w-4"><path d="M15 3h6v6"></path><path d="M10 14 21 3"></path><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path></svg>Report an issue</a></div><div class="mt-12 pt-8 border-t border-border grid grid-cols-2 gap-4"><a class="group flex flex-col gap-2 p-4 rounded-xl border border-border hover:border-primary/50 hover:bg-muted/50 transition-all" style="text-decoration:none !important" href="/docs/v1.1.0/en/guardian"><div class="flex items-center gap-2 text-sm text-muted-foreground"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-left h-4 w-4"><path d="m15 18-6-6 6-6"></path></svg><span>Previous</span></div><div class="text-base font-medium text-foreground group-hover:text-primary transition-colors">Guardian</div></a><a class="group flex flex-col gap-2 p-4 rounded-xl border border-border hover:border-primary/50 hover:bg-muted/50 transition-all text-right" style="text-decoration:none !important" href="/docs/v1.1.0/en/assurance-levels"><div class="flex items-center justify-end gap-2 text-sm text-muted-foreground"><span>Next</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4"><path d="m9 18 6-6-6-6"></path></svg></div><div class="text-base font-medium text-foreground group-hover:text-primary transition-colors">Assurance Levels (AAL)</div></a></div></article><footer class="bg-muted/30 dark:bg-muted/10 rounded-2xl mt-24"><div class="px-2 md:px-6 py-12"><div class="grid grid-cols-2 md:grid-cols-4 gap-8 mb-8"><div><h3 class="font-semibold text-foreground mb-4">Documentation</h3><ul class="space-y-2"><li><a class="text-sm text-muted-foreground hover:text-foreground transition-colors" href="/docs/v1.0.0/getting-started">Getting Started</a></li><li><a class="text-sm text-muted-foreground hover:text-foreground transition-colors" href="/docs/v1.0.0/api">API Reference</a></li></ul></div><div><h3 class="font-semibold text-foreground mb-4">Community</h3><ul class="space-y-2"><li><a class="text-sm text-muted-foreground hover:text-foreground transition-colors" href="https://github.com/inblockio/aqua-docs">GitHub</a></li><li><a class="text-sm text-muted-foreground hover:text-foreground transition-colors" href="#">Discord</a></li></ul></div></div><div class="pt-8 border-t border-border/50"><div class="flex flex-col md:flex-row items-center justify-between gap-4"><p class="text-sm text-muted-foreground text-center md:text-left">Copyright Â© 2024 Aqua. All rights reserved.</p></div></div></div></footer></div></div><aside class="w-64 hidden xl:block shrink-0 sticky top-24 self-start"></aside></div></main></div></div><script>$RB=[];$RV=function(a){$RT=performance.now();for(var b=0;b<a.length;b+=2){var c=a[b],e=a[b+1];null!==e.parentNode&&e.parentNode.removeChild(e);var f=c.parentNode;if(f){var g=c.previousSibling,h=0;do{if(c&&8===c.nodeType){var d=c.data;if("/$"===d||"/&"===d)if(0===h)break;else h--;else"$"!==d&&"$?"!==d&&"$~"!==d&&"$!"!==d&&"&"!==d||h++}d=c.nextSibling;f.removeChild(c);c=d}while(c);for(;e.firstChild;)f.insertBefore(e.firstChild,c);g.data="$";g._reactRetry&&requestAnimationFrame(g._reactRetry)}}a.length=0};
$RC=function(a,b){if(b=document.getElementById(b))(a=document.getElementById(a))?(a.previousSibling.data="$~",$RB.push(a,b),2===$RB.length&&("number"!==typeof $RT?requestAnimationFrame($RV.bind(null,$RB)):(a=performance.now(),setTimeout($RV.bind(null,$RB),2300>a&&2E3<a?2300-a:$RT+300-a)))):b.parentNode.removeChild(b)};$RC("B:0","S:0")</script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:\"$Sreact.fragment\"\n2:I[839694,[\"/_next/static/chunks/a423cf2782ee23a6.js\",\"/_next/static/chunks/150ebe81571675a9.js\",\"/_next/static/chunks/4421a3eabdff5f47.js\"],\"ConfigProvider\"]\n3:I[839694,[\"/_next/static/chunks/a423cf2782ee23a6.js\",\"/_next/static/chunks/150ebe81571675a9.js\",\"/_next/static/chunks/4421a3eabdff5f47.js\"],\"TabProvider\"]\n4:I[339756,[\"/_next/static/chunks/d96012bcfc98706a.js\",\"/_next/static/chunks/73e3194f06db260e.js\"],\"default\"]\n5:I[837457,[\"/_next/static/chunks/d96012bcfc98706a.js\",\"/_next/static/chunks/73e3194f06db260e.js\"],\"default\"]\n6:I[839694,[\"/_next/static/chunks/a423cf2782ee23a6.js\",\"/_next/static/chunks/150ebe81571675a9.js\",\"/_next/static/chunks/4421a3eabdff5f47.js\"],\"Button\"]\n7:I[522016,[\"/_next/static/chunks/a423cf2782ee23a6.js\",\"/_next/static/chunks/150ebe81571675a9.js\",\"/_next/static/chunks/4421a3eabdff5f47.js\"],\"\"]\n10:I[168027,[\"/_next/static/chunks/d96012bcfc98706a.js\",\"/_next/static/chunks/73e3194f06db260e.js\"],\"default\"]\n:HL[\"/_next/static/chunks/a06cf6f745569492.css\",\"style\"]\n:HL[\"/_next/static/chunks/886c530034b0ea44.css\",\"style\"]\n:HL[\"/_next/static/media/797e433ab948586e-s.p.dbea232f.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n:HL[\"/_next/static/media/caa3a2e1cccd8315-s.p.853070df.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n"])</script><script>self.__next_f.push([1,"0:{\"P\":null,\"b\":\"TYUIaraO8R0geQ40dh84t\",\"c\":[\"\",\"docs\",\"v1.1.0\",\"en\",\"immutable-hyperlinks\"],\"q\":\"\",\"i\":false,\"f\":[[[\"\",{\"children\":[\"docs\",{\"children\":[[\"version\",\"v1.1.0\",\"d\"],{\"children\":[[\"slug\",\"en/immutable-hyperlinks\",\"c\"],{\"children\":[\"__PAGE__\",{}]}]}]}]},\"$undefined\",\"$undefined\",true],[[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/chunks/a06cf6f745569492.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}],[\"$\",\"link\",\"1\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/chunks/886c530034b0ea44.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}],[\"$\",\"script\",\"script-0\",{\"src\":\"/_next/static/chunks/a423cf2782ee23a6.js\",\"async\":true,\"nonce\":\"$undefined\"}],[\"$\",\"script\",\"script-1\",{\"src\":\"/_next/static/chunks/150ebe81571675a9.js\",\"async\":true,\"nonce\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"en\",\"children\":[\"$\",\"body\",null,{\"className\":\"font-sans antialiased\",\"children\":[\"$\",\"$L2\",null,{\"config\":{\"site\":{\"title\":\"Aqua Protocol\",\"description\":\"Aqua\",\"baseUrl\":\"/\",\"language\":\"en\",\"url\":\"https://aqua-protocol.org\",\"organizationName\":\"inblockio\",\"projectName\":\"aqua-docs\",\"activeVersion\":\"v4.0.0\",\"favicon\":\"/logo/aqua-logo.png\",\"logo\":{\"dark\":\"/logo/aqua-logo.png\",\"light\":\"/logo/aqua-logo.png\"}},\"theme\":{\"defaultMode\":\"system\",\"respectPrefersColorScheme\":true},\"navigation\":{\"showSidebar\":true,\"collapsibleSidebar\":true,\"showBreadcrumbs\":true,\"showTableOfContents\":true,\"tocPosition\":\"right\",\"tocMaxDepth\":3},\"search\":{\"enabled\":false,\"provider\":\"meilisearch\",\"placeholder\":\"Search documentation...\",\"meilisearch\":{\"host\":\"http://localhost:7700\",\"apiKey\":\"aSampleMasterKey\",\"indexName\":\"docs\"}},\"features\":{\"showLastUpdated\":true,\"showReadingTime\":true,\"showAuthors\":false,\"showTags\":true,\"versioning\":true,\"i18n\":{\"defaultLocale\":\"en\",\"locales\":[\"en\"],\"localeNames\":{\"en\":\"English\"},\"prefixDefault\":true},\"editUrl\":\"https://github.com/inblockio/aqua-docs/edit/main/docs\"},\"$schema\":\"./node_modules/specra/config/specra.config.schema.json\",\"social\":{\"github\":\"https://github.com/inblockio\",\"twitter\":\"https://twitter.com/inblockio\",\"custom\":[{\"label\":\"Website\",\"url\":\"https://dev.inblock.io\"}]},\"analytics\":{\"googleAnalytics\":\"\",\"plausible\":\"\"},\"footer\":{\"copyright\":\"Copyright Â© 2024 Aqua. All rights reserved.\",\"links\":[{\"title\":\"Documentation\",\"items\":[{\"label\":\"Getting Started\",\"href\":\"/docs/v1.0.0/getting-started\"},{\"label\":\"API Reference\",\"href\":\"/docs/v1.0.0/api\"}]},{\"title\":\"Community\",\"items\":[{\"label\":\"GitHub\",\"href\":\"https://github.com/inblockio/aqua-docs\"},{\"label\":\"Discord\",\"href\":\"#\"}]}]},\"banner\":{\"enabled\":false,\"message\":\"ðŸŽ‰ Aqua protocol - Let us build privacy infra together!\",\"type\":\"error\",\"dismissible\":true},\"env\":{\"AQUAFIER_URL\":\"https://aquafier.inblock.io\"},\"deployment\":{\"target\":\"github-pages\",\"basePath\":\"\",\"customDomain\":true}},\"children\":[\"$\",\"$L3\",null,{\"defaultTab\":\"\",\"children\":[\"$\",\"$L4\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L5\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[\"$\",\"div\",null,{\"className\":\"min-h-screen bg-background flex items-center justify-center px-6\",\"children\":[\"$\",\"div\",null,{\"className\":\"max-w-2xl mx-auto text-center space-y-6\",\"children\":[[\"$\",\"div\",null,{\"className\":\"space-y-2\",\"children\":[[\"$\",\"h1\",null,{\"className\":\"text-6xl md:text-8xl font-bold text-primary\",\"children\":\"404\"}],[\"$\",\"h2\",null,{\"className\":\"text-2xl md:text-3xl font-semibold text-foreground\",\"children\":\"Page Not Found\"}]]}],[\"$\",\"p\",null,{\"className\":\"text-muted-foreground text-lg max-w-md mx-auto\",\"children\":\"The page you're looking for doesn't exist or may have been moved.\"}],[\"$\",\"div\",null,{\"className\":\"flex flex-col sm:flex-row items-center justify-center gap-4 pt-6\",\"children\":[[\"$\",\"$L6\",null,{\"asChild\":true,\"size\":\"lg\",\"children\":[\"$\",\"$L7\",null,{\"href\":\"/\",\"children\":[[\"$\",\"svg\",null,{\"ref\":\"$undefined\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":24,\"height\":24,\"viewBox\":\"0 0 24 24\",\"fill\":\"none\",\"stroke\":\"currentColor\",\"strokeWidth\":2,\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"className\":\"lucide lucide-house mr-2 h-4 w-4\",\"children\":[[\"$\",\"path\",\"5wwlr5\",{\"d\":\"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8\"}],[\"$\",\"path\",\"1d0kgt\",{\"d\":\"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z\"}],\"$undefined\"]}],\"Go to Homepage\"]}]}],[\"$\",\"$L6\",null,{\"asChild\":true,\"variant\":\"outline\",\"size\":\"lg\",\"children\":[\"$\",\"$L7\",null,{\"href\":\"/docs/v4.0.0/welcome\",\"children\":[[\"$\",\"svg\",null,{\"ref\":\"$undefined\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":24,\"height\":24,\"viewBox\":\"0 0 24 24\",\"fill\":\"none\",\"stroke\":\"currentColor\",\"strokeWidth\":2,\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"className\":\"lucide lucide-arrow-left mr-2 h-4 w-4\",\"children\":[\"$L8\",\"$L9\",\"$undefined\"]}],\"View Documentation\"]}]}]]}]]}]}],[]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]}]}]}]}]]}],{\"children\":[\"$La\",{\"children\":[\"$Lb\",{\"children\":[\"$Lc\",{\"children\":[\"$Ld\",{},null,false,false]},[\"$Le\",[],[]],false,false]},null,false,false]},null,false,false]},null,false,false],\"$Lf\",false]],\"m\":\"$undefined\",\"G\":[\"$10\",[]],\"S\":true}\n"])</script><script>self.__next_f.push([1,"11:I[839694,[\"/_next/static/chunks/a423cf2782ee23a6.js\",\"/_next/static/chunks/150ebe81571675a9.js\",\"/_next/static/chunks/4421a3eabdff5f47.js\"],\"VersionNotFound\"]\n13:I[897367,[\"/_next/static/chunks/d96012bcfc98706a.js\",\"/_next/static/chunks/73e3194f06db260e.js\"],\"OutletBoundary\"]\n14:\"$Sreact.suspense\"\n16:I[897367,[\"/_next/static/chunks/d96012bcfc98706a.js\",\"/_next/static/chunks/73e3194f06db260e.js\"],\"ViewportBoundary\"]\n18:I[897367,[\"/_next/static/chunks/d96012bcfc98706a.js\",\"/_next/static/chunks/73e3194f06db260e.js\"],\"MetadataBoundary\"]\n8:[\"$\",\"path\",\"1l729n\",{\"d\":\"m12 19-7-7 7-7\"}]\n9:[\"$\",\"path\",\"x3x0zl\",{\"d\":\"M19 12H5\"}]\na:[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L4\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L5\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}]\nb:[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L4\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L5\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[\"$\",\"$L11\",null,{}],[]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}]\nc:[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L4\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L5\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}]\nd:[\"$\",\"$1\",\"c\",{\"children\":[\"$L12\",[[\"$\",\"script\",\"script-0\",{\"src\":\"/_next/static/chunks/4421a3eabdff5f47.js\",\"async\":true,\"nonce\":\"$undefined\"}]],[\"$\",\"$L13\",null,{\"children\":[\"$\",\"$14\",null,{\"name\":\"Next.MetadataOutlet\",\"children\":\"$@15\"}]}]]}]\ne:[\"$\",\"div\",\"l\",{\"className\":\"flex items-center justify-center min-h-screen\",\"children\":[\"$\",\"div\",null,{\"className\":\"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900\"}]}]\nf:[\"$\",\"$1\",\"h\",{\"children\":[null,[\"$\",\"$L16\",null,{\"children\":\"$L17\"}],[\"$\",\"div\",null,{\"hidden\":true,\"children\":[\"$\",\"$L18\",null,{\"children\":[\"$\",\"$14\",null,{\"name\":\"Next.Metadata\",\"children\":\"$L19\"}]}]}],[\"$\",\"meta\",null,{\"name\":\"next-size-adjust\",\"content\":\"\"}]]}]\n"])</script><script>self.__next_f.push([1,"1a:I[839694,[\"/_next/static/chunks/a423cf2782ee23a6.js\",\"/_next/static/chunks/150ebe81571675a9.js\",\"/_next/static/chunks/4421a3eabdff5f47.js\"],\"DocLoading\"]\n1b:I[839694,[\"/_next/static/chunks/a423cf2782ee23a6.js\",\"/_next/static/chunks/150ebe81571675a9.js\",\"/_next/static/chunks/4421a3eabdff5f47.js\"],\"DocLayoutWrapper\"]\n1c:I[839694,[\"/_next/static/chunks/a423cf2782ee23a6.js\",\"/_next/static/chunks/150ebe81571675a9.js\",\"/_next/static/chunks/4421a3eabdff5f47.js\"],\"Header\"]\n1d:Td09,"])</script><script>self.__next_f.push([1,"\nWe first exchanged goods, then we used means to exchange goods, such as\nshells and coins. Today we use money. We have transitioned to a world where\nwe present and exchange data to receive goods and services.\n\nThe system for accounting provided by Luca Pacioli, the double-entry\naccounting is the foundation of our work. We present a modern\nway to do double-entry bookkeeping for data.\n\nData accounting is the process of metering data in a standardized unit\nof exchange, and converting it into a form which can be exchanged to\nprovide data symmetry between accounts.\n\nThe unit of exchange is not measured in a numeric value as found in cash\nsystems. Data have multi-dimensional value, which means they depends on your\nperspective and your relationship to data. This determines how much this\ndata-set is worth to the individual.\n\nThe standard measure of exchange is a hash, representing the state of the\ndata. A SHA3-512 hash always has 128 characters, regardless of the size\nof the data it is representing.\n\n## Metering data / anchoring data in space\n\nTo meter data, we can refer to them using a digital fingerprint, i.e. their\nhash. This allows us to refer to the data in a consistent form. The hash has\ncaptured sufficient entropy to be unique, so it becomes a unique resource\nlocator. This ensures that it is always deterministic to what data we relate\nto.\n\n## Accounting data / anchoring data to account\n\nThe second step is that the data is attributed to a specific account. This is\nachieved by using cryptographic signatures known as [public/private key\nencryption](https://en.wikipedia.org/wiki/Public-key_cryptography). The public\nkey acts as a unique account address. It is necessary that the accounts in use\nare globally unique, so there is no realistic probability of a name collision\nbetween accounts. This ensures that no data is attributed by mistake to two\naccounts or more.\n\n## Proof of existence / anchoring data to time\n\nThe last step to account data is the usage of a cryptographically secure clock,\nso we know which data were witnessed first. Data can be replicated, so the\nvalue lies within the social implications of the message within the published\ndata. This cryptographic timestamping allows us to determine the first account\nto witness the data. The most secure witness-networks which provide a service\nfor cryptographic witnessing of datasets are Bitcoin and Ethereum. The first\nknown examples of partial data accounting were done by [Surety in\n1995](https://www.vice.com/en/article/j5nzx4/what-was-the-first-blockchain) and\n[OpenTimestamps in\n2012](https://petertodd.org/2016/opentimestamps-announcement).\n\n## Practical accounting\n\nThe accounting book in the data accounting age is a 'data vault' which is\ncontrolled by one or multiple accounts. This allows both personal data vaults\nor organizational data vaults.\n\nA data vault is controlled by a cryptographic wallet. The vault has the\nobjective to govern the data for the account owner who is associated with the\nvault.\n\nThe vault provides a capability to export and import data, so it can be\nexchanged between data vaults. This allows for collaboration at scale, and the\nusage of data as a means of exchange.\n\n*Please contribute to this article (fixing errors) by exporting it and\nsending it back with your improvement to community\\[at\\]inblock\\[dot\\]io.*\n"])</script><script>self.__next_f.push([1,"1e:Td09,"])</script><script>self.__next_f.push([1,"\nWe first exchanged goods, then we used means to exchange goods, such as\nshells and coins. Today we use money. We have transitioned to a world where\nwe present and exchange data to receive goods and services.\n\nThe system for accounting provided by Luca Pacioli, the double-entry\naccounting is the foundation of our work. We present a modern\nway to do double-entry bookkeeping for data.\n\nData accounting is the process of metering data in a standardized unit\nof exchange, and converting it into a form which can be exchanged to\nprovide data symmetry between accounts.\n\nThe unit of exchange is not measured in a numeric value as found in cash\nsystems. Data have multi-dimensional value, which means they depends on your\nperspective and your relationship to data. This determines how much this\ndata-set is worth to the individual.\n\nThe standard measure of exchange is a hash, representing the state of the\ndata. A SHA3-512 hash always has 128 characters, regardless of the size\nof the data it is representing.\n\n## Metering data / anchoring data in space\n\nTo meter data, we can refer to them using a digital fingerprint, i.e. their\nhash. This allows us to refer to the data in a consistent form. The hash has\ncaptured sufficient entropy to be unique, so it becomes a unique resource\nlocator. This ensures that it is always deterministic to what data we relate\nto.\n\n## Accounting data / anchoring data to account\n\nThe second step is that the data is attributed to a specific account. This is\nachieved by using cryptographic signatures known as [public/private key\nencryption](https://en.wikipedia.org/wiki/Public-key_cryptography). The public\nkey acts as a unique account address. It is necessary that the accounts in use\nare globally unique, so there is no realistic probability of a name collision\nbetween accounts. This ensures that no data is attributed by mistake to two\naccounts or more.\n\n## Proof of existence / anchoring data to time\n\nThe last step to account data is the usage of a cryptographically secure clock,\nso we know which data were witnessed first. Data can be replicated, so the\nvalue lies within the social implications of the message within the published\ndata. This cryptographic timestamping allows us to determine the first account\nto witness the data. The most secure witness-networks which provide a service\nfor cryptographic witnessing of datasets are Bitcoin and Ethereum. The first\nknown examples of partial data accounting were done by [Surety in\n1995](https://www.vice.com/en/article/j5nzx4/what-was-the-first-blockchain) and\n[OpenTimestamps in\n2012](https://petertodd.org/2016/opentimestamps-announcement).\n\n## Practical accounting\n\nThe accounting book in the data accounting age is a 'data vault' which is\ncontrolled by one or multiple accounts. This allows both personal data vaults\nor organizational data vaults.\n\nA data vault is controlled by a cryptographic wallet. The vault has the\nobjective to govern the data for the account owner who is associated with the\nvault.\n\nThe vault provides a capability to export and import data, so it can be\nexchanged between data vaults. This allows for collaboration at scale, and the\nusage of data as a means of exchange.\n\n*Please contribute to this article (fixing errors) by exporting it and\nsending it back with your improvement to community\\[at\\]inblock\\[dot\\]io.*\n"])</script><script>self.__next_f.push([1,"1f:T14c2,"])</script><script>self.__next_f.push([1,"\nAuthor: Ben Koo\nE-Mail: koo0905\\[at\\]gmail\\[dot\\]com\nYear: 2021\n\nData Governance identifies how to manage the value of data. A well-known\nturning point in history was the publication of [Luca\nPacioli](wikipedia:Luca_Pacioli \"wikilink\")'s [Summa de\narithmetica](wikipedia:Summa_de_arithmetica \"wikilink\"). This\nencyclopedia of mathematics, had 26 pages worth of text on what we call\n[Double-entry\nbookkeeping](wikipedia:Double-entry_bookkeeping \"wikilink\"). This became\nthe foundational literature for\n[accounting](wikipedia:accounting \"wikilink\"), the progenitor of using\ndata to assign value to accounts, and henceforth gave birth to the\npractice of data governance.\n\n# Accounting as the foundation of Data Governance\n\nAccording to historian Jane-Gleeson White[^1][^2], Pacioli's double\nentry book keeping idea influenced the development of arts, sciences,\nand capitalism. [Double-entry\nbookkeeping](wikipedia:Double-entry_bookkeeping \"wikilink\") as a\nrigorous approach to ensure data integrity, not only influenced the\npractice of the accounting profession, and it had a significant impact\non the the formulation of [Hamiltonian\nMechanics](wikipedia:Hamiltonian_Mechanics \"wikilink\"), which is a\nfoundational theory of both classical mechanics and quantum mechanics.\n\nSir [William Rowan\nHamilton](wikipedia:William_Rowan_Hamilton \"wikilink\") wrote a paper[^3]\ncited many many scholars to demonstrate that many ideas about complex\nalgebraic manipulation that laid the foundation of scientific\nrevolutions are based on the formulation of creating accountable\nmathematical formulation strategies through double entry book keeping.\n[David Ellerman](https://www.ellerman.org) had a paper that explains the\npowers of double entry bookkeeping in sciences[^4]. The notion that\ncreating public addresses for transactions amongst different accounts\nhas been documented as a scientific theory on Double Entry Book-keeping.\nThis book can be found online[^5]:\n\n## Digital Governance\n\nGiven the intellectual roots of data governance have strong linkages to\nmathematics and accounting, it is only after the introduction of\n[personal computing devices](wikipedia:personal_computer \"wikilink\"),\nand later the ubiquity of [Internet](wikipedia:Internet \"wikilink\")\naccess that made data governance an idea relevant to public affairs. The\nargument is that many people's basic privacy and property rights may be\nchallenged by people who have access to data collection and deployment\ntechnologies. Imminent threats such as fake news, big brother monitoring\npractices, identity thefts, and crypto currency issuance are already\nchallenging the stability of the existing social fabric. These type of\nsocial debates are often related to the ideas of [Digital\ngovernance](wikipedia:Digital_governance \"wikilink\"). At this time,\ndigital governance has not yet become a mature field of study, and it\nneeds to be grounded in simple principles, so that it can be\ntransparently practiced with local adaptations.\n\n## Conceptualization of Data Governance\n\nBeside the notion of digital governance, data as an asset class must be\nkept accountable, so that it can be evaluated, and transferred with an\nobjective operational framework. Knowing how to organize data in formats\nthat satisfy consistent abstraction strategies, such as [Universal\nResource Identifier](wikipedia:URI \"wikilink\") and [Universal Resource\nLocator](wikipedia:URL \"wikilink\") are important starting points in this\nfield. Earlier work in data governance in a web of [hyperlinked\nmedia](wikipedia:Hyperlink \"wikilink\") can be traced back to [Project\nXanadu](wikipedia:Project_Xanadu \"wikilink\") by [Ted\nNelson](wikipedia:Ted_Nelson \"wikilink\").\n\nMore recent more publications in this fields are\n[Lessig](wikipedia:Lawrence_Lessig \"wikilink\")'s [Code\nv2](https://lessig.org/product/codev2)[^6] and soon to be published work\nof [Alex Pentland](wikipedia:Alex_Pentland \"wikilink\")'s [Building the\nNew Economy](https://wip.mitpress.mit.edu/new-economy)[^7].\n\n## References\n\n[^1]: J. Gleeson-White, Double Entry: How the merchants of Venice shaped\n    the modern world--and how their invention could make or break the\n    planet, publisher Allen \u0026 Unwin, `\u003cISBN:978-1-74175-755-2\u003e`, November\n    2011\n\n[^2]: J. Gleeson-White, SIX CAPITALS, or CAN ACCOUNTANTS SAVE THE\n    PLANET?, publisher Allen \u0026 Unwin, ISBN-10:9780393246674, February\n    2015\n\n[^3]: Hamilton, S.W.R. (1837) Theory of Conjugate Functions, or\n    Algebraic Couples: with a Preliminary and Elementary Essay on\n    Algebra as the Science of Pure Time, Transactions of the Royal Irish\n    Academy, 17pp. 293â€“422.\n\n[^4]: David Ellerman, On Double-Entry Bookkeeping: The Mathematical\n    Treatment, [https://arxiv.org/pdf/1407.1898.pdf](https://arxiv.org/pdf/1407.1898.pdf)\n\n[^5]: J.C. Colt, The Science of Double Entry Book-keeping, online\n    media:[https://core.ac.uk/download/pdf/56693696.pdf](https://core.ac.uk/download/pdf/56693696.pdf), last accessed:\n    May 4th, 2021\n\n[^6]: L. Lessig, Code: And Other Laws of Cyberspace, Version 2.0,\n    Publisher: Basic Books, 2nd Revised edition, December 2006\n\n[^7]: Alex Pentland, Alexander Lipton, and Thomas Hardjono, Building the\n    New Economy, MIT Press, Work in Progress,\n    [https://wip.mitpress.mit.edu/new-economy](https://wip.mitpress.mit.edu/new-economy)\n"])</script><script>self.__next_f.push([1,"20:T14c2,"])</script><script>self.__next_f.push([1,"\nAuthor: Ben Koo\nE-Mail: koo0905\\[at\\]gmail\\[dot\\]com\nYear: 2021\n\nData Governance identifies how to manage the value of data. A well-known\nturning point in history was the publication of [Luca\nPacioli](wikipedia:Luca_Pacioli \"wikilink\")'s [Summa de\narithmetica](wikipedia:Summa_de_arithmetica \"wikilink\"). This\nencyclopedia of mathematics, had 26 pages worth of text on what we call\n[Double-entry\nbookkeeping](wikipedia:Double-entry_bookkeeping \"wikilink\"). This became\nthe foundational literature for\n[accounting](wikipedia:accounting \"wikilink\"), the progenitor of using\ndata to assign value to accounts, and henceforth gave birth to the\npractice of data governance.\n\n# Accounting as the foundation of Data Governance\n\nAccording to historian Jane-Gleeson White[^1][^2], Pacioli's double\nentry book keeping idea influenced the development of arts, sciences,\nand capitalism. [Double-entry\nbookkeeping](wikipedia:Double-entry_bookkeeping \"wikilink\") as a\nrigorous approach to ensure data integrity, not only influenced the\npractice of the accounting profession, and it had a significant impact\non the the formulation of [Hamiltonian\nMechanics](wikipedia:Hamiltonian_Mechanics \"wikilink\"), which is a\nfoundational theory of both classical mechanics and quantum mechanics.\n\nSir [William Rowan\nHamilton](wikipedia:William_Rowan_Hamilton \"wikilink\") wrote a paper[^3]\ncited many many scholars to demonstrate that many ideas about complex\nalgebraic manipulation that laid the foundation of scientific\nrevolutions are based on the formulation of creating accountable\nmathematical formulation strategies through double entry book keeping.\n[David Ellerman](https://www.ellerman.org) had a paper that explains the\npowers of double entry bookkeeping in sciences[^4]. The notion that\ncreating public addresses for transactions amongst different accounts\nhas been documented as a scientific theory on Double Entry Book-keeping.\nThis book can be found online[^5]:\n\n## Digital Governance\n\nGiven the intellectual roots of data governance have strong linkages to\nmathematics and accounting, it is only after the introduction of\n[personal computing devices](wikipedia:personal_computer \"wikilink\"),\nand later the ubiquity of [Internet](wikipedia:Internet \"wikilink\")\naccess that made data governance an idea relevant to public affairs. The\nargument is that many people's basic privacy and property rights may be\nchallenged by people who have access to data collection and deployment\ntechnologies. Imminent threats such as fake news, big brother monitoring\npractices, identity thefts, and crypto currency issuance are already\nchallenging the stability of the existing social fabric. These type of\nsocial debates are often related to the ideas of [Digital\ngovernance](wikipedia:Digital_governance \"wikilink\"). At this time,\ndigital governance has not yet become a mature field of study, and it\nneeds to be grounded in simple principles, so that it can be\ntransparently practiced with local adaptations.\n\n## Conceptualization of Data Governance\n\nBeside the notion of digital governance, data as an asset class must be\nkept accountable, so that it can be evaluated, and transferred with an\nobjective operational framework. Knowing how to organize data in formats\nthat satisfy consistent abstraction strategies, such as [Universal\nResource Identifier](wikipedia:URI \"wikilink\") and [Universal Resource\nLocator](wikipedia:URL \"wikilink\") are important starting points in this\nfield. Earlier work in data governance in a web of [hyperlinked\nmedia](wikipedia:Hyperlink \"wikilink\") can be traced back to [Project\nXanadu](wikipedia:Project_Xanadu \"wikilink\") by [Ted\nNelson](wikipedia:Ted_Nelson \"wikilink\").\n\nMore recent more publications in this fields are\n[Lessig](wikipedia:Lawrence_Lessig \"wikilink\")'s [Code\nv2](https://lessig.org/product/codev2)[^6] and soon to be published work\nof [Alex Pentland](wikipedia:Alex_Pentland \"wikilink\")'s [Building the\nNew Economy](https://wip.mitpress.mit.edu/new-economy)[^7].\n\n## References\n\n[^1]: J. Gleeson-White, Double Entry: How the merchants of Venice shaped\n    the modern world--and how their invention could make or break the\n    planet, publisher Allen \u0026 Unwin, `\u003cISBN:978-1-74175-755-2\u003e`, November\n    2011\n\n[^2]: J. Gleeson-White, SIX CAPITALS, or CAN ACCOUNTANTS SAVE THE\n    PLANET?, publisher Allen \u0026 Unwin, ISBN-10:9780393246674, February\n    2015\n\n[^3]: Hamilton, S.W.R. (1837) Theory of Conjugate Functions, or\n    Algebraic Couples: with a Preliminary and Elementary Essay on\n    Algebra as the Science of Pure Time, Transactions of the Royal Irish\n    Academy, 17pp. 293â€“422.\n\n[^4]: David Ellerman, On Double-Entry Bookkeeping: The Mathematical\n    Treatment, [https://arxiv.org/pdf/1407.1898.pdf](https://arxiv.org/pdf/1407.1898.pdf)\n\n[^5]: J.C. Colt, The Science of Double Entry Book-keeping, online\n    media:[https://core.ac.uk/download/pdf/56693696.pdf](https://core.ac.uk/download/pdf/56693696.pdf), last accessed:\n    May 4th, 2021\n\n[^6]: L. Lessig, Code: And Other Laws of Cyberspace, Version 2.0,\n    Publisher: Basic Books, 2nd Revised edition, December 2006\n\n[^7]: Alex Pentland, Alexander Lipton, and Thomas Hardjono, Building the\n    New Economy, MIT Press, Work in Progress,\n    [https://wip.mitpress.mit.edu/new-economy](https://wip.mitpress.mit.edu/new-economy)\n"])</script><script>self.__next_f.push([1,"21:T1238,"])</script><script>self.__next_f.push([1,"\nThe following design principles pertain to Aqua reference Implementation `PKC`\n\n## Private is Default\n\nThe principle default to private is that no data of the PKC [Data\nvault](whitepaper.md#data-vault) is shared without it being explicitly\nauthorized by the associated account.\n\n### Domain Access Levels\n\nLevels of access are:\n\nPrivate: Only the account owner has access to files and services\ninitialized by his account. Agreement / Permissioned access: The Account\nowner grants other Account's access to files or services based on\nverifiable contracts which are themselves written with the Aqua Protocol\nto ensure they are forgery-proof and therefore safe. Public: Other\nAccount's have access to the file or service without agreements.\n\n## Offline Capability\n\nThe PKC Data Vault follow's the principle of being able to run and be\nfunctional without internet connection after setup or through\ninstallation based on local installation files.\n\nThis allows PKC setups to be kept offline from any internet connectivity\nwhile still functional. This can provide the required assurances for\nvery sensitive data.\n\n## Separation of Account and Service\n\nConcern: There is a trend in the DIF/WC3 Identity space that some\nplayers like to accumulate personal identifiable data (PII) inside of\nWallets. We think this is a ill-fated direction and there should be\na clear separation between account and service. Wallets should not hold\npersonal identifiable data.\n\nBenefits:\n\n-   If the service gets hacked, no account related data is leaked if\n    it's not stored.\n-   Account is not compromised, as there is no password saved within the\n    service with Password free login.\n\n#### [Wallet](whitepaper.md#wallet)'s have one job. Keep private keys safe! (Account Management)\n\n-   Should be stupid, simple, safe!\n-   Allowed operations:\n    -   Signing\n    -   De- / Encrypt\n    -   Publishing transactions to service (e.g. witness networks)\n-   Ability to choose â€œhigh level of assuranceâ€ depending on the stakes\n    associated with the account(s) managed by the wallet\n-   Takes care of key recovery mechanisms\n\n#### [Data Vault](whitepaper.md#data-vault) (Service)- Has one job: keep the data safe!\n\n-   [Principle: Offline\n    Capability](Principle:_Offline_Capability) so it can run\n    offline; works offline on local machine\n-   All significant actions authorized and managed though the wallet\n-   Should offer good tooling for data storage and manipulation\n-   Strong access control: By [Principle: Default is\n    Private](Principle:_Default_is_Private) which means data\n    is only accessible by the owner.\n-   Data is well protected\n    -   The Data Vault should apply additional security features to keep\n        the data safe.\n    -   e.g. Encryption of files / databases if service is not used.\n    -   e.g. Encryption of pages with web-decryption (allowing for\n        End-to-End Encryption).\n-   Capabilities for sharing and publishing data\n-   Offers full Backup and Recovery mechanisms to move data freely\n    -   [Principle: Data\n        Portability](Principle:_Data_Portability \"wikilink\")\n\n## Signature Login\n\nWe do not use passwords for login but instead we use a signature of a\nprivate key to authorize access to a service. This increases security\nand does not require the user to remember a password, creating a better\nuser experience.\n\nPros:  \n\\* Account owner uses his wallet to complete a signature challenge for\nlogin. With this challenge he proves that he owns the private key to a\npublic key. If the public key is registered as an account at the\nservice, the account is granted access.\n\n-   The password can't be leaked as it does not exist.\n-   Very high security\n\nContra:  \n\\* Requires access to the wallet which holds the private key to\nauthorize access\n\n-   Not commonly understood by users as a way to login (new process)\n\n## Principle: Data Portability\n\nThe Principle of Data Portability means that the\n[Account](whitepaper.md#account) owner can instruct the Service to Export\nall data associated with the [Account](whitepaper.md#account) and is free\nto move this data to a new service which is capable of importing the\ndata.\n\n### Implementation Specifics\n\nIn PKC's this is guaranteed by:  \n\\* providing a Backup and restore procedure which allows to move data\nbetween PKC's and restore them in case of a required recovery.\n\n-   providing a file import and export function\n-   providing an import / export API\n\nFurthermore we ensure with the development of the MediaWiki Data\nAccounting Extension, that the data is still compatible with the legacy\nimport / export (which means only the text not the verification data is\nimported / exported.\n"])</script><script>self.__next_f.push([1,"22:T1238,"])</script><script>self.__next_f.push([1,"\nThe following design principles pertain to Aqua reference Implementation `PKC`\n\n## Private is Default\n\nThe principle default to private is that no data of the PKC [Data\nvault](whitepaper.md#data-vault) is shared without it being explicitly\nauthorized by the associated account.\n\n### Domain Access Levels\n\nLevels of access are:\n\nPrivate: Only the account owner has access to files and services\ninitialized by his account. Agreement / Permissioned access: The Account\nowner grants other Account's access to files or services based on\nverifiable contracts which are themselves written with the Aqua Protocol\nto ensure they are forgery-proof and therefore safe. Public: Other\nAccount's have access to the file or service without agreements.\n\n## Offline Capability\n\nThe PKC Data Vault follow's the principle of being able to run and be\nfunctional without internet connection after setup or through\ninstallation based on local installation files.\n\nThis allows PKC setups to be kept offline from any internet connectivity\nwhile still functional. This can provide the required assurances for\nvery sensitive data.\n\n## Separation of Account and Service\n\nConcern: There is a trend in the DIF/WC3 Identity space that some\nplayers like to accumulate personal identifiable data (PII) inside of\nWallets. We think this is a ill-fated direction and there should be\na clear separation between account and service. Wallets should not hold\npersonal identifiable data.\n\nBenefits:\n\n-   If the service gets hacked, no account related data is leaked if\n    it's not stored.\n-   Account is not compromised, as there is no password saved within the\n    service with Password free login.\n\n#### [Wallet](whitepaper.md#wallet)'s have one job. Keep private keys safe! (Account Management)\n\n-   Should be stupid, simple, safe!\n-   Allowed operations:\n    -   Signing\n    -   De- / Encrypt\n    -   Publishing transactions to service (e.g. witness networks)\n-   Ability to choose â€œhigh level of assuranceâ€ depending on the stakes\n    associated with the account(s) managed by the wallet\n-   Takes care of key recovery mechanisms\n\n#### [Data Vault](whitepaper.md#data-vault) (Service)- Has one job: keep the data safe!\n\n-   [Principle: Offline\n    Capability](Principle:_Offline_Capability) so it can run\n    offline; works offline on local machine\n-   All significant actions authorized and managed though the wallet\n-   Should offer good tooling for data storage and manipulation\n-   Strong access control: By [Principle: Default is\n    Private](Principle:_Default_is_Private) which means data\n    is only accessible by the owner.\n-   Data is well protected\n    -   The Data Vault should apply additional security features to keep\n        the data safe.\n    -   e.g. Encryption of files / databases if service is not used.\n    -   e.g. Encryption of pages with web-decryption (allowing for\n        End-to-End Encryption).\n-   Capabilities for sharing and publishing data\n-   Offers full Backup and Recovery mechanisms to move data freely\n    -   [Principle: Data\n        Portability](Principle:_Data_Portability \"wikilink\")\n\n## Signature Login\n\nWe do not use passwords for login but instead we use a signature of a\nprivate key to authorize access to a service. This increases security\nand does not require the user to remember a password, creating a better\nuser experience.\n\nPros:  \n\\* Account owner uses his wallet to complete a signature challenge for\nlogin. With this challenge he proves that he owns the private key to a\npublic key. If the public key is registered as an account at the\nservice, the account is granted access.\n\n-   The password can't be leaked as it does not exist.\n-   Very high security\n\nContra:  \n\\* Requires access to the wallet which holds the private key to\nauthorize access\n\n-   Not commonly understood by users as a way to login (new process)\n\n## Principle: Data Portability\n\nThe Principle of Data Portability means that the\n[Account](whitepaper.md#account) owner can instruct the Service to Export\nall data associated with the [Account](whitepaper.md#account) and is free\nto move this data to a new service which is capable of importing the\ndata.\n\n### Implementation Specifics\n\nIn PKC's this is guaranteed by:  \n\\* providing a Backup and restore procedure which allows to move data\nbetween PKC's and restore them in case of a required recovery.\n\n-   providing a file import and export function\n-   providing an import / export API\n\nFurthermore we ensure with the development of the MediaWiki Data\nAccounting Extension, that the data is still compatible with the legacy\nimport / export (which means only the text not the verification data is\nimported / exported.\n"])</script><script>self.__next_f.push([1,"23:T47c9,"])</script><script>self.__next_f.push([1,"\n# Context\n\nIt is highly problematic to expose sensitive data, such as personal\nidentifiable data, to the internet. The service who hosts that sensitive\ndata, needs to be compromised only for a short amount of time, to leak\nall the data. Often caused by configuration mistakes or by\nvulnerabilities being present in the used technology stack.\n\nWe can't effort to have leaks on personal-identifiable data in data\nvaults. To raise the bar on making attacks difficult and reducing the\nchance of leakage of information, we introduce the Guardian as a extra\nsecurity layer to protect services like the PKC from attacks.\n\n# Summary\n\nThe Guardian is a software which manages the boundaries of your digital\ndomain. Guardians are used to connect to secure transport networks\n(HTTPS, Matrix Network, Didcomm) and publishing networks (e.g.\nSwarm.eth). The Guardian is used to build trusted connections to other\nGuardians via trusted transport-layers to exchange data with them. As\nthe Guardian connects to other Guardians, it also manages all\nconnections to services in it's domain and access to those services.\n\n# Goal\n\nSecure all services behind the Guardian from attacks and unauthorized\naccess. Keep the data vault and it's data private and safe, while\nenabling the ability to exchange data with other Guardians.\n\n## How\n\nEnforcement is handled on each connection and each data set so that\nservices behind the Guardian are never directly exposed. This makes the\nGuardian the most security sensitive component in the Aqua reference\nimplementation, as we expect the Guardian to handle all incoming and\noutgoing traffic. The Guardian enjoys additional attention and effort to\nbe up to it's task by hardening it and applying security best practices\nto ensure that it is fulfilling it's security promise to keep services\nbehind the Guardian safe.\n\nEvery transaction leaving or wanting to enter your domain will be\nsupervised and checked by the Guardian. The core functionality of the\nGuardian is a library to verify the Aqua Protocol. Only if the\nverification succeeds additional steps are introduced to make decisions\nhow the data is handled.\n\nThis allows the Guardian to read and understand Aqua verified data. This\nallows for the implementation of a wide set of behavioral rules and\noffers the opportunity to create various 'Smart contract' languages on\ntop of it.\n\nThe Guardian verifies a file, reads its contents and checks it's\npermissions to classify if an action is considered legal or illegal,\npermitted or denied. Basic functionality for a Guardian can be compared\nwith a traditional firewall, or a application firewall but is much more\nsophisticated to manage access on the data-level.\n\n# Terminology:\n\nProving ownership over a domain by signing the domain ID with an\nself-issued identity claim which is also registered in a claim registry\nto ensure nobody claims to have owned that domain before by manipulating\nthe digital clock and faking an earlier owner-ship claim over the\ndomain.\n\n## **Permission Agreements** / Data Usage Agreement / Access Rights\n\nare contracts which represent the terms and conditions under which files\nand/or services are shared with other accounts and/or their digital\ndomains.\n\nBy nature those Permission Agreements will be compiled through pages and\nstored as files. To form an agreement, the other party must be notified\nabout new resources as they become available. For example, when we share\na page with another account. To complete a permission agreement, the\ncounter party has to sign the permission agreement or reject it. If the\npermission agreement is signed, the other party enters a contractual\nrelationship in which they will be liable for any agreement violates\nexecuted from their digital domain.\n\n# Processes\n\n## Domain Handshake\nEstablish trust between two Aqua domains. For this we have Alice and Bob which\nwant to establish trust between their domains. They both have a Guardian in\nplace to protect their data vaults.\n\nSteps:\n1. Alice: Create access contract: I `\u003cAlice_account\u003e` want to connect from my `\u003cdomain_id\u003e` to a `\u003cdomain_id\u003e` controlled by `\u003cBobs_account\u003e` with my `\u003cAlice_domain_id\u003e` via the following channel: DNS/HTTPS via `alice_Guardian.domain.com`.\n2. Alice: sign contract\n3. Alice: SEND contract send the page via 'mail' / 'matrix' whatever to the remote PKC instance.\n4. Bob: veries the contract contract and imports it\n5. Bob: extend contract: I `\u003cbobs_account\u003e` connect my PKC `\u003cbobs_domain_id\u003e` to your PKC `\u003cAlice_domain_id\u003e` via my Guardian_endpoint `\u003cbobs_guardian.domain2.com\u003e`.\n6. Bob: sign extended contract: Bob uses his wallet to sign his extended contract.\n7. Bob: send extended contract TO Alice: Bob sends his Contract to his Guardian.\n8. Bob's Guardian: Verifies and sends the contract to Alice Guardian.\n9. Alice Guardian:\n    Guardian verifies all data\n    Sends OK back to Bob's Guardian\n    Sends Updates contract into Alice PKC\n    Waits for Bob's Guardian to request available pages\n10. Bob's Guardian requests a list of pages: ' What pages do you share with me?'\n11. Alice Guardian: Returns list of accessible resources for Bob\n\n## Example: Sharing a File\n\nTarget: Sharing a file with another account. Using two Aqua data vaults\nwith their two Guardians to manage access to them. We assume the\nGuardians already have executed a handshake to enter a trusted\nrelationship. We also assume, that the file should underlay access\nbasedon account restrictions and domain restrictions.\n\n**Example 1:** Sharing a file **without additional** constrains with\nanother account.\n\nAlice wants to share her page 'My secret research' with Bob. Their\nGuardians have already formed a trusted connection. What Alice needs to\ndo now is to add a sub-page with an immutable link under the 'My secret\nresearch' page and define access. To be able to define access Alice\nneeds to have a claim over the ownership over the domain she is sharing\nfrom.\n\nAlice creates an Access Permission for the whole page or for a single\nrevision by creating a page with the following syntax:\n\n-   `\u003cgenesis_hash\u003e`:access_contract\n -   To give access to the whole page with all it's revisions.\n\n-   `\u003crevision_hash\u003e`:access_contract\n -   To give access to a specific revision.\n\n----\n\n**Content of the page:**\n\nI Alice `\u003calice-account\u003e` give access to Bob `\u003cbob-account\u003e`\n\n-   option 1: to the whole page including it's history `\u003cgenesis_hash\u003e`\n-   option 2: to the following revision `\u003crevision_hash\u003e`'My secret\n    research'\n\n**Additional one-sided conditions:**\n\n-   This access contract expires in 7 days\n\nThis contract will come into place with my `\u003calice-account\u003e` signature.\n\nThe Guardian will react to a specific syntax of pages holding contracts,\nagreements and access rights to adjust his network access rights\naccordingly to it. Alice-Guardian will respond to the question what\nresources are shared by Bobs-Guardian with the answer that there is a\nnew page available according to the access contract which now gives\nBobs-Guardian the ability to query the content of 'My secure research'\nfrom Alice according to the contract. Depending on Bobs-Guardian\nsetting, the Guardian might automatically load the resource and forward\nit into the post-box of Bobs Data Vault.\n\n**Example 2:** Sharing a file **with** constrains forming a **contract**\nto do so.\n\nSame as 1 expect that for the contract to come into place, Bob needs to\nsign the contract from Alice containing additional constrains.\n\n---\n\n**Content of the page:**\n\nI Alice `\u003calice-account\u003e` give access to Bob `\u003cbob-account\u003e`\n\n-   option 1: to the whole page including it's history `\u003cgenesis_hash\u003e`\n-   option 2: to the following revision `\u003crevision_hash\u003e`'My secret\n    research'\n\n**Under the following conditions:**\n\n-   Do not share outside your domain `\u003cBobs-domain_id\u003e`\n-   Do not share with any body else (Bobs domain can't have another\n    account registered to it, if there is an account registered the\n    Guardian of Bob will say that Bobs domain does not fulfill the\n    requirements to establish this contract.\n-   Do not modify it.\n-   Delete it after 7 days.\n\nFor this contract to be valid, signatures of first Alice and then Bob\nneed to be present. This means, after Alice signed the access contract,\nthe contract is a new available resource to Bob to be loaded. Bob can\nnow sign the resource in his domain and return the contract. Leading to\nthe contract send back to Alice domain and being updated there. Bob now\ngets access to 'My secret research' which has been updated as well, to\ncontain via an immutable link the access contract.\n\nPermission Templates, Complex Permissions (Groups and more)\n\nIt is possible to apply complex permissions based on templates, or and\nconnecting multiple access contracts by using\n\n-   instead of this syntax `\u003cgenesis_hash\u003e`:permission_agreement\n-   the following the syntax `\u003cgenesis_hash\u003e`:`\u003cgenesis_hash-2\u003e` in\n    which the `\u003cgenesis_hash-2\u003e` contains a list of sub-pages with access\n    contracts which can be used to apply access via permission-objects\n    which are represented by the `\u003cgenesis_hash-2\u003e` page object.\n\n1.  Alice wants to\n2.  If the user wants to propose changes to the page, he will send an\n    updated PAGE FILE to the OWNER of the PAGE.\n3.  The owner can decide to ACCEPT the changes. Or to include the\n    changes in the HISTORY File, but not COMMIT them. Or to NOT include\n    the update of the PAGE, and disregard it.\n\n---\n\n### Specifications:\n\nThe Guard Daemon checks if there is digital contract present in his\ndomain. Those contracts set permissions for allowing a counter party to\naccess a service or resource (like a file or a page, or a revision).\nIt's also defining the constrains under which permissions access is\ngiven. In this case it requires the digital signature of the receiving\nparty for the agreement to come into place and be valid.\n\nGuardians have administrative access to the services they manage.\nTherefore they can supervise the activities of services and use them as\ntriggers to e.g. provide access according to a set permission without\nadditional user action.\n\n# Guardian Components:\n\nAPIs\n-   System-API to control a service via a service specific library. Each\n    services will have their own control-library and control API to\n    create an abstraction layer which allows for a unified control logic\n    in the Guardian.\n    -   E.g. an account is allowed to access a service\n    -   E.g. a resource is shared with an account\n    -   E.g. a trust relationship between two services is established\n        (based on an agreement between two accounts) to exchange data\n    -   **Implementation Specific PKC:** All interactions for system\n        interaction with MediaWiki / PKC\n        -   Execute Actions: Move, Update, Edit, Delete Pages\n        -   Request send to the Guardian: Verify a specific page or a\n            list of pages\n\n- **Data-API** to retrieve Aqua-Data between a service and the\n    Guardian, or between two Guardians.\n    -   Send data to import API\n    -   Read data via export API\n        -   **Implementation Specific PKC:** Read special Pages used to\n            give access e.g. Data Usage Agreements, Permission\n            Agreements\n\n- **Aqua Verification Library** to be able to verify incoming and\n    outgoing data\n    -   implementation of the 'external-verifier' in e.g. GO, Typescript\n        or Javascript (current)\n-   Account-Registry (Holding the list of trusted keys and the\n    relationship between them)\n    -   This includes defined 'trusted accounts'\n-   Session-Handler/Registry (Acts like Stateful-Firewall on the\n    page-object level to mange imports / exports). The Guardian verifies\n    incoming and outgoing data and constructs sessions based on it.\n-   Guardian Policies: Are sets of rules followed and enforced by the\n    Guardian. This includes set of rules used to protect the domain from\n    unauthorized operations and access. Part of that are page access\n    permissions which are managed by the [Data Usage\n    Agreements](Data_Usage_Agreement \"wikilink\").\n    -   `\u003cdomain_id\u003e\u003caccount\u003e\u003cgenesis_hash\u003e\u003crevision_hash\u003e`:`\u003cdomain_id\u003e\u003caccount\u003e\u003cgenesis_hash\u003e\u003crevision_hash\u003e`\n-   Transport Layer API's / Sub-Modules for connectivity to distributed\n    services\n    -   The Guardian-to-Guardian communication handler (via DNS/HTTPS\n        transport)\n    -   Ethereum Integration, Ethereum Handler (As a witness Network)\n    -   Matrix Integration, Matrix Handler (As a restrictive/\n        permissioned transport layer)\n    -   Schwarm Integration, Swarm Handler (As a publishing network)\n\n# Guardian-Integration-Services\nThe Guardian has a modular design to support integration with many services and\ntransport layers.\n\n## Web (HTTPS / DNS) Integration Goal: Have a\nhandler to connect web-facing Guardians with each other in a safe way. Be able\nto run guardian procedures via two public Facing guardians which use a public\nDNS name and HTTPS to interconnect with each other. Guardian procedures are:\nGuardian handshakes to establish trust or remove trust Request or Send portable\nHash-Chains based on access rights between each other\n\n## Ethereum Node\n\nIntegration Goal: Connect to a self-hosted or remote Ethereum Node. Option 1:\nConfiguration via Alchemy (Providing Keys) via Special:DataAccountingConfig\nOption 2: Implementation of Ethereum Node via ./setup --ethereum-node (provide\ncontainer) Configuration of Connection to RPC Ethereum node via address (if in\nsame network) The Wallet can be directly be connected to a local Ethereum node\nvia RPC to avoid meta-data gathering of large providers, like INFURA which\ncould potential track which IP address has created which Ethereum Transaction\nwith which Metamask-Wallet, leading to a de-pseudonymousation of the user. ###\nEthereum Node Handler Goal: Accelerate lookups of the Guardian via caching\nEvery-time a witness contract is called, the Ethereum Node Handler will start\nto cache the all Ethereum-Witness events of that Witness-Contract and Index\nthem in it's database. This will reduce access times to ms vs potential seconds\nin lookup times, making the Guardian more performant and responsive. ## Matrix\nNode Integration Goal: Connect to a self-hosted or remote synapse-server\n(MATRIX) Node. Configure a remote matrix server or a local one via Guardian.\nImplementation of Matrix-Node deployment via ./pkc setup --matrix-node (provide\ncontainer).\n\n### Matrix Node Handler\n\nContext: We use Ethereum Wallets as Identity-Anchors as they are globally\nunique addresses (which are collision free) broadly adopted with supported\nhardware ledgers as secure hardware elements with an existing fast moving\necosystem for further development. They act as 'web-based' PGP-like utilities\nwhich do not need any Blockchain-Interaction for Signing messages and can be\nused as a valuable off-line capable identity anchor. With this step we separate\nIdentity and Service; even in case of compromising the computer of the user or\nby having a breach of secrets in the Element-Client the Identity would be safe\n(in case a hardware wallet would be used). This also drastically reduces attack\nsurface to phish a users credentials; as there is no Password-Login there is no\nway to steal the password to impersonate the user. All security assumptions of\nthe User-Identity come back to the security of his private key. For the\nKolibri/PKC project this is the foundation for using wallet-addresses as\nIdentities to route traffic with matrix bots between PKC's. The following\nactions are required to use the Ethereum Wallet as a strong Identity Anchor\nwithin Matrix.\n\nThis requires the following functionality:\n* Register the user via an Ethereum wallet address (successfully piloted by inblockio)\n* Detect that it is an Ethereum Wallet-Address; Verify integrity of address with the Ethereum Wallet-Address Checksum (TBD)\n* Make username not changeable (Done via Matrix settings,successfully piloted by inblockio)\n* Wallet login with Web-Wallet Metamask via OIDC (Open ID Connect) (successfully Piloted by inblockio)\n* Verify Ownership of the Wallet by doing an Element-Client side Signature Challenge to the User. Challenge resolved by signing a message with sufficient entropy to not be ever the same (to protect against leakage) with the private key via the Ethereum\nMetamask Webwallet (or a connected Hardware-Wallet)\n* Implement a User-to-User request of proof of Identity Users / Server can challenge other users to proof that they hold the private Wallet-Key by triggering the Signature Challenge to the User; After the challenge is done, the requested party is provided with all information to do a manual verification of the signature (the Message which was\nSigned, the Signature, the used method used for the signature)\n\n### Matrix-BOT\n\nContext: The Matrix-Network communicates with the PKC through the Guardian who\nwill manage all access to the MediaWiki service. The Guardian uses a Matrix-Bot (to\nhandle the communication) and a Matrix-Integration (to be flexible to use a\nprivate synapse or a remote synapse server) to interact with the Matrix Network\nas a permissioned transport layer.\n\nReferenz-Implementation:\nSuitable options for a matrix-integration are 'go-lang' or 'rust'. Guardian\nnext generation Guardian will be written in Rust, so integration of security\nrelevant components would be preferably in Rust and Webassambly. A central\npoint to configure the guardian to connect to matrix and other services needs\nto be provided. The matrix server is connected to the guardian with a service\nbot which is able to open rooms to exchange revisions between PKCâ€™s.\n\nRequired Functionality of the Matrix-Bot:\n* open new room for user (required) - to share resource invite / remove other\nusers to/ from room (required) - to set permissions who can read\n* shared resource close room (required) - after resource share is revoked join a\nroom the user is invited too (by other matrix-bot)\n*'accept invite' check for\nchallenge (provided via text from remote Guardian), leave room if challenge is\nfaulty and block user (required) delete? room / delete history?\nNote: Use matrix only as channel not as storage (optional) preferably the\nhistory of the channel is not kept\n* post content of (mediawiki API query results from the Guardian) into a room\n* (required) read content of room (send it to the Guardian for verification,\n before it's send to the import API) (required)\n\n"])</script><script>self.__next_f.push([1,"24:T47c9,"])</script><script>self.__next_f.push([1,"\n# Context\n\nIt is highly problematic to expose sensitive data, such as personal\nidentifiable data, to the internet. The service who hosts that sensitive\ndata, needs to be compromised only for a short amount of time, to leak\nall the data. Often caused by configuration mistakes or by\nvulnerabilities being present in the used technology stack.\n\nWe can't effort to have leaks on personal-identifiable data in data\nvaults. To raise the bar on making attacks difficult and reducing the\nchance of leakage of information, we introduce the Guardian as a extra\nsecurity layer to protect services like the PKC from attacks.\n\n# Summary\n\nThe Guardian is a software which manages the boundaries of your digital\ndomain. Guardians are used to connect to secure transport networks\n(HTTPS, Matrix Network, Didcomm) and publishing networks (e.g.\nSwarm.eth). The Guardian is used to build trusted connections to other\nGuardians via trusted transport-layers to exchange data with them. As\nthe Guardian connects to other Guardians, it also manages all\nconnections to services in it's domain and access to those services.\n\n# Goal\n\nSecure all services behind the Guardian from attacks and unauthorized\naccess. Keep the data vault and it's data private and safe, while\nenabling the ability to exchange data with other Guardians.\n\n## How\n\nEnforcement is handled on each connection and each data set so that\nservices behind the Guardian are never directly exposed. This makes the\nGuardian the most security sensitive component in the Aqua reference\nimplementation, as we expect the Guardian to handle all incoming and\noutgoing traffic. The Guardian enjoys additional attention and effort to\nbe up to it's task by hardening it and applying security best practices\nto ensure that it is fulfilling it's security promise to keep services\nbehind the Guardian safe.\n\nEvery transaction leaving or wanting to enter your domain will be\nsupervised and checked by the Guardian. The core functionality of the\nGuardian is a library to verify the Aqua Protocol. Only if the\nverification succeeds additional steps are introduced to make decisions\nhow the data is handled.\n\nThis allows the Guardian to read and understand Aqua verified data. This\nallows for the implementation of a wide set of behavioral rules and\noffers the opportunity to create various 'Smart contract' languages on\ntop of it.\n\nThe Guardian verifies a file, reads its contents and checks it's\npermissions to classify if an action is considered legal or illegal,\npermitted or denied. Basic functionality for a Guardian can be compared\nwith a traditional firewall, or a application firewall but is much more\nsophisticated to manage access on the data-level.\n\n# Terminology:\n\nProving ownership over a domain by signing the domain ID with an\nself-issued identity claim which is also registered in a claim registry\nto ensure nobody claims to have owned that domain before by manipulating\nthe digital clock and faking an earlier owner-ship claim over the\ndomain.\n\n## **Permission Agreements** / Data Usage Agreement / Access Rights\n\nare contracts which represent the terms and conditions under which files\nand/or services are shared with other accounts and/or their digital\ndomains.\n\nBy nature those Permission Agreements will be compiled through pages and\nstored as files. To form an agreement, the other party must be notified\nabout new resources as they become available. For example, when we share\na page with another account. To complete a permission agreement, the\ncounter party has to sign the permission agreement or reject it. If the\npermission agreement is signed, the other party enters a contractual\nrelationship in which they will be liable for any agreement violates\nexecuted from their digital domain.\n\n# Processes\n\n## Domain Handshake\nEstablish trust between two Aqua domains. For this we have Alice and Bob which\nwant to establish trust between their domains. They both have a Guardian in\nplace to protect their data vaults.\n\nSteps:\n1. Alice: Create access contract: I `\u003cAlice_account\u003e` want to connect from my `\u003cdomain_id\u003e` to a `\u003cdomain_id\u003e` controlled by `\u003cBobs_account\u003e` with my `\u003cAlice_domain_id\u003e` via the following channel: DNS/HTTPS via `alice_Guardian.domain.com`.\n2. Alice: sign contract\n3. Alice: SEND contract send the page via 'mail' / 'matrix' whatever to the remote PKC instance.\n4. Bob: veries the contract contract and imports it\n5. Bob: extend contract: I `\u003cbobs_account\u003e` connect my PKC `\u003cbobs_domain_id\u003e` to your PKC `\u003cAlice_domain_id\u003e` via my Guardian_endpoint `\u003cbobs_guardian.domain2.com\u003e`.\n6. Bob: sign extended contract: Bob uses his wallet to sign his extended contract.\n7. Bob: send extended contract TO Alice: Bob sends his Contract to his Guardian.\n8. Bob's Guardian: Verifies and sends the contract to Alice Guardian.\n9. Alice Guardian:\n    Guardian verifies all data\n    Sends OK back to Bob's Guardian\n    Sends Updates contract into Alice PKC\n    Waits for Bob's Guardian to request available pages\n10. Bob's Guardian requests a list of pages: ' What pages do you share with me?'\n11. Alice Guardian: Returns list of accessible resources for Bob\n\n## Example: Sharing a File\n\nTarget: Sharing a file with another account. Using two Aqua data vaults\nwith their two Guardians to manage access to them. We assume the\nGuardians already have executed a handshake to enter a trusted\nrelationship. We also assume, that the file should underlay access\nbasedon account restrictions and domain restrictions.\n\n**Example 1:** Sharing a file **without additional** constrains with\nanother account.\n\nAlice wants to share her page 'My secret research' with Bob. Their\nGuardians have already formed a trusted connection. What Alice needs to\ndo now is to add a sub-page with an immutable link under the 'My secret\nresearch' page and define access. To be able to define access Alice\nneeds to have a claim over the ownership over the domain she is sharing\nfrom.\n\nAlice creates an Access Permission for the whole page or for a single\nrevision by creating a page with the following syntax:\n\n-   `\u003cgenesis_hash\u003e`:access_contract\n -   To give access to the whole page with all it's revisions.\n\n-   `\u003crevision_hash\u003e`:access_contract\n -   To give access to a specific revision.\n\n----\n\n**Content of the page:**\n\nI Alice `\u003calice-account\u003e` give access to Bob `\u003cbob-account\u003e`\n\n-   option 1: to the whole page including it's history `\u003cgenesis_hash\u003e`\n-   option 2: to the following revision `\u003crevision_hash\u003e`'My secret\n    research'\n\n**Additional one-sided conditions:**\n\n-   This access contract expires in 7 days\n\nThis contract will come into place with my `\u003calice-account\u003e` signature.\n\nThe Guardian will react to a specific syntax of pages holding contracts,\nagreements and access rights to adjust his network access rights\naccordingly to it. Alice-Guardian will respond to the question what\nresources are shared by Bobs-Guardian with the answer that there is a\nnew page available according to the access contract which now gives\nBobs-Guardian the ability to query the content of 'My secure research'\nfrom Alice according to the contract. Depending on Bobs-Guardian\nsetting, the Guardian might automatically load the resource and forward\nit into the post-box of Bobs Data Vault.\n\n**Example 2:** Sharing a file **with** constrains forming a **contract**\nto do so.\n\nSame as 1 expect that for the contract to come into place, Bob needs to\nsign the contract from Alice containing additional constrains.\n\n---\n\n**Content of the page:**\n\nI Alice `\u003calice-account\u003e` give access to Bob `\u003cbob-account\u003e`\n\n-   option 1: to the whole page including it's history `\u003cgenesis_hash\u003e`\n-   option 2: to the following revision `\u003crevision_hash\u003e`'My secret\n    research'\n\n**Under the following conditions:**\n\n-   Do not share outside your domain `\u003cBobs-domain_id\u003e`\n-   Do not share with any body else (Bobs domain can't have another\n    account registered to it, if there is an account registered the\n    Guardian of Bob will say that Bobs domain does not fulfill the\n    requirements to establish this contract.\n-   Do not modify it.\n-   Delete it after 7 days.\n\nFor this contract to be valid, signatures of first Alice and then Bob\nneed to be present. This means, after Alice signed the access contract,\nthe contract is a new available resource to Bob to be loaded. Bob can\nnow sign the resource in his domain and return the contract. Leading to\nthe contract send back to Alice domain and being updated there. Bob now\ngets access to 'My secret research' which has been updated as well, to\ncontain via an immutable link the access contract.\n\nPermission Templates, Complex Permissions (Groups and more)\n\nIt is possible to apply complex permissions based on templates, or and\nconnecting multiple access contracts by using\n\n-   instead of this syntax `\u003cgenesis_hash\u003e`:permission_agreement\n-   the following the syntax `\u003cgenesis_hash\u003e`:`\u003cgenesis_hash-2\u003e` in\n    which the `\u003cgenesis_hash-2\u003e` contains a list of sub-pages with access\n    contracts which can be used to apply access via permission-objects\n    which are represented by the `\u003cgenesis_hash-2\u003e` page object.\n\n1.  Alice wants to\n2.  If the user wants to propose changes to the page, he will send an\n    updated PAGE FILE to the OWNER of the PAGE.\n3.  The owner can decide to ACCEPT the changes. Or to include the\n    changes in the HISTORY File, but not COMMIT them. Or to NOT include\n    the update of the PAGE, and disregard it.\n\n---\n\n### Specifications:\n\nThe Guard Daemon checks if there is digital contract present in his\ndomain. Those contracts set permissions for allowing a counter party to\naccess a service or resource (like a file or a page, or a revision).\nIt's also defining the constrains under which permissions access is\ngiven. In this case it requires the digital signature of the receiving\nparty for the agreement to come into place and be valid.\n\nGuardians have administrative access to the services they manage.\nTherefore they can supervise the activities of services and use them as\ntriggers to e.g. provide access according to a set permission without\nadditional user action.\n\n# Guardian Components:\n\nAPIs\n-   System-API to control a service via a service specific library. Each\n    services will have their own control-library and control API to\n    create an abstraction layer which allows for a unified control logic\n    in the Guardian.\n    -   E.g. an account is allowed to access a service\n    -   E.g. a resource is shared with an account\n    -   E.g. a trust relationship between two services is established\n        (based on an agreement between two accounts) to exchange data\n    -   **Implementation Specific PKC:** All interactions for system\n        interaction with MediaWiki / PKC\n        -   Execute Actions: Move, Update, Edit, Delete Pages\n        -   Request send to the Guardian: Verify a specific page or a\n            list of pages\n\n- **Data-API** to retrieve Aqua-Data between a service and the\n    Guardian, or between two Guardians.\n    -   Send data to import API\n    -   Read data via export API\n        -   **Implementation Specific PKC:** Read special Pages used to\n            give access e.g. Data Usage Agreements, Permission\n            Agreements\n\n- **Aqua Verification Library** to be able to verify incoming and\n    outgoing data\n    -   implementation of the 'external-verifier' in e.g. GO, Typescript\n        or Javascript (current)\n-   Account-Registry (Holding the list of trusted keys and the\n    relationship between them)\n    -   This includes defined 'trusted accounts'\n-   Session-Handler/Registry (Acts like Stateful-Firewall on the\n    page-object level to mange imports / exports). The Guardian verifies\n    incoming and outgoing data and constructs sessions based on it.\n-   Guardian Policies: Are sets of rules followed and enforced by the\n    Guardian. This includes set of rules used to protect the domain from\n    unauthorized operations and access. Part of that are page access\n    permissions which are managed by the [Data Usage\n    Agreements](Data_Usage_Agreement \"wikilink\").\n    -   `\u003cdomain_id\u003e\u003caccount\u003e\u003cgenesis_hash\u003e\u003crevision_hash\u003e`:`\u003cdomain_id\u003e\u003caccount\u003e\u003cgenesis_hash\u003e\u003crevision_hash\u003e`\n-   Transport Layer API's / Sub-Modules for connectivity to distributed\n    services\n    -   The Guardian-to-Guardian communication handler (via DNS/HTTPS\n        transport)\n    -   Ethereum Integration, Ethereum Handler (As a witness Network)\n    -   Matrix Integration, Matrix Handler (As a restrictive/\n        permissioned transport layer)\n    -   Schwarm Integration, Swarm Handler (As a publishing network)\n\n# Guardian-Integration-Services\nThe Guardian has a modular design to support integration with many services and\ntransport layers.\n\n## Web (HTTPS / DNS) Integration Goal: Have a\nhandler to connect web-facing Guardians with each other in a safe way. Be able\nto run guardian procedures via two public Facing guardians which use a public\nDNS name and HTTPS to interconnect with each other. Guardian procedures are:\nGuardian handshakes to establish trust or remove trust Request or Send portable\nHash-Chains based on access rights between each other\n\n## Ethereum Node\n\nIntegration Goal: Connect to a self-hosted or remote Ethereum Node. Option 1:\nConfiguration via Alchemy (Providing Keys) via Special:DataAccountingConfig\nOption 2: Implementation of Ethereum Node via ./setup --ethereum-node (provide\ncontainer) Configuration of Connection to RPC Ethereum node via address (if in\nsame network) The Wallet can be directly be connected to a local Ethereum node\nvia RPC to avoid meta-data gathering of large providers, like INFURA which\ncould potential track which IP address has created which Ethereum Transaction\nwith which Metamask-Wallet, leading to a de-pseudonymousation of the user. ###\nEthereum Node Handler Goal: Accelerate lookups of the Guardian via caching\nEvery-time a witness contract is called, the Ethereum Node Handler will start\nto cache the all Ethereum-Witness events of that Witness-Contract and Index\nthem in it's database. This will reduce access times to ms vs potential seconds\nin lookup times, making the Guardian more performant and responsive. ## Matrix\nNode Integration Goal: Connect to a self-hosted or remote synapse-server\n(MATRIX) Node. Configure a remote matrix server or a local one via Guardian.\nImplementation of Matrix-Node deployment via ./pkc setup --matrix-node (provide\ncontainer).\n\n### Matrix Node Handler\n\nContext: We use Ethereum Wallets as Identity-Anchors as they are globally\nunique addresses (which are collision free) broadly adopted with supported\nhardware ledgers as secure hardware elements with an existing fast moving\necosystem for further development. They act as 'web-based' PGP-like utilities\nwhich do not need any Blockchain-Interaction for Signing messages and can be\nused as a valuable off-line capable identity anchor. With this step we separate\nIdentity and Service; even in case of compromising the computer of the user or\nby having a breach of secrets in the Element-Client the Identity would be safe\n(in case a hardware wallet would be used). This also drastically reduces attack\nsurface to phish a users credentials; as there is no Password-Login there is no\nway to steal the password to impersonate the user. All security assumptions of\nthe User-Identity come back to the security of his private key. For the\nKolibri/PKC project this is the foundation for using wallet-addresses as\nIdentities to route traffic with matrix bots between PKC's. The following\nactions are required to use the Ethereum Wallet as a strong Identity Anchor\nwithin Matrix.\n\nThis requires the following functionality:\n* Register the user via an Ethereum wallet address (successfully piloted by inblockio)\n* Detect that it is an Ethereum Wallet-Address; Verify integrity of address with the Ethereum Wallet-Address Checksum (TBD)\n* Make username not changeable (Done via Matrix settings,successfully piloted by inblockio)\n* Wallet login with Web-Wallet Metamask via OIDC (Open ID Connect) (successfully Piloted by inblockio)\n* Verify Ownership of the Wallet by doing an Element-Client side Signature Challenge to the User. Challenge resolved by signing a message with sufficient entropy to not be ever the same (to protect against leakage) with the private key via the Ethereum\nMetamask Webwallet (or a connected Hardware-Wallet)\n* Implement a User-to-User request of proof of Identity Users / Server can challenge other users to proof that they hold the private Wallet-Key by triggering the Signature Challenge to the User; After the challenge is done, the requested party is provided with all information to do a manual verification of the signature (the Message which was\nSigned, the Signature, the used method used for the signature)\n\n### Matrix-BOT\n\nContext: The Matrix-Network communicates with the PKC through the Guardian who\nwill manage all access to the MediaWiki service. The Guardian uses a Matrix-Bot (to\nhandle the communication) and a Matrix-Integration (to be flexible to use a\nprivate synapse or a remote synapse server) to interact with the Matrix Network\nas a permissioned transport layer.\n\nReferenz-Implementation:\nSuitable options for a matrix-integration are 'go-lang' or 'rust'. Guardian\nnext generation Guardian will be written in Rust, so integration of security\nrelevant components would be preferably in Rust and Webassambly. A central\npoint to configure the guardian to connect to matrix and other services needs\nto be provided. The matrix server is connected to the guardian with a service\nbot which is able to open rooms to exchange revisions between PKCâ€™s.\n\nRequired Functionality of the Matrix-Bot:\n* open new room for user (required) - to share resource invite / remove other\nusers to/ from room (required) - to set permissions who can read\n* shared resource close room (required) - after resource share is revoked join a\nroom the user is invited too (by other matrix-bot)\n*'accept invite' check for\nchallenge (provided via text from remote Guardian), leave room if challenge is\nfaulty and block user (required) delete? room / delete history?\nNote: Use matrix only as channel not as storage (optional) preferably the\nhistory of the channel is not kept\n* post content of (mediawiki API query results from the Guardian) into a room\n* (required) read content of room (send it to the Guardian for verification,\n before it's send to the import API) (required)\n\n"])</script><script>self.__next_f.push([1,"25:Tb92,"])</script><script>self.__next_f.push([1,"\nTraditional hyperlinks are usually\n[URL's](https://en.wikipedia.org/wiki/URL) based on the\n[DNS](https://en.wikipedia.org/wiki/Domain_Name_System) structure.\n\nThis allows the resource to be routed via DNS and specified via the URL\non the remote server.\n\nThe limitations of URL's is that they are not expressing a specific\nstate of the resource they represent. There is no way to verify if the content\nof the page is consistent with the content of the page who send a URL.\nFor news pages this means that the content of the page could have changed. E.g.\ntwo visitors of the same news page could see two different pages.\n\nWe need a better way to hyperlink so it's sure, that what is linked\nis consistent across domains and users. Therefore we introduce Aqua URI's which are\nused to enable the receive to verify the state of the resource.\n\nGoal\n----\n\nUse Immutable Hyperlinks as Unique Resource Identifiers (URI's) to allow\na consistent referenciation of resources with the ability to verify them with the AQP.\n\nSuccess Criteria\n----------------\n\nA Immutable Hyperlink schema which links to a specific state of a\nresource. Instead of a stateless hyperlink we use verification_hash as a\nURI which acts as the checksum to verify the retrieved revision.\n\nInput\n-----\n\n-   file upload wizard is executed with file-data and description as\n    input\n-   file is stored with in the service triggering a hook leading to the\n    calculation of\n-   verification_hash (calculated with the file as input for\n    content_hash) which is stored in the revision_object (file or\n    database)\n\nOutput\n######\n\nWhen linking the file it's displayed in the following format: \\[SHA3-512\nHash\\|Descriptor Text\\]\n\nBoundary conditions\n-------------------\n\n-   File is too big to be hashed. We support currently up to 50 MB.\n-   File can't be hashed for some reason (error during the process to\n    due an unexpected code execution)\n-   File is empty (has no content)\n\nImplementation\n--------------\n\nWe create Immutable Hyperlinks by moving from URL's to sha3-512 hashes as\nURI's. These URI's are globally unique and therefore collision resistant\nas the namespace is sufficiently large. By using the hashes as links we\nalso refer to the state of the resource. As the hash is the\nverification_hash of the resource it allows us to verify the integrity\nof the resource with it.\n\nWe are referring to files with their SHA3-512 hash in this format\n\\[SHA3-512\\|human_readable_filename\\]. Displayed is the human readable\nfilename white it's stored with the full SHA3-512 hash which allows us\nto be used as Immutable Hyperlinks.\n\nTo allow routing between resources we can add the `\u003cdomain_id\u003e` as a\nprefix to the `\u003cverification_hash\u003e` resulting in the following syntax:\n\n`example: aqua://\u003cdomain_id\u003e/\u003cpage_verification_hash\u003e`\n\nNote: Implementatstion specific to aqua-PKC:\n- The verification_hash is stored in the content-slot 'transclusion hashes' with the internal links which referne the resource.\n"])</script><script>self.__next_f.push([1,"26:Tb92,"])</script><script>self.__next_f.push([1,"\nTraditional hyperlinks are usually\n[URL's](https://en.wikipedia.org/wiki/URL) based on the\n[DNS](https://en.wikipedia.org/wiki/Domain_Name_System) structure.\n\nThis allows the resource to be routed via DNS and specified via the URL\non the remote server.\n\nThe limitations of URL's is that they are not expressing a specific\nstate of the resource they represent. There is no way to verify if the content\nof the page is consistent with the content of the page who send a URL.\nFor news pages this means that the content of the page could have changed. E.g.\ntwo visitors of the same news page could see two different pages.\n\nWe need a better way to hyperlink so it's sure, that what is linked\nis consistent across domains and users. Therefore we introduce Aqua URI's which are\nused to enable the receive to verify the state of the resource.\n\nGoal\n----\n\nUse Immutable Hyperlinks as Unique Resource Identifiers (URI's) to allow\na consistent referenciation of resources with the ability to verify them with the AQP.\n\nSuccess Criteria\n----------------\n\nA Immutable Hyperlink schema which links to a specific state of a\nresource. Instead of a stateless hyperlink we use verification_hash as a\nURI which acts as the checksum to verify the retrieved revision.\n\nInput\n-----\n\n-   file upload wizard is executed with file-data and description as\n    input\n-   file is stored with in the service triggering a hook leading to the\n    calculation of\n-   verification_hash (calculated with the file as input for\n    content_hash) which is stored in the revision_object (file or\n    database)\n\nOutput\n######\n\nWhen linking the file it's displayed in the following format: \\[SHA3-512\nHash\\|Descriptor Text\\]\n\nBoundary conditions\n-------------------\n\n-   File is too big to be hashed. We support currently up to 50 MB.\n-   File can't be hashed for some reason (error during the process to\n    due an unexpected code execution)\n-   File is empty (has no content)\n\nImplementation\n--------------\n\nWe create Immutable Hyperlinks by moving from URL's to sha3-512 hashes as\nURI's. These URI's are globally unique and therefore collision resistant\nas the namespace is sufficiently large. By using the hashes as links we\nalso refer to the state of the resource. As the hash is the\nverification_hash of the resource it allows us to verify the integrity\nof the resource with it.\n\nWe are referring to files with their SHA3-512 hash in this format\n\\[SHA3-512\\|human_readable_filename\\]. Displayed is the human readable\nfilename white it's stored with the full SHA3-512 hash which allows us\nto be used as Immutable Hyperlinks.\n\nTo allow routing between resources we can add the `\u003cdomain_id\u003e` as a\nprefix to the `\u003cverification_hash\u003e` resulting in the following syntax:\n\n`example: aqua://\u003cdomain_id\u003e/\u003cpage_verification_hash\u003e`\n\nNote: Implementatstion specific to aqua-PKC:\n- The verification_hash is stored in the content-slot 'transclusion hashes' with the internal links which referne the resource.\n"])</script><script>self.__next_f.push([1,"27:T7e3,"])</script><script>self.__next_f.push([1,"\nHow safe are the wallets to used? - Current PKC Pilot - relating to the\n'Authentication assurance level's (AAL)' according to the World Bank\nstandards:\n\nSee short presentation [Aqua_PKC_-_Wallet-Security.pdf](https://github.com/inblockio/aqua-docs/files/7885411/Aqua_PKC_-_Wallet-Security.pdf)\n\n### Level 1\n\nThe Metamask wallet alone has a low (level 1 ) level of assurance.\nMetaMask is the most common browser blockchain wallet applications on\nthe web and their developer teams strive for increased security to keep\ncrypto-assets of their 10 Million+ Users safe.\n\n### Level 2\n\nMetamask offers integration with Hardware-Wallets which raises the level\nof assurance by having at least 2 authentication factors (e.g., a token\nwith a password or PIN) to min. level 2. The Hardware-Tokens are build\nto be temper proof.\n\n### Level 3\n\n-   It is possible to integrate the different layers of security at once\n\nwith Metamask (Password Protection) a hardware-token (temper proof) with\nPIN a one-time-password generator based on your mobile-phone\n(recommended is a hardened mobile phone which also uses biometrics for\nhighest security) requires implementation of one-time-password\nauthentication for logins after wallet-authentication see\n[https://github.com/inblockio/micro-PKC/issues/37](https://github.com/inblockio/micro-PKC/issues/37)\n\n-   Other high security options allow multi-signature logins with\n    smart-contracts requiring multiple parties to confirm the operation\n    to be executed. This can be defined based on the smart contract to\n    extreme security as each of the layers mentioned above can be added\n    to each party being involved in the multi-signature event to open a\n    PKC or to SIGN a verified page within the PKC or to witness a data\n    set via a witness network.\n\n-   The mentioned security model is not dependent on the security of\n    Metamask. If Metamask is hacked it will not allow to compromise the\n    model above as the security of the private key of the hardware token\n    is preserved.\n"])</script><script>self.__next_f.push([1,"28:T7e3,"])</script><script>self.__next_f.push([1,"\nHow safe are the wallets to used? - Current PKC Pilot - relating to the\n'Authentication assurance level's (AAL)' according to the World Bank\nstandards:\n\nSee short presentation [Aqua_PKC_-_Wallet-Security.pdf](https://github.com/inblockio/aqua-docs/files/7885411/Aqua_PKC_-_Wallet-Security.pdf)\n\n### Level 1\n\nThe Metamask wallet alone has a low (level 1 ) level of assurance.\nMetaMask is the most common browser blockchain wallet applications on\nthe web and their developer teams strive for increased security to keep\ncrypto-assets of their 10 Million+ Users safe.\n\n### Level 2\n\nMetamask offers integration with Hardware-Wallets which raises the level\nof assurance by having at least 2 authentication factors (e.g., a token\nwith a password or PIN) to min. level 2. The Hardware-Tokens are build\nto be temper proof.\n\n### Level 3\n\n-   It is possible to integrate the different layers of security at once\n\nwith Metamask (Password Protection) a hardware-token (temper proof) with\nPIN a one-time-password generator based on your mobile-phone\n(recommended is a hardened mobile phone which also uses biometrics for\nhighest security) requires implementation of one-time-password\nauthentication for logins after wallet-authentication see\n[https://github.com/inblockio/micro-PKC/issues/37](https://github.com/inblockio/micro-PKC/issues/37)\n\n-   Other high security options allow multi-signature logins with\n    smart-contracts requiring multiple parties to confirm the operation\n    to be executed. This can be defined based on the smart contract to\n    extreme security as each of the layers mentioned above can be added\n    to each party being involved in the multi-signature event to open a\n    PKC or to SIGN a verified page within the PKC or to witness a data\n    set via a witness network.\n\n-   The mentioned security model is not dependent on the security of\n    Metamask. If Metamask is hacked it will not allow to compromise the\n    model above as the security of the private key of the hardware token\n    is preserved.\n"])</script><script>self.__next_f.push([1,"29:T3c92,"])</script><script>self.__next_f.push([1,"\nImplementation specific architecture documentation for the Aqua Data\nVault 'Personal Knowledge Container (PKC)'. In this document you will\nfind reasoning as to why certain components were chosen to build this\nprototype. We have not duplicated any vendor documentation. Please find\nthe linked-list for the documentation of the components we use here:\n\n-   [MetaMask](https://docs.metamask.io/guide/)\n-   [Ethereum](https://ethereum.org/en/developers/docs/)\n-   [Docker](https://docs.docker.com/)\n-   [MediaWiki](https://www.mediawiki.org/wiki/Documentation)\n-   [MediaWiki Extension: Aqua](https://github.com/inblockio/aqua-docs)\n-   [MediaWiki Skin Tweeki](https://tweeki.kollabor.at/)\n-   [Pelith Eauth Server](https://github.com/pelith/node-eauth-server)\n-   [Nodejs](https://nodejs.org/en/docs/)\n-   [GitHub](https://docs.github.com/en)\n-   [Apache](https://httpd.apache.org/docs/)\n-   [Nginx](https://nginx.org/en/docs/)\n-   [Let's Encrypt](https://letsencrypt.org/docs/)\n\n\n\n\nAll software components selected are open source licenses. They each\nhave active developer communities behind them to secure future support\nand further development.\n\n## Wallets / Accounts\n\nWhy do we use Ethereum Wallets / Accounts?\n\nAn identity anchor needs to be a public, private key. This allows a\npublic component which we can share (public key) and a private component\nwhich proves ownership over that public-key. Public keys are used in\nEthereum as accounts to receive and send transactions. Therefore the\nEthereum ecosystem has developed standards. These have evolved to a\nlarger eco-system involving wallet-providers which have built software\nand hardware wallets to securely manage those keys. We leverage one of\nthe most vibrant developer communities and utilize these wallets. In our\ncase they are used mainly for offline-activities (Login, Signing) which\ndo not require connectivity to the Ethereum blockchain.\n\n## Web-Application (Chrome-Extension MetaMask)\n\nWas selected as it is one of the most advanced, widely used,\nfeature-rich web-wallets. Most importantly it's a browser-plugin which\nallows us to interact with browser applications. MetaMask also has the\nability to connect to a hardware wallet allowing for increased security\nand levels of assurance.\n\n-   Large User-Base 10 Million +\n\n \n\n-   Hardware Wallet Support (E.g. Ledger)\n    -   Large User-base 5 Million +\n\n \n\n-   All related source code is open source, lot's of money behind it\n    (future proof)\n-   SSI (Self-sovereign identity): Compatible with the DID schema\n    did:ethr:`\u003cwallet_address\u003e`\n-   Fulfills SSI principles:\n    -   Controlled by user, allows for creation of new accounts / wallet\n        addresses\n    -   User can create new identity anchor independent of third party\n    -   Can be moved between devices by users recovery key or even to a\n        hardware wallet (not recommended but possible:\n        https://kryptonitelex.medium.com/how-to-transfer-your-metamask-to-a-ledger-hardware-wallet-bcece7d5567b)\n\n## Witness Network\n\nWe are using the Ethereum Network as an optional Witness Network for\ncryptographic time-stamping.\n\n### Why public Blockchain?\n\nThe witness event serves the purpose of being able to prove the\nexistence of a document without the ability to deny it. This requires\ncensorship resistance and global coverage. The security of the network,\nit's distribution, and the high economical price to attack the network,\nare all good reasons why we want to use a public blockchain to publish\nhighly obfuscated hashes (fingerprints). This proves the state of the\ndata in a Data Vault (PKC).\n\nThe MetaMask wallet is able to publish the witness event verification\nhash to the public Ethereum blockchain. This completes our third\nimportant layer of integrity verification, which is to prove\ncryptographic time and existence of a document by writing it's\nfingerprint onto the ledger. This is not done directly, but through a\nprocess which highly obfuscates the hash. This ensures that that there\nis no plausible attack (even if the attacker owns a powerful quantum\ncomputer) to match the fingerprint with any personal data.\n\n## Data Vault\n\nThe Data Vault named 'Personal Knowledge Container' is creatd by using a\ntool for containerization called 'Docker'. This allows us to package our\napplication so it can be deployed to different operating system\nenvironments. Docker provides the abstraction / virtualization layer.\n\nInside Docker we containerized multiple services:\n\n## MediaWiki for data governance\n\nMediaWiki is a data governance tool which has a legacy as a\ncollaboration tool. It powers Wikipedia, the largest encyclopedia in the\nworld. We step into this experience, and the benefits of a feature rich,\nbattle-proven application. It's a powerful tool to both manage and\npresent data.\n\nAs MediaWiki has an active and established developer community, it is\npossible to tap into existing professional service companies. Supporting\ndevelopment and any required changes within the application.\n\nMediaWiki has been modified to use workflows for data processing. This\nwill allow for implementing and testing workflows and business logic\nbetween Personal-Knowledge-Containers.\n\nWe use all the benefits of MediaWiki to manage and present data in the\nbrowser, while we work around one of its main limitations: Security.\nMediaWiki was never developed to have advanced security and permission\nstructures, as it was built for Wikipedia - a fully public website. This\nhas several implications for us.\n\nSecurity Practices:\n\n-   We assume that we can't defend against insider attacks on the same\n    MediaWiki instance, therefore every user has their own instance\n-   If there is a need for a collaboration space, it is possible to\n    spawn containers for multiple accounts which trust each other to\n    work together on shared data\n\n \n\n-   If you use a hosted PKC instance, assume the provider has access to\n    your data as we don't use homomorphic encryption nor do we have\n    encryption implemented\n-   We are using typed and tested PHP (for MediaWiki Extension Data\n    Accounting) to improve test coverage to increase stability and\n    security of our application\n\n \n\n-   To securely exchange data between PKC's, we implement a separate\n    security software called Guardian. The Guardian protects the PKC and\n    manages all access according to the accounts owners set permissions.\n    The Guardian is under active development. It will receive the\n    highest scrutiny and attention to ensure a minimal attack surface\n    while allowing trust between Guardians so data can be exchanged.\n\n \n\n-   The Apache WebServer present in the MediaWiki container has a\n    technological dependency and needs regular updates as Apache was\n    effected by critical security issues like\n    [CVE-2021-44228](https://nvd.nist.gov/vuln/detail/CVE-2021-44228)\n-   Therefore we do not expose the Apache web-server to the internet by\n    default and do not recommend this to ensure that there is no\n    unnecessary attack surface. If an organization decides to expose the\n    web-surface of a PKC to the internet, they should expect this\n    instance to be compromised and leak all it's stored data. Therefore\n    we re-emphasize: If PKC / MediaWiki is exposed to the web, there\n    can't be any guarantee that data can be kept private. Therefore\n    assume your data can be leaked on a web-facing MediaWiki instance.\n    Organizations hosting PKC's for collaboration should do so with\n    restricted firewall permissions, ensuring that the web-interface is\n    only reachable for the employees authorized to see the content.\n\n## MediaWiki Extension: Aqua\n\nThe existing ecosystem and reference implementations around MediaWiki\nallowed us to quickly prototype our reference implementation for Aqua.\nThe implementation itself allowed us to further develop the protocol.\nThe downsides are currently old PHP code and MediaWiki's legacy. In\nreturn we benefit from a well documented project.\n\nLooking forward we want to see other client-implementations in different\nlanguages independent of MediaWiki to show the potential of the Aqua\nProtocol. We hope to re-use part of the PHP code base to apply it to\nother applications, like Word-Press.\n\n## MediaWiki Skin Choice\n\nUsing Tweeki as a Bootstrap 4 compatible Skin for MediaWiki, we were\nable to establish contact with the chief maintainer of the extension,\nand were able to collaborate to solve various issues to improve the\nskin. We are coordinating with other parties to see how we can improve\nsupport for the Skin. In the future we are hoping to increase the\nmaintainer base. Prospectively we want to use Tweeki as an abstraction\nlayer from MediaWiki classic to Bootstrap 4, and respectively Bootstrap\n5+.\n\n## Authentication\n\n-   For Authentication with Web-Wallets, we use\n    [https://github.com/pelith/node-eauth-server](https://github.com/pelith/node-eauth-server) which provides us with\n    an open source solution for a signature-response challenge. We then\n    integrate with OAUTH2 and OIDC using existing authentication\n    standards to achieve the login.\n-   The Pelith server provides us with the Signature-Challenge and is\n    forwarding the access token via OAUTH2 to MediaWiki. Here we check\n    if the user exists. If this is the case, access is granted.\n\n## WebServer-Proxy / HTTPs\n\n-   We are using NGINX Web-Server as the proxy server. NGINX is a modern\n    and the most popular (#1 since 2021 by share[^1]) web-server on the\n    web.\n-   We are using Let's Encrypt to provide secure connections via HTTPS\n    if a PKC is deployed to the web. Let's encrypt serves over 260\n    million websites according to the vendor website.[^2] provides free\n    TLS Certificates for secure HTTPS connections.\n-   The NGINX Web-Proxy allows us to ensure that we can add additional\n    services to the PKC and redirect the services according to our\n    needs.\n\n## Software-Development\n\n-   We use [https://github.com](https://github.com) for software development. As we started\n    with very little budget, we gratefully utilised free resources to\n    develop our open source software. This allowed us to focus on being\n    productive.\n    -   Github is owned by Microsoft and is therefore subject to US\n        policies and Microsofts interests.\n    -   This itself requires us to move away to be independent or at\n        least host a mirror instance outside of Github. The deletion of\n        a repository or losing access could harm our development process\n        significantly.\n-   We use GPL-V3 license on the majority of our repositories.\n    -   We maintain the rights on branding\n    -   We maintain more restrictive rights on deployment scripts\n        (service provider technologies)\n\n## Browser Choice\n\nWe are using the Chrome-Engine as our Web-Browser of choice. It's the\nmost dominant web-browser on the Web, and has become the quasi standard\nwith many different forks creating an ecosystem around it.\nMicrosoft-Edge is actually Chrome. There are non-google chrome forks\nwhich deserve attention, funding and support (like\n[https://github.com/Eloston/ungoogled-chromium](https://github.com/Eloston/ungoogled-chromium)). This will provide us\nwith a modern and state of the art browser architecture to work with.\n\nAs Chrome is the most secure and modern base to build on, we support\n-only- chrome. Therefore we use a chrome extension to verify the content\nof an Aqua file. This extension is available for download in the Google\nChrome App Store, or can be built from scratch following the\ninstructions in our repository.[^3]\n\nThis allows us to provide ease of setup, as users can easily deploy the\nchrome extension without further effort by adding it from the google app\nstore.\n\nWe are using NPM / node.js for fast prototyping. This comes with severe\nsecurity implications as the npm ecosystem has been prone to various\nsupply-chain attacks over recent months [^4] .\n\n## Technology choices on cryptography\n\nAll cryptography used in our development is based on international NIST\nstandards and follows the international understanding for internet\nsecurity. This is consistent with the perspective of the BSI in Germany,\nbut for some specific details there are no insights provided by the\nministry.\n\n### Hashing Algorithms (SHA3-512)\n\nPKC uses standard Crypto (SHA3-512) winner of the National Institute of\nStandards and Technology see\n[https://nvlpubs.nist.gov/nistpubs/FIPS/NIST.FIPS.202.pdf](https://nvlpubs.nist.gov/nistpubs/FIPS/NIST.FIPS.202.pdf) . We do not\nuse custom encryption as this comes at the cost of unnecessary risks.\n\nThis is an accepted secure and recommended standard according to [BSI -\nTechnische Richtlinie â€“ Kryptographische Algorithmen und SchlussellÃ¤ngen\nSeite\n42](https://www.bsi.bund.de/SharedDocs/Downloads/DE/BSI/Publikationen/TechnischeRichtlinien/TR02102/BSI-TR-02102.pdf?__blob=publicationFile).\n\n### Merkle Tree[^5]\n\n-   We use merkle trees to be able to witness the state of all pages /\n    files in a single hash. Used to generate a unique fingerprint of a\n    domain (a collection of verified data hash chain's within one\n    domain).\n-   There is a lot of future potential in ongoing research to improve\n    privacy and utility of merkle trees in the [Aqua\n    Protocol](https://pkc.inblock.io/index.php/Aqua_Protocol)\n    -   See related technologies and research like TAPROOT:\n        [https://github.com/bitcoin/bips/blob/master/bip-0341.mediawiki](https://github.com/bitcoin/bips/blob/master/bip-0341.mediawiki)\n\n### Public-Private-Key Signatures (secp256k1)\n\nUsed in combination with Ethereum Accounts. It is used for signing and\nauthentication challenges.\n\n-   in ether.js\n    [cryptography/secp256k1](https://github.com/ethereumjs/ethereumjs-monorepo/blob/ade4233ddffffdd146b386de701762196a8c941c/packages/util/src/signature.ts#L23-L45)\n    see\n    [implementation](https://github.com/ethereum/js-ethereum-cryptography/blob/b1f35053df3f0cfa132fc45d59b688ca0d62994a/src/secp256k1-compat.ts#L99-L123)\n-   related documents of the 'Standards for Efficient Cryptography\n    Group' [https://secg.org](https://secg.org) specific doc secp256k1 [Both variants\n    of the same standardization process of the Standards for Efficient\n    Cryptography Group 2015, See differences\n    P9](https://www.secg.org/sec2-v2.pdf)\n\n\n\n-   Supported by BSI secp256r1 but secp256k1 is not\n    mentioned.https://www.bsi.bund.de/SharedDocs/Downloads/DE/BSI/Publikationen/TechnischeRichtlinien/TR03116/BSI-TR-03116-4.pdf?__blob=publicationFile\u0026v=7\n    Request for clarification was send via E-Mail on the 3rd of November\n    2021 by Tim Bansemer. Answer of the BSI: Currently the BSI has no\n    assessment or recommendation for secp256k1.\n\n\n\n-   For authentication with Metamask Ethereum wallets we currently use\n    [https://github.com/pelith/node-eauth-server](https://github.com/pelith/node-eauth-server). We are signing a\n    unique input value with ethereum.js using the personal sign method.\n    Once the challenge is completed successfully we receive an OAUTH\n    token from the Eauth identity provider of the pelith Eauth server.\n\n1. [NGINX: Most Popular Web Server](https://linuxiac.com/nginx-most-popular-web-server/)\n\n2. [Let's Encrypt](https://letsencrypt.org/)\n\n3. [Aqua Verify Page Chrome Extension - GitHub](https://github.com/inblockio/aqua-verifypage-chrome-extension)\n\n4. [NPM Supply Chain Attack](https://duckduckgo.com/?q=npm+supply+chain+attack\u0026ia=software)\n\n5. [Merkle Tree - Wikipedia](https://en.wikipedia.org/wiki/Merkle_tree)\n\n"])</script><script>self.__next_f.push([1,"2a:T3c92,"])</script><script>self.__next_f.push([1,"\nImplementation specific architecture documentation for the Aqua Data\nVault 'Personal Knowledge Container (PKC)'. In this document you will\nfind reasoning as to why certain components were chosen to build this\nprototype. We have not duplicated any vendor documentation. Please find\nthe linked-list for the documentation of the components we use here:\n\n-   [MetaMask](https://docs.metamask.io/guide/)\n-   [Ethereum](https://ethereum.org/en/developers/docs/)\n-   [Docker](https://docs.docker.com/)\n-   [MediaWiki](https://www.mediawiki.org/wiki/Documentation)\n-   [MediaWiki Extension: Aqua](https://github.com/inblockio/aqua-docs)\n-   [MediaWiki Skin Tweeki](https://tweeki.kollabor.at/)\n-   [Pelith Eauth Server](https://github.com/pelith/node-eauth-server)\n-   [Nodejs](https://nodejs.org/en/docs/)\n-   [GitHub](https://docs.github.com/en)\n-   [Apache](https://httpd.apache.org/docs/)\n-   [Nginx](https://nginx.org/en/docs/)\n-   [Let's Encrypt](https://letsencrypt.org/docs/)\n\n\n\n\nAll software components selected are open source licenses. They each\nhave active developer communities behind them to secure future support\nand further development.\n\n## Wallets / Accounts\n\nWhy do we use Ethereum Wallets / Accounts?\n\nAn identity anchor needs to be a public, private key. This allows a\npublic component which we can share (public key) and a private component\nwhich proves ownership over that public-key. Public keys are used in\nEthereum as accounts to receive and send transactions. Therefore the\nEthereum ecosystem has developed standards. These have evolved to a\nlarger eco-system involving wallet-providers which have built software\nand hardware wallets to securely manage those keys. We leverage one of\nthe most vibrant developer communities and utilize these wallets. In our\ncase they are used mainly for offline-activities (Login, Signing) which\ndo not require connectivity to the Ethereum blockchain.\n\n## Web-Application (Chrome-Extension MetaMask)\n\nWas selected as it is one of the most advanced, widely used,\nfeature-rich web-wallets. Most importantly it's a browser-plugin which\nallows us to interact with browser applications. MetaMask also has the\nability to connect to a hardware wallet allowing for increased security\nand levels of assurance.\n\n-   Large User-Base 10 Million +\n\n \n\n-   Hardware Wallet Support (E.g. Ledger)\n    -   Large User-base 5 Million +\n\n \n\n-   All related source code is open source, lot's of money behind it\n    (future proof)\n-   SSI (Self-sovereign identity): Compatible with the DID schema\n    did:ethr:`\u003cwallet_address\u003e`\n-   Fulfills SSI principles:\n    -   Controlled by user, allows for creation of new accounts / wallet\n        addresses\n    -   User can create new identity anchor independent of third party\n    -   Can be moved between devices by users recovery key or even to a\n        hardware wallet (not recommended but possible:\n        https://kryptonitelex.medium.com/how-to-transfer-your-metamask-to-a-ledger-hardware-wallet-bcece7d5567b)\n\n## Witness Network\n\nWe are using the Ethereum Network as an optional Witness Network for\ncryptographic time-stamping.\n\n### Why public Blockchain?\n\nThe witness event serves the purpose of being able to prove the\nexistence of a document without the ability to deny it. This requires\ncensorship resistance and global coverage. The security of the network,\nit's distribution, and the high economical price to attack the network,\nare all good reasons why we want to use a public blockchain to publish\nhighly obfuscated hashes (fingerprints). This proves the state of the\ndata in a Data Vault (PKC).\n\nThe MetaMask wallet is able to publish the witness event verification\nhash to the public Ethereum blockchain. This completes our third\nimportant layer of integrity verification, which is to prove\ncryptographic time and existence of a document by writing it's\nfingerprint onto the ledger. This is not done directly, but through a\nprocess which highly obfuscates the hash. This ensures that that there\nis no plausible attack (even if the attacker owns a powerful quantum\ncomputer) to match the fingerprint with any personal data.\n\n## Data Vault\n\nThe Data Vault named 'Personal Knowledge Container' is creatd by using a\ntool for containerization called 'Docker'. This allows us to package our\napplication so it can be deployed to different operating system\nenvironments. Docker provides the abstraction / virtualization layer.\n\nInside Docker we containerized multiple services:\n\n## MediaWiki for data governance\n\nMediaWiki is a data governance tool which has a legacy as a\ncollaboration tool. It powers Wikipedia, the largest encyclopedia in the\nworld. We step into this experience, and the benefits of a feature rich,\nbattle-proven application. It's a powerful tool to both manage and\npresent data.\n\nAs MediaWiki has an active and established developer community, it is\npossible to tap into existing professional service companies. Supporting\ndevelopment and any required changes within the application.\n\nMediaWiki has been modified to use workflows for data processing. This\nwill allow for implementing and testing workflows and business logic\nbetween Personal-Knowledge-Containers.\n\nWe use all the benefits of MediaWiki to manage and present data in the\nbrowser, while we work around one of its main limitations: Security.\nMediaWiki was never developed to have advanced security and permission\nstructures, as it was built for Wikipedia - a fully public website. This\nhas several implications for us.\n\nSecurity Practices:\n\n-   We assume that we can't defend against insider attacks on the same\n    MediaWiki instance, therefore every user has their own instance\n-   If there is a need for a collaboration space, it is possible to\n    spawn containers for multiple accounts which trust each other to\n    work together on shared data\n\n \n\n-   If you use a hosted PKC instance, assume the provider has access to\n    your data as we don't use homomorphic encryption nor do we have\n    encryption implemented\n-   We are using typed and tested PHP (for MediaWiki Extension Data\n    Accounting) to improve test coverage to increase stability and\n    security of our application\n\n \n\n-   To securely exchange data between PKC's, we implement a separate\n    security software called Guardian. The Guardian protects the PKC and\n    manages all access according to the accounts owners set permissions.\n    The Guardian is under active development. It will receive the\n    highest scrutiny and attention to ensure a minimal attack surface\n    while allowing trust between Guardians so data can be exchanged.\n\n \n\n-   The Apache WebServer present in the MediaWiki container has a\n    technological dependency and needs regular updates as Apache was\n    effected by critical security issues like\n    [CVE-2021-44228](https://nvd.nist.gov/vuln/detail/CVE-2021-44228)\n-   Therefore we do not expose the Apache web-server to the internet by\n    default and do not recommend this to ensure that there is no\n    unnecessary attack surface. If an organization decides to expose the\n    web-surface of a PKC to the internet, they should expect this\n    instance to be compromised and leak all it's stored data. Therefore\n    we re-emphasize: If PKC / MediaWiki is exposed to the web, there\n    can't be any guarantee that data can be kept private. Therefore\n    assume your data can be leaked on a web-facing MediaWiki instance.\n    Organizations hosting PKC's for collaboration should do so with\n    restricted firewall permissions, ensuring that the web-interface is\n    only reachable for the employees authorized to see the content.\n\n## MediaWiki Extension: Aqua\n\nThe existing ecosystem and reference implementations around MediaWiki\nallowed us to quickly prototype our reference implementation for Aqua.\nThe implementation itself allowed us to further develop the protocol.\nThe downsides are currently old PHP code and MediaWiki's legacy. In\nreturn we benefit from a well documented project.\n\nLooking forward we want to see other client-implementations in different\nlanguages independent of MediaWiki to show the potential of the Aqua\nProtocol. We hope to re-use part of the PHP code base to apply it to\nother applications, like Word-Press.\n\n## MediaWiki Skin Choice\n\nUsing Tweeki as a Bootstrap 4 compatible Skin for MediaWiki, we were\nable to establish contact with the chief maintainer of the extension,\nand were able to collaborate to solve various issues to improve the\nskin. We are coordinating with other parties to see how we can improve\nsupport for the Skin. In the future we are hoping to increase the\nmaintainer base. Prospectively we want to use Tweeki as an abstraction\nlayer from MediaWiki classic to Bootstrap 4, and respectively Bootstrap\n5+.\n\n## Authentication\n\n-   For Authentication with Web-Wallets, we use\n    [https://github.com/pelith/node-eauth-server](https://github.com/pelith/node-eauth-server) which provides us with\n    an open source solution for a signature-response challenge. We then\n    integrate with OAUTH2 and OIDC using existing authentication\n    standards to achieve the login.\n-   The Pelith server provides us with the Signature-Challenge and is\n    forwarding the access token via OAUTH2 to MediaWiki. Here we check\n    if the user exists. If this is the case, access is granted.\n\n## WebServer-Proxy / HTTPs\n\n-   We are using NGINX Web-Server as the proxy server. NGINX is a modern\n    and the most popular (#1 since 2021 by share[^1]) web-server on the\n    web.\n-   We are using Let's Encrypt to provide secure connections via HTTPS\n    if a PKC is deployed to the web. Let's encrypt serves over 260\n    million websites according to the vendor website.[^2] provides free\n    TLS Certificates for secure HTTPS connections.\n-   The NGINX Web-Proxy allows us to ensure that we can add additional\n    services to the PKC and redirect the services according to our\n    needs.\n\n## Software-Development\n\n-   We use [https://github.com](https://github.com) for software development. As we started\n    with very little budget, we gratefully utilised free resources to\n    develop our open source software. This allowed us to focus on being\n    productive.\n    -   Github is owned by Microsoft and is therefore subject to US\n        policies and Microsofts interests.\n    -   This itself requires us to move away to be independent or at\n        least host a mirror instance outside of Github. The deletion of\n        a repository or losing access could harm our development process\n        significantly.\n-   We use GPL-V3 license on the majority of our repositories.\n    -   We maintain the rights on branding\n    -   We maintain more restrictive rights on deployment scripts\n        (service provider technologies)\n\n## Browser Choice\n\nWe are using the Chrome-Engine as our Web-Browser of choice. It's the\nmost dominant web-browser on the Web, and has become the quasi standard\nwith many different forks creating an ecosystem around it.\nMicrosoft-Edge is actually Chrome. There are non-google chrome forks\nwhich deserve attention, funding and support (like\n[https://github.com/Eloston/ungoogled-chromium](https://github.com/Eloston/ungoogled-chromium)). This will provide us\nwith a modern and state of the art browser architecture to work with.\n\nAs Chrome is the most secure and modern base to build on, we support\n-only- chrome. Therefore we use a chrome extension to verify the content\nof an Aqua file. This extension is available for download in the Google\nChrome App Store, or can be built from scratch following the\ninstructions in our repository.[^3]\n\nThis allows us to provide ease of setup, as users can easily deploy the\nchrome extension without further effort by adding it from the google app\nstore.\n\nWe are using NPM / node.js for fast prototyping. This comes with severe\nsecurity implications as the npm ecosystem has been prone to various\nsupply-chain attacks over recent months [^4] .\n\n## Technology choices on cryptography\n\nAll cryptography used in our development is based on international NIST\nstandards and follows the international understanding for internet\nsecurity. This is consistent with the perspective of the BSI in Germany,\nbut for some specific details there are no insights provided by the\nministry.\n\n### Hashing Algorithms (SHA3-512)\n\nPKC uses standard Crypto (SHA3-512) winner of the National Institute of\nStandards and Technology see\n[https://nvlpubs.nist.gov/nistpubs/FIPS/NIST.FIPS.202.pdf](https://nvlpubs.nist.gov/nistpubs/FIPS/NIST.FIPS.202.pdf) . We do not\nuse custom encryption as this comes at the cost of unnecessary risks.\n\nThis is an accepted secure and recommended standard according to [BSI -\nTechnische Richtlinie â€“ Kryptographische Algorithmen und SchlussellÃ¤ngen\nSeite\n42](https://www.bsi.bund.de/SharedDocs/Downloads/DE/BSI/Publikationen/TechnischeRichtlinien/TR02102/BSI-TR-02102.pdf?__blob=publicationFile).\n\n### Merkle Tree[^5]\n\n-   We use merkle trees to be able to witness the state of all pages /\n    files in a single hash. Used to generate a unique fingerprint of a\n    domain (a collection of verified data hash chain's within one\n    domain).\n-   There is a lot of future potential in ongoing research to improve\n    privacy and utility of merkle trees in the [Aqua\n    Protocol](https://pkc.inblock.io/index.php/Aqua_Protocol)\n    -   See related technologies and research like TAPROOT:\n        [https://github.com/bitcoin/bips/blob/master/bip-0341.mediawiki](https://github.com/bitcoin/bips/blob/master/bip-0341.mediawiki)\n\n### Public-Private-Key Signatures (secp256k1)\n\nUsed in combination with Ethereum Accounts. It is used for signing and\nauthentication challenges.\n\n-   in ether.js\n    [cryptography/secp256k1](https://github.com/ethereumjs/ethereumjs-monorepo/blob/ade4233ddffffdd146b386de701762196a8c941c/packages/util/src/signature.ts#L23-L45)\n    see\n    [implementation](https://github.com/ethereum/js-ethereum-cryptography/blob/b1f35053df3f0cfa132fc45d59b688ca0d62994a/src/secp256k1-compat.ts#L99-L123)\n-   related documents of the 'Standards for Efficient Cryptography\n    Group' [https://secg.org](https://secg.org) specific doc secp256k1 [Both variants\n    of the same standardization process of the Standards for Efficient\n    Cryptography Group 2015, See differences\n    P9](https://www.secg.org/sec2-v2.pdf)\n\n\n\n-   Supported by BSI secp256r1 but secp256k1 is not\n    mentioned.https://www.bsi.bund.de/SharedDocs/Downloads/DE/BSI/Publikationen/TechnischeRichtlinien/TR03116/BSI-TR-03116-4.pdf?__blob=publicationFile\u0026v=7\n    Request for clarification was send via E-Mail on the 3rd of November\n    2021 by Tim Bansemer. Answer of the BSI: Currently the BSI has no\n    assessment or recommendation for secp256k1.\n\n\n\n-   For authentication with Metamask Ethereum wallets we currently use\n    [https://github.com/pelith/node-eauth-server](https://github.com/pelith/node-eauth-server). We are signing a\n    unique input value with ethereum.js using the personal sign method.\n    Once the challenge is completed successfully we receive an OAUTH\n    token from the Eauth identity provider of the pelith Eauth server.\n\n1. [NGINX: Most Popular Web Server](https://linuxiac.com/nginx-most-popular-web-server/)\n\n2. [Let's Encrypt](https://letsencrypt.org/)\n\n3. [Aqua Verify Page Chrome Extension - GitHub](https://github.com/inblockio/aqua-verifypage-chrome-extension)\n\n4. [NPM Supply Chain Attack](https://duckduckgo.com/?q=npm+supply+chain+attack\u0026ia=software)\n\n5. [Merkle Tree - Wikipedia](https://en.wikipedia.org/wiki/Merkle_tree)\n\n"])</script><script>self.__next_f.push([1,"2b:T4e17,"])</script><script>self.__next_f.push([1,"\nThe Aqua Identity Protocol (AIP) is an experimental application protocol\nunder development for Self Sovereign Identity's (SSIs) on top of the\nAqua Protocol. This is an active field of research which is related to\nthe work of the Decentralized-Identity-Foundation (DIF)[^1] and the\nWorld-Wide-Web-Consortium[^2]. As this is under active development,\nanything you see is experimental and subject to change. The goal is to\nprovide a Self-Sovereign-Digital Identity Protocol to protect individual\nrights, freedom and the opportunity for the individual to participate in\nthe digital economy.\n\nWe are building on the advancements and insights for rebooting the\nweb-of-trust initiative[^3] and the definition of a\nSelf-Sovereign-Identity provided by Christopher Allen in shortened form here.[^4]\n\n### Self-Sovereign-Identity-Principles\n\n1.  **Existence:** users must have an independent existence. \n2.  **Control:** users must control their identities.\n3.  **Access:** users must have access to their own data.\n4.  **Transparency:** Systems and algorithms must be transparent.\n5.  **Persistence:** Identities must be long-lived.\n6.  **Portability:** Information and services about identity must be transportable.\n7.  **Interoperability:** Identities should be as widely usable as possible.\n8.  **Consent:** users must agree to the use of their identity.\n9.  **Minimization:** Disclosure of claims must be minimized.\n10. **Protection:** The rights of users must be protected.\n\n\nThose 10 stated principles are implemented within the Aqua Protocol and\nit's existing reference implementation in various degrees. They are also\nrepresented in the [Design Principles](design-principles.md).\n\n\n# Architecture\n\nFor the Aqua Identity Protocol to be implemented in accordance with the\nabove statements, SSI-Principles and critical component choices from\noutside the protocol need to be made, and required tools need to be\nprovided. **Data Vault**'s will provide a space which is fully account\ncontrolled. Other architectural decisions enabling SSI can be found in\nthe reference implementation PKC Architecture Documentation.\n\n### Usage of **Data Vaults** to protect identity claims\n\nPages with the namespace `\u003cAccount\u003e`: must be 'read and write able' by\n`\u003cAccount\u003e` only by default. This is to protect the personal-identifiable\ndata of the user. This data should be stored in a place where only the\naccount owner has access to. This can be achieved by having the data\nstored locally on a machine the account owner has, or by using\ncryptography which requires the account's owner explicit interaction to\ndecrypt it. The content should not be decrypted on the server, but\nwithin the web-browser or client-application to ensure that a\npotentially compromised service-provider can't leak the sensitive\ninformation.\n\n-   Identity claims are **encrypted by default** and can only be\n    decrypted by the account owner or other accounts explicitly given\n    permission to do so.\n-   Identity claims **must** be given access by the account owner to\n    e.g. let somebody else sign them.\n\nNote: There should be an extra effort by any **Data Vault**\nimplementation to protect identity claims. It is recommended to strongly\nregulate and audit the emerging solutions to ensure a high level of\nprotection for citizens.\n\n### Self Issued Identity Claims\n\nThese are used to make statements about an account to form an identity. Those\nclaims can be partially revealed on demand to other parties. Those\nclaims can also be protected by advancements in privacy technologies\nlike Zero-Knowledge-Proofs and ongoing advancements in key management.\n\nIdentity claims are sets of [Verified\nData](https://pkc.inblock.io/index.php/Verified_Data) which follow a\nstructured data convention to claim or attest attributes to an account.\nFor example, an attribute could be the year of birth of an account\nowner, or the legal name of an account owner. Claims should always be\natomic to allow the account owner to disclose them selectivity.\nDifferent claims can be combined to represent a citizen ID or a\ndrivers-license. Other claims can be educational certificates, like\nschool certificates.\n\nIdentity claims in the [Aqua Identity\nProtocol](https://pkc.inblock.io/index.php/Aqua_Identity_Protocol) are\n**always self issues**. This means that the first signature on the claim\nneeds to be from the private key which belongs to the account, i.e. the claim\nis issued for. This proves account ownership. This means:\n\n-   All claims can only be issued from the account which they make a\n    claim about. A claim belongs to it's origin account and can only be\n    managed from it's address.\n-   A claim can 'accumulate trust' by being signed by other accounts who\n    support this claim.\n-   Self-issuance protects accounts against spam, and the issuance of\n    fraudulent claims to an account without the knowledge of the account\n    owner.\n\n##### **Claim Attestation**\n\nCan be completed by a Trust Authority referring to the Identity Claim in\ncollaboration with the account owner, or a referencing statement.\n\nIt is possible **to attest to a claim** by referencing the claim's\nunique revision_verification hash within the attestation. This means you\ncan make statements about an account or about a claim without involving\nthe account owner in that process. An attestation contains a statement\nabout the referenced data set, and is expected to be signed by the\naccount who makes the attestation. This ensures there is clear account\nattribution. Attestations without signature should be disregarded, as\nthey have no account attribution.\n\n---\n\n## **Specification for the Aqua Identity Protocol**\n\nPolicies for Self-Issued-Identity-Claims:\n\n-   Syntax of Title: `\u003cAccount (e.g. Ethereum Wallet Address)\u003e`:`\u003cAttribute (English Descriptive Title)\u003e`\n-   Example:\n    [0xa2026582b94feb9124231fbf7b052c39218954c2:Birthdate](https://pkc.inblock.io/index.php/0xa2026582b94feb9124231fbf7b052c39218954c2:Birthdate)\n\nThe title is not protected against changes, but the content of the page\nis protected.**IMPORTANT:** Therefore, we **must** compare the page\nstored **`\u003cAccount\u003e`,`\u003cattribute\u003e`**. Then reassemble the title to check if\nthey are consistent before proceeding with further validation of the\nidentity claim.\n\nContent of the page\n\n-   **Account:** `\u003cAccount\u003e`\n    -   Is repeated to reassemble the title to check it.\n-   **Attribute:** `\u003cattribute_name\u003e`\n    -   Is repeated to reassemble the title to check it.\n-   **Value:** Is the value of the claim. E.g. '1889' for a year of\n    birth.\n    -   The first revision **must** be signed by the account owner to\n        create a self-issued identity claim\n    -   Values **must** not change within a hash-chain. If a value\n        changes, the claim will be marked as invalid with the revision\n        of the change. If a new attribute value needs to be defined for\n        an account, this is done through a new claim.\n\n-----\n\n**Claim issuance Process**\n\n1.  Claim is created (based on template)\n2.  Claim is signed by issuer (first revision)\n3.  Claim is registered by issuer (optional, done via Claim Registry)\n4.  Claim is verified by authority to accumulate trust (this might\n    include the requirement to hold a revocation authority on a claim\n    registered via a Claim Registry)\n\nTrust-Chains with Identity Claims\n\nWill build a web of trust, which can be applicable not only for public\ninstitutions, but also for commercial organizations and private\nentities.\n\n### A trust chain of identity claims for educational certificates (example)\n\n1.  The certificate is issued as integrity verified data via the Aqua\n    Protocol.\n2.  The recipient of the certificate registers the certificate as an\n    identity claim\n3.  The certificate is signed after it was issued as an identity claim\n    by a Trust Authority (e.g. the university professor) and the\n    university director's office (director)\n4.  The university professor holds trust claims from the university\n    director\n5.  The university director holds trust claims by the ministry of\n    education\n6.  The educational ministry of education holds trust claims by the\n    minister-president\n7.  The minister-president holds trust claims of a verified election\n\nThe chain of trust is supplied by the party signing the statement.\n\n*IMPORTANT: **The authority who is given authority needs to prove\nwhere their authority originated** **when they act in the function of\nthat authority.***\n\n1.  E.g. the professor needs to supply the claim of the university\n    entitling him\n2.  E.g. the university director needs to supply the claim of the\n    educational ministry\n3.  E.g. the educational ministry needs to supply the claim of the\n    minister-president.\n4.  ... and so on.\n\n# Verification Process\n\n1.  Claim is presented\n2.  Claim integrity is validated\n    1.  How can you trust the content of a claim: Claim content needs to\n        be static. E.g. a given-name claim 'Jarred Maxim' cannot change,\n        even if there are many revisions to the page. If the static\n        content HAS changed, the claim is INVALID or at least only valid\n        until the point where it changed. In the case of such an\n        information change, a new claim needs to be issued.\n3.  Claim registry is validated (root trust)\n4.  Claim signatures are validated\n    1.  Comparison between signature time and validity of the signing\n        authority. Is the account authority still valid?\n    2.  lookup of authority claims from expected root trust?\n\n### Trust in Signatures\n\nIf somebody signs an identity claim, we believe they do that to\n\n1.  Vouch with their account for the integrity of the presented data.\n    This can be supported via an Authoritative Claim and a comment which\n    gets attached to the claim itself or is issued via an Attestation.\n2.  To verify the signature, we use an automated verification process.\n    This is done through implementations of an Aqua-Verifier like\n    [https://github.com/inblockio/aqua-verifier-js](https://github.com/inblockio/aqua-verifier-js) or\n    [https://github.com/inblockio/aqua-VerifyPage-chrome-extension](https://github.com/inblockio/aqua-verifypage-chrome-extension)\n    which also checks against the restrictions given by the Aqua\n    Identity Protocol or/and additional defined policies.\n3.  Add access rights to a claim by adding a Data Usage Agreement which\n    is enforced by the Guardian. Access rights can be restricted:\n    1.  to specific accounts\n    2.  to specific domain id's representing an instance of a Data Vault\n4.  Verification: The verification process considers which account it\n    signed, and what was stated with the signature, or with the\n    additional data added to the claim. To consider a claim valid, the\n    relationship between the verifying party and the Trust Authority who\n    signed it, is essential. Can the party be trusted? Why do I trust\n    this party?\n    1.  Claims can be either chained (cascaded into each other) and\n        offline verified, and/or online verified against an existing\n        Claim-Registry. In both cases a known trusted party account\n        reference point is required for the verifying party to trust.\n\n#### **Trust Authorities**\n\nare accounts which have an elevated trusted position. They issue\n[Authoritative Trust\nClaims](https://pkc.inblock.io/index.php/Authoritative_Claim) to give\nlegitimacy to a self-issued identity claim.\n\nWhy do you trust a professor to issue an [Educational\nCertificate](https://pkc.inblock.io/index.php/Educational_Certificate)?\n\nBecause the professor is able to provide a trust chain, represented by a\nchained [Authoritative Trust\nClaim](https://pkc.inblock.io/index.php/Authoritative_Claim), proving\nthat he has authority to attest an [Educational\nCertificate](https://pkc.inblock.io/index.php/Educational_Certificate)\nwith his signature. With his signature, he is increasing the trust of\nthe self-issued [Identity\nClaim](https://pkc.inblock.io/index.php/Identity_Claim) to allow it to\nhave practical utility.\n\n### **Claim Registries**\n\nA claim registry in the context of the Aqua Identity Protocol is a\nglobal registry to allow for real-time global claim revocation and\nre-instantiation of Identity Claim's. This solves the problems related\nand known to certificate revocation. The Claim Registry acts like a\nglobal Claim Revocation List (CRL)[^5].\n\nE.g. a driver's license can be revoked by a Trust Authority and later be\nre-instantiated after the 'Punishment for driving too fast' is over.\nIdentity claims are either valid or invalid. The Claim Registry is\nmanaging who can revoke / re-instantiate a registered claim.\n\nThere is ongoing research and optimizations on privacy concerns to\nreduce costs for on-chain Identity Claim.\n\nImplementation in Ethereum with Smart-Contracts (Solidity). All claims\nare account bound.\n\n**Claim Registration Specification - Smart Contract Structure**\n\n-   **`\u003crevision_verification_hash\u003e`** as root trust of the self-issued\n    identity claim. A claim has to be a verified page, which is signed\n    and timestamped. If all are present, the next page-verification hash\n    entangles all of those properties and becomes the 'address' of the\n    claim. In the receipt of the publish process for the claim, there is\n    an attached receipt, and by writing the receipt into the claim,\n    there is also a new revision generated. This creates the second\n    revision of the claim, which entangles the signature and the witness\n    event with the hash-chain to make them immutable.\n-   **`\u003cstatus\u003e`** \\[type:boolean\\] of claim\n    -   0 - valid\n    -   1 - revoked\n\n \n\n-   **`\u003cvalid until\u003e`** \\[type: date DDMMYYYY\\]: if current date past\n    expiration date, the claim is considered expired and is not accepted\n    anymore\n-   **`\u003cowner == sender address\u003e`** \\[type:address\\] an account which\n    updates the status of the claim, e.g. revocation or suspension of an\n    account\n-   **`\u003cadditional revocation authority\u003e`** \\[type:address\\] list of\n    accounts which are authorized to update status of the claim other\n    than the owner. The owner has a special right to update the list of\n    revocation authorities to hold new addresses.\n---\n\n    EXAMPLE: Claim Registration Data \\[Receipt\\]\n\nThe presence of Claim Registration Data \\[Receipt\\] means that the claim\naddress (verification hash) has been written to a Claim Registry on a\nWitness Network.\n\nProtocol: Aqua Identity Protocol Version 1.0\n\nRegistration Event: 1\n\n-   Domain ID: e9ece84189\n-   Claim address (verification hash of self-signed claim):\n    1db331add502cf1b1712468d1c3e5d66a0016a6f04885c5533619ffbb43fffb6dfa452e119d4bee7628e9792af69089d38d860a5f8d0708184bbb74b8cabdaf7\n-   `\u003cif bulk registration\u003e`\n    -   Merkle Root:\n        7e9782fb8a6e749ef2ba48f8cd410b05335ba48b20ba42508efeb76add38b0f39e717e91381c8de34641af4c477c39fc169eaa0908dba25e0a54e8de615fcd00\n    -   Claim Snapshot Verification Hash:\n        278f930a35d06d7b9d28aab37d402c147d1beffdbe53d212481c17ec686698e9469f9cf7d7d53b9a4435c4b99ca2e578b5dc5fec6c63cb802b540493fe927575\n-   Witness Network: goerli\n-   Claim Registry Smart Contract Address:\n    0x45f59310ADD88E6d23ca58A0Fa7A55BEE6d2a611\n-   Transaction Hash:\n    0xa572e8d6ef8d4a1bb3b5087680817e70bb79a0376c3a9be9e2c6b4d92df228a1\n    Sender Account Address: 0xa2026582b94feb9124231fbf7b052c39218954c2\n    ___\n\n#### **Claim Revocation**\n\n**Traditional** **revocation:**\n\n-   Traditional strategies for certificate revocation can be\n    applied.[^6]\n-   Most effective are short expiration dates where possible, due to the\n    lack of effective revocation processes for certificates without\n    global registries.\n\n**Using Distributed Ledgers**\n\n-   Done via [Claim\n    Registry](https://pkc.inblock.io/index.php/Claim_Registry)\n    (indicates the global status of an identity claim to be either valid\n    or invalid)\n\n**Process:**\n\n-   Locally completed (within the Self-Issued Identity Claim) by\n    changing the status to 'revoked' and signing by the issuer. This\n    adds a receipt to the identity claim, which is displayed when\n    verifying the claim. This includes the revocation transaction for\n    the revocation on the\n    [Identity-Registry](https://pkc.inblock.io/index.php/Identity-Registry)\n-   If there is a new claim which is succeeding the previous identity\n    claim[Claim\n    Registry](https://pkc.inblock.io/index.php/Claim_Registry), then\n    this is also noticed within the revocation receipt under\n    'Successor-Claim: `\u003chash\u003e`.\n\n\u003cb\u003eBulk Claim Registration (Should be part of Claim Registry)\u003c/b\u003e\n\n-   To reduce costs during registration of the identity claims via a\n    [Claim Registry](https://pkc.inblock.io/index.php/Claim_Registry)\n    they can be clustered and registered together\n-   We use the\n    [SmartContract:Identity-Registry](https://pkc.inblock.io/index.php/SmartContract:Identity-Registry)\n    for this. To scale our efforts we utilize a variant of the\n    'Domain-Manifest-Generator / Publisher' which is very similar. The\n    differences are in the selection of what can be published, and the\n    data structure which is published to the Claim Registry instead of\n    the witness smart contract.\n-   The Claim Snapshot Generator can only include ID claims of your own\n    `\u003cAccount\u003e` namespace.\n-   The Claim Snapshot Publisher is registering all selected claims\n    (select them by page name (filter required) and will populate the\n    target\n    [SmartContract:Identity-Registry](https://pkc.inblock.io/index.php/SmartContract:Identity-Registry).\n    Every claim will hold the relative merkle-proof to show the path for\n    it's registration.\n\nExamples for **Identity Claims with Aqua:**\n\n-   [Example Identity Documents with PKC and Data\n    Accounting](https://pkc.inblock.io/index.php/User:0xa2026582b94feb9124231fbf7b052c39218954c2)\n-   Reference:Example Identity Documents (Research)\n\n# FAQ\n\n1.  How to find [Claim\n    Registry](https://pkc.inblock.io/index.php/Claim_Registry)'s? By\n    following the chain of trust of authoritative claims and validating\n    them one by one.\n2.  How to check if authority is still valid and how to find an\n    authority registry? As before, by reading the chain of trust and\n    looking up the status of the related identity claims.\n3.  How to visually check authority dependencies? It is possible to\n    visualize the links of links of links to represent the chain of\n    trust.\n\nImportant References:\n\n-   [Basic intro into\n    DID](https://www.youtube.com/watch?v=gWfAIYXcyH4\u0026ab_channel=Okta)\n-   [Basic intro into\n    DIDComm](https://www.youtube.com/watch?v=8c7yRTENqSc\u0026ab_channel=DecentralizedIdentityFoundation)\n-   [W3C Verified Data\n    Model](https://www.w3.org/TR/vc-data-model/#claims)\n-   [Revocation List 2020](https://w3c-ccg.github.io/vc-status-rl-2020/)\n    A privacy-preserving mechanism for revoking Verifiable Credentials\n-   [DIDCOMM implementations and\n    use-cases](https://github.com/decentralized-identity/didcomm-messaging)\n-   [DIDkit](https://github.com/spruceid/didkit)\n\nThought leader Christopher Allen:\n\n-   [Self-Sovereign-Identity-Principles](https://github.com/WebOfTrustInfo/self-sovereign-identity/blob/master/self-sovereign-identity-principles.md)\n-   [A bitcoin based SSI infrastructure\n    prototype](https://github.com/BlockchainCommons/Gordian)\n\n### References\n\nSee Implementation Specific Aqua Identity Protocol Implementation in MWe\n\n1. [Identity Foundation](https://identity.foundation/)\n\n2. [W3C (World Wide Web Consortium)](https://www.w3.org/)\n\n3. [Web of Trust](https://www.weboftrust.info/)\n\n4. [Self-Sovereign Identity Principles - GitHub](https://github.com/WebOfTrustInfo/self-sovereign-identity/blob/master/self-sovereign-identity-principles.md)\n\n5. [Certificate Revocation (CRL) Explained - SecureW2](https://www.securew2.com/blog/certificate-revocation-crl-explained)\n\n6. [PKI Certificate Revocation Process Explained - TechNet](https://social.technet.microsoft.com/wiki/contents/articles/34071.pki-certificate-revocation-process-explained.aspx)\n\n"])</script><script>self.__next_f.push([1,"2c:T4e17,"])</script><script>self.__next_f.push([1,"\nThe Aqua Identity Protocol (AIP) is an experimental application protocol\nunder development for Self Sovereign Identity's (SSIs) on top of the\nAqua Protocol. This is an active field of research which is related to\nthe work of the Decentralized-Identity-Foundation (DIF)[^1] and the\nWorld-Wide-Web-Consortium[^2]. As this is under active development,\nanything you see is experimental and subject to change. The goal is to\nprovide a Self-Sovereign-Digital Identity Protocol to protect individual\nrights, freedom and the opportunity for the individual to participate in\nthe digital economy.\n\nWe are building on the advancements and insights for rebooting the\nweb-of-trust initiative[^3] and the definition of a\nSelf-Sovereign-Identity provided by Christopher Allen in shortened form here.[^4]\n\n### Self-Sovereign-Identity-Principles\n\n1.  **Existence:** users must have an independent existence. \n2.  **Control:** users must control their identities.\n3.  **Access:** users must have access to their own data.\n4.  **Transparency:** Systems and algorithms must be transparent.\n5.  **Persistence:** Identities must be long-lived.\n6.  **Portability:** Information and services about identity must be transportable.\n7.  **Interoperability:** Identities should be as widely usable as possible.\n8.  **Consent:** users must agree to the use of their identity.\n9.  **Minimization:** Disclosure of claims must be minimized.\n10. **Protection:** The rights of users must be protected.\n\n\nThose 10 stated principles are implemented within the Aqua Protocol and\nit's existing reference implementation in various degrees. They are also\nrepresented in the [Design Principles](design-principles.md).\n\n\n# Architecture\n\nFor the Aqua Identity Protocol to be implemented in accordance with the\nabove statements, SSI-Principles and critical component choices from\noutside the protocol need to be made, and required tools need to be\nprovided. **Data Vault**'s will provide a space which is fully account\ncontrolled. Other architectural decisions enabling SSI can be found in\nthe reference implementation PKC Architecture Documentation.\n\n### Usage of **Data Vaults** to protect identity claims\n\nPages with the namespace `\u003cAccount\u003e`: must be 'read and write able' by\n`\u003cAccount\u003e` only by default. This is to protect the personal-identifiable\ndata of the user. This data should be stored in a place where only the\naccount owner has access to. This can be achieved by having the data\nstored locally on a machine the account owner has, or by using\ncryptography which requires the account's owner explicit interaction to\ndecrypt it. The content should not be decrypted on the server, but\nwithin the web-browser or client-application to ensure that a\npotentially compromised service-provider can't leak the sensitive\ninformation.\n\n-   Identity claims are **encrypted by default** and can only be\n    decrypted by the account owner or other accounts explicitly given\n    permission to do so.\n-   Identity claims **must** be given access by the account owner to\n    e.g. let somebody else sign them.\n\nNote: There should be an extra effort by any **Data Vault**\nimplementation to protect identity claims. It is recommended to strongly\nregulate and audit the emerging solutions to ensure a high level of\nprotection for citizens.\n\n### Self Issued Identity Claims\n\nThese are used to make statements about an account to form an identity. Those\nclaims can be partially revealed on demand to other parties. Those\nclaims can also be protected by advancements in privacy technologies\nlike Zero-Knowledge-Proofs and ongoing advancements in key management.\n\nIdentity claims are sets of [Verified\nData](https://pkc.inblock.io/index.php/Verified_Data) which follow a\nstructured data convention to claim or attest attributes to an account.\nFor example, an attribute could be the year of birth of an account\nowner, or the legal name of an account owner. Claims should always be\natomic to allow the account owner to disclose them selectivity.\nDifferent claims can be combined to represent a citizen ID or a\ndrivers-license. Other claims can be educational certificates, like\nschool certificates.\n\nIdentity claims in the [Aqua Identity\nProtocol](https://pkc.inblock.io/index.php/Aqua_Identity_Protocol) are\n**always self issues**. This means that the first signature on the claim\nneeds to be from the private key which belongs to the account, i.e. the claim\nis issued for. This proves account ownership. This means:\n\n-   All claims can only be issued from the account which they make a\n    claim about. A claim belongs to it's origin account and can only be\n    managed from it's address.\n-   A claim can 'accumulate trust' by being signed by other accounts who\n    support this claim.\n-   Self-issuance protects accounts against spam, and the issuance of\n    fraudulent claims to an account without the knowledge of the account\n    owner.\n\n##### **Claim Attestation**\n\nCan be completed by a Trust Authority referring to the Identity Claim in\ncollaboration with the account owner, or a referencing statement.\n\nIt is possible **to attest to a claim** by referencing the claim's\nunique revision_verification hash within the attestation. This means you\ncan make statements about an account or about a claim without involving\nthe account owner in that process. An attestation contains a statement\nabout the referenced data set, and is expected to be signed by the\naccount who makes the attestation. This ensures there is clear account\nattribution. Attestations without signature should be disregarded, as\nthey have no account attribution.\n\n---\n\n## **Specification for the Aqua Identity Protocol**\n\nPolicies for Self-Issued-Identity-Claims:\n\n-   Syntax of Title: `\u003cAccount (e.g. Ethereum Wallet Address)\u003e`:`\u003cAttribute (English Descriptive Title)\u003e`\n-   Example:\n    [0xa2026582b94feb9124231fbf7b052c39218954c2:Birthdate](https://pkc.inblock.io/index.php/0xa2026582b94feb9124231fbf7b052c39218954c2:Birthdate)\n\nThe title is not protected against changes, but the content of the page\nis protected.**IMPORTANT:** Therefore, we **must** compare the page\nstored **`\u003cAccount\u003e`,`\u003cattribute\u003e`**. Then reassemble the title to check if\nthey are consistent before proceeding with further validation of the\nidentity claim.\n\nContent of the page\n\n-   **Account:** `\u003cAccount\u003e`\n    -   Is repeated to reassemble the title to check it.\n-   **Attribute:** `\u003cattribute_name\u003e`\n    -   Is repeated to reassemble the title to check it.\n-   **Value:** Is the value of the claim. E.g. '1889' for a year of\n    birth.\n    -   The first revision **must** be signed by the account owner to\n        create a self-issued identity claim\n    -   Values **must** not change within a hash-chain. If a value\n        changes, the claim will be marked as invalid with the revision\n        of the change. If a new attribute value needs to be defined for\n        an account, this is done through a new claim.\n\n-----\n\n**Claim issuance Process**\n\n1.  Claim is created (based on template)\n2.  Claim is signed by issuer (first revision)\n3.  Claim is registered by issuer (optional, done via Claim Registry)\n4.  Claim is verified by authority to accumulate trust (this might\n    include the requirement to hold a revocation authority on a claim\n    registered via a Claim Registry)\n\nTrust-Chains with Identity Claims\n\nWill build a web of trust, which can be applicable not only for public\ninstitutions, but also for commercial organizations and private\nentities.\n\n### A trust chain of identity claims for educational certificates (example)\n\n1.  The certificate is issued as integrity verified data via the Aqua\n    Protocol.\n2.  The recipient of the certificate registers the certificate as an\n    identity claim\n3.  The certificate is signed after it was issued as an identity claim\n    by a Trust Authority (e.g. the university professor) and the\n    university director's office (director)\n4.  The university professor holds trust claims from the university\n    director\n5.  The university director holds trust claims by the ministry of\n    education\n6.  The educational ministry of education holds trust claims by the\n    minister-president\n7.  The minister-president holds trust claims of a verified election\n\nThe chain of trust is supplied by the party signing the statement.\n\n*IMPORTANT: **The authority who is given authority needs to prove\nwhere their authority originated** **when they act in the function of\nthat authority.***\n\n1.  E.g. the professor needs to supply the claim of the university\n    entitling him\n2.  E.g. the university director needs to supply the claim of the\n    educational ministry\n3.  E.g. the educational ministry needs to supply the claim of the\n    minister-president.\n4.  ... and so on.\n\n# Verification Process\n\n1.  Claim is presented\n2.  Claim integrity is validated\n    1.  How can you trust the content of a claim: Claim content needs to\n        be static. E.g. a given-name claim 'Jarred Maxim' cannot change,\n        even if there are many revisions to the page. If the static\n        content HAS changed, the claim is INVALID or at least only valid\n        until the point where it changed. In the case of such an\n        information change, a new claim needs to be issued.\n3.  Claim registry is validated (root trust)\n4.  Claim signatures are validated\n    1.  Comparison between signature time and validity of the signing\n        authority. Is the account authority still valid?\n    2.  lookup of authority claims from expected root trust?\n\n### Trust in Signatures\n\nIf somebody signs an identity claim, we believe they do that to\n\n1.  Vouch with their account for the integrity of the presented data.\n    This can be supported via an Authoritative Claim and a comment which\n    gets attached to the claim itself or is issued via an Attestation.\n2.  To verify the signature, we use an automated verification process.\n    This is done through implementations of an Aqua-Verifier like\n    [https://github.com/inblockio/aqua-verifier-js](https://github.com/inblockio/aqua-verifier-js) or\n    [https://github.com/inblockio/aqua-VerifyPage-chrome-extension](https://github.com/inblockio/aqua-verifypage-chrome-extension)\n    which also checks against the restrictions given by the Aqua\n    Identity Protocol or/and additional defined policies.\n3.  Add access rights to a claim by adding a Data Usage Agreement which\n    is enforced by the Guardian. Access rights can be restricted:\n    1.  to specific accounts\n    2.  to specific domain id's representing an instance of a Data Vault\n4.  Verification: The verification process considers which account it\n    signed, and what was stated with the signature, or with the\n    additional data added to the claim. To consider a claim valid, the\n    relationship between the verifying party and the Trust Authority who\n    signed it, is essential. Can the party be trusted? Why do I trust\n    this party?\n    1.  Claims can be either chained (cascaded into each other) and\n        offline verified, and/or online verified against an existing\n        Claim-Registry. In both cases a known trusted party account\n        reference point is required for the verifying party to trust.\n\n#### **Trust Authorities**\n\nare accounts which have an elevated trusted position. They issue\n[Authoritative Trust\nClaims](https://pkc.inblock.io/index.php/Authoritative_Claim) to give\nlegitimacy to a self-issued identity claim.\n\nWhy do you trust a professor to issue an [Educational\nCertificate](https://pkc.inblock.io/index.php/Educational_Certificate)?\n\nBecause the professor is able to provide a trust chain, represented by a\nchained [Authoritative Trust\nClaim](https://pkc.inblock.io/index.php/Authoritative_Claim), proving\nthat he has authority to attest an [Educational\nCertificate](https://pkc.inblock.io/index.php/Educational_Certificate)\nwith his signature. With his signature, he is increasing the trust of\nthe self-issued [Identity\nClaim](https://pkc.inblock.io/index.php/Identity_Claim) to allow it to\nhave practical utility.\n\n### **Claim Registries**\n\nA claim registry in the context of the Aqua Identity Protocol is a\nglobal registry to allow for real-time global claim revocation and\nre-instantiation of Identity Claim's. This solves the problems related\nand known to certificate revocation. The Claim Registry acts like a\nglobal Claim Revocation List (CRL)[^5].\n\nE.g. a driver's license can be revoked by a Trust Authority and later be\nre-instantiated after the 'Punishment for driving too fast' is over.\nIdentity claims are either valid or invalid. The Claim Registry is\nmanaging who can revoke / re-instantiate a registered claim.\n\nThere is ongoing research and optimizations on privacy concerns to\nreduce costs for on-chain Identity Claim.\n\nImplementation in Ethereum with Smart-Contracts (Solidity). All claims\nare account bound.\n\n**Claim Registration Specification - Smart Contract Structure**\n\n-   **`\u003crevision_verification_hash\u003e`** as root trust of the self-issued\n    identity claim. A claim has to be a verified page, which is signed\n    and timestamped. If all are present, the next page-verification hash\n    entangles all of those properties and becomes the 'address' of the\n    claim. In the receipt of the publish process for the claim, there is\n    an attached receipt, and by writing the receipt into the claim,\n    there is also a new revision generated. This creates the second\n    revision of the claim, which entangles the signature and the witness\n    event with the hash-chain to make them immutable.\n-   **`\u003cstatus\u003e`** \\[type:boolean\\] of claim\n    -   0 - valid\n    -   1 - revoked\n\n \n\n-   **`\u003cvalid until\u003e`** \\[type: date DDMMYYYY\\]: if current date past\n    expiration date, the claim is considered expired and is not accepted\n    anymore\n-   **`\u003cowner == sender address\u003e`** \\[type:address\\] an account which\n    updates the status of the claim, e.g. revocation or suspension of an\n    account\n-   **`\u003cadditional revocation authority\u003e`** \\[type:address\\] list of\n    accounts which are authorized to update status of the claim other\n    than the owner. The owner has a special right to update the list of\n    revocation authorities to hold new addresses.\n---\n\n    EXAMPLE: Claim Registration Data \\[Receipt\\]\n\nThe presence of Claim Registration Data \\[Receipt\\] means that the claim\naddress (verification hash) has been written to a Claim Registry on a\nWitness Network.\n\nProtocol: Aqua Identity Protocol Version 1.0\n\nRegistration Event: 1\n\n-   Domain ID: e9ece84189\n-   Claim address (verification hash of self-signed claim):\n    1db331add502cf1b1712468d1c3e5d66a0016a6f04885c5533619ffbb43fffb6dfa452e119d4bee7628e9792af69089d38d860a5f8d0708184bbb74b8cabdaf7\n-   `\u003cif bulk registration\u003e`\n    -   Merkle Root:\n        7e9782fb8a6e749ef2ba48f8cd410b05335ba48b20ba42508efeb76add38b0f39e717e91381c8de34641af4c477c39fc169eaa0908dba25e0a54e8de615fcd00\n    -   Claim Snapshot Verification Hash:\n        278f930a35d06d7b9d28aab37d402c147d1beffdbe53d212481c17ec686698e9469f9cf7d7d53b9a4435c4b99ca2e578b5dc5fec6c63cb802b540493fe927575\n-   Witness Network: goerli\n-   Claim Registry Smart Contract Address:\n    0x45f59310ADD88E6d23ca58A0Fa7A55BEE6d2a611\n-   Transaction Hash:\n    0xa572e8d6ef8d4a1bb3b5087680817e70bb79a0376c3a9be9e2c6b4d92df228a1\n    Sender Account Address: 0xa2026582b94feb9124231fbf7b052c39218954c2\n    ___\n\n#### **Claim Revocation**\n\n**Traditional** **revocation:**\n\n-   Traditional strategies for certificate revocation can be\n    applied.[^6]\n-   Most effective are short expiration dates where possible, due to the\n    lack of effective revocation processes for certificates without\n    global registries.\n\n**Using Distributed Ledgers**\n\n-   Done via [Claim\n    Registry](https://pkc.inblock.io/index.php/Claim_Registry)\n    (indicates the global status of an identity claim to be either valid\n    or invalid)\n\n**Process:**\n\n-   Locally completed (within the Self-Issued Identity Claim) by\n    changing the status to 'revoked' and signing by the issuer. This\n    adds a receipt to the identity claim, which is displayed when\n    verifying the claim. This includes the revocation transaction for\n    the revocation on the\n    [Identity-Registry](https://pkc.inblock.io/index.php/Identity-Registry)\n-   If there is a new claim which is succeeding the previous identity\n    claim[Claim\n    Registry](https://pkc.inblock.io/index.php/Claim_Registry), then\n    this is also noticed within the revocation receipt under\n    'Successor-Claim: `\u003chash\u003e`.\n\n\u003cb\u003eBulk Claim Registration (Should be part of Claim Registry)\u003c/b\u003e\n\n-   To reduce costs during registration of the identity claims via a\n    [Claim Registry](https://pkc.inblock.io/index.php/Claim_Registry)\n    they can be clustered and registered together\n-   We use the\n    [SmartContract:Identity-Registry](https://pkc.inblock.io/index.php/SmartContract:Identity-Registry)\n    for this. To scale our efforts we utilize a variant of the\n    'Domain-Manifest-Generator / Publisher' which is very similar. The\n    differences are in the selection of what can be published, and the\n    data structure which is published to the Claim Registry instead of\n    the witness smart contract.\n-   The Claim Snapshot Generator can only include ID claims of your own\n    `\u003cAccount\u003e` namespace.\n-   The Claim Snapshot Publisher is registering all selected claims\n    (select them by page name (filter required) and will populate the\n    target\n    [SmartContract:Identity-Registry](https://pkc.inblock.io/index.php/SmartContract:Identity-Registry).\n    Every claim will hold the relative merkle-proof to show the path for\n    it's registration.\n\nExamples for **Identity Claims with Aqua:**\n\n-   [Example Identity Documents with PKC and Data\n    Accounting](https://pkc.inblock.io/index.php/User:0xa2026582b94feb9124231fbf7b052c39218954c2)\n-   Reference:Example Identity Documents (Research)\n\n# FAQ\n\n1.  How to find [Claim\n    Registry](https://pkc.inblock.io/index.php/Claim_Registry)'s? By\n    following the chain of trust of authoritative claims and validating\n    them one by one.\n2.  How to check if authority is still valid and how to find an\n    authority registry? As before, by reading the chain of trust and\n    looking up the status of the related identity claims.\n3.  How to visually check authority dependencies? It is possible to\n    visualize the links of links of links to represent the chain of\n    trust.\n\nImportant References:\n\n-   [Basic intro into\n    DID](https://www.youtube.com/watch?v=gWfAIYXcyH4\u0026ab_channel=Okta)\n-   [Basic intro into\n    DIDComm](https://www.youtube.com/watch?v=8c7yRTENqSc\u0026ab_channel=DecentralizedIdentityFoundation)\n-   [W3C Verified Data\n    Model](https://www.w3.org/TR/vc-data-model/#claims)\n-   [Revocation List 2020](https://w3c-ccg.github.io/vc-status-rl-2020/)\n    A privacy-preserving mechanism for revoking Verifiable Credentials\n-   [DIDCOMM implementations and\n    use-cases](https://github.com/decentralized-identity/didcomm-messaging)\n-   [DIDkit](https://github.com/spruceid/didkit)\n\nThought leader Christopher Allen:\n\n-   [Self-Sovereign-Identity-Principles](https://github.com/WebOfTrustInfo/self-sovereign-identity/blob/master/self-sovereign-identity-principles.md)\n-   [A bitcoin based SSI infrastructure\n    prototype](https://github.com/BlockchainCommons/Gordian)\n\n### References\n\nSee Implementation Specific Aqua Identity Protocol Implementation in MWe\n\n1. [Identity Foundation](https://identity.foundation/)\n\n2. [W3C (World Wide Web Consortium)](https://www.w3.org/)\n\n3. [Web of Trust](https://www.weboftrust.info/)\n\n4. [Self-Sovereign Identity Principles - GitHub](https://github.com/WebOfTrustInfo/self-sovereign-identity/blob/master/self-sovereign-identity-principles.md)\n\n5. [Certificate Revocation (CRL) Explained - SecureW2](https://www.securew2.com/blog/certificate-revocation-crl-explained)\n\n6. [PKI Certificate Revocation Process Explained - TechNet](https://social.technet.microsoft.com/wiki/contents/articles/34071.pki-certificate-revocation-process-explained.aspx)\n\n"])</script><script>self.__next_f.push([1,"2d:T174e,"])</script><script>self.__next_f.push([1,"\n\n\n\nWe develop the AQUA-Protocol to increase trust and digital sovereignty for individuals and organizations.\n\nWe believe that this is an effective way to redefine collaboration and strengthen democracy to be more inclusive and participatory by providing accountability for data. We do this in a context where it is critical to address challenges and threats which come with the advancement of technologies (e.g. deep fake, manipulation of data, digital surveillance, monopolization).\n\nWith the powerful tools we provide, we can showcase how trusted data and digital sovereignty are key enablers to support the emancipation and integration of individuals and small to medium businesses into a digital economy, which is currently dominated by large players. We are showing how this is a feasible approach to empower more inclusive and democratic participation.\n\n# What are exemplary applications that are meeting current organizational demands?\n\nAside from the core features of the AQUA-Protocol and its reference implementation (to provide data integrity verification, proof of existence, and a strong identity by using public-private key infrastructure), there is an amazing potential that comes as an emergent property of the interaction of individuals using sovereign instances of Personal-Knowledge-Containers.\n\nThis potential lies in the ability to collaborate by exchanging verified data between independent parties to form a network of relationships as a web of trust. This allows for peer-to-peer institutions and organizations to be built fully software-defined, in traditional or network structures.\n\nIt is possible to model existing institutions on top of this infrastructure today. It is a free and open-source tool to provide a process to issue and verify digital certificates for various use cases. Including examples, showcased for the educational sector (school and university degrees) but the use cases go beyond this:\n\n* Provide an infrastructure to curate knowledge and enable peer-to-peer wiki's in which a contribution itself is attested. This has potentially huge implications, as a successfully merged contribution to a leading scientific endeavor could one could imagine this succeeding the reputational value of a university degree.\n* Fighting fake news by providing an audible trail for the information source to the consumer and which steps have been taken, by which account, to reach its current state. E.g. an intelligence report about an ongoing conflict or crisis.\n* Providing credible credentials to fight deep fake and impersonation. In one shocking case, this shows the danger for our political landscape. In this example the mayor of Berlin was tricked, when she had a zoom call with a fake Vladimir Klitschko (in the role of the Mayor of Kyiv, using deep fake for the video and audio to impersonate him) who tried to get money from her. [Source](https://www.theguardian.com/world/2022/jun/25/european-leaders-deepfake-video-calls-mayor-of-kyiv-vitali-klitschko)\n* Providing a trust infrastructure for invoice validation: Large companies are challenged by the increasing number of fraud and fishing emails to trick companies to send money to criminals. We can use the SSI-Approach of aqua to verify invoices and do automated tests towards the trustworthiness of the sender, by checking the sender's account and the trust relationship cryptographically. Allowing for automated verification of the invoices instead of lengthy manual testing procedures or complicated processes requiring a CRM-System with an intense KYC (Know You Customer) approach.\n* Proving where the information has originated. This can be used to protect intellectual property (IP) or to prove where data originated. This is highly relevant in various contexts, be it for the credibility of evidence in court or for whistle-blowers or investigative journalists to give their claims more credibility.\n\n# The socio-technological impact on society\nWe provide a prototype implementation of the aqua protocol with a Personal-Knowledge-Container(PKC). An approach towards digital sovereignty without compromises. It enables data accounting and with it an effective way to enable peer-to-peer trusted data generation and exchange. We showcase that it is possible to have full control over your data, you can share and govern it independently of third parties. This is essential to democratize access to the digital economy, so individuals can utilize the value of their data and do trusted interactions with each other.\n\nThis technology enables various applications by offering a peer-to-peer-publishing platform technology, this includes but is not limited to:\n* Self-Sovereign Identity (SSI)\n* crowdsourced knowledge management, a distributed Wikipedia\n* crowdsourced news\n* crowdsourced petition systems (crowdsourcing problems, solutions, decisions).\n\nThis Protocol and prototype allow for the practical exploration this how this can redefine our collective sense-making by providing a rational process for forming a truth by consensus between trusted peers. This allows for the practical exploration of digital, participatory collaboration at scale, as the AQUA-Protocol can account for contributions that are currently not measurable in monetary value while those contributions provide value to society and/or nature. It seems possible to envision a different economy where data becomes a multi-dimensional currency that allows us to make better-informed decisions. It can inform us to have a greater choice in how we participate economically as service providers and/or consumers.\n\n* **What is it *not yet* good for?**: This is an experimental protocol with a pilot implementation, which is meant for the exploration of new design principles to improve digital sovereignty and trust. This prototype is not production-grade software and should not be used outside of experimental applications. The prototype does currently (Dec'22) not include a transport layer.\n"])</script><script>self.__next_f.push([1,"2e:T174e,"])</script><script>self.__next_f.push([1,"\n\n\n\nWe develop the AQUA-Protocol to increase trust and digital sovereignty for individuals and organizations.\n\nWe believe that this is an effective way to redefine collaboration and strengthen democracy to be more inclusive and participatory by providing accountability for data. We do this in a context where it is critical to address challenges and threats which come with the advancement of technologies (e.g. deep fake, manipulation of data, digital surveillance, monopolization).\n\nWith the powerful tools we provide, we can showcase how trusted data and digital sovereignty are key enablers to support the emancipation and integration of individuals and small to medium businesses into a digital economy, which is currently dominated by large players. We are showing how this is a feasible approach to empower more inclusive and democratic participation.\n\n# What are exemplary applications that are meeting current organizational demands?\n\nAside from the core features of the AQUA-Protocol and its reference implementation (to provide data integrity verification, proof of existence, and a strong identity by using public-private key infrastructure), there is an amazing potential that comes as an emergent property of the interaction of individuals using sovereign instances of Personal-Knowledge-Containers.\n\nThis potential lies in the ability to collaborate by exchanging verified data between independent parties to form a network of relationships as a web of trust. This allows for peer-to-peer institutions and organizations to be built fully software-defined, in traditional or network structures.\n\nIt is possible to model existing institutions on top of this infrastructure today. It is a free and open-source tool to provide a process to issue and verify digital certificates for various use cases. Including examples, showcased for the educational sector (school and university degrees) but the use cases go beyond this:\n\n* Provide an infrastructure to curate knowledge and enable peer-to-peer wiki's in which a contribution itself is attested. This has potentially huge implications, as a successfully merged contribution to a leading scientific endeavor could one could imagine this succeeding the reputational value of a university degree.\n* Fighting fake news by providing an audible trail for the information source to the consumer and which steps have been taken, by which account, to reach its current state. E.g. an intelligence report about an ongoing conflict or crisis.\n* Providing credible credentials to fight deep fake and impersonation. In one shocking case, this shows the danger for our political landscape. In this example the mayor of Berlin was tricked, when she had a zoom call with a fake Vladimir Klitschko (in the role of the Mayor of Kyiv, using deep fake for the video and audio to impersonate him) who tried to get money from her. [Source](https://www.theguardian.com/world/2022/jun/25/european-leaders-deepfake-video-calls-mayor-of-kyiv-vitali-klitschko)\n* Providing a trust infrastructure for invoice validation: Large companies are challenged by the increasing number of fraud and fishing emails to trick companies to send money to criminals. We can use the SSI-Approach of aqua to verify invoices and do automated tests towards the trustworthiness of the sender, by checking the sender's account and the trust relationship cryptographically. Allowing for automated verification of the invoices instead of lengthy manual testing procedures or complicated processes requiring a CRM-System with an intense KYC (Know You Customer) approach.\n* Proving where the information has originated. This can be used to protect intellectual property (IP) or to prove where data originated. This is highly relevant in various contexts, be it for the credibility of evidence in court or for whistle-blowers or investigative journalists to give their claims more credibility.\n\n# The socio-technological impact on society\nWe provide a prototype implementation of the aqua protocol with a Personal-Knowledge-Container(PKC). An approach towards digital sovereignty without compromises. It enables data accounting and with it an effective way to enable peer-to-peer trusted data generation and exchange. We showcase that it is possible to have full control over your data, you can share and govern it independently of third parties. This is essential to democratize access to the digital economy, so individuals can utilize the value of their data and do trusted interactions with each other.\n\nThis technology enables various applications by offering a peer-to-peer-publishing platform technology, this includes but is not limited to:\n* Self-Sovereign Identity (SSI)\n* crowdsourced knowledge management, a distributed Wikipedia\n* crowdsourced news\n* crowdsourced petition systems (crowdsourcing problems, solutions, decisions).\n\nThis Protocol and prototype allow for the practical exploration this how this can redefine our collective sense-making by providing a rational process for forming a truth by consensus between trusted peers. This allows for the practical exploration of digital, participatory collaboration at scale, as the AQUA-Protocol can account for contributions that are currently not measurable in monetary value while those contributions provide value to society and/or nature. It seems possible to envision a different economy where data becomes a multi-dimensional currency that allows us to make better-informed decisions. It can inform us to have a greater choice in how we participate economically as service providers and/or consumers.\n\n* **What is it *not yet* good for?**: This is an experimental protocol with a pilot implementation, which is meant for the exploration of new design principles to improve digital sovereignty and trust. This prototype is not production-grade software and should not be used outside of experimental applications. The prototype does currently (Dec'22) not include a transport layer.\n"])</script><script>self.__next_f.push([1,"2f:T94e5,"])</script><script>self.__next_f.push([1,"\n\n|                  |                                            |\n|------------------|--------------------------------------------|\n| Current version: | Aqua Protocol v1.1 Specification           |\n| Author:          | Tim Bansemer, Publius Dirac                |\n| Date:            | 30.12.2021                                 |\n| Status:          | DRAFT / Experimental                       |\n| Implementation:  | [https://github.com/inblockio/micro-pkc](https://github.com/inblockio/micro-pkc)   |\n\n## Introduction\n\nThe Aqua Protocol (AQP) is a data accountability and exchange protocol between\nhosts in peer-to-peer environments. The AQP is used to realize the goal of\n[accounting for data origin and history](data-accounting.md). The description\nfor the proof-of-concept implementation of the AQP can be found in [this\npage](../implementations/reference-architecture.md).\n\n## Motivation\n\nIn today's world, there are no widely adopted trustless processes of checking if\ndata have been manipulated or corrupted, are attributed to the wrong author, or\nare attributed to the wrong time. Today's processes are dependent on centralized\ntrusted services which retain all power over governing the data.\n\nThere is a lack of transparency or ability to check if data have been altered\nby an unauthorized party. Additionally, consumers of data are incapable of\nverifying if centralized services have altered the data. This leads to a world\nof untrustworthy information in which we don't know how to conclude what is\ntrue.\n\nIn a world where every piece of information is a grain in a sandstorm, it has\nbecome impossible to navigate reality. In contrast, in a world where every\npiece of information is a fixed star in the sky for a lifetime, we are able to\nrelate and make sense of the information given. The Aqua Protocol (AQP) turns\ngrains of information into fixed stars of information.\n\nThe AQP adds a peer-to-peer layer of accountability, making it impossible to\nchange data unnoticed. AQP adds an essential line of defense against attacks on\ndata integrity, plagiarism, or misattribution. AQP is used to govern trusted\ndata, which can be quickly verified. This includes the verification of its\nintegrity and history, the verification of its account (the entity who creates\nor manipulates the data), and the verification of its existence and timestamp.\n\n    The Aqua Protocol provides trustworthiness to data by\n    securing data âœ… integrity, ðŸ” account and âŒš time.\n\nIn order to account data, it is necessary to track and verify its history. The\nAQP provides a globally unique resource identification (URI) for each revision\nof the verified data. This identifier is collision-free, and is referred the\nsame way across multiple interacting hosts.\n\n## Terminology\n\n## Wallet\nA wallet is a software for protecting and managing private cryptographic keys\n(of private-public key pairs) which are used to govern digital assets. This is\ndone by authorization of transactions via digital signatures or by initiating\ndecryption processes to access data.\n\nSee [Separation of Concerns](design-principles.md#separation-of-account-and-service).\n\n### Account\n\nWe are following Ethereum's account definition:\n\u003e In general, there are two types of accounts. Externally owned accounts,\n\u003e controlled by private keys. And contract accounts, controlled by their\n\u003e contract code\n-- [Ethereum Whitepaper](https://ethereum.org/en/whitepaper/#ethereum-accounts)\n\nIn general, we can't prove if an account owner is a person or a machine. With\nadvancements in AI, it will become increasingly difficult to prove that a human\nis a human. [Attempts are being made](https://www.proofofhumanity.id/) to\nincrease trustworthiness of accounts which fall short in questions of privacy\nand security as they make public claims. Traditional know your customer (KYC)\ncombined with the AQP and Aqua Identity Protocol (AIP) identification processes\ncan provide similar \"proof of being human\" which can be attested to an account.\nThis allows us to outsource the problem of identification, where we only focus\non unique accounts which are sufficient for data accounting independent of\nhumans or machines. Identity claims issued via the AIP will help to provide the\ncontext required to meaningfully interact between accounts.\n\nFor more on this topic, please read the [Aqua Identity\nProtocol](aqua-identity-protocol.md).\n\n### Domain\nA domain is a unique namespace attributed to an account. It allows us to manage\nservices and files within that namespace creating a domain of data governance\nAfter granted permissions, additional accounts can be added to share control\nover a domain or singular assets. To enforce boundaries of a domain, additional\nsoftware like the [Guardian](guardian.md) is required.\n\nE.g. by setting up the a data vault with your account it becomes your\ndomain of data governance.\n\n### Revision\n\nA revision is the smallest portable entity within the AQP. Multiple revisions\nform a single portable hash chain which is serialized in JSON format.\nThey have existed before in unsecured systems where multiple revisions form a\nfile which can be displayed as a page. The AQP adds the cryptographic harness\nto secure it. With presenting a portable hash chain, it is possible to track\nall incremental changes stored in each revision to understand the history of a\npage and how it came to be. This allows us to have version control on digital\nassets being able to restore earlier states and to relate to them. This allows\nus to have historical evidence of digital assets.\n\n### Page\n\nA page is a visible representation of a file containing multiple or a single\nrevision attributed to a shared origin. A page view could also be used to\ncreate a new revision by a used service which interfaces with the file for\nmanipulation. In AQP all revisions share a global URI hash to\nattribute them together called a genesis hash.\n\n### Transaction Security\n\nTransaction security is an economic measure of the level of integrity assurance\nfor a transaction. It is defined as the cost required to forge a transaction.\nThe transaction security can be increased by cryptographic security and by strong\nreplication of transactions. Public distributed ledger systems are highly suitable\nfor providing very high level of transaction security at the cost of privacy\nand immutability (data can't be changed or deleted). Today, public distributed\nledgers such as Bitcoin and Ethereum provide the highest level of transaction\nsecurity.\n\n### Data Asset\n\nData turns into a valuable asset if it is accounted for. In an accounted form\nit can be easily priced, exchanged or traded.\n\n### Data Vault\n\nSoftware used to store and manage data with an account. The software must apply\na secure architecture and measures for keeping data assets safe. This is\nachieved through encryption, strong authentication and restrictive access to\nkeep data private by default.\n\nSee [Design Principles / Separation of Account and\nService](design-principles.md#separation-of-account-and-service)\n\n\n### Witness\n\nWe define witnessing as the process of observing an event. A witness is judged\nby their capability to recollect and share an observed event. In other words,\nwitnessing is the process of storing input data for later playback to provide\ndata symmetry around an event.\n\n### Witness Network\n\nThe digital service in a distributed ledger or similar infrastructure which\nprovides transaction security and data symmetry for shared data within the\nnetwork. An example of a witness network would be Ethereum.\n\nE.g. Ethereum can be used to store a digital fingerprint of a domain snapshot\nof a data vault. A domain snapshot is the Merklized state of all witnessed hash\nchains being present in the data vault. It is required to pay the witness\nnetwork for its service. In the case of Ethereum, this is done using 'Ether'.\nThis in return allows the account owner to create an 'undeniable' proof that a\nspecific revision and the previous revisions within a hash chain has existed.\n\n### Portable Hash Chain\n\nA hash chain is a linked list where each node contains the cryptographic hash\nof the previous node content. A portable hash chain is a hash chain that can be\nmoved from one host to another.\n\n### Immutable Hyperlinks / Transclusions\nSee [Immutable Hyperlinks](immutable-hyperlinks.md).\n\n## Specification\n\nTo identify a revision with a unique fingerprint, we hash its content using\nthe SHA3-512 hashing function which always has a 128 characters long\noutput. This value can be used as a checksum to verify data integrity.\nThe checksum can then be entangled in a hash-chain to create an\nimmutable track record. We then calculate multiple properties associated\nwith the revision, in addition to its content checksum. In the next section,\nwe differentiate between REQUIRED and OPTIONAL properties for each\nrevision.\n\nAll hashes are based on\n[SHA3-512](https://nvlpubs.nist.gov/nistpubs/FIPS/NIST.FIPS.202.pdf).\nThis encryption standard is used to construct [portable hash\nchains](#portable-hash-chain), which are serializing of data and its history in\na form that can be verified, and independent of location. The portable hash\nchain can be fully or partially exchanged between hosts depending on the\napplication of the data. From here on, we refer the term \"portable hash chain\"\nas \"hash chain.\"\n\nIn order to implement the AQP, we need to utilize a software that is capable of\ngenerating portable hash chains and facilitating actions described in the\nAQP. We call those nodes which facilitate the Aqua Protocol 'Aqua Data\nVaults' which given their role should be implemented as a software with secure\narchitecture and measures for keeping data assets safe. This is achieved\nthrough encryption, authentication and restrictive access to keep data private\nby default.\n\n# Revision Verification Structure\n\nA revision is RECOMMENDED to be limited to 50 Megabytes to ensure that the verification can take\nplace on all imaginable clients which might have slow network connectivity, low\nmemory, low cpu performance. Once a revision is verified, the next one can be\nverified. Clients with more performance will be able to parallelize the\nverification. Larger files can be chunked to be placed in multiple revisions.\n\nA verified data structure is identified by its URI `verification_hash`\nand grouped by its `genesis_hash`. The first revision created will\ncreate a `verification_hash` which has a special meaning and is\nreferred to as the `genesis_hash`. All future revisions building upon\nthat first revision will be attributed to the `genesis_hash` as a unique\nURI for grouping the revisions. This allows us to understand if two\nrevisions are related without needing to verify the whole history of the\nhash chain.\n\n## Verification Hash\n`revision_verification_hash` is the hash sum over the string formed by the\nfollowing operation\n\n```\nrevision_verification_hash = calculate_hash_sum(\n    content_hash + metadata_hash +\n    signature_hash + witness_hash\n)\n```\nThe content_hash and metadata_hash are REQUIRED.\nThe signature_hash and witness_hash are OPTIONAL.\n\n## Content\n\nA content hash is the check sum for all content data fields which simplifies\nhash construction and the ability to identify data corruption in this part of\nthe verification structure.\n`content_hash` is the hash sum over the string formed by following operation:\n\n```\ncontentObj = {\n    \"main\": content,\n    \"extension_key_1\": content_extension_1,\n    \"extension_key_2\": content_extension_2,\n    ...,\n    \"extension_key_n\": content_extension_n,\n}\nsortedContenObj = sort_by_keys(contentObj)\ncontent_hash = calculate_hash_sum(\n    sortedContenObjValue_1,\n    sortedContenObjValue_2,\n    ...,\n    sortedContenObjValue_n,\n)\n```\nDescription:\n- content: The string input of the visible page using UTF-8 encoding schema.\n  REQUIRED.\n- content extensions: more data MAY be encapsulated in addition to the main\n  content. These could be a file, a stateful link, or a signature. The content\n  extensions are sorted alphabetically by their key names. OPTIONAL.\n- The `sort_by_keys` function sorts the content object elements by their keys\n  alphabetically. The JSON input MAY be a canonical JSON, in which the keys\n  order is already alphabetical, but we sort it always to ensure the order is\n  correct.\n\nTo see an example of `contentObj` of a revision, see the [example](#Example)\nsection,\n\n## Metadata\n\n```\nmetadata_hash = calculate_hash_sum(\n    domain_id + time_stamp + previous_verification_hash\n)\n```\n\nDescription:\n- metadata_hash: The check sum for all metadata data fields. It simplifies the\n  hash construction and the ability to identify data corrupton in this part of\n  the verification structure.\n- domain_id: 10 digits hexadecimal randomly generated to identify the host\n  system that runs the AQP service.\n- time_stamp: time-stamp of the current revision (decimal numbers\n  YYYYMMDDHHMMSS e.g. 20211128092608).\n- previous_verification_hash: previous_revision_verification_hash if present\n\n## Signature\n\nA signature in AQP is a cryptographic signature generated by public-private key\npair. The protocol should be abstract, where it will support 'Method' in later\niterations. This will allow us to use different types of implementations such\nas: PGP signatures, Ethereum, or Bitcoin\n[wallet](https://en.wikipedia.org/wiki/Cryptocurrency_wallet)'s signatures.\n\nIn this specification, we use the AQP reference implementation's signing\nmethod, which is via an Ethereum wallet.\n\n```\nsignature_hash = calculate_hash_sum(\n    signature + public_key\n)\n```\n\nThe signature is generated by a wallet signing the following message:\n\n```\nI sign the following page verification_hash:\" +[0x\u003crevision_verification_hash\u003e]\n```\n\nThe `revision_verification_hash` MUST NOT be signed twice by the same key, to\navoid information leakage of the private key.\n\nFor example, a wallet with an address of\n`0xa2026582b94feb9124231fbf7b052c39218954c2` and a public key of\n`0x041518581af65749b3ddc69889df3e5d229bc8ad79279a07ddeb368ade5e1592368c5ff3b69143d7a1e7cf64f7d0774a6724e6eaf138d318d07ddc30f6081ca89a`\nsigns the following message:\n```\nI sign the following page verification_hash:\" +[0x9dab72c7635043452958c4cc2902f48ef7c4ae437058280197c6a2736ab9635f799cbf190d9d07dd76589055a8ad64e61c6bebd1487994207d4cb7918b471f57]\n```\nwhich results in the following signature:\n```\n0x19b5697c4541509c1add3db9fc2f678b7b80325ebffd4d945ca00db5f8b3f98a142edbf9a7faa0a0c7ec4f10ae1b64cf2ea62ce3ee73ed2e37ce916d6bd016601c\n```\n\n## Witness\n\nWitnessing allows one to undeniably prove the existence of a dataset\n(represented as a portable hash chain). To complete the witnessing process, a\nDomain Snapshot is created. This is a collection of all revision hashes within\none domain. A Merkle tree is used to unify all hashes of the latest revisions\nof all portable hash chains within a domain into a single hash value.\n\nThe `witness_event_verification_hash` is written to the [Witness\nNetwork](#witness-network). The\n`witness_event_verification_hash` is then generated by using the\n`domain_snapshot_genesis_hash` and the `merkle_root` hash together. This\nallows the page snapshot itself to also be witnessed.\n\nA single revision which has been witnessed, will not store the whole Merkle\ntree, but only its relevant path to the Merkle root. Performing a Merkle proof\nmeans that its revision is included in the Merkle tree.\n\n```\nwitness_hash = calculate_hash_sum(\n    domain_snapshot_genesis_hash + merkle_root +\n    witness_network + witness_event_transaction_hash\n)\n```\n\nDescription:\n- `witness_hash`: the checksum for all signature data fields. It simplifies hash\n  construction and identifies data corruption in this part of the verification\n  structure.\n- `domain_snapshot_genesis_hash`: Refers to the URI of the page which stores the\n  whole Merkle tree of the witness event.\n- `merkle_root`: the root hash of the Merkle tree. The presence of the\n  Merkle tree allows for lazy verification to reduce required computational\n  steps for verification by skipping the Merkle proof as both datasets can be\n  entangled in the chain by a newer revision and therefore be immutable.\n- `witness_network`: specifies which witness network was used to store the\n  `witness_event`. The following structure shows an AQP hash chain with 3\n  revisions which wrote the `witness_event_verification_hash` into the\n  witness network.\n\nAdditional context:\n- relative-merkle-tree-proof: This provide the relative path with all required\n  hashes to verify the Merkle tree root from the first node which the\n  `verification_hash` of the revision as a starting point. \n- `witness_event_verification_hash`: It is calculated by taking the sha3-512\n  checksum of the `domain_snapshot_genesis_hash` and the `merkle_root` hash.\n  This ensures that the`domain_snapshot` itself will be witnessed.\n\n\n## Example\nThe following structure shows an AQP hash chain with 3 revisions:\n\n### 1st Revision\nThis revision features all REQUIRED (content, metadata) and all OPTIONAL\n(signature, witness) AQP data fields.\n```json\n{\n  \"verification_context\": {\n    \"has_previous_signature\": false,\n    \"has_previous_witness\": false\n  },\n  \"content\": {\n    \"rev_id\": 358,\n    \"content\": {\n      \"main\": \"First revision text\",\n      \"transclusion-hashes\": \"\"\n    },\n    \"content_hash\": \"ae188be061822074716b43925b3ffa90a03c530342be73c3440d8f022765ffebbb56c16552f13cd1ea61f876d2d892e0a73dcba5173fc47d371b4251d6c094da\"\n  },\n  \"metadata\": {\n    \"domain_id\": \"acfa9f682e\",\n    \"time_stamp\": \"20220116090401\",\n    \"previous_verification_hash\": \"\",\n    \"metadata_hash\": \"d1025fd8866d9367735d2f6617b3aa87401e08d726f311cdf834ea9540955bfc59b428676bce5d47d5fed381394ab2ed838c5eecfc9cb37313705374752c247d\",\n    \"verification_hash\": \"9dab72c7635043452958c4cc2902f48ef7c4ae437058280197c6a2736ab9635f799cbf190d9d07dd76589055a8ad64e61c6bebd1487994207d4cb7918b471f57\"\n  },\n  \"signature\": {\n    \"signature\": \"0x19b5697c4541509c1add3db9fc2f678b7b80325ebffd4d945ca00db5f8b3f98a142edbf9a7faa0a0c7ec4f10ae1b64cf2ea62ce3ee73ed2e37ce916d6bd016601c\",\n    \"public_key\": \"0x041518581af65749b3ddc69889df3e5d229bc8ad79279a07ddeb368ade5e1592368c5ff3b69143d7a1e7cf64f7d0774a6724e6eaf138d318d07ddc30f6081ca89a\",\n    \"wallet_address\": \"0xa2026582b94feb9124231fbf7b052c39218954c2\",\n    \"signature_hash\": \"cc42f40c4452a25f9ea48a97b6dfba6f69dec347db5c1adf25475b0b4a5da36af3fe48bf9f7ea0dda6bbed9367dc9c82834dbf8cc7f6220fd190cdb729d3f4ec\"\n  },\n  \"witness\": {\n    \"witness_event_id\": \"2\",\n    \"domain_id\": \"acfa9f682e\",\n    \"domain_snapshot_title\": \"Data Accounting:DomainSnapshot:b33afaf53ed3d245f0319d4997db2032de9d77791ae11f5125189815eef44f2fba9633bebe2e57bc5ea4b0424872ed02fa6aa9ad909f467726b536933bf715bf\",\n    \"witness_hash\": \"9707780cebcf6ed02b40bd7e6956b35ffe142a2b5f8cee15c703a652fa389eb118ef101e2f463e95663aa4013a42d9f1ce4a83eed3528b02bf98626e7599bbd8\",\n    \"domain_snapshot_genesis_hash\": \"b33afaf53ed3d245f0319d4997db2032de9d77791ae11f5125189815eef44f2fba9633bebe2e57bc5ea4b0424872ed02fa6aa9ad909f467726b536933bf715bf\",\n    \"merkle_root\": \"14f26d7dc0be77afff9131c03cab39a2fa9e1270c6face3fdc35b9b4b4ac4550d048c356a4713568c42411c3e7fe3553ec7b993c9bd7da97cb976e843d7e4d29\",\n    \"witness_event_verification_hash\": \"67e187411f1e514f232ae2858168da29b15ddfd07523e7a7618bfbf91c583f54fe8e850146120539a92a63ce6138f96599fb8a46ed492e428fe6fde9b9ea82ae\",\n    \"witness_network\": \"goerli\",\n    \"smart_contract_address\": \"0x45f59310ADD88E6d23ca58A0Fa7A55BEE6d2a611\",\n    \"witness_event_transaction_hash\": \"0x5900103adc09a789fd3bd7c23dfeff1ffce41dfba0a52b525ecc032e9279eb1f\",\n    \"sender_account_address\": \"0xa2026582b94feb9124231fbf7b052c39218954c2\",\n    \"source\": \"default\",\n    \"structured_merkle_proof\": [\n      {\n        \"witness_event_verification_hash\": \"67e187411f1e514f232ae2858168da29b15ddfd07523e7a7618bfbf91c583f54fe8e850146120539a92a63ce6138f96599fb8a46ed492e428fe6fde9b9ea82ae\",\n        \"depth\": \"4\",\n        \"left_leaf\": \"2554fb53531f4de26ff3ad1fb8c61feea6ea47c3f13c4abda385c46ef8541361f7eee42433050281714a3900115f04fe52b5a8d781a71c4c439c5de6b91cbe3c\",\n        \"right_leaf\": \"9dab72c7635043452958c4cc2902f48ef7c4ae437058280197c6a2736ab9635f799cbf190d9d07dd76589055a8ad64e61c6bebd1487994207d4cb7918b471f57\",\n        \"successor\": \"789e508ccb23fe053b628cebc19a2d32f34e6aa21e878e8611f7c14d891625c7b2e243b3c3105b98295333b9183e5ea272a055a84ab65ad927f7fd9c27aae48e\"\n      },\n      {\n        \"witness_event_verification_hash\": \"67e187411f1e514f232ae2858168da29b15ddfd07523e7a7618bfbf91c583f54fe8e850146120539a92a63ce6138f96599fb8a46ed492e428fe6fde9b9ea82ae\",\n        \"depth\": \"3\",\n        \"left_leaf\": \"789e508ccb23fe053b628cebc19a2d32f34e6aa21e878e8611f7c14d891625c7b2e243b3c3105b98295333b9183e5ea272a055a84ab65ad927f7fd9c27aae48e\",\n        \"right_leaf\": \"c16a966333cd22ff3497875a62202874221c1dae2e74b4351d058910f8d37160be480fce9aab4ec5e725beb695509f0fd65ae581568c6f1ae25eb4f1440b287f\",\n        \"successor\": \"80d7549af24e9a6bdfc32cefe0536d6528d665cc8e65859ef4cff87270f3db8d9b95aaecc167e10c9b5be9ce3ab36d8d880c3a518e1c5eb899ca9d95af24e9db\"\n      },\n      {\n        \"witness_event_verification_hash\": \"67e187411f1e514f232ae2858168da29b15ddfd07523e7a7618bfbf91c583f54fe8e850146120539a92a63ce6138f96599fb8a46ed492e428fe6fde9b9ea82ae\",\n        \"depth\": \"2\",\n        \"left_leaf\": \"80d7549af24e9a6bdfc32cefe0536d6528d665cc8e65859ef4cff87270f3db8d9b95aaecc167e10c9b5be9ce3ab36d8d880c3a518e1c5eb899ca9d95af24e9db\",\n        \"right_leaf\": \"f4e189a08b486253ea0a5cc7bf7150055e738898115c4caf00e45634d6925539d51852409d1fe9108469e9b15668b940f3369300bb27cc292d1fabc0c07cd593\",\n        \"successor\": \"e227dd97e5166364483b41f058f0d176e3a50a7510299038b09ae3aef2cbafb26c787afad82563a945b433fa2d1279af3535755235ab69d6e5ab089179177c14\"\n      },\n      {\n        \"witness_event_verification_hash\": \"67e187411f1e514f232ae2858168da29b15ddfd07523e7a7618bfbf91c583f54fe8e850146120539a92a63ce6138f96599fb8a46ed492e428fe6fde9b9ea82ae\",\n        \"depth\": \"1\",\n        \"left_leaf\": \"e227dd97e5166364483b41f058f0d176e3a50a7510299038b09ae3aef2cbafb26c787afad82563a945b433fa2d1279af3535755235ab69d6e5ab089179177c14\",\n        \"right_leaf\": \"780f3eb08f24022be4463be141bcda6a33a157cd0fd44cf209312b8427ac4036637a63d239526555128a4e7f4bb588ebfdbd8a8cc7d797038e29b852a4fae26c\",\n        \"successor\": \"f3bd4e82b1e3d304005a7ddf4ab940f3e4e1cf099ca1c058454c431ed3feb0674c044e53150eb5691073ba58a3491565f72f6a6c2a24562ea080b569b4496c9f\"\n      },\n      {\n        \"witness_event_verification_hash\": \"67e187411f1e514f232ae2858168da29b15ddfd07523e7a7618bfbf91c583f54fe8e850146120539a92a63ce6138f96599fb8a46ed492e428fe6fde9b9ea82ae\",\n        \"depth\": \"0\",\n        \"left_leaf\": \"f3bd4e82b1e3d304005a7ddf4ab940f3e4e1cf099ca1c058454c431ed3feb0674c044e53150eb5691073ba58a3491565f72f6a6c2a24562ea080b569b4496c9f\",\n        \"right_leaf\": \"4a0c120fbdd6219b774eb2cb2076f4050d606b621e384c3ec645be0e5dbcdac3132f1f2acb531fa5ff62429907b77cf8d29a760be3765eb4decd83949a2925f8\",\n        \"successor\": \"14f26d7dc0be77afff9131c03cab39a2fa9e1270c6face3fdc35b9b4b4ac4550d048c356a4713568c42411c3e7fe3553ec7b993c9bd7da97cb976e843d7e4d29\"\n      }\n    ]\n  }\n}\n```\n\n### 2nd Revision\nThis revision entangles all data fields of the previous revision. As the\ncalculation of the revision_verification hash depends on the revision of the\nprevious revision, it is shown in verification_context.\n\n```json\n{\n  \"verification_context\": {\n    \"has_previous_signature\": true,\n    \"has_previous_witness\": true\n  },\n  \"content\": {\n    \"rev_id\": 362,\n    \"content\": {\n      \"main\": \"First revision text\",\n      \"signature-slot\": \"[\\n    {\\n        \\\"user\\\": \\\"0xa2026582b94feb9124231fbf7b052c39218954c2\\\",\\n        \\\"timestamp\\\": \\\"20220116090439\\\"\\n    }\\n]\",\n      \"transclusion-hashes\": \"\"\n    },\n    \"content_hash\": \"9732084a45fd344d63687ccf9b5cd942f99ffe1debd11622b05d0cd24a2de3e5608d5f5121bdd7559c0a2d39067f9258c4f9612e44728df2e8d9026a88ed650c\"\n  },\n  \"metadata\": {\n    \"domain_id\": \"acfa9f682e\",\n    \"time_stamp\": \"20220116090439\",\n    \"previous_verification_hash\": \"9dab72c7635043452958c4cc2902f48ef7c4ae437058280197c6a2736ab9635f799cbf190d9d07dd76589055a8ad64e61c6bebd1487994207d4cb7918b471f57\",\n    \"metadata_hash\": \"8df483539e2f81e64c9b9df0c7e13ae7778947b5defef860fbaed1260eade794999839bb254ea5006a5d4b6a89a37980ab576dc546d6336518d65b80bf2a5cb5\",\n    \"verification_hash\": \"296347471b33f3d3c69cc6e0699d80b4cb68ffc79c3ecce96beb659fa324fab1de7a888932fbfb7c60bb8cc83c9445ce15532987a7b59440cada649681618293\"\n  },\n  \"signature\": {\n    \"signature\": \"\",\n    \"public_key\": \"\",\n    \"wallet_address\": \"\",\n    \"signature_hash\": \"\"\n  },\n  \"witness\": null\n}\n```\n\n### 3rd Revision\nThis revision features a transclusion-hash for an immutable link to another\nrevision.\n\n```json\n{\n  \"verification_context\": {\n    \"has_previous_signature\": false,\n    \"has_previous_witness\": false\n  },\n  \"content\": {\n    \"rev_id\": 363,\n    \"content\": {\n      \"main\": \"First revision text\\n\\n[[File:Logo_inblockio.png]]\",\n      \"signature-slot\": \"[\\n    {\\n        \\\"user\\\": \\\"0xa2026582b94feb9124231fbf7b052c39218954c2\\\",\\n        \\\"timestamp\\\": \\\"20220116090439\\\"\\n    }\\n]\",\n      \"transclusion-hashes\": \"[{\\\"dbkey\\\":\\\"Logo_inblockio.png\\\",\\\"ns\\\":6,\\\"verification_hash\\\":\\\"9b2b3cafb90a07433a2b61885a9e64641a99b1e9024cf53b640501d3706b142fed7bc372300973137ef9d92584fac70976c3889d5610abcfe1f187c248263a56\\\"}]\"\n    },\n    \"content_hash\": \"14b8256ccd5fa1d883983317f92f428eadb52f699f476b9be69f14c6892b41979ff7b5b7a7a978177985d6aaa0bcfd9857a2646aedc4cbb3299373daa647814b\"\n  },\n  \"metadata\": {\n    \"domain_id\": \"acfa9f682e\",\n    \"time_stamp\": \"20220116090556\",\n    \"previous_verification_hash\": \"296347471b33f3d3c69cc6e0699d80b4cb68ffc79c3ecce96beb659fa324fab1de7a888932fbfb7c60bb8cc83c9445ce15532987a7b59440cada649681618293\",\n    \"metadata_hash\": \"09688c05a83bb74bb255fb0c571cb6314b65f5b7f00750547a2c43f4959d4702ae2aec019c6fb4b0e5d23adea87fd456b0eaffc6ae271163a1fa45b4bae54230\",\n    \"verification_hash\": \"b35894d74dfcf8b41ff95eed97705e1acf9081021e0d478d8645cb04b8a0b4a013ee8f7fb6e140d149f2c92f20bba984fad5535938a5e36ae6a799a18343b806\"\n  },\n  \"signature\": {\n    \"signature\": \"\",\n    \"public_key\": \"\",\n    \"wallet_address\": \"\",\n    \"signature_hash\": \"\"\n  },\n  \"witness\": null\n}\n```\n\n# API Endpoints\n\nThe AQP provides 3 API endpoints which return data from a host that runs the\nAQP:\n\n## Get Hash Chain\n`/get_hash_chain_info/{identifier}?identifier=\u003ctitle or genesis hash\u003e`  \nInput:\n- `identifier_type`: the value must either be \"title\" or \"genesis_hash\"\n- `identifier`: the title or genesis_hash string, e.g. \"Main Page\" or \"02c3c2...215d8d\"\nReturns: all context for the requested hash_chain.\n\nExample:\n\nAPI Request:\n`/get_hash_chain_info/genesis_hash?identifier=dffd37be12adc9e774b51aa712f7c5bfc09f48b083540d8ca55f91f317e8685bf09daf004f7c841e53732b8c7992de3f3b9b79350d13570c3b46803ba5119c26`\n\nAPI Response:\n```json\n{\n  \"genesis_hash\": \"dffd37be12adc9e774b51aa712f7c5bfc09f48b083540d8ca55f91f317e8685bf09daf004f7c841e53732b8c7992de3f3b9b79350d13570c3b46803ba5119c26\",\n  \"domain_id\": \"acfa9f682e\",\n  \"latest_verification_hash\": \"2554fb53531f4de26ff3ad1fb8c61feea6ea47c3f13c4abda385c46ef8541361f7eee42433050281714a3900115f04fe52b5a8d781a71c4c439c5de6b91cbe3c\",\n  \"site_info\": {\n    \"sitename\": \"Personal Knowledge Container\",\n    \"dbname\": \"my_wiki\",\n    \"base\": \"http://localhost:9352/index.php/Aqua\",\n    \"generator\": \"MediaWiki 1.37.1\",\n    \"case\": \"first-letter\",\n    \"namespaces\": {\n      \"0\": {\n        \"case\": true,\n        \"title\": \"\"\n      },\n     \"6942\": {\n        \"case\": true,\n        \"title\": \"Data Accounting\"\n      }\n    },\n    \"version\": \"0.3.0\"\n  },\n  \"title\": \"Aqua\",\n  \"namespace\": 0,\n  \"chain_height\": 3\n}\n```\n\n## Get Revision Hashes\n`/get_revision_hashes/{verification_hash}`\nInput:\n- `verification_hash`\nReturns: the revision requested if it exists and/or a list of any newer\nrevision than the one requested.\n\nExample:\n\nAPI Request:\n`/get_revision_hashes/dffd37be12adc9e774b51aa712f7c5bfc09f48b083540d8ca55f91f317e8685bf09daf004f7c841e53732b8c7992de3f3b9b79350d13570c3b46803ba5119c26`\n\nAPI Response:\n```json\n[\n  \"dffd37be12adc9e774b51aa712f7c5bfc09f48b083540d8ca55f91f317e8685bf09daf004f7c841e53732b8c7992de3f3b9b79350d13570c3b46803ba5119c26\",\n  \"f483d7746f67e7099099bcfa8ea5a93148251c598857e8fad21ce842da62794467067802ef9e818d240cd3312a3346a769f363145a87bfc1eeae19fe8d21b328\",\n  \"2554fb53531f4de26ff3ad1fb8c61feea6ea47c3f13c4abda385c46ef8541361f7eee42433050281714a3900115f04fe52b5a8d781a71c4c439c5de6b91cbe3c\"\n]\n```\n\n## Get Revision\n`/get_revision/{verification_hash}`\nInput:\n- `verification_hash`\nReturns: the revision content together with its verification data\n\nExample: See example above.\n\nAPI Request: `/get_revision/dffd37be12adc9e774b51aa712f7c5bfc09f48b083540d8ca55f91f317e8685bf09daf004f7c841e53732b8c7992de3f3b9b79350d13570c3b46803ba5119c26`\n\n# Verification Process\n\nThe verification process is a redo of the verification data generation\nprocess, and additionally a comparison of their results.\n\n**Verification of Content**\n\nAll hashes are recalculated in a separate client implementation, and\ncompared with the ones sent via the API. If the data was not altered or\ncorrupted; nor was there a difference in the process to calculate the\nhash, they will match. This will create a high level of assurance that\nthe integrity and history of the portable hash chain in question has not been\naltered.\n\n**Verification of Account**\n\nWe cryptographically verify that the revision signature is indeed generated by the account specified in the verification data.\n\n**Verification of Time**\n\nTo verify that the witness event included in a revision is correct, a\nlookup and comparison of the `witness_event_verification_hash` on-chain is\nperformed and compared with the recalculated event.\n\n**Reference Implementation**\n\n|                                    |                                                                    |\n|------------------------------------|--------------------------------------------------------------------|\n| Command-Line-Verification-Tool     | [https://github.com/inblockio/aqua-verifier-js](https://github.com/inblockio/aqua-verifier-js) |\n| Chrome Extension Verification Tool | [https://github.com/inblockio/aqua-verifier-webextension](https://github.com/inblockio/aqua-verifier-webextension) |\n\n\n\n\n# Appendix\n\nThe following content is informational and not part of the\nspecification. It should help to better understand utility, context and\nservices which can be built on top of AQP.\n\n## Aqua Protocol v1.1 Changes\n\nMoving over to revision based verification. This allows:\n\n-   Bulk / in parallel verification; ensuring logarithmic verification\n    times, not linear increasing verification times with longer history.\n    In short: Much faster and scalable.\n-   Single revision and range verification (you want to verify a\n    specific part of the content-chain)\n    -   This is useful for verification of identity claims, where\n        trusted parties have signed the claim and for the validator it's\n        sufficient to see that signature.\n-   This allows direct verification after every edit via the Guardian.\n    This is the preparation in the interaction to provide services\n    through the [Guardian](guardian.md).\n-   Changing the design to include transclusions e.g. this allows the\n    verification of subpages via their stateful links /\n    revision_verification_hashes\n    -   This also allows the inclusion of media files in the\n        verification process\n    -   You can upload pictures, PDF's, Word-Documents and have them\n        automatically included in the aqua protocol and therefore in the\n        verified data-structure\n-   Introduction of verification_context which indicates if the previous\n    revision has signature or witness data, or if the current revision\n    has transcluded resources. This will build the correct verification\n    structure before verification.\n\nChange in the data-structure:\n\n-   when requesting a revision this is done via the\n    GetRevisionHandler.php\n-   the previous verification hash is always served as well\n-   if signature or witness data is present in the previous revision,\n    there is a flag (1/0) that this revision depends on the previous\n    revision\n-   transcluded resources will be added to the content hash for\n    verification\n\n## Data Accounting Protocol v1.2 \\[TBD\\]\n\n-   Generalization of the Signature-Metadata to inform which signature\n    method was used.\n    -   GPG Signatures\n    -   BTC Wallet Signatures\n    -   Ethereum Wallet Signatures\n    -   Done by: Displaying method used for signing, displaying\n        underlying architecture.\n-   Including Account as part of the verified data structure\n-   Defining maximum payload size per revision\n\n## Services on AQP (Not yet implemented, exploration)\n\n- AQP-DACS: [Domain](#domain) Access Control System\n -   See: [Guardian](guardian.md) (Acting similar to a WebApplication-Firewall)\n\n- ANS: Name-System and Name-Registry.\n - See [Aqua Name Resolution](aqua-name-resolution.md)\n\n- AQP-SSI: Self-Sovereign-Identity Protocol for [Identity\n    Claim](aqua-identity-protocol.md#self-issued-identity-claims) management\n - See [Aqua Identity Protocol](aqua-identity-protocol.md)\n\n- AQP Delegated Witnessing\n    - See [Delegated Witnessing](delegated-witnessing.md)\n\n## Similar Projects\n\nNone of the listed projects apply the concepts of versioning to their documents,\nthe concept of portable hash chains, the concept of personal data vaults for data\nmanagement in comparison with the AQP reference implementation.\n\nThis following list is not exhaustive:\n- [Surety](http://surety.com/)\n    The oldest blockchain-like timestamping service which has been publishing\n    to the New York Times since 1995.\n- [OpenTimestamp](https://opentimestamps.org/)\n    A free and open-source service provided by Peter Todd using the Bitcoin\n    network as a distributed cryptographic clock. The AQP MAY use OpenTimestamp\n    as a witness network.\n- [OriginStamp](https://originstamp.com/)\n    A company providing paid timestamping services for their customers.\n    It looks very similar to OpenTimestamps with open-source client libraries.\n- [Factom Protocol](https://www.factomprotocol.org/)\n    A service which creates an architecture with an extra layer of blockchain,\n    to provide an extra layer of trusted parties while providing their own\n    token. In our opinion, it introduces unnecessary complexity and\n    intermediaries as dependencies compared to the AQP.\n- [OpenAttestation](https://www.openattestation.com/)\n    An implementation of a timestamping service for document certification. One\n    application of it is for secure digital vaccination certificates by the\n    Singaporean government. They use the MetaMask Ethereum wallet for signing\n    documents making it the most similar project to AQP to our knowledge.\n\n## Blockchain Context\n\nDISCLAIMER: AQP is not a permissionless distributed ledger. In order for the\nAQP to be valuable and working, a single node implementation and single node\ndeployments are sufficient, and do not require the witnessing part. The AQP MAY\nbenefit from being published to a distributed ledger technology (DLT)) to\nachieve a witness event with high transaction security. AQP does not have a\ntoken nor is it distributing data by default.\n\nAs some concepts are very similar as those used in DLT's, please refer to the\nfollowing:\n\nA portable hash chain and its revisions are similar to a blockchain structure\nand its blocks, which has its own root hash and a set of transactions which\nare included inside.\n\n| **Blockchain Term** | **AQP Term**       | **Explanation**                                                                                                                                                                       |\n|----------------------|--------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\n| **Transaction**      | **Input Data**    | In a blockchain, it's a signed transaction. In AQP, it's all the input data provided to calculate the respective content slot hashes.                                                 |\n| **Block**            | **Revision**      | A block contains the Merklized list of transactions. A revision contains various hashed data inputs such as:                                                                          |\n|                      |                    | - Content slots                                                                                                                                                                       |\n|                      |                    | - Metadata data                                                                                                                                                                       |\n|                      |                    | - Signature data                                                                                                                                                                      |\n|                      |                    | - Witness data                                                                                                                                                                        |\n| **Genesis Block**    | **Genesis Revision** | The first object in the hash chain/blockchain.                                                                                                                                         |\n| **Blockchain**       | **Hash Chain**    | The hash chain is not distributed but resides by default only in the local PKC. It is not a distributed ledger and lacks a consensus algorithm to create a shared truth between nodes. |\n\n\n### A side note\n\nIt has not escaped our notice that the provided AQP improves the existing\nprocess of double-entry bookkeeping and provides a foundation for a new data\neconomy. This also allows to create unforgeable invoices which can be clearly\nattributed to its sender, avoiding fraud. This is one of many other use cases,\ne.g. providing trusted news via revision-controlled journalism.\n"])</script><script>self.__next_f.push([1,"30:T94e5,"])</script><script>self.__next_f.push([1,"\n\n|                  |                                            |\n|------------------|--------------------------------------------|\n| Current version: | Aqua Protocol v1.1 Specification           |\n| Author:          | Tim Bansemer, Publius Dirac                |\n| Date:            | 30.12.2021                                 |\n| Status:          | DRAFT / Experimental                       |\n| Implementation:  | [https://github.com/inblockio/micro-pkc](https://github.com/inblockio/micro-pkc)   |\n\n## Introduction\n\nThe Aqua Protocol (AQP) is a data accountability and exchange protocol between\nhosts in peer-to-peer environments. The AQP is used to realize the goal of\n[accounting for data origin and history](data-accounting.md). The description\nfor the proof-of-concept implementation of the AQP can be found in [this\npage](../implementations/reference-architecture.md).\n\n## Motivation\n\nIn today's world, there are no widely adopted trustless processes of checking if\ndata have been manipulated or corrupted, are attributed to the wrong author, or\nare attributed to the wrong time. Today's processes are dependent on centralized\ntrusted services which retain all power over governing the data.\n\nThere is a lack of transparency or ability to check if data have been altered\nby an unauthorized party. Additionally, consumers of data are incapable of\nverifying if centralized services have altered the data. This leads to a world\nof untrustworthy information in which we don't know how to conclude what is\ntrue.\n\nIn a world where every piece of information is a grain in a sandstorm, it has\nbecome impossible to navigate reality. In contrast, in a world where every\npiece of information is a fixed star in the sky for a lifetime, we are able to\nrelate and make sense of the information given. The Aqua Protocol (AQP) turns\ngrains of information into fixed stars of information.\n\nThe AQP adds a peer-to-peer layer of accountability, making it impossible to\nchange data unnoticed. AQP adds an essential line of defense against attacks on\ndata integrity, plagiarism, or misattribution. AQP is used to govern trusted\ndata, which can be quickly verified. This includes the verification of its\nintegrity and history, the verification of its account (the entity who creates\nor manipulates the data), and the verification of its existence and timestamp.\n\n    The Aqua Protocol provides trustworthiness to data by\n    securing data âœ… integrity, ðŸ” account and âŒš time.\n\nIn order to account data, it is necessary to track and verify its history. The\nAQP provides a globally unique resource identification (URI) for each revision\nof the verified data. This identifier is collision-free, and is referred the\nsame way across multiple interacting hosts.\n\n## Terminology\n\n## Wallet\nA wallet is a software for protecting and managing private cryptographic keys\n(of private-public key pairs) which are used to govern digital assets. This is\ndone by authorization of transactions via digital signatures or by initiating\ndecryption processes to access data.\n\nSee [Separation of Concerns](design-principles.md#separation-of-account-and-service).\n\n### Account\n\nWe are following Ethereum's account definition:\n\u003e In general, there are two types of accounts. Externally owned accounts,\n\u003e controlled by private keys. And contract accounts, controlled by their\n\u003e contract code\n-- [Ethereum Whitepaper](https://ethereum.org/en/whitepaper/#ethereum-accounts)\n\nIn general, we can't prove if an account owner is a person or a machine. With\nadvancements in AI, it will become increasingly difficult to prove that a human\nis a human. [Attempts are being made](https://www.proofofhumanity.id/) to\nincrease trustworthiness of accounts which fall short in questions of privacy\nand security as they make public claims. Traditional know your customer (KYC)\ncombined with the AQP and Aqua Identity Protocol (AIP) identification processes\ncan provide similar \"proof of being human\" which can be attested to an account.\nThis allows us to outsource the problem of identification, where we only focus\non unique accounts which are sufficient for data accounting independent of\nhumans or machines. Identity claims issued via the AIP will help to provide the\ncontext required to meaningfully interact between accounts.\n\nFor more on this topic, please read the [Aqua Identity\nProtocol](aqua-identity-protocol.md).\n\n### Domain\nA domain is a unique namespace attributed to an account. It allows us to manage\nservices and files within that namespace creating a domain of data governance\nAfter granted permissions, additional accounts can be added to share control\nover a domain or singular assets. To enforce boundaries of a domain, additional\nsoftware like the [Guardian](guardian.md) is required.\n\nE.g. by setting up the a data vault with your account it becomes your\ndomain of data governance.\n\n### Revision\n\nA revision is the smallest portable entity within the AQP. Multiple revisions\nform a single portable hash chain which is serialized in JSON format.\nThey have existed before in unsecured systems where multiple revisions form a\nfile which can be displayed as a page. The AQP adds the cryptographic harness\nto secure it. With presenting a portable hash chain, it is possible to track\nall incremental changes stored in each revision to understand the history of a\npage and how it came to be. This allows us to have version control on digital\nassets being able to restore earlier states and to relate to them. This allows\nus to have historical evidence of digital assets.\n\n### Page\n\nA page is a visible representation of a file containing multiple or a single\nrevision attributed to a shared origin. A page view could also be used to\ncreate a new revision by a used service which interfaces with the file for\nmanipulation. In AQP all revisions share a global URI hash to\nattribute them together called a genesis hash.\n\n### Transaction Security\n\nTransaction security is an economic measure of the level of integrity assurance\nfor a transaction. It is defined as the cost required to forge a transaction.\nThe transaction security can be increased by cryptographic security and by strong\nreplication of transactions. Public distributed ledger systems are highly suitable\nfor providing very high level of transaction security at the cost of privacy\nand immutability (data can't be changed or deleted). Today, public distributed\nledgers such as Bitcoin and Ethereum provide the highest level of transaction\nsecurity.\n\n### Data Asset\n\nData turns into a valuable asset if it is accounted for. In an accounted form\nit can be easily priced, exchanged or traded.\n\n### Data Vault\n\nSoftware used to store and manage data with an account. The software must apply\na secure architecture and measures for keeping data assets safe. This is\nachieved through encryption, strong authentication and restrictive access to\nkeep data private by default.\n\nSee [Design Principles / Separation of Account and\nService](design-principles.md#separation-of-account-and-service)\n\n\n### Witness\n\nWe define witnessing as the process of observing an event. A witness is judged\nby their capability to recollect and share an observed event. In other words,\nwitnessing is the process of storing input data for later playback to provide\ndata symmetry around an event.\n\n### Witness Network\n\nThe digital service in a distributed ledger or similar infrastructure which\nprovides transaction security and data symmetry for shared data within the\nnetwork. An example of a witness network would be Ethereum.\n\nE.g. Ethereum can be used to store a digital fingerprint of a domain snapshot\nof a data vault. A domain snapshot is the Merklized state of all witnessed hash\nchains being present in the data vault. It is required to pay the witness\nnetwork for its service. In the case of Ethereum, this is done using 'Ether'.\nThis in return allows the account owner to create an 'undeniable' proof that a\nspecific revision and the previous revisions within a hash chain has existed.\n\n### Portable Hash Chain\n\nA hash chain is a linked list where each node contains the cryptographic hash\nof the previous node content. A portable hash chain is a hash chain that can be\nmoved from one host to another.\n\n### Immutable Hyperlinks / Transclusions\nSee [Immutable Hyperlinks](immutable-hyperlinks.md).\n\n## Specification\n\nTo identify a revision with a unique fingerprint, we hash its content using\nthe SHA3-512 hashing function which always has a 128 characters long\noutput. This value can be used as a checksum to verify data integrity.\nThe checksum can then be entangled in a hash-chain to create an\nimmutable track record. We then calculate multiple properties associated\nwith the revision, in addition to its content checksum. In the next section,\nwe differentiate between REQUIRED and OPTIONAL properties for each\nrevision.\n\nAll hashes are based on\n[SHA3-512](https://nvlpubs.nist.gov/nistpubs/FIPS/NIST.FIPS.202.pdf).\nThis encryption standard is used to construct [portable hash\nchains](#portable-hash-chain), which are serializing of data and its history in\na form that can be verified, and independent of location. The portable hash\nchain can be fully or partially exchanged between hosts depending on the\napplication of the data. From here on, we refer the term \"portable hash chain\"\nas \"hash chain.\"\n\nIn order to implement the AQP, we need to utilize a software that is capable of\ngenerating portable hash chains and facilitating actions described in the\nAQP. We call those nodes which facilitate the Aqua Protocol 'Aqua Data\nVaults' which given their role should be implemented as a software with secure\narchitecture and measures for keeping data assets safe. This is achieved\nthrough encryption, authentication and restrictive access to keep data private\nby default.\n\n# Revision Verification Structure\n\nA revision is RECOMMENDED to be limited to 50 Megabytes to ensure that the verification can take\nplace on all imaginable clients which might have slow network connectivity, low\nmemory, low cpu performance. Once a revision is verified, the next one can be\nverified. Clients with more performance will be able to parallelize the\nverification. Larger files can be chunked to be placed in multiple revisions.\n\nA verified data structure is identified by its URI `verification_hash`\nand grouped by its `genesis_hash`. The first revision created will\ncreate a `verification_hash` which has a special meaning and is\nreferred to as the `genesis_hash`. All future revisions building upon\nthat first revision will be attributed to the `genesis_hash` as a unique\nURI for grouping the revisions. This allows us to understand if two\nrevisions are related without needing to verify the whole history of the\nhash chain.\n\n## Verification Hash\n`revision_verification_hash` is the hash sum over the string formed by the\nfollowing operation\n\n```\nrevision_verification_hash = calculate_hash_sum(\n    content_hash + metadata_hash +\n    signature_hash + witness_hash\n)\n```\nThe content_hash and metadata_hash are REQUIRED.\nThe signature_hash and witness_hash are OPTIONAL.\n\n## Content\n\nA content hash is the check sum for all content data fields which simplifies\nhash construction and the ability to identify data corruption in this part of\nthe verification structure.\n`content_hash` is the hash sum over the string formed by following operation:\n\n```\ncontentObj = {\n    \"main\": content,\n    \"extension_key_1\": content_extension_1,\n    \"extension_key_2\": content_extension_2,\n    ...,\n    \"extension_key_n\": content_extension_n,\n}\nsortedContenObj = sort_by_keys(contentObj)\ncontent_hash = calculate_hash_sum(\n    sortedContenObjValue_1,\n    sortedContenObjValue_2,\n    ...,\n    sortedContenObjValue_n,\n)\n```\nDescription:\n- content: The string input of the visible page using UTF-8 encoding schema.\n  REQUIRED.\n- content extensions: more data MAY be encapsulated in addition to the main\n  content. These could be a file, a stateful link, or a signature. The content\n  extensions are sorted alphabetically by their key names. OPTIONAL.\n- The `sort_by_keys` function sorts the content object elements by their keys\n  alphabetically. The JSON input MAY be a canonical JSON, in which the keys\n  order is already alphabetical, but we sort it always to ensure the order is\n  correct.\n\nTo see an example of `contentObj` of a revision, see the [example](#Example)\nsection,\n\n## Metadata\n\n```\nmetadata_hash = calculate_hash_sum(\n    domain_id + time_stamp + previous_verification_hash\n)\n```\n\nDescription:\n- metadata_hash: The check sum for all metadata data fields. It simplifies the\n  hash construction and the ability to identify data corrupton in this part of\n  the verification structure.\n- domain_id: 10 digits hexadecimal randomly generated to identify the host\n  system that runs the AQP service.\n- time_stamp: time-stamp of the current revision (decimal numbers\n  YYYYMMDDHHMMSS e.g. 20211128092608).\n- previous_verification_hash: previous_revision_verification_hash if present\n\n## Signature\n\nA signature in AQP is a cryptographic signature generated by public-private key\npair. The protocol should be abstract, where it will support 'Method' in later\niterations. This will allow us to use different types of implementations such\nas: PGP signatures, Ethereum, or Bitcoin\n[wallet](https://en.wikipedia.org/wiki/Cryptocurrency_wallet)'s signatures.\n\nIn this specification, we use the AQP reference implementation's signing\nmethod, which is via an Ethereum wallet.\n\n```\nsignature_hash = calculate_hash_sum(\n    signature + public_key\n)\n```\n\nThe signature is generated by a wallet signing the following message:\n\n```\nI sign the following page verification_hash:\" +[0x\u003crevision_verification_hash\u003e]\n```\n\nThe `revision_verification_hash` MUST NOT be signed twice by the same key, to\navoid information leakage of the private key.\n\nFor example, a wallet with an address of\n`0xa2026582b94feb9124231fbf7b052c39218954c2` and a public key of\n`0x041518581af65749b3ddc69889df3e5d229bc8ad79279a07ddeb368ade5e1592368c5ff3b69143d7a1e7cf64f7d0774a6724e6eaf138d318d07ddc30f6081ca89a`\nsigns the following message:\n```\nI sign the following page verification_hash:\" +[0x9dab72c7635043452958c4cc2902f48ef7c4ae437058280197c6a2736ab9635f799cbf190d9d07dd76589055a8ad64e61c6bebd1487994207d4cb7918b471f57]\n```\nwhich results in the following signature:\n```\n0x19b5697c4541509c1add3db9fc2f678b7b80325ebffd4d945ca00db5f8b3f98a142edbf9a7faa0a0c7ec4f10ae1b64cf2ea62ce3ee73ed2e37ce916d6bd016601c\n```\n\n## Witness\n\nWitnessing allows one to undeniably prove the existence of a dataset\n(represented as a portable hash chain). To complete the witnessing process, a\nDomain Snapshot is created. This is a collection of all revision hashes within\none domain. A Merkle tree is used to unify all hashes of the latest revisions\nof all portable hash chains within a domain into a single hash value.\n\nThe `witness_event_verification_hash` is written to the [Witness\nNetwork](#witness-network). The\n`witness_event_verification_hash` is then generated by using the\n`domain_snapshot_genesis_hash` and the `merkle_root` hash together. This\nallows the page snapshot itself to also be witnessed.\n\nA single revision which has been witnessed, will not store the whole Merkle\ntree, but only its relevant path to the Merkle root. Performing a Merkle proof\nmeans that its revision is included in the Merkle tree.\n\n```\nwitness_hash = calculate_hash_sum(\n    domain_snapshot_genesis_hash + merkle_root +\n    witness_network + witness_event_transaction_hash\n)\n```\n\nDescription:\n- `witness_hash`: the checksum for all signature data fields. It simplifies hash\n  construction and identifies data corruption in this part of the verification\n  structure.\n- `domain_snapshot_genesis_hash`: Refers to the URI of the page which stores the\n  whole Merkle tree of the witness event.\n- `merkle_root`: the root hash of the Merkle tree. The presence of the\n  Merkle tree allows for lazy verification to reduce required computational\n  steps for verification by skipping the Merkle proof as both datasets can be\n  entangled in the chain by a newer revision and therefore be immutable.\n- `witness_network`: specifies which witness network was used to store the\n  `witness_event`. The following structure shows an AQP hash chain with 3\n  revisions which wrote the `witness_event_verification_hash` into the\n  witness network.\n\nAdditional context:\n- relative-merkle-tree-proof: This provide the relative path with all required\n  hashes to verify the Merkle tree root from the first node which the\n  `verification_hash` of the revision as a starting point. \n- `witness_event_verification_hash`: It is calculated by taking the sha3-512\n  checksum of the `domain_snapshot_genesis_hash` and the `merkle_root` hash.\n  This ensures that the`domain_snapshot` itself will be witnessed.\n\n\n## Example\nThe following structure shows an AQP hash chain with 3 revisions:\n\n### 1st Revision\nThis revision features all REQUIRED (content, metadata) and all OPTIONAL\n(signature, witness) AQP data fields.\n```json\n{\n  \"verification_context\": {\n    \"has_previous_signature\": false,\n    \"has_previous_witness\": false\n  },\n  \"content\": {\n    \"rev_id\": 358,\n    \"content\": {\n      \"main\": \"First revision text\",\n      \"transclusion-hashes\": \"\"\n    },\n    \"content_hash\": \"ae188be061822074716b43925b3ffa90a03c530342be73c3440d8f022765ffebbb56c16552f13cd1ea61f876d2d892e0a73dcba5173fc47d371b4251d6c094da\"\n  },\n  \"metadata\": {\n    \"domain_id\": \"acfa9f682e\",\n    \"time_stamp\": \"20220116090401\",\n    \"previous_verification_hash\": \"\",\n    \"metadata_hash\": \"d1025fd8866d9367735d2f6617b3aa87401e08d726f311cdf834ea9540955bfc59b428676bce5d47d5fed381394ab2ed838c5eecfc9cb37313705374752c247d\",\n    \"verification_hash\": \"9dab72c7635043452958c4cc2902f48ef7c4ae437058280197c6a2736ab9635f799cbf190d9d07dd76589055a8ad64e61c6bebd1487994207d4cb7918b471f57\"\n  },\n  \"signature\": {\n    \"signature\": \"0x19b5697c4541509c1add3db9fc2f678b7b80325ebffd4d945ca00db5f8b3f98a142edbf9a7faa0a0c7ec4f10ae1b64cf2ea62ce3ee73ed2e37ce916d6bd016601c\",\n    \"public_key\": \"0x041518581af65749b3ddc69889df3e5d229bc8ad79279a07ddeb368ade5e1592368c5ff3b69143d7a1e7cf64f7d0774a6724e6eaf138d318d07ddc30f6081ca89a\",\n    \"wallet_address\": \"0xa2026582b94feb9124231fbf7b052c39218954c2\",\n    \"signature_hash\": \"cc42f40c4452a25f9ea48a97b6dfba6f69dec347db5c1adf25475b0b4a5da36af3fe48bf9f7ea0dda6bbed9367dc9c82834dbf8cc7f6220fd190cdb729d3f4ec\"\n  },\n  \"witness\": {\n    \"witness_event_id\": \"2\",\n    \"domain_id\": \"acfa9f682e\",\n    \"domain_snapshot_title\": \"Data Accounting:DomainSnapshot:b33afaf53ed3d245f0319d4997db2032de9d77791ae11f5125189815eef44f2fba9633bebe2e57bc5ea4b0424872ed02fa6aa9ad909f467726b536933bf715bf\",\n    \"witness_hash\": \"9707780cebcf6ed02b40bd7e6956b35ffe142a2b5f8cee15c703a652fa389eb118ef101e2f463e95663aa4013a42d9f1ce4a83eed3528b02bf98626e7599bbd8\",\n    \"domain_snapshot_genesis_hash\": \"b33afaf53ed3d245f0319d4997db2032de9d77791ae11f5125189815eef44f2fba9633bebe2e57bc5ea4b0424872ed02fa6aa9ad909f467726b536933bf715bf\",\n    \"merkle_root\": \"14f26d7dc0be77afff9131c03cab39a2fa9e1270c6face3fdc35b9b4b4ac4550d048c356a4713568c42411c3e7fe3553ec7b993c9bd7da97cb976e843d7e4d29\",\n    \"witness_event_verification_hash\": \"67e187411f1e514f232ae2858168da29b15ddfd07523e7a7618bfbf91c583f54fe8e850146120539a92a63ce6138f96599fb8a46ed492e428fe6fde9b9ea82ae\",\n    \"witness_network\": \"goerli\",\n    \"smart_contract_address\": \"0x45f59310ADD88E6d23ca58A0Fa7A55BEE6d2a611\",\n    \"witness_event_transaction_hash\": \"0x5900103adc09a789fd3bd7c23dfeff1ffce41dfba0a52b525ecc032e9279eb1f\",\n    \"sender_account_address\": \"0xa2026582b94feb9124231fbf7b052c39218954c2\",\n    \"source\": \"default\",\n    \"structured_merkle_proof\": [\n      {\n        \"witness_event_verification_hash\": \"67e187411f1e514f232ae2858168da29b15ddfd07523e7a7618bfbf91c583f54fe8e850146120539a92a63ce6138f96599fb8a46ed492e428fe6fde9b9ea82ae\",\n        \"depth\": \"4\",\n        \"left_leaf\": \"2554fb53531f4de26ff3ad1fb8c61feea6ea47c3f13c4abda385c46ef8541361f7eee42433050281714a3900115f04fe52b5a8d781a71c4c439c5de6b91cbe3c\",\n        \"right_leaf\": \"9dab72c7635043452958c4cc2902f48ef7c4ae437058280197c6a2736ab9635f799cbf190d9d07dd76589055a8ad64e61c6bebd1487994207d4cb7918b471f57\",\n        \"successor\": \"789e508ccb23fe053b628cebc19a2d32f34e6aa21e878e8611f7c14d891625c7b2e243b3c3105b98295333b9183e5ea272a055a84ab65ad927f7fd9c27aae48e\"\n      },\n      {\n        \"witness_event_verification_hash\": \"67e187411f1e514f232ae2858168da29b15ddfd07523e7a7618bfbf91c583f54fe8e850146120539a92a63ce6138f96599fb8a46ed492e428fe6fde9b9ea82ae\",\n        \"depth\": \"3\",\n        \"left_leaf\": \"789e508ccb23fe053b628cebc19a2d32f34e6aa21e878e8611f7c14d891625c7b2e243b3c3105b98295333b9183e5ea272a055a84ab65ad927f7fd9c27aae48e\",\n        \"right_leaf\": \"c16a966333cd22ff3497875a62202874221c1dae2e74b4351d058910f8d37160be480fce9aab4ec5e725beb695509f0fd65ae581568c6f1ae25eb4f1440b287f\",\n        \"successor\": \"80d7549af24e9a6bdfc32cefe0536d6528d665cc8e65859ef4cff87270f3db8d9b95aaecc167e10c9b5be9ce3ab36d8d880c3a518e1c5eb899ca9d95af24e9db\"\n      },\n      {\n        \"witness_event_verification_hash\": \"67e187411f1e514f232ae2858168da29b15ddfd07523e7a7618bfbf91c583f54fe8e850146120539a92a63ce6138f96599fb8a46ed492e428fe6fde9b9ea82ae\",\n        \"depth\": \"2\",\n        \"left_leaf\": \"80d7549af24e9a6bdfc32cefe0536d6528d665cc8e65859ef4cff87270f3db8d9b95aaecc167e10c9b5be9ce3ab36d8d880c3a518e1c5eb899ca9d95af24e9db\",\n        \"right_leaf\": \"f4e189a08b486253ea0a5cc7bf7150055e738898115c4caf00e45634d6925539d51852409d1fe9108469e9b15668b940f3369300bb27cc292d1fabc0c07cd593\",\n        \"successor\": \"e227dd97e5166364483b41f058f0d176e3a50a7510299038b09ae3aef2cbafb26c787afad82563a945b433fa2d1279af3535755235ab69d6e5ab089179177c14\"\n      },\n      {\n        \"witness_event_verification_hash\": \"67e187411f1e514f232ae2858168da29b15ddfd07523e7a7618bfbf91c583f54fe8e850146120539a92a63ce6138f96599fb8a46ed492e428fe6fde9b9ea82ae\",\n        \"depth\": \"1\",\n        \"left_leaf\": \"e227dd97e5166364483b41f058f0d176e3a50a7510299038b09ae3aef2cbafb26c787afad82563a945b433fa2d1279af3535755235ab69d6e5ab089179177c14\",\n        \"right_leaf\": \"780f3eb08f24022be4463be141bcda6a33a157cd0fd44cf209312b8427ac4036637a63d239526555128a4e7f4bb588ebfdbd8a8cc7d797038e29b852a4fae26c\",\n        \"successor\": \"f3bd4e82b1e3d304005a7ddf4ab940f3e4e1cf099ca1c058454c431ed3feb0674c044e53150eb5691073ba58a3491565f72f6a6c2a24562ea080b569b4496c9f\"\n      },\n      {\n        \"witness_event_verification_hash\": \"67e187411f1e514f232ae2858168da29b15ddfd07523e7a7618bfbf91c583f54fe8e850146120539a92a63ce6138f96599fb8a46ed492e428fe6fde9b9ea82ae\",\n        \"depth\": \"0\",\n        \"left_leaf\": \"f3bd4e82b1e3d304005a7ddf4ab940f3e4e1cf099ca1c058454c431ed3feb0674c044e53150eb5691073ba58a3491565f72f6a6c2a24562ea080b569b4496c9f\",\n        \"right_leaf\": \"4a0c120fbdd6219b774eb2cb2076f4050d606b621e384c3ec645be0e5dbcdac3132f1f2acb531fa5ff62429907b77cf8d29a760be3765eb4decd83949a2925f8\",\n        \"successor\": \"14f26d7dc0be77afff9131c03cab39a2fa9e1270c6face3fdc35b9b4b4ac4550d048c356a4713568c42411c3e7fe3553ec7b993c9bd7da97cb976e843d7e4d29\"\n      }\n    ]\n  }\n}\n```\n\n### 2nd Revision\nThis revision entangles all data fields of the previous revision. As the\ncalculation of the revision_verification hash depends on the revision of the\nprevious revision, it is shown in verification_context.\n\n```json\n{\n  \"verification_context\": {\n    \"has_previous_signature\": true,\n    \"has_previous_witness\": true\n  },\n  \"content\": {\n    \"rev_id\": 362,\n    \"content\": {\n      \"main\": \"First revision text\",\n      \"signature-slot\": \"[\\n    {\\n        \\\"user\\\": \\\"0xa2026582b94feb9124231fbf7b052c39218954c2\\\",\\n        \\\"timestamp\\\": \\\"20220116090439\\\"\\n    }\\n]\",\n      \"transclusion-hashes\": \"\"\n    },\n    \"content_hash\": \"9732084a45fd344d63687ccf9b5cd942f99ffe1debd11622b05d0cd24a2de3e5608d5f5121bdd7559c0a2d39067f9258c4f9612e44728df2e8d9026a88ed650c\"\n  },\n  \"metadata\": {\n    \"domain_id\": \"acfa9f682e\",\n    \"time_stamp\": \"20220116090439\",\n    \"previous_verification_hash\": \"9dab72c7635043452958c4cc2902f48ef7c4ae437058280197c6a2736ab9635f799cbf190d9d07dd76589055a8ad64e61c6bebd1487994207d4cb7918b471f57\",\n    \"metadata_hash\": \"8df483539e2f81e64c9b9df0c7e13ae7778947b5defef860fbaed1260eade794999839bb254ea5006a5d4b6a89a37980ab576dc546d6336518d65b80bf2a5cb5\",\n    \"verification_hash\": \"296347471b33f3d3c69cc6e0699d80b4cb68ffc79c3ecce96beb659fa324fab1de7a888932fbfb7c60bb8cc83c9445ce15532987a7b59440cada649681618293\"\n  },\n  \"signature\": {\n    \"signature\": \"\",\n    \"public_key\": \"\",\n    \"wallet_address\": \"\",\n    \"signature_hash\": \"\"\n  },\n  \"witness\": null\n}\n```\n\n### 3rd Revision\nThis revision features a transclusion-hash for an immutable link to another\nrevision.\n\n```json\n{\n  \"verification_context\": {\n    \"has_previous_signature\": false,\n    \"has_previous_witness\": false\n  },\n  \"content\": {\n    \"rev_id\": 363,\n    \"content\": {\n      \"main\": \"First revision text\\n\\n[[File:Logo_inblockio.png]]\",\n      \"signature-slot\": \"[\\n    {\\n        \\\"user\\\": \\\"0xa2026582b94feb9124231fbf7b052c39218954c2\\\",\\n        \\\"timestamp\\\": \\\"20220116090439\\\"\\n    }\\n]\",\n      \"transclusion-hashes\": \"[{\\\"dbkey\\\":\\\"Logo_inblockio.png\\\",\\\"ns\\\":6,\\\"verification_hash\\\":\\\"9b2b3cafb90a07433a2b61885a9e64641a99b1e9024cf53b640501d3706b142fed7bc372300973137ef9d92584fac70976c3889d5610abcfe1f187c248263a56\\\"}]\"\n    },\n    \"content_hash\": \"14b8256ccd5fa1d883983317f92f428eadb52f699f476b9be69f14c6892b41979ff7b5b7a7a978177985d6aaa0bcfd9857a2646aedc4cbb3299373daa647814b\"\n  },\n  \"metadata\": {\n    \"domain_id\": \"acfa9f682e\",\n    \"time_stamp\": \"20220116090556\",\n    \"previous_verification_hash\": \"296347471b33f3d3c69cc6e0699d80b4cb68ffc79c3ecce96beb659fa324fab1de7a888932fbfb7c60bb8cc83c9445ce15532987a7b59440cada649681618293\",\n    \"metadata_hash\": \"09688c05a83bb74bb255fb0c571cb6314b65f5b7f00750547a2c43f4959d4702ae2aec019c6fb4b0e5d23adea87fd456b0eaffc6ae271163a1fa45b4bae54230\",\n    \"verification_hash\": \"b35894d74dfcf8b41ff95eed97705e1acf9081021e0d478d8645cb04b8a0b4a013ee8f7fb6e140d149f2c92f20bba984fad5535938a5e36ae6a799a18343b806\"\n  },\n  \"signature\": {\n    \"signature\": \"\",\n    \"public_key\": \"\",\n    \"wallet_address\": \"\",\n    \"signature_hash\": \"\"\n  },\n  \"witness\": null\n}\n```\n\n# API Endpoints\n\nThe AQP provides 3 API endpoints which return data from a host that runs the\nAQP:\n\n## Get Hash Chain\n`/get_hash_chain_info/{identifier}?identifier=\u003ctitle or genesis hash\u003e`  \nInput:\n- `identifier_type`: the value must either be \"title\" or \"genesis_hash\"\n- `identifier`: the title or genesis_hash string, e.g. \"Main Page\" or \"02c3c2...215d8d\"\nReturns: all context for the requested hash_chain.\n\nExample:\n\nAPI Request:\n`/get_hash_chain_info/genesis_hash?identifier=dffd37be12adc9e774b51aa712f7c5bfc09f48b083540d8ca55f91f317e8685bf09daf004f7c841e53732b8c7992de3f3b9b79350d13570c3b46803ba5119c26`\n\nAPI Response:\n```json\n{\n  \"genesis_hash\": \"dffd37be12adc9e774b51aa712f7c5bfc09f48b083540d8ca55f91f317e8685bf09daf004f7c841e53732b8c7992de3f3b9b79350d13570c3b46803ba5119c26\",\n  \"domain_id\": \"acfa9f682e\",\n  \"latest_verification_hash\": \"2554fb53531f4de26ff3ad1fb8c61feea6ea47c3f13c4abda385c46ef8541361f7eee42433050281714a3900115f04fe52b5a8d781a71c4c439c5de6b91cbe3c\",\n  \"site_info\": {\n    \"sitename\": \"Personal Knowledge Container\",\n    \"dbname\": \"my_wiki\",\n    \"base\": \"http://localhost:9352/index.php/Aqua\",\n    \"generator\": \"MediaWiki 1.37.1\",\n    \"case\": \"first-letter\",\n    \"namespaces\": {\n      \"0\": {\n        \"case\": true,\n        \"title\": \"\"\n      },\n     \"6942\": {\n        \"case\": true,\n        \"title\": \"Data Accounting\"\n      }\n    },\n    \"version\": \"0.3.0\"\n  },\n  \"title\": \"Aqua\",\n  \"namespace\": 0,\n  \"chain_height\": 3\n}\n```\n\n## Get Revision Hashes\n`/get_revision_hashes/{verification_hash}`\nInput:\n- `verification_hash`\nReturns: the revision requested if it exists and/or a list of any newer\nrevision than the one requested.\n\nExample:\n\nAPI Request:\n`/get_revision_hashes/dffd37be12adc9e774b51aa712f7c5bfc09f48b083540d8ca55f91f317e8685bf09daf004f7c841e53732b8c7992de3f3b9b79350d13570c3b46803ba5119c26`\n\nAPI Response:\n```json\n[\n  \"dffd37be12adc9e774b51aa712f7c5bfc09f48b083540d8ca55f91f317e8685bf09daf004f7c841e53732b8c7992de3f3b9b79350d13570c3b46803ba5119c26\",\n  \"f483d7746f67e7099099bcfa8ea5a93148251c598857e8fad21ce842da62794467067802ef9e818d240cd3312a3346a769f363145a87bfc1eeae19fe8d21b328\",\n  \"2554fb53531f4de26ff3ad1fb8c61feea6ea47c3f13c4abda385c46ef8541361f7eee42433050281714a3900115f04fe52b5a8d781a71c4c439c5de6b91cbe3c\"\n]\n```\n\n## Get Revision\n`/get_revision/{verification_hash}`\nInput:\n- `verification_hash`\nReturns: the revision content together with its verification data\n\nExample: See example above.\n\nAPI Request: `/get_revision/dffd37be12adc9e774b51aa712f7c5bfc09f48b083540d8ca55f91f317e8685bf09daf004f7c841e53732b8c7992de3f3b9b79350d13570c3b46803ba5119c26`\n\n# Verification Process\n\nThe verification process is a redo of the verification data generation\nprocess, and additionally a comparison of their results.\n\n**Verification of Content**\n\nAll hashes are recalculated in a separate client implementation, and\ncompared with the ones sent via the API. If the data was not altered or\ncorrupted; nor was there a difference in the process to calculate the\nhash, they will match. This will create a high level of assurance that\nthe integrity and history of the portable hash chain in question has not been\naltered.\n\n**Verification of Account**\n\nWe cryptographically verify that the revision signature is indeed generated by the account specified in the verification data.\n\n**Verification of Time**\n\nTo verify that the witness event included in a revision is correct, a\nlookup and comparison of the `witness_event_verification_hash` on-chain is\nperformed and compared with the recalculated event.\n\n**Reference Implementation**\n\n|                                    |                                                                    |\n|------------------------------------|--------------------------------------------------------------------|\n| Command-Line-Verification-Tool     | [https://github.com/inblockio/aqua-verifier-js](https://github.com/inblockio/aqua-verifier-js) |\n| Chrome Extension Verification Tool | [https://github.com/inblockio/aqua-verifier-webextension](https://github.com/inblockio/aqua-verifier-webextension) |\n\n\n\n\n# Appendix\n\nThe following content is informational and not part of the\nspecification. It should help to better understand utility, context and\nservices which can be built on top of AQP.\n\n## Aqua Protocol v1.1 Changes\n\nMoving over to revision based verification. This allows:\n\n-   Bulk / in parallel verification; ensuring logarithmic verification\n    times, not linear increasing verification times with longer history.\n    In short: Much faster and scalable.\n-   Single revision and range verification (you want to verify a\n    specific part of the content-chain)\n    -   This is useful for verification of identity claims, where\n        trusted parties have signed the claim and for the validator it's\n        sufficient to see that signature.\n-   This allows direct verification after every edit via the Guardian.\n    This is the preparation in the interaction to provide services\n    through the [Guardian](guardian.md).\n-   Changing the design to include transclusions e.g. this allows the\n    verification of subpages via their stateful links /\n    revision_verification_hashes\n    -   This also allows the inclusion of media files in the\n        verification process\n    -   You can upload pictures, PDF's, Word-Documents and have them\n        automatically included in the aqua protocol and therefore in the\n        verified data-structure\n-   Introduction of verification_context which indicates if the previous\n    revision has signature or witness data, or if the current revision\n    has transcluded resources. This will build the correct verification\n    structure before verification.\n\nChange in the data-structure:\n\n-   when requesting a revision this is done via the\n    GetRevisionHandler.php\n-   the previous verification hash is always served as well\n-   if signature or witness data is present in the previous revision,\n    there is a flag (1/0) that this revision depends on the previous\n    revision\n-   transcluded resources will be added to the content hash for\n    verification\n\n## Data Accounting Protocol v1.2 \\[TBD\\]\n\n-   Generalization of the Signature-Metadata to inform which signature\n    method was used.\n    -   GPG Signatures\n    -   BTC Wallet Signatures\n    -   Ethereum Wallet Signatures\n    -   Done by: Displaying method used for signing, displaying\n        underlying architecture.\n-   Including Account as part of the verified data structure\n-   Defining maximum payload size per revision\n\n## Services on AQP (Not yet implemented, exploration)\n\n- AQP-DACS: [Domain](#domain) Access Control System\n -   See: [Guardian](guardian.md) (Acting similar to a WebApplication-Firewall)\n\n- ANS: Name-System and Name-Registry.\n - See [Aqua Name Resolution](aqua-name-resolution.md)\n\n- AQP-SSI: Self-Sovereign-Identity Protocol for [Identity\n    Claim](aqua-identity-protocol.md#self-issued-identity-claims) management\n - See [Aqua Identity Protocol](aqua-identity-protocol.md)\n\n- AQP Delegated Witnessing\n    - See [Delegated Witnessing](delegated-witnessing.md)\n\n## Similar Projects\n\nNone of the listed projects apply the concepts of versioning to their documents,\nthe concept of portable hash chains, the concept of personal data vaults for data\nmanagement in comparison with the AQP reference implementation.\n\nThis following list is not exhaustive:\n- [Surety](http://surety.com/)\n    The oldest blockchain-like timestamping service which has been publishing\n    to the New York Times since 1995.\n- [OpenTimestamp](https://opentimestamps.org/)\n    A free and open-source service provided by Peter Todd using the Bitcoin\n    network as a distributed cryptographic clock. The AQP MAY use OpenTimestamp\n    as a witness network.\n- [OriginStamp](https://originstamp.com/)\n    A company providing paid timestamping services for their customers.\n    It looks very similar to OpenTimestamps with open-source client libraries.\n- [Factom Protocol](https://www.factomprotocol.org/)\n    A service which creates an architecture with an extra layer of blockchain,\n    to provide an extra layer of trusted parties while providing their own\n    token. In our opinion, it introduces unnecessary complexity and\n    intermediaries as dependencies compared to the AQP.\n- [OpenAttestation](https://www.openattestation.com/)\n    An implementation of a timestamping service for document certification. One\n    application of it is for secure digital vaccination certificates by the\n    Singaporean government. They use the MetaMask Ethereum wallet for signing\n    documents making it the most similar project to AQP to our knowledge.\n\n## Blockchain Context\n\nDISCLAIMER: AQP is not a permissionless distributed ledger. In order for the\nAQP to be valuable and working, a single node implementation and single node\ndeployments are sufficient, and do not require the witnessing part. The AQP MAY\nbenefit from being published to a distributed ledger technology (DLT)) to\nachieve a witness event with high transaction security. AQP does not have a\ntoken nor is it distributing data by default.\n\nAs some concepts are very similar as those used in DLT's, please refer to the\nfollowing:\n\nA portable hash chain and its revisions are similar to a blockchain structure\nand its blocks, which has its own root hash and a set of transactions which\nare included inside.\n\n| **Blockchain Term** | **AQP Term**       | **Explanation**                                                                                                                                                                       |\n|----------------------|--------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\n| **Transaction**      | **Input Data**    | In a blockchain, it's a signed transaction. In AQP, it's all the input data provided to calculate the respective content slot hashes.                                                 |\n| **Block**            | **Revision**      | A block contains the Merklized list of transactions. A revision contains various hashed data inputs such as:                                                                          |\n|                      |                    | - Content slots                                                                                                                                                                       |\n|                      |                    | - Metadata data                                                                                                                                                                       |\n|                      |                    | - Signature data                                                                                                                                                                      |\n|                      |                    | - Witness data                                                                                                                                                                        |\n| **Genesis Block**    | **Genesis Revision** | The first object in the hash chain/blockchain.                                                                                                                                         |\n| **Blockchain**       | **Hash Chain**    | The hash chain is not distributed but resides by default only in the local PKC. It is not a distributed ledger and lacks a consensus algorithm to create a shared truth between nodes. |\n\n\n### A side note\n\nIt has not escaped our notice that the provided AQP improves the existing\nprocess of double-entry bookkeeping and provides a foundation for a new data\neconomy. This also allows to create unforgeable invoices which can be clearly\nattributed to its sender, avoiding fraud. This is one of many other use cases,\ne.g. providing trusted news via revision-controlled journalism.\n"])</script><script>self.__next_f.push([1,"12:[\"$\",\"$14\",null,{\"fallback\":[\"$\",\"$L1a\",null,{}],\"children\":[[\"$\",\"$L1b\",null,{\"header\":[\"$\",\"$L1c\",null,{\"currentVersion\":\"v1.1.0\",\"versions\":[\"v1.1.0\",\"v2.0.2\",\"v3.0.2\",\"v4.0.0\"],\"config\":\"$0:f:0:1:0:props:children:1:props:children:props:children:props:config\"}],\"docs\":[{\"slug\":\"en/data-accounting\",\"filePath\":\"data-accounting\",\"title\":\"Data Accounting\",\"meta\":{\"title\":\"Data Accounting\",\"linkTitle\":\"Data Accounting\",\"weight\":5,\"sidebar_position\":5,\"description\":\"Introduces the concept of Data Accounting\\n\",\"content\":\"$1d\",\"reading_time\":3,\"word_count\":525,\"locale\":\"en\"},\"content\":\"$1e\"},{\"slug\":\"en/data-governance\",\"filePath\":\"data-governance\",\"title\":\"Data Governance\",\"meta\":{\"title\":\"Data Governance\",\"linkTitle\":\"Data Governance\",\"weight\":6,\"sidebar_position\":6,\"description\":\"Introduces the concept of Data Governance\\n\",\"content\":\"$1f\",\"reading_time\":4,\"word_count\":643,\"locale\":\"en\"},\"content\":\"$20\"},{\"slug\":\"en/delegated-witnessing\",\"filePath\":\"delegated-witnessing\",\"title\":\"Delegated Witnessing\",\"meta\":{\"title\":\"Delegated Witnessing\",\"linkTitle\":\"Delegated Witnessing\",\"weight\":7,\"sidebar_position\":7,\"description\":\"Describes the process of sending domain snapshots to remote data vaults.\\n\",\"content\":\"\\nDescribes the process of sending a domain snapshot to a remote data vault for\\nwitnessing. The domain snapshot is then included in the witnessing event and\\nsent back to its original data vault. This makes the domain snapshot behave\\nlike an ordinary portable hash chain that can be witnessed. The relative path\\nof the Merkle proof is used as a prefix for all other included portable hash\\nchains included in the domain snapshot.\\n\",\"reading_time\":1,\"word_count\":73,\"locale\":\"en\"},\"content\":\"\\nDescribes the process of sending a domain snapshot to a remote data vault for\\nwitnessing. The domain snapshot is then included in the witnessing event and\\nsent back to its original data vault. This makes the domain snapshot behave\\nlike an ordinary portable hash chain that can be witnessed. The relative path\\nof the Merkle proof is used as a prefix for all other included portable hash\\nchains included in the domain snapshot.\\n\"},{\"slug\":\"en/design-principles\",\"filePath\":\"design-principles\",\"title\":\"Design Principles\",\"meta\":{\"title\":\"Design Principles\",\"linkTitle\":\"Design Principles\",\"weight\":8,\"sidebar_position\":8,\"description\":\"Lists the design principles underlying our reference implementation\\n\",\"content\":\"$21\",\"reading_time\":4,\"word_count\":704,\"locale\":\"en\"},\"content\":\"$22\"},{\"slug\":\"en/guardian\",\"filePath\":\"guardian\",\"title\":\"Guardian\",\"meta\":{\"title\":\"Guardian\",\"linkTitle\":\"Guardian\",\"weight\":9,\"sidebar_position\":9,\"description\":\"Shows access and transport layer logic used to interconnect data vaults\\n\",\"content\":\"$23\",\"reading_time\":15,\"word_count\":2811,\"locale\":\"en\"},\"content\":\"$24\"},{\"slug\":\"en/immutable-hyperlinks\",\"filePath\":\"immutable-hyperlinks\",\"title\":\"Immutable Hyperlinks\",\"meta\":{\"title\":\"Immutable Hyperlinks\",\"linkTitle\":\"Immutable Hyperlinks\",\"weight\":10,\"sidebar_position\":10,\"description\":\"Shows how the Aqua URI's can be used as immutable links.\\n\",\"content\":\"$25\",\"reading_time\":3,\"word_count\":454,\"locale\":\"en\"},\"content\":\"$26\"},{\"slug\":\"en/assurance-levels\",\"filePath\":\"assurance-levels\",\"title\":\"Assurance Levels (AAL)\",\"meta\":{\"title\":\"Assurance Levels (AAL)\",\"linkTitle\":\"Assurance Levels\",\"description\":\"Highlights the levels of assurances you can receive by using technology provided in the Aqua reference implementation. \\n\",\"content\":\"$27\",\"reading_time\":2,\"word_count\":285,\"locale\":\"en\"},\"content\":\"$28\"},{\"slug\":\"en/concepts\",\"filePath\":\"concepts\",\"title\":\"Concepts \",\"meta\":{\"title\":\"Concepts \",\"description\":\"Explains the technologies selected for the reference implementation and why we selected them.\",\"content\":\"$29\",\"reading_time\":11,\"word_count\":2055,\"locale\":\"en\"},\"content\":\"$2a\"},{\"slug\":\"en/identity-protocol\",\"filePath\":\"identity-protocol\",\"title\":\"Identity Protocol\",\"meta\":{\"title\":\"Identity Protocol\",\"description\":\"The following text has the goal to highlight the possibility to build identity protocol functionality on top of the core verifiction protocol. This part of the project is in early stages and not mature.\\n\",\"content\":\"$2b\",\"reading_time\":13,\"word_count\":2566,\"locale\":\"en\"},\"content\":\"$2c\"},{\"slug\":\"en/introduction\",\"filePath\":\"introduction\",\"title\":\"Aqua Protocol Version 1\",\"meta\":{\"title\":\"Aqua Protocol Version 1\",\"description\":\"An overview of verision 1 of the Aqua protocol\",\"content\":\"$2d\",\"reading_time\":5,\"word_count\":872,\"locale\":\"en\"},\"content\":\"$2e\"},{\"slug\":\"en/name-resolution\",\"filePath\":\"name-resolution\",\"title\":\"Aqua Name Resolution (ANS)\",\"meta\":{\"title\":\"Aqua Name Resolution (ANS)\",\"description\":\"ANS is used to hashes of various types to human readable names\",\"content\":\"\\nANS is used to resolve hashes of various types to human readable names.\\n\\nThe following hashes are resolved by the ANS:\\n* wallet-addresses to names, organisations an aliases.\\n* genesis_hashes to titles.\\n* domain_ids to registered endpoints of that domain.\\n\\nSee the [reference implementation](https://github.com/inblockio/aqua-verifier-webextension/blob/main/src/name_resolver.ts).\\n\",\"reading_time\":1,\"word_count\":44,\"locale\":\"en\"},\"content\":\"\\nANS is used to resolve hashes of various types to human readable names.\\n\\nThe following hashes are resolved by the ANS:\\n* wallet-addresses to names, organisations an aliases.\\n* genesis_hashes to titles.\\n* domain_ids to registered endpoints of that domain.\\n\\nSee the [reference implementation](https://github.com/inblockio/aqua-verifier-webextension/blob/main/src/name_resolver.ts).\\n\"},{\"slug\":\"en/whitepaper\",\"filePath\":\"whitepaper\",\"title\":\"Whitepaper\",\"meta\":{\"title\":\"Whitepaper\",\"linkTitle\":\"Whitepaper\",\"description\":\"High level outline of Aqua Protocol (AQP) specification\",\"redirect_from\":[\"/docs/v1/Protocol/whitepaper\",\"/docs/v1.0.0/whitepaper\",\"/docs/protocol/whitepaper\",\"/docs/protocol/whitepaper/\"],\"content\":\"$2f\",\"reading_time\":20,\"word_count\":3993,\"locale\":\"en\"},\"content\":\"$30\"}],\"version\":\"v1.1.0\",\"children\":\"$L31\",\"toc\":\"$L32\",\"config\":\"$0:f:0:1:0:props:children:1:props:children:props:children:props:config\",\"currentPageTabGroup\":\"$undefined\"}],\"$L33\",\"$L34\",\"$L35\"]}]\n"])</script><script>self.__next_f.push([1,"39:I[839694,[\"/_next/static/chunks/a423cf2782ee23a6.js\",\"/_next/static/chunks/150ebe81571675a9.js\",\"/_next/static/chunks/4421a3eabdff5f47.js\"],\"TableOfContents\"]\n3a:I[839694,[\"/_next/static/chunks/a423cf2782ee23a6.js\",\"/_next/static/chunks/150ebe81571675a9.js\",\"/_next/static/chunks/4421a3eabdff5f47.js\"],\"MdxHotReload\"]\n3b:I[839694,[\"/_next/static/chunks/a423cf2782ee23a6.js\",\"/_next/static/chunks/150ebe81571675a9.js\",\"/_next/static/chunks/4421a3eabdff5f47.js\"],\"HotReloadIndicator\"]\n3c:I[839694,[\"/_next/static/chunks/a423cf2782ee23a6.js\",\"/_next/static/chunks/150ebe81571675a9.js\",\"/_next/static/chunks/4421a3eabdff5f47.js\"],\"DevModeBadge\"]\n"])</script><script>self.__next_f.push([1,"31:[\"$\",\"article\",null,{\"className\":\"flex-1 min-w-0\",\"children\":[[\"$\",\"nav\",null,{\"className\":\"flex items-center gap-2 text-sm text-muted-foreground mb-4\",\"aria-label\":\"Breadcrumb\",\"children\":[[\"$\",\"div\",\"/docs/v1.1.0/en\",{\"className\":\"flex items-center gap-2\",\"children\":[false,[\"$\",\"$L7\",null,{\"href\":\"/docs/v1.1.0/en\",\"className\":\"hover:text-foreground transition-colors\",\"children\":\"Docs\"}]]}],[\"$\",\"div\",\"/docs/v1.1.0/en/immutable-hyperlinks\",{\"className\":\"flex items-center gap-2\",\"children\":[[\"$\",\"svg\",null,{\"ref\":\"$undefined\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":24,\"height\":24,\"viewBox\":\"0 0 24 24\",\"fill\":\"none\",\"stroke\":\"currentColor\",\"strokeWidth\":2,\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"className\":\"lucide lucide-chevron-right h-4 w-4\",\"children\":[[\"$\",\"path\",\"mthhwq\",{\"d\":\"m9 18 6-6-6-6\"}],\"$undefined\"]}],[\"$\",\"span\",null,{\"className\":\"text-foreground font-medium\",\"children\":\"Immutable Hyperlinks\"}]]}]]}],false,[\"$\",\"div\",null,{\"className\":\"mb-8\",\"children\":[[\"$\",\"h1\",null,{\"className\":\"text-4xl font-bold tracking-tight mb-3 text-foreground\",\"children\":\"Immutable Hyperlinks\"}],[\"$\",\"p\",null,{\"className\":\"text-lg text-muted-foreground leading-relaxed\",\"children\":\"Shows how the Aqua URI's can be used as immutable links.\\n\"}]]}],[\"$\",\"div\",null,{\"className\":\"flex flex-wrap items-center gap-4 text-sm text-muted-foreground border-b border-border pb-4 mb-6\",\"children\":[[\"$\",\"div\",null,{\"className\":\"flex items-center gap-1.5\",\"children\":[[\"$\",\"svg\",null,{\"ref\":\"$undefined\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":24,\"height\":24,\"viewBox\":\"0 0 24 24\",\"fill\":\"none\",\"stroke\":\"currentColor\",\"strokeWidth\":2,\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"className\":\"lucide lucide-clock h-4 w-4\",\"children\":[[\"$\",\"circle\",\"1mglay\",{\"cx\":\"12\",\"cy\":\"12\",\"r\":\"10\"}],[\"$\",\"polyline\",\"68esgv\",{\"points\":\"12 6 12 12 16 14\"}],\"$undefined\"]}],[\"$\",\"span\",null,{\"children\":[3,\" min read\"]}]]}],\"$undefined\",false]}],[\"$\",\"div\",null,{\"className\":\"prose prose-slate dark:prose-invert max-w-none prose-headings:scroll-mt-24 prose-headings:font-semibold prose-h1:text-4xl prose-h2:text-3xl prose-h2:mt-12 prose-h2:mb-4 prose-h3:text-2xl prose-h3:mt-8 prose-h3:mb-3 prose-p:text-base prose-p:leading-7 prose-p:text-muted-foreground prose-p:mb-4 prose-a:font-normal prose-a:transition-all prose-code:text-primary prose-code:bg-muted/50 prose-code:px-1.5 prose-code:py-0.5 prose-code:rounded-md prose-code:text-[13px] prose-code:font-mono prose-code:border prose-code:border-border/50 prose-code:before:content-none prose-code:after:content-none prose-pre:bg-transparent prose-pre:p-0 prose-ul:list-disc prose-ul:list-inside prose-ul:space-y-2 prose-ul:mb-4 prose-ol:list-decimal prose-ol:list-inside prose-ol:space-y-2 prose-ol:mb-4 prose-li:leading-7 prose-li:text-muted-foreground prose-strong:text-foreground prose-strong:font-semibold\",\"children\":\"$L36\"}],\"$undefined\",[\"$\",\"div\",null,{\"className\":\"mt-12 pt-6 border-t border-border flex items-center justify-between\",\"children\":[[\"$\",\"a\",null,{\"href\":\"https://github.com/inblockio/aqua-docs/edit/main/docs/v1.1.0/en/immutable-hyperlinks.mdx\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"className\":\"flex items-center gap-2 text-sm text-muted-foreground hover:text-foreground transition-colors\",\"children\":[[\"$\",\"svg\",null,{\"ref\":\"$undefined\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":24,\"height\":24,\"viewBox\":\"0 0 24 24\",\"fill\":\"none\",\"stroke\":\"currentColor\",\"strokeWidth\":2,\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"className\":\"lucide lucide-file-pen h-4 w-4\",\"children\":[[\"$\",\"path\",\"1couwa\",{\"d\":\"M12.5 22H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v9.5\"}],[\"$\",\"path\",\"tnqrlb\",{\"d\":\"M14 2v4a2 2 0 0 0 2 2h4\"}],[\"$\",\"path\",\"1y4qbx\",{\"d\":\"M13.378 15.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z\"}],\"$undefined\"]}],\"Edit this page\"]}],[\"$\",\"a\",null,{\"href\":\"https://github.com/inblockio/issues/new\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"className\":\"flex items-center gap-2 text-sm text-muted-foreground hover:text-foreground transition-colors\",\"children\":[\"$L37\",\"Report an issue\"]}]]}],\"$L38\"]}]\n"])</script><script>self.__next_f.push([1,"32:[\"$\",\"$L39\",null,{\"items\":[],\"config\":\"$0:f:0:1:0:props:children:1:props:children:props:children:props:config\"}]\n33:[\"$\",\"$L3a\",null,{}]\n34:[\"$\",\"$L3b\",null,{}]\n35:[\"$\",\"$L3c\",null,{}]\n"])</script><script>self.__next_f.push([1,"37:[\"$\",\"svg\",null,{\"ref\":\"$undefined\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":24,\"height\":24,\"viewBox\":\"0 0 24 24\",\"fill\":\"none\",\"stroke\":\"currentColor\",\"strokeWidth\":2,\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"className\":\"lucide lucide-external-link h-4 w-4\",\"children\":[[\"$\",\"path\",\"1q9fwt\",{\"d\":\"M15 3h6v6\"}],[\"$\",\"path\",\"gplh6r\",{\"d\":\"M10 14 21 3\"}],[\"$\",\"path\",\"a6xqqp\",{\"d\":\"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6\"}],\"$undefined\"]}]\n"])</script><script>self.__next_f.push([1,"38:[\"$\",\"div\",null,{\"className\":\"mt-12 pt-8 border-t border-border grid grid-cols-2 gap-4\",\"children\":[[\"$\",\"$L7\",null,{\"href\":\"/docs/v1.1.0/en/guardian\",\"className\":\"group flex flex-col gap-2 p-4 rounded-xl border border-border hover:border-primary/50 hover:bg-muted/50 transition-all\",\"style\":{\"textDecoration\":\"none !important\"},\"children\":[[\"$\",\"div\",null,{\"className\":\"flex items-center gap-2 text-sm text-muted-foreground\",\"children\":[[\"$\",\"svg\",null,{\"ref\":\"$undefined\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":24,\"height\":24,\"viewBox\":\"0 0 24 24\",\"fill\":\"none\",\"stroke\":\"currentColor\",\"strokeWidth\":2,\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"className\":\"lucide lucide-chevron-left h-4 w-4\",\"children\":[[\"$\",\"path\",\"1wnfg3\",{\"d\":\"m15 18-6-6 6-6\"}],\"$undefined\"]}],[\"$\",\"span\",null,{\"children\":\"Previous\"}]]}],[\"$\",\"div\",null,{\"className\":\"text-base font-medium text-foreground group-hover:text-primary transition-colors\",\"children\":\"Guardian\"}]]}],[\"$\",\"$L7\",null,{\"href\":\"/docs/v1.1.0/en/assurance-levels\",\"className\":\"group flex flex-col gap-2 p-4 rounded-xl border border-border hover:border-primary/50 hover:bg-muted/50 transition-all text-right\",\"style\":{\"textDecoration\":\"none !important\"},\"children\":[[\"$\",\"div\",null,{\"className\":\"flex items-center justify-end gap-2 text-sm text-muted-foreground\",\"children\":[[\"$\",\"span\",null,{\"children\":\"Next\"}],[\"$\",\"svg\",null,{\"ref\":\"$undefined\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":24,\"height\":24,\"viewBox\":\"0 0 24 24\",\"fill\":\"none\",\"stroke\":\"currentColor\",\"strokeWidth\":2,\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"className\":\"lucide lucide-chevron-right h-4 w-4\",\"children\":[[\"$\",\"path\",\"mthhwq\",{\"d\":\"m9 18 6-6-6-6\"}],\"$undefined\"]}]]}],[\"$\",\"div\",null,{\"className\":\"text-base font-medium text-foreground group-hover:text-primary transition-colors\",\"children\":\"Assurance Levels (AAL)\"}]]}]]}]\n"])</script><script>self.__next_f.push([1,"36:[[\"$\",\"p\",null,{\"className\":\"text-base leading-7 text-muted-foreground mb-4\",\"children\":[\"Traditional hyperlinks are usually\\n\",[\"$\",\"a\",null,{\"href\":\"https://en.wikipedia.org/wiki/URL\",\"className\":\"text-primary hover:underline font-medium\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"children\":\"URL's\"}],\" based on the\\n\",[\"$\",\"a\",null,{\"href\":\"https://en.wikipedia.org/wiki/Domain_Name_System\",\"className\":\"text-primary hover:underline font-medium\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"children\":\"DNS\"}],\" structure.\"]}],\"\\n\",[\"$\",\"p\",null,{\"className\":\"text-base leading-7 text-muted-foreground mb-4\",\"children\":\"This allows the resource to be routed via DNS and specified via the URL\\non the remote server.\"}],\"\\n\",[\"$\",\"p\",null,{\"className\":\"text-base leading-7 text-muted-foreground mb-4\",\"children\":\"The limitations of URL's is that they are not expressing a specific\\nstate of the resource they represent. There is no way to verify if the content\\nof the page is consistent with the content of the page who send a URL.\\nFor news pages this means that the content of the page could have changed. E.g.\\ntwo visitors of the same news page could see two different pages.\"}],\"\\n\",[\"$\",\"p\",null,{\"className\":\"text-base leading-7 text-muted-foreground mb-4\",\"children\":\"We need a better way to hyperlink so it's sure, that what is linked\\nis consistent across domains and users. Therefore we introduce Aqua URI's which are\\nused to enable the receive to verify the state of the resource.\"}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"goal\",\"className\":\"text-2xl font-semibold tracking-tight mt-10 mb-4 text-foreground scroll-mt-24\",\"children\":\"Goal\"}],\"\\n\",[\"$\",\"p\",null,{\"className\":\"text-base leading-7 text-muted-foreground mb-4\",\"children\":\"Use Immutable Hyperlinks as Unique Resource Identifiers (URI's) to allow\\na consistent referenciation of resources with the ability to verify them with the AQP.\"}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"success-criteria\",\"className\":\"text-2xl font-semibold tracking-tight mt-10 mb-4 text-foreground scroll-mt-24\",\"children\":\"Success Criteria\"}],\"\\n\",[\"$\",\"p\",null,{\"className\":\"text-base leading-7 text-muted-foreground mb-4\",\"children\":\"A Immutable Hyperlink schema which links to a specific state of a\\nresource. Instead of a stateless hyperlink we use verification_hash as a\\nURI which acts as the checksum to verify the retrieved revision.\"}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"input\",\"className\":\"text-2xl font-semibold tracking-tight mt-10 mb-4 text-foreground scroll-mt-24\",\"children\":\"Input\"}],\"\\n\",[\"$\",\"ul\",null,{\"className\":\"list-disc list-outside pl-5 space-y-2 mb-4 text-muted-foreground [\u0026_p]:mb-0 [\u0026_p]:inline [\u0026_ul]:ml-6 [\u0026_ol]:ml-6\",\"children\":[\"\\n\",[\"$\",\"li\",null,{\"className\":\"leading-7 [\u0026\u003ep]:mb-0 [\u0026\u003ep]:inline\",\"children\":\"file upload wizard is executed with file-data and description as\\ninput\"}],\"\\n\",[\"$\",\"li\",null,{\"className\":\"leading-7 [\u0026\u003ep]:mb-0 [\u0026\u003ep]:inline\",\"children\":\"file is stored with in the service triggering a hook leading to the\\ncalculation of\"}],\"\\n\",[\"$\",\"li\",null,{\"className\":\"leading-7 [\u0026\u003ep]:mb-0 [\u0026\u003ep]:inline\",\"children\":\"verification_hash (calculated with the file as input for\\ncontent_hash) which is stored in the revision_object (file or\\ndatabase)\"}],\"\\n\"]}],\"\\n\",[\"$\",\"p\",null,{\"className\":\"text-base leading-7 text-muted-foreground mb-4\",\"children\":\"Output\"}],\"\\n\",[\"$\",\"h6\",null,{\"id\":\"\"}],\"\\n\",[\"$\",\"p\",null,{\"className\":\"text-base leading-7 text-muted-foreground mb-4\",\"children\":\"When linking the file it's displayed in the following format: [SHA3-512\\nHash|Descriptor Text]\"}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"boundary-conditions\",\"className\":\"text-2xl font-semibold tracking-tight mt-10 mb-4 text-foreground scroll-mt-24\",\"children\":\"Boundary conditions\"}],\"\\n\",[\"$\",\"ul\",null,{\"className\":\"list-disc list-outside pl-5 space-y-2 mb-4 text-muted-foreground [\u0026_p]:mb-0 [\u0026_p]:inline [\u0026_ul]:ml-6 [\u0026_ol]:ml-6\",\"children\":[\"\\n\",\"$L3d\",\"\\n\",\"$L3e\",\"\\n\",\"$L3f\",\"\\n\"]}],\"\\n\",\"$L40\",\"\\n\",\"$L41\",\"\\n\",\"$L42\",\"\\n\",\"$L43\",\"\\n\",\"$L44\",\"\\n\",\"$L45\",\"\\n\",\"$L46\"]\n"])</script><script>self.__next_f.push([1,"3d:[\"$\",\"li\",null,{\"className\":\"leading-7 [\u0026\u003ep]:mb-0 [\u0026\u003ep]:inline\",\"children\":\"File is too big to be hashed. We support currently up to 50 MB.\"}]\n3e:[\"$\",\"li\",null,{\"className\":\"leading-7 [\u0026\u003ep]:mb-0 [\u0026\u003ep]:inline\",\"children\":\"File can't be hashed for some reason (error during the process to\\ndue an unexpected code execution)\"}]\n3f:[\"$\",\"li\",null,{\"className\":\"leading-7 [\u0026\u003ep]:mb-0 [\u0026\u003ep]:inline\",\"children\":\"File is empty (has no content)\"}]\n40:[\"$\",\"h2\",null,{\"id\":\"implementation\",\"className\":\"text-2xl font-semibold tracking-tight mt-10 mb-4 text-foreground scroll-mt-24\",\"children\":\"Implementation\"}]\n41:[\"$\",\"p\",null,{\"className\":\"text-base leading-7 text-muted-foreground mb-4\",\"children\":\"We create Immutable Hyperlinks by moving from URL's to sha3-512 hashes as\\nURI's. These URI's are globally unique and therefore collision resistant\\nas the namespace is sufficiently large. By using the hashes as links we\\nalso refer to the state of the resource. As the hash is the\\nverification_hash of the resource it allows us to verify the integrity\\nof the resource with it.\"}]\n42:[\"$\",\"p\",null,{\"className\":\"text-base leading-7 text-muted-foreground mb-4\",\"children\":\"We are referring to files with their SHA3-512 hash in this format\\n[SHA3-512|human_readable_filename]. Displayed is the human readable\\nfilename white it's stored with the full SHA3-512 hash which allows us\\nto be used as Immutable Hyperlinks.\"}]\n43:[\"$\",\"p\",null,{\"className\":\"text-base leading-7 text-muted-foreground mb-4\",\"children\":[\"To allow routing between resources we can add the \",[\"$\",\"code\",null,{\"className\":\"px-1.5 py-0.5 rounded-md bg-muted/50 text-primary font-mono text-[13px] border border-border/50\",\"children\":\"\u003cdomain_id\u003e\"}],\" as a\\nprefix to the \",[\"$\",\"code\",null,{\"className\":\"px-1.5 py-0.5 rounded-md bg-muted/50 text-primary font-mono text-[13px] border border-border/50\",\"children\":\"\u003cverification_hash\u003e\"}],\" resulting in the following syntax:\"]}]\n44:[\"$\",\"p\",null,{\"className\":\"text-base leading-7 text-muted-foreground mb-4\",\"children\":[\"$\",\"code\",null,{\"className\":\"px-1.5 py-0.5 rounded-md bg-muted/50 text-primary font-mono text-[13px] border border-border/50\",\"children\":\"example: aqua://\u003cdomain_id\u003e/\u003cpage_verification_hash\u003e\"}]}]\n45:[\"$\",\"p\",null,{\"className\":\"text-base leading-7 text-muted-foreground mb-4\",\"children\":\"Note: Implementatstion specific to aqua-PKC:\"}]\n46:[\"$\",\"ul\",null,{\"className\":\"list-disc list-outside pl-5 space-y-2 mb-4 text-muted-foreground [\u0026_p]:mb-0 [\u0026_p]:inline [\u0026_ul]:ml-6 [\u0026_ol]:ml-6\",\"children\":[\"\\n\",[\"$\",\"li\",null,{\"className\":\"leading-7 [\u0026\u003ep]:mb-0 [\u0026\u003ep]:inline\",\"children\":\"The verification_hash is stored in the content-slot 'transclusion hashes' with the internal links which referne the resource.\"}],\"\\n\"]}]\n"])</script><script>self.__next_f.push([1,"17:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"meta\",\"1\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\n"])</script><script>self.__next_f.push([1,"47:I[27201,[\"/_next/static/chunks/d96012bcfc98706a.js\",\"/_next/static/chunks/73e3194f06db260e.js\"],\"IconMark\"]\n15:null\n19:[[\"$\",\"title\",\"0\",{\"children\":\"Immutable Hyperlinks | Aqua Protocol\"}],[\"$\",\"meta\",\"1\",{\"name\":\"description\",\"content\":\"Shows how the Aqua URI's can be used as immutable links.\\n\"}],[\"$\",\"link\",\"2\",{\"rel\":\"canonical\",\"href\":\"https://aqua-protocol.org/docs/v1.1.0/en/immutable-hyperlinks\"}],[\"$\",\"meta\",\"3\",{\"property\":\"og:title\",\"content\":\"Immutable Hyperlinks\"}],[\"$\",\"meta\",\"4\",{\"property\":\"og:description\",\"content\":\"Shows how the Aqua URI's can be used as immutable links.\\n\"}],[\"$\",\"meta\",\"5\",{\"property\":\"og:url\",\"content\":\"https://aqua-protocol.org/docs/v1.1.0/en/immutable-hyperlinks\"}],[\"$\",\"meta\",\"6\",{\"property\":\"og:site_name\",\"content\":\"Documentation Platform\"}],[\"$\",\"meta\",\"7\",{\"property\":\"og:locale\",\"content\":\"en_US\"}],[\"$\",\"meta\",\"8\",{\"property\":\"og:type\",\"content\":\"article\"}],[\"$\",\"meta\",\"9\",{\"name\":\"twitter:card\",\"content\":\"summary_large_image\"}],[\"$\",\"meta\",\"10\",{\"name\":\"twitter:title\",\"content\":\"Immutable Hyperlinks\"}],[\"$\",\"meta\",\"11\",{\"name\":\"twitter:description\",\"content\":\"Shows how the Aqua URI's can be used as immutable links.\\n\"}],[\"$\",\"link\",\"12\",{\"rel\":\"icon\",\"href\":\"/logo/aqua-logo.png\"}],[\"$\",\"link\",\"13\",{\"rel\":\"apple-touch-icon\",\"href\":\"/apple-icon.png\"}],[\"$\",\"$L47\",\"14\",{}]]\n"])</script></body></html>