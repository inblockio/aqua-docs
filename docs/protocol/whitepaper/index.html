<!doctype html><html lang=en class=no-js>
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no">
<meta name=generator content="Hugo 0.88.0">
<meta name=robots content="index, follow">
<link rel="shortcut icon" href=/favicons/favicon.ico>
<link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180>
<link rel=icon type=image/png href=/favicons/favicon-16x16.png sizes=16x16>
<link rel=icon type=image/png href=/favicons/favicon-32x32.png sizes=32x32>
<link rel=icon type=image/png href=/favicons/android-36x36.png sizes=36x36>
<link rel=icon type=image/png href=/favicons/android-48x48.png sizes=48x48>
<link rel=icon type=image/png href=/favicons/android-72x72.png sizes=72x72>
<link rel=icon type=image/png href=/favicons/android-96x96.png sizes=96x96>
<link rel=icon type=image/png href=/favicons/android-144x144.png sizes=144x144>
<link rel=icon type=image/png href=/favicons/android-192x192.png sizes=192x192>
<title>Whitepaper | AQUA Protocol</title>
<meta name=description content="High level outline of Aqua Protocol (AQP) sepcification
">
<meta property="og:title" content="Whitepaper">
<meta property="og:description" content="High level outline of Aqua Protocol (AQP) sepcification
">
<meta property="og:type" content="article">
<meta property="og:url" content="https://aqua-protocol.org/docs/protocol/whitepaper/"><meta property="article:section" content="docs">
<meta property="article:modified_time" content="2022-01-29T11:13:40+08:00"><meta property="og:site_name" content="AQUA Protocol">
<meta itemprop=name content="Whitepaper">
<meta itemprop=description content="High level outline of Aqua Protocol (AQP) sepcification
">
<meta itemprop=dateModified content="2022-01-29T11:13:40+08:00">
<meta itemprop=wordCount content="3781">
<meta itemprop=keywords content><meta name=twitter:card content="summary">
<meta name=twitter:title content="Whitepaper">
<meta name=twitter:description content="High level outline of Aqua Protocol (AQP) sepcification
">
<link rel=preload href=/scss/main.min.c58ce5d45149df8e10859c3eb1022295682982407b61dc69aa80c9ba066ffb49.css as=style>
<link href=/scss/main.min.c58ce5d45149df8e10859c3eb1022295682982407b61dc69aa80c9ba066ffb49.css rel=stylesheet integrity>
<script src=https://code.jquery.com/jquery-3.6.0.min.js integrity=sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK crossorigin=anonymous></script>
<script src=https://unpkg.com/lunr@2.3.9/lunr.min.js integrity=sha384-203J0SNzyqHby3iU6hzvzltrWi/M41wOP5Gu+BiJMz5nwKykbkUx8Kp7iti0Lpli crossorigin=anonymous></script>
</head>
<body class=td-page>
<header>
<nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar">
<a class=navbar-brand href=/>
<span class=navbar-logo><svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" inkscape:version="1.0 (4035a4f, 2020-05-01)" sodipodi:docname="logo.svg" style="enable-background:new 0 0 500 500" viewBox="0 0 500 500" id="Layer_1"><defs id="defs1204"/><sodipodi:namedview inkscape:current-layer="g2829" inkscape:window-maximized="1" inkscape:window-y="0" inkscape:window-x="0" inkscape:cy="250" inkscape:cx="242.13899" inkscape:zoom=".7919596" showgrid="false" id="namedview1202" inkscape:window-height="719" inkscape:window-width="1362" inkscape:pageshadow="2" inkscape:pageopacity="0" guidetolerance="10" gridtolerance="10" objecttolerance="10" borderopacity="1" bordercolor="#666666" pagecolor="#ffffff"/><g transform="matrix(1.6915379,0,0,1.6915379,21.321219,23.074018)" id="g2188"><g id="layer1" inkscape:label="Layer 1" style="display:inline;fill:red"><g style="fill:red" transform="matrix(0.26458333,0,0,0.26458333,86.390232,38.671175)" id="g231"><g style="fill:red" transform="matrix(23.961309,0,0,23.961309,-680.73085,-361.21096)" id="g2829"><rect ry="4.8628764" rx="4.7287874" y="6.8233423" x="12.794669" height="46.624615" width="46.624615" id="rect2196" style="font-variation-settings:normal;opacity:1;vector-effect:none;fill:#fff;fill-opacity:1;fill-rule:evenodd;stroke-width:.279113;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;paint-order:stroke markers fill;stop-color:#000000;stop-opacity:1"/><path d="m35.447791 10.548529-7.752305 8.627971-1.245055 6.979947-3.626219 1.600087-1.542156 5.041488h-5.559041l.750057 1.21737h4.883323l.819785 2.678266h3.940492v1.217369h-3.568028l.275568.902326 4.702601 1.600088.146883.824908h3.568031v1.217373h-3.350652l.880792 5.760781 6.747958 1.506267 7.595425-.693916-.146629-3.514199h5.817177l1.044338-1.217371h-6.48546l1.139184-1.986652 7.317805-2.439098v-1.554972h-6.382923v-1.217371h6.382923v-3.083799h4.189916l.499357-1.291453-4.689273.07408v-6.09941l-6.241679-2.439866-1.859765-3.242475 1.045622-4.459588zm16.353874 26.550662v1.217371h2.71441l.882332-1.217371zm-23.91059 5.356531-.217379-1.217373H20.0511l1.044339 1.217373zm-5.342431-4.544695L22.17618 36.693658h-4.512396l1.044339 1.217369zm13.140621-25.797784 7.668741 5.03072-.952571 4.061745 2.329642 4.061487 5.84922 2.308621v5.222206 513e-6H22.555306l1.250442-4.089431 3.716963-1.630848 1.31119-7.350877zm-.11587 5.060709-.8608.860799 4.57802 4.578018.860797-.860797zm-.132531 2.58778-.860797.860797 4.578274 4.578017.860799-.860796zm-4.120448 3.837187-.860796.8608 4.578273 4.578017.860799-.860797zm-.132529 2.588035-.860797.86105 4.578017 4.578021.860799-.860798zm-.67828 8.943015h6.382923v1.217372h-6.382919zm4.842052 4.542388h6.382923v1.217369h-6.382923zm3.93152 4.624927h3.940496l-.372721 1.217371h-3.567775zm-7.785374.146628h4.558024v1.217371h-4.558024z" style="fill:#111;fill-opacity:1;stroke:none;stroke-width:.52221px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" id="path6155"/></g></g></g></g></svg></span><span class=font-weight-bold>AQUA Protocol</span>
</a>
<div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar>
<ul class="navbar-nav mt-2 mt-lg-0">
<li class="nav-item mr-4 mb-2 mb-lg-0">
<a class="nav-link active" href=/docs/><span class=active>Documentation</span></a>
</li>
<li class="nav-item mr-4 mb-2 mb-lg-0">
<a class=nav-link href=/docs/contribution-guidelines/><span>Contribution</span></a>
</li>
<li class="nav-item mr-4 mb-2 mb-lg-0">
<a class=nav-link href=/community/><span>Community</span></a>
</li>
</ul>
</div>
<div class="navbar-nav d-none d-lg-block"><input type=search class="form-control td-search-input" placeholder="&#xf002; Search this site‚Ä¶" aria-label="Search this site‚Ä¶" autocomplete=off data-offline-search-index-json-src=/offline-search-index.f58401e3da967ba703f3b9b85b135421.json data-offline-search-base-href=/ data-offline-search-max-results=25>
</div>
</nav>
</header>
<div class="container-fluid td-outer">
<div class=td-main>
<div class="row flex-xl-nowrap">
<aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none">
<div id=td-sidebar-menu class=td-sidebar__inner>
<div id=content-mobile>
<form class="td-sidebar__search d-flex align-items-center">
<input type=search class="form-control td-search-input" placeholder="&#xf002; Search this site‚Ä¶" aria-label="Search this site‚Ä¶" autocomplete=off data-offline-search-index-json-src=/offline-search-index.f58401e3da967ba703f3b9b85b135421.json data-offline-search-base-href=/ data-offline-search-max-results=25>
<button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type=button data-toggle=collapse data-target=#td-section-nav aria-controls=td-docs-nav aria-expanded=false aria-label="Toggle section navigation">
</button>
</form>
</div>
<div id=content-desktop></div>
<nav class="collapse td-sidebar-nav" id=td-section-nav>
<ul class="td-sidebar-nav__section pr-md-3 ul-0">
<li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-docs-li>
<a href=/docs/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section tree-root" id=m-docs><span>Documentation</span></a>
<ul class=ul-1>
<li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsoverview-li>
<a href=/docs/overview/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docsoverview><span>Overview</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-docsprotocol-li>
<a href=/docs/protocol/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docsprotocol><span>Protocol</span></a>
<ul class="ul-2 foldable">
<li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child active-path" id=m-docsprotocolwhitepaper-li>
<a href=/docs/protocol/whitepaper/ class="align-left pl-0 active td-sidebar-link td-sidebar-link__page" id=m-docsprotocolwhitepaper><span class=td-sidebar-nav-active-item>Whitepaper</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsprotocolaqua-identity-protocol-li>
<a href=/docs/protocol/aqua-identity-protocol/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsprotocolaqua-identity-protocol><span>Identity Protocol</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsprotocolaqua-name-resolution-li>
<a href=/docs/protocol/aqua-name-resolution/ title="Aqua Name Resolution (ANS)" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsprotocolaqua-name-resolution><span>Name Resolution</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsprotocolassurance-levels-aal-li>
<a href=/docs/protocol/assurance-levels-aal/ title="Assurance Levels (AAL)" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsprotocolassurance-levels-aal><span>Assurance Levels</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsprotocoldata-accounting-li>
<a href=/docs/protocol/data-accounting/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsprotocoldata-accounting><span>Data Accounting</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsprotocoldata-governance-li>
<a href=/docs/protocol/data-governance/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsprotocoldata-governance><span>Data Governance</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsprotocoldelegated-witnessing-li>
<a href=/docs/protocol/delegated-witnessing/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsprotocoldelegated-witnessing><span>Delegated Witnessing</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsprotocoldesign-principles-li>
<a href=/docs/protocol/design-principles/ title="Design Princiciples" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsprotocoldesign-principles><span>Design Principles</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsprotocolguardian-li>
<a href=/docs/protocol/guardian/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsprotocolguardian><span>Guardian</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsprotocolimmutable-hyperlinks-li>
<a href=/docs/protocol/immutable-hyperlinks/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsprotocolimmutable-hyperlinks><span>Immutable Hyperlinks</span></a>
</li>
</ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsimplementations-li>
<a href=/docs/implementations/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docsimplementations><span>Implementations</span></a>
<ul class="ul-2 foldable">
<li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsimplementationsreference-architecture-li>
<a href=/docs/implementations/reference-architecture/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsimplementationsreference-architecture><span>Reference Implementation</span></a>
</li>
</ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docscontribution-guidelines-li>
<a href=/docs/contribution-guidelines/ title="Contribution Guidelines" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docscontribution-guidelines><span>Contribution</span></a>
</li>
</ul>
</li>
</ul>
</nav>
</div>
</aside>
<aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none">
<div class="td-page-meta ml-2 pb-1 pt-2 mb-0">
<a href=https://github.com/inblockio/aqua-docs/tree/main/content/en/docs/protocol/whitepaper.md class=td-page-meta--view target=_blank rel=noopener><i class="fa fa-file-alt fa-fw"></i> View page source</a>
<a href=https://github.com/inblockio/aqua-docs/edit/main/content/en/docs/protocol/whitepaper.md class=td-page-meta--edit target=_blank rel=noopener><i class="fa fa-edit fa-fw"></i> Edit This Page</a>
<a id=print href=https://aqua-protocol.org/docs/protocol/_print/><i class="fa fa-print fa-fw"></i> Print Page</a>
<a href="https://github.com/inblockio/aqua-docs/new/main/content/en/docs/protocol/whitepaper.md?filename=change-me.md&value=---%0Atitle%3A+%22Long+Page+Title%22%0AlinkTitle%3A+%22Short+Nav+Title%22%0Aweight%3A+100%0Adescription%3A+%3E-%0A+++++Page+description+for+heading+and+indexes.%0A---%0A%0A%23%23+Heading%0A%0AEdit+this+template+to+create+your+new+page.%0A%0A%2A+Give+it+a+good+name%2C+ending+in+%60.md%60+-+e.g.+%60getting-started.md%60%0A%2A+Edit+the+%22front+matter%22+section+at+the+top+of+the+page+%28weight+controls+how+its+ordered+amongst+other+pages+in+the+same+directory%3B+lowest+number+first%29.%0A%2A+Add+a+good+commit+message+at+the+bottom+of+the+page+%28%3C80+characters%3B+use+the+extended+description+field+for+more+detail%29.%0A%2A+Create+a+new+branch+so+you+can+preview+your+new+file+and+request+a+review+via+Pull+Request.%0A" class=td-page-meta--child target=_blank rel=noopener>
<i class="fa fa-edit fa-fw"></i> Create Page
</a>
</div>
<div class=td-toc><nav id=TableOfContents>
<ul>
<li><a href=#introduction>Introduction</a></li>
<li><a href=#motivation>Motivation</a></li>
<li><a href=#terminology>Terminology</a></li>
<li><a href=#wallet>Wallet</a>
<ul>
<li><a href=#account>Account</a></li>
<li><a href=#domain>Domain</a></li>
<li><a href=#revision>Revision</a></li>
<li><a href=#page>Page</a></li>
<li><a href=#transaction-security>Transaction Security</a></li>
<li><a href=#data-asset>Data Asset</a></li>
<li><a href=#data-vault>Data Vault</a></li>
<li><a href=#witness>Witness</a></li>
<li><a href=#witness-network>Witness Network</a></li>
<li><a href=#portable-hash-chain>Portable Hash Chain</a></li>
<li><a href=#immutable-hyperlinks--transclusions>Immutable Hyperlinks / Transclusions</a></li>
</ul>
</li>
<li><a href=#specification>Specification</a></li>
</ul>
<ul>
<li><a href=#verification-hash>Verification Hash</a></li>
<li><a href=#content>Content</a></li>
<li><a href=#metadata>Metadata</a></li>
<li><a href=#signature>Signature</a></li>
<li><a href=#witness-1>Witness</a></li>
<li><a href=#example>Example</a>
<ul>
<li><a href=#1st-revision>1st Revision</a></li>
<li><a href=#2nd-revision>2nd Revision</a></li>
<li><a href=#3rd-revision>3rd Revision</a></li>
</ul>
</li>
</ul>
<ul>
<li><a href=#get-hash-chain>Get Hash Chain</a></li>
<li><a href=#get-revision-hashes>Get Revision Hashes</a></li>
<li><a href=#get-revision>Get Revision</a></li>
</ul>
<ul>
<li><a href=#aqua-protocol-v11-changes>Aqua Protocol v1.1 Changes</a></li>
<li><a href=#data-accounting-protocol-v12-tbd>Data Accounting Protocol v1.2 [TBD]</a></li>
<li><a href=#services-on-aqp-not-yet-implemented-exploration>Services on AQP (Not yet implemented, exploration)</a></li>
<li><a href=#similar-projects>Similar Projects</a></li>
<li><a href=#blockchain-context>Blockchain Context</a>
<ul>
<li><a href=#a-side-note>A side note</a></li>
</ul>
</li>
</ul>
</nav></div>
</aside>
<main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main>
<nav aria-label=breadcrumb class=td-breadcrumbs>
<ol class=breadcrumb>
<li class=breadcrumb-item>
<a href=https://aqua-protocol.org/docs/>Documentation</a>
</li>
<li class=breadcrumb-item>
<a href=https://aqua-protocol.org/docs/protocol/>Protocol</a>
</li>
<li class="breadcrumb-item active" aria-current=page>
<a href=https://aqua-protocol.org/docs/protocol/whitepaper/>Whitepaper</a>
</li>
</ol>
</nav>
<div class=td-content>
<h1>Whitepaper</h1>
<div class=lead>High level outline of Aqua Protocol (AQP) sepcification</div>
<header class=article-meta>
</header>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Current version:</td>
<td>Aqua Protocol v1.1 Specification</td>
</tr>
<tr>
<td>Author:</td>
<td>Tim Bansemer, Publius Dirac</td>
</tr>
<tr>
<td>Date:</td>
<td>30.12.2021</td>
</tr>
<tr>
<td>Status:</td>
<td>DRAFT / Experimental</td>
</tr>
<tr>
<td>Implementation:</td>
<td><a href=https://github.com/inblockio/micro-pkc>https://github.com/inblockio/micro-pkc</a></td>
</tr>
</tbody>
</table>
<h2 id=introduction>Introduction</h2>
<p>The Aqua Protocol (AQP) is a data accountability and exchange protocol between
hosts in peer-to-peer environments. The AQP is used to realize the goal of
<a href=Data_Accounting.md>accounting for data origin and history</a>. The description
for the proof-of-concept implementation of the AQP can be found in <a href=Reference_Implementation_Architecture.md>this
page</a>.</p>
<h2 id=motivation>Motivation</h2>
<p>In today&rsquo;s world, there are no widely adopted trustless processes of checking if
data have been manipulated or corrupted, are attributed to the wrong author, or
are attributed to the wrong time. Today&rsquo;s processes are dependent on centralized
trusted services which retain all power over governing the data.</p>
<p>There is a lack of transparency or ability to check if data have been altered
by an unauthorized party. Additionally, consumers of data are incapable of
verifying if centralized services have altered the data. This leads to a world
of untrustworthy information in which we don&rsquo;t know how to conclude what is
true.</p>
<p>In a world where every piece of information is a grain in a sandstorm, it has
become impossible to navigate reality. In contrast, in a world where every
piece of information is a fixed star in the sky for a lifetime, we are able to
relate and make sense of the information given. The Aqua Protocol (AQP) turns
grains of information into fixed stars of information.</p>
<p>The AQP adds a peer-to-peer layer of accountability, making it impossible to
change data unnoticed. AQP adds an essential line of defense against attacks on
data integrity, plagiarism, or misattribution. AQP is used to govern trusted
data, which can be quickly verified. This includes the verification of its
integrity and history, the verification of its account (the entity who creates
or manipulates the data), and the verification of its existence and timestamp.</p>
<pre><code>The Aqua Protocol provides trustworthiness to data by
securing data ‚úÖ integrity, üîè account and ‚åö time.
</code></pre>
<p>In order to account data, it is necessary to track and verify its history. The
AQP provides a globally unique resource identification (URI) for each revision
of the verified data. This identifier is collision-free, and is referred the
same way across multiple interacting hosts.</p>
<h2 id=terminology>Terminology</h2>
<h2 id=wallet>Wallet</h2>
<p>A wallet is a software for protecting and managing private cryptographic keys
(of private-public key pairs) which are used to govern digital assets. This is
done by authorization of transactions via digital signatures or by initiating
decryption processes to access data.</p>
<p>See <a href=Design_Principles.md#principle-separation-of-account-and-service>Separation of Concerns</a>.</p>
<h3 id=account>Account</h3>
<p>We are following Ethereum&rsquo;s account definition:</p>
<blockquote>
<p>In general, there are two types of accounts. Externally owned accounts,
controlled by private keys. And contract accounts, controlled by their
contract code
&ndash; <a href=https://ethereum.org/en/whitepaper/#ethereum-accounts>Ethereum Whitepaper</a></p>
</blockquote>
<p>In general, we can&rsquo;t prove if an account owner is a person or a machine. With
advancements in AI, it will become increasingly difficult to prove that a human
is a human. <a href=https://www.proofofhumanity.id/>Attempts are being made</a> to
increase trustworthiness of accounts which fall short in questions of privacy
and security as they make public claims. Traditional know your customer (KYC)
combined with the AQP and Aqua Identity Protocol (AIP) identification processes
can provide similar &ldquo;proof of being human&rdquo; which can be attested to an account.
This allows us to outsource the problem of identification, where we only focus
on unique accounts which are sufficient for data accounting independent of
humans or machines. Identity claims issued via the AIP will help to provide the
context required to meaningfully interact between accounts.</p>
<p>For more on this topic, please read the <a href=https://github.com/inblockio/aqua-docs/blob/main/Aqua_Identity_Protocol.md>Aqua Identity
Protocol</a>.</p>
<h3 id=domain>Domain</h3>
<p>A domain is a unique namespace attributed to an account. It allows us to manage
services and files within that namespace creating a domain of data governance
After granted permissions, additional accounts can be added to share control
over a domain or singular assets. To enforce boundaries of a domain, additional
software like the <a href=Guardian.md>Guardian</a> is required.</p>
<p>E.g. by setting up the a data vault with your account it becomes your
domain of data governance.</p>
<h3 id=revision>Revision</h3>
<p>A revision is the smallest portable entity within the AQP. Multiple revisions
form a single portable hash chain which is serialized in JSON format.
They have existed before in unsecured systems where multiple revisions form a
file which can be displayed as a page. The AQP adds the cryptographic harness
to secure it. With presenting a portable hash chain, it is possible to track
all incremental changes stored in each revision to understand the history of a
page and how it came to be. This allows us to have version control on digital
assets being able to restore earlier states and to relate to them. This allows
us to have historical evidence of digital assets.</p>
<h3 id=page>Page</h3>
<p>A page is a visible representation of a file containing multiple or a single
revision attributed to a shared origin. A page view could also be used to
create a new revision by a used service which interfaces with the file for
manipulation. In AQP all revisions share a global URI hash to
attribute them together called a genesis hash.</p>
<h3 id=transaction-security>Transaction Security</h3>
<p>Transaction security is an economic measure of the level of integrity assurance
for a transaction. It is defined as the cost required to forge a transaction.
The transaction security can be increased by cryptographic security and by strong
replication of transactions. Public distributed ledger systems are highly suitable
for providing very high level of transaction security at the cost of privacy
and immutability (data can&rsquo;t be changed or deleted). Today, public distributed
ledgers such as Bitcoin and Ethereum provide the highest level of transaction
security.</p>
<h3 id=data-asset>Data Asset</h3>
<p>Data turns into a valuable asset if it is accounted for. In an accounted form
it can be easily priced, exchanged or traded.</p>
<h3 id=data-vault>Data Vault</h3>
<p>Software used to store and manage data with an account. The software must apply
a secure architecture and measures for keeping data assets safe. This is
achieved through encryption, strong authentication and restrictive access to
keep data private by default.</p>
<p>See <a href=https://github.com/inblockio/aqua-docs/blob/main/Design_Principles.md#principle-separation-of-account-and-service>Design Principles / Separation of Account and
Service</a></p>
<h3 id=witness>Witness</h3>
<p>We define witnessing as the process of observing an event. A witness is judged
by their capability to recollect and share an observed event. In other words,
witnessing is the process of storing input data for later playback to provide
data symmetry around an event.</p>
<h3 id=witness-network>Witness Network</h3>
<p>The digital service in a distributed ledger or similar infrastructure which
provides transaction security and data symmetry for shared data within the
network. An example of a witness network would be Ethereum.</p>
<p>E.g. Ethereum can be used to store a digital fingerprint of a domain snapshot
of a data vault. A domain snapshot is the Merklized state of all witnessed hash
chains being present in the data vault. It is required to pay the witness
network for its service. In the case of Ethereum, this is done using &lsquo;Ether&rsquo;.
This in return allows the account owner to create an &lsquo;undeniable&rsquo; proof that a
specific revision and the previous revisions within a hash chain has existed.</p>
<h3 id=portable-hash-chain>Portable Hash Chain</h3>
<p>A hash chain is a linked list where each node contains the cryptographic hash
of the previous node content. A portable hash chain is a hash chain that can be
moved from one host to another.</p>
<h3 id=immutable-hyperlinks--transclusions>Immutable Hyperlinks / Transclusions</h3>
<p>See <a href=Immutable_Hyperlinks.md>Immutable Hyperlinks</a>.</p>
<h2 id=specification>Specification</h2>
<p>To identify a revision with a unique fingerprint, we hash its content using
the SHA3-512 hashing function which always has a 128 characters long
output. This value can be used as a checksum to verify data integrity.
The checksum can then be entangled in a hash-chain to create an
immutable track record. We then calculate multiple properties associated
with the revision, in addition to its content checksum. In the next section,
we differentiate between REQUIRED and OPTIONAL properties for each
revision.</p>
<p>All hashes are based on
<a href=https://nvlpubs.nist.gov/nistpubs/FIPS/NIST.FIPS.202.pdf>SHA3-512</a>.
This encryption standard is used to construct <a href=#portable-hash-chain>portable hash
chains</a>, which are serializing of data and its history in
a form that can be verified, and independent of location. The portable hash
chain can be fully or partially exchanged between hosts depending on the
application of the data. From here on, we refer the term &ldquo;portable hash chain&rdquo;
as &ldquo;hash chain.&rdquo;</p>
<p>In order to implement the AQP, we need to utilize a software that is capable of
generating portable hash chains and facilitating actions described in the
AQP. We call those nodes which facilitate the Aqua Protocol &lsquo;Aqua Data
Vaults&rsquo; which given their role should be implemented as a software with secure
architecture and measures for keeping data assets safe. This is achieved
through encryption, authentication and restrictive access to keep data private
by default.</p>
<h1 id=revision-verification-structure>Revision Verification Structure</h1>
<p>A revision is RECOMMENDED to be limited to 50 Megabytes to ensure that the verification can take
place on all imaginable clients which might have slow network connectivity, low
memory, low cpu performance. Once a revision is verified, the next one can be
verified. Clients with more performance will be able to parallelize the
verification. Larger files can be chunked to be placed in multiple revisions.</p>
<p>A verified data structure is identified by its URI <code>verification_hash</code>
and grouped by its <code>genesis_hash</code>. The first revision created will
create a <code>verification_hash</code> which has a special meaning and is
referred to as the <code>genesis_hash</code>. All future revisions building upon
that first revision will be attributed to the <code>genesis_hash</code> as a unique
URI for grouping the revisions. This allows us to understand if two
revisions are related without needing to verify the whole history of the
hash chain.</p>
<h2 id=verification-hash>Verification Hash</h2>
<p><code>revision_verification_hash</code> is the hash sum over the string formed by the
following operation</p>
<pre tabindex=0><code>revision_verification_hash = calculate_hash_sum(
    content_hash + metadata_hash +
    signature_hash + witness_hash
)
</code></pre><p>The content_hash and metadata_hash are REQUIRED.
The signature_hash and witness_hash are OPTIONAL.</p>
<h2 id=content>Content</h2>
<p>A content hash is the check sum for all content data fields which simplifies
hash construction and the ability to identify data corruption in this part of
the verification structure.
<code>content_hash</code> is the hash sum over the string formed by following operation:</p>
<pre tabindex=0><code>contentObj = {
    &quot;main&quot;: content,
    &quot;extension_key_1&quot;: content_extension_1,
    &quot;extension_key_2&quot;: content_extension_2,
    ...,
    &quot;extension_key_n&quot;: content_extension_n,
}
sortedContenObj = sort_by_keys(contentObj)
content_hash = calculate_hash_sum(
    sortedContenObjValue_1,
    sortedContenObjValue_2,
    ...,
    sortedContenObjValue_n,
)
</code></pre><p>Description:</p>
<ul>
<li>content: The string input of the visible page using UTF-8 encoding schema.
REQUIRED.</li>
<li>content extensions: more data MAY be encapsulated in addition to the main
content. These could be a file, a stateful link, or a signature. The content
extensions are sorted alphabetically by their key names. OPTIONAL.</li>
</ul>
<p>To see an example of <code>contentObj</code> of a revision, see the <a href=#Example>example</a>
section,</p>
<h2 id=metadata>Metadata</h2>
<pre tabindex=0><code>metadata_hash = calculate_hash_sum(
    domain_id + time_stamp + previous_verification_hash
)
</code></pre><p>Description:</p>
<ul>
<li>metadata_hash: The check sum for all metadata data fields. It simplifies the
hash construction and the ability to identify data corrupton in this part of
the verification structure.</li>
<li>domain_id: 10 digits hexadecimal randomly generated to identify the host
system that runs the AQP service.</li>
<li>time_stamp: time-stamp of the current revision (decimal numbers
YYYYMMDDHHMMSS e.g. 20211128092608).</li>
<li>previous_verification_hash: previous_revision_verification_hash if present</li>
</ul>
<h2 id=signature>Signature</h2>
<p>A signature in AQP is a cryptographic signature generated by public-private key
pair. The protocol should be abstract, where it will support &lsquo;Method&rsquo; in later
iterations. This will allow us to use different types of implementations such
as: PGP signatures, Ethereum, or Bitcoin
<a href=https://en.wikipedia.org/wiki/Cryptocurrency_wallet>wallet</a>&rsquo;s signatures.</p>
<p>In this specification, we use the AQP reference implementation&rsquo;s signing
method, which is via an Ethereum wallet.</p>
<pre tabindex=0><code>signature_hash = calculate_hash_sum(
    signature + public_key
)
</code></pre><p>The signature is generated by a wallet signing the following message:</p>
<pre tabindex=0><code>I sign the following page verification_hash:&quot; +[0x&lt;revision_verification_hash&gt;]
</code></pre><p>The <code>revision_verification_hash</code> MUST NOT be signed twice by the same key, to
avoid information leakage of the private key.</p>
<p>For example, a wallet with an address of
<code>0xa2026582b94feb9124231fbf7b052c39218954c2</code> and a public key of
<code>0x041518581af65749b3ddc69889df3e5d229bc8ad79279a07ddeb368ade5e1592368c5ff3b69143d7a1e7cf64f7d0774a6724e6eaf138d318d07ddc30f6081ca89a</code>
signs the following message:</p>
<pre tabindex=0><code>I sign the following page verification_hash:&quot; +[0x9dab72c7635043452958c4cc2902f48ef7c4ae437058280197c6a2736ab9635f799cbf190d9d07dd76589055a8ad64e61c6bebd1487994207d4cb7918b471f57]
</code></pre><p>which results in the following signature:</p>
<pre tabindex=0><code>0x19b5697c4541509c1add3db9fc2f678b7b80325ebffd4d945ca00db5f8b3f98a142edbf9a7faa0a0c7ec4f10ae1b64cf2ea62ce3ee73ed2e37ce916d6bd016601c
</code></pre><h2 id=witness-1>Witness</h2>
<p>Witnessing allows one to undeniably prove the existence of a dataset
(represented as a portable hash chain). To complete the witnessing process, a
Domain Snapshot is created. This is a collection of all revision hashes within
one domain. A Merkle tree is used to unify all hashes of the latest revisions
of all portable hash chains within a domain into a single hash value.</p>
<p>The <code>witness_event_verification_hash</code> is written to the <a href=#witness-network>Witness
Network</a>. The
<code>witness_event_verification_hash</code> is then generated by using the
<code>domain_snapshot_genesis_hash</code> and the <code>merkle_root</code> hash together. This
allows the page snapshot itself to also be witnessed.</p>
<p>A single revision which has been witnessed, will not store the whole Merkle
tree, but only its relevant path to the Merkle root. Performing a Merkle proof
means that its revision is included in the Merkle tree.</p>
<pre tabindex=0><code>witness_hash = calculate_hash_sum(
    domain_snapshot_genesis_hash + merkle_root +
    witness_network + witness_event_transaction_hash
)
</code></pre><p>Description:</p>
<ul>
<li><code>witness_hash</code>: the checksum for all signature data fields. It simplifies hash
construction and identifies data corruption in this part of the verification
structure.</li>
<li><code>domain_snapshot_genesis_hash</code>: Refers to the URI of the page which stores the
whole Merkle tree of the witness event.</li>
<li><code>merkle_root</code>: the root hash of the Merkle tree. The presence of the
Merkle tree allows for lazy verification to reduce required computational
steps for verification by skipping the Merkle proof as both datasets can be
entangled in the chain by a newer revision and therefore be immutable.</li>
<li><code>witness_network</code>: specifies which witness network was used to store the
<code>witness_event</code>. The following structure shows an AQP hash chain with 3
revisions which wrote the <code>witness_event_verification_hash</code> into the
witness network.</li>
</ul>
<p>Additional context:</p>
<ul>
<li>relative-merkle-tree-proof: This provide the relative path with all required
hashes to verify the Merkle tree root from the first node which the
<code>verification_hash</code> of the revision as a starting point.</li>
<li><code>witness_event_verification_hash</code>: [IMPLICIT] Is not part of the data
structure. It is calculated by taking the sha3-512 checksum of the
<code>domain_snapshot_genesis_hash</code> and the <code>merkle_root</code> hash. This ensures that the
<code>domain_snapshot</code> itself will be witnessed.</li>
</ul>
<h2 id=example>Example</h2>
<p>The following structure shows an AQP hash chain with 3 revisions:</p>
<h3 id=1st-revision>1st Revision</h3>
<p>This revision features all REQUIRED (content, metadata) and all OPTIONAL
(signature, witness) AQP data fields.</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=color:#000;font-weight:700>{</span>
  <span style=color:#204a87;font-weight:700>&#34;verification_context&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
    <span style=color:#204a87;font-weight:700>&#34;has_previous_signature&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>false</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#204a87;font-weight:700>&#34;has_previous_witness&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>false</span>
  <span style=color:#000;font-weight:700>},</span>
  <span style=color:#204a87;font-weight:700>&#34;content&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
    <span style=color:#204a87;font-weight:700>&#34;rev_id&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>358</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#204a87;font-weight:700>&#34;content&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
      <span style=color:#204a87;font-weight:700>&#34;main&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;First revision text&#34;</span><span style=color:#000;font-weight:700>,</span>
      <span style=color:#204a87;font-weight:700>&#34;transclusion-hashes&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;&#34;</span>
    <span style=color:#000;font-weight:700>},</span>
    <span style=color:#204a87;font-weight:700>&#34;content_hash&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;ae188be061822074716b43925b3ffa90a03c530342be73c3440d8f022765ffebbb56c16552f13cd1ea61f876d2d892e0a73dcba5173fc47d371b4251d6c094da&#34;</span>
  <span style=color:#000;font-weight:700>},</span>
  <span style=color:#204a87;font-weight:700>&#34;metadata&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
    <span style=color:#204a87;font-weight:700>&#34;domain_id&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;acfa9f682e&#34;</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#204a87;font-weight:700>&#34;time_stamp&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;20220116090401&#34;</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#204a87;font-weight:700>&#34;previous_verification_hash&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;&#34;</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#204a87;font-weight:700>&#34;metadata_hash&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;d1025fd8866d9367735d2f6617b3aa87401e08d726f311cdf834ea9540955bfc59b428676bce5d47d5fed381394ab2ed838c5eecfc9cb37313705374752c247d&#34;</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#204a87;font-weight:700>&#34;verification_hash&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;9dab72c7635043452958c4cc2902f48ef7c4ae437058280197c6a2736ab9635f799cbf190d9d07dd76589055a8ad64e61c6bebd1487994207d4cb7918b471f57&#34;</span>
  <span style=color:#000;font-weight:700>},</span>
  <span style=color:#204a87;font-weight:700>&#34;signature&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
    <span style=color:#204a87;font-weight:700>&#34;signature&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;0x19b5697c4541509c1add3db9fc2f678b7b80325ebffd4d945ca00db5f8b3f98a142edbf9a7faa0a0c7ec4f10ae1b64cf2ea62ce3ee73ed2e37ce916d6bd016601c&#34;</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#204a87;font-weight:700>&#34;public_key&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;0x041518581af65749b3ddc69889df3e5d229bc8ad79279a07ddeb368ade5e1592368c5ff3b69143d7a1e7cf64f7d0774a6724e6eaf138d318d07ddc30f6081ca89a&#34;</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#204a87;font-weight:700>&#34;wallet_address&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;0xa2026582b94feb9124231fbf7b052c39218954c2&#34;</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#204a87;font-weight:700>&#34;signature_hash&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;cc42f40c4452a25f9ea48a97b6dfba6f69dec347db5c1adf25475b0b4a5da36af3fe48bf9f7ea0dda6bbed9367dc9c82834dbf8cc7f6220fd190cdb729d3f4ec&#34;</span>
  <span style=color:#000;font-weight:700>},</span>
  <span style=color:#204a87;font-weight:700>&#34;witness&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
    <span style=color:#204a87;font-weight:700>&#34;witness_event_id&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;2&#34;</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#204a87;font-weight:700>&#34;domain_id&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;acfa9f682e&#34;</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#204a87;font-weight:700>&#34;domain_snapshot_title&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;Data Accounting:DomainSnapshot:b33afaf53ed3d245f0319d4997db2032de9d77791ae11f5125189815eef44f2fba9633bebe2e57bc5ea4b0424872ed02fa6aa9ad909f467726b536933bf715bf&#34;</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#204a87;font-weight:700>&#34;witness_hash&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;9707780cebcf6ed02b40bd7e6956b35ffe142a2b5f8cee15c703a652fa389eb118ef101e2f463e95663aa4013a42d9f1ce4a83eed3528b02bf98626e7599bbd8&#34;</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#204a87;font-weight:700>&#34;domain_snapshot_genesis_hash&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;b33afaf53ed3d245f0319d4997db2032de9d77791ae11f5125189815eef44f2fba9633bebe2e57bc5ea4b0424872ed02fa6aa9ad909f467726b536933bf715bf&#34;</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#204a87;font-weight:700>&#34;merkle_root&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;14f26d7dc0be77afff9131c03cab39a2fa9e1270c6face3fdc35b9b4b4ac4550d048c356a4713568c42411c3e7fe3553ec7b993c9bd7da97cb976e843d7e4d29&#34;</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#204a87;font-weight:700>&#34;witness_event_verification_hash&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;67e187411f1e514f232ae2858168da29b15ddfd07523e7a7618bfbf91c583f54fe8e850146120539a92a63ce6138f96599fb8a46ed492e428fe6fde9b9ea82ae&#34;</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#204a87;font-weight:700>&#34;witness_network&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;goerli&#34;</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#204a87;font-weight:700>&#34;smart_contract_address&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;0x45f59310ADD88E6d23ca58A0Fa7A55BEE6d2a611&#34;</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#204a87;font-weight:700>&#34;witness_event_transaction_hash&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;0x5900103adc09a789fd3bd7c23dfeff1ffce41dfba0a52b525ecc032e9279eb1f&#34;</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#204a87;font-weight:700>&#34;sender_account_address&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;0xa2026582b94feb9124231fbf7b052c39218954c2&#34;</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#204a87;font-weight:700>&#34;source&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;default&#34;</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#204a87;font-weight:700>&#34;structured_merkle_proof&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>[</span>
      <span style=color:#000;font-weight:700>{</span>
        <span style=color:#204a87;font-weight:700>&#34;witness_event_verification_hash&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;67e187411f1e514f232ae2858168da29b15ddfd07523e7a7618bfbf91c583f54fe8e850146120539a92a63ce6138f96599fb8a46ed492e428fe6fde9b9ea82ae&#34;</span><span style=color:#000;font-weight:700>,</span>
        <span style=color:#204a87;font-weight:700>&#34;depth&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;4&#34;</span><span style=color:#000;font-weight:700>,</span>
        <span style=color:#204a87;font-weight:700>&#34;left_leaf&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;2554fb53531f4de26ff3ad1fb8c61feea6ea47c3f13c4abda385c46ef8541361f7eee42433050281714a3900115f04fe52b5a8d781a71c4c439c5de6b91cbe3c&#34;</span><span style=color:#000;font-weight:700>,</span>
        <span style=color:#204a87;font-weight:700>&#34;right_leaf&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;9dab72c7635043452958c4cc2902f48ef7c4ae437058280197c6a2736ab9635f799cbf190d9d07dd76589055a8ad64e61c6bebd1487994207d4cb7918b471f57&#34;</span><span style=color:#000;font-weight:700>,</span>
        <span style=color:#204a87;font-weight:700>&#34;successor&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;789e508ccb23fe053b628cebc19a2d32f34e6aa21e878e8611f7c14d891625c7b2e243b3c3105b98295333b9183e5ea272a055a84ab65ad927f7fd9c27aae48e&#34;</span>
      <span style=color:#000;font-weight:700>},</span>
      <span style=color:#000;font-weight:700>{</span>
        <span style=color:#204a87;font-weight:700>&#34;witness_event_verification_hash&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;67e187411f1e514f232ae2858168da29b15ddfd07523e7a7618bfbf91c583f54fe8e850146120539a92a63ce6138f96599fb8a46ed492e428fe6fde9b9ea82ae&#34;</span><span style=color:#000;font-weight:700>,</span>
        <span style=color:#204a87;font-weight:700>&#34;depth&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;3&#34;</span><span style=color:#000;font-weight:700>,</span>
        <span style=color:#204a87;font-weight:700>&#34;left_leaf&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;789e508ccb23fe053b628cebc19a2d32f34e6aa21e878e8611f7c14d891625c7b2e243b3c3105b98295333b9183e5ea272a055a84ab65ad927f7fd9c27aae48e&#34;</span><span style=color:#000;font-weight:700>,</span>
        <span style=color:#204a87;font-weight:700>&#34;right_leaf&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;c16a966333cd22ff3497875a62202874221c1dae2e74b4351d058910f8d37160be480fce9aab4ec5e725beb695509f0fd65ae581568c6f1ae25eb4f1440b287f&#34;</span><span style=color:#000;font-weight:700>,</span>
        <span style=color:#204a87;font-weight:700>&#34;successor&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;80d7549af24e9a6bdfc32cefe0536d6528d665cc8e65859ef4cff87270f3db8d9b95aaecc167e10c9b5be9ce3ab36d8d880c3a518e1c5eb899ca9d95af24e9db&#34;</span>
      <span style=color:#000;font-weight:700>},</span>
      <span style=color:#000;font-weight:700>{</span>
        <span style=color:#204a87;font-weight:700>&#34;witness_event_verification_hash&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;67e187411f1e514f232ae2858168da29b15ddfd07523e7a7618bfbf91c583f54fe8e850146120539a92a63ce6138f96599fb8a46ed492e428fe6fde9b9ea82ae&#34;</span><span style=color:#000;font-weight:700>,</span>
        <span style=color:#204a87;font-weight:700>&#34;depth&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;2&#34;</span><span style=color:#000;font-weight:700>,</span>
        <span style=color:#204a87;font-weight:700>&#34;left_leaf&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;80d7549af24e9a6bdfc32cefe0536d6528d665cc8e65859ef4cff87270f3db8d9b95aaecc167e10c9b5be9ce3ab36d8d880c3a518e1c5eb899ca9d95af24e9db&#34;</span><span style=color:#000;font-weight:700>,</span>
        <span style=color:#204a87;font-weight:700>&#34;right_leaf&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;f4e189a08b486253ea0a5cc7bf7150055e738898115c4caf00e45634d6925539d51852409d1fe9108469e9b15668b940f3369300bb27cc292d1fabc0c07cd593&#34;</span><span style=color:#000;font-weight:700>,</span>
        <span style=color:#204a87;font-weight:700>&#34;successor&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;e227dd97e5166364483b41f058f0d176e3a50a7510299038b09ae3aef2cbafb26c787afad82563a945b433fa2d1279af3535755235ab69d6e5ab089179177c14&#34;</span>
      <span style=color:#000;font-weight:700>},</span>
      <span style=color:#000;font-weight:700>{</span>
        <span style=color:#204a87;font-weight:700>&#34;witness_event_verification_hash&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;67e187411f1e514f232ae2858168da29b15ddfd07523e7a7618bfbf91c583f54fe8e850146120539a92a63ce6138f96599fb8a46ed492e428fe6fde9b9ea82ae&#34;</span><span style=color:#000;font-weight:700>,</span>
        <span style=color:#204a87;font-weight:700>&#34;depth&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;1&#34;</span><span style=color:#000;font-weight:700>,</span>
        <span style=color:#204a87;font-weight:700>&#34;left_leaf&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;e227dd97e5166364483b41f058f0d176e3a50a7510299038b09ae3aef2cbafb26c787afad82563a945b433fa2d1279af3535755235ab69d6e5ab089179177c14&#34;</span><span style=color:#000;font-weight:700>,</span>
        <span style=color:#204a87;font-weight:700>&#34;right_leaf&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;780f3eb08f24022be4463be141bcda6a33a157cd0fd44cf209312b8427ac4036637a63d239526555128a4e7f4bb588ebfdbd8a8cc7d797038e29b852a4fae26c&#34;</span><span style=color:#000;font-weight:700>,</span>
        <span style=color:#204a87;font-weight:700>&#34;successor&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;f3bd4e82b1e3d304005a7ddf4ab940f3e4e1cf099ca1c058454c431ed3feb0674c044e53150eb5691073ba58a3491565f72f6a6c2a24562ea080b569b4496c9f&#34;</span>
      <span style=color:#000;font-weight:700>},</span>
      <span style=color:#000;font-weight:700>{</span>
        <span style=color:#204a87;font-weight:700>&#34;witness_event_verification_hash&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;67e187411f1e514f232ae2858168da29b15ddfd07523e7a7618bfbf91c583f54fe8e850146120539a92a63ce6138f96599fb8a46ed492e428fe6fde9b9ea82ae&#34;</span><span style=color:#000;font-weight:700>,</span>
        <span style=color:#204a87;font-weight:700>&#34;depth&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;0&#34;</span><span style=color:#000;font-weight:700>,</span>
        <span style=color:#204a87;font-weight:700>&#34;left_leaf&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;f3bd4e82b1e3d304005a7ddf4ab940f3e4e1cf099ca1c058454c431ed3feb0674c044e53150eb5691073ba58a3491565f72f6a6c2a24562ea080b569b4496c9f&#34;</span><span style=color:#000;font-weight:700>,</span>
        <span style=color:#204a87;font-weight:700>&#34;right_leaf&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;4a0c120fbdd6219b774eb2cb2076f4050d606b621e384c3ec645be0e5dbcdac3132f1f2acb531fa5ff62429907b77cf8d29a760be3765eb4decd83949a2925f8&#34;</span><span style=color:#000;font-weight:700>,</span>
        <span style=color:#204a87;font-weight:700>&#34;successor&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;14f26d7dc0be77afff9131c03cab39a2fa9e1270c6face3fdc35b9b4b4ac4550d048c356a4713568c42411c3e7fe3553ec7b993c9bd7da97cb976e843d7e4d29&#34;</span>
      <span style=color:#000;font-weight:700>}</span>
    <span style=color:#000;font-weight:700>]</span>
  <span style=color:#000;font-weight:700>}</span>
<span style=color:#000;font-weight:700>}</span>
</code></pre></div><h3 id=2nd-revision>2nd Revision</h3>
<p>This revision entangles all data fields of the previous revision. As the
calculation of the revision_verification hash depends on the revision of the
previous revision, it is shown in verification_context.</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=color:#000;font-weight:700>{</span>
  <span style=color:#204a87;font-weight:700>&#34;verification_context&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
    <span style=color:#204a87;font-weight:700>&#34;has_previous_signature&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>true</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#204a87;font-weight:700>&#34;has_previous_witness&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>true</span>
  <span style=color:#000;font-weight:700>},</span>
  <span style=color:#204a87;font-weight:700>&#34;content&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
    <span style=color:#204a87;font-weight:700>&#34;rev_id&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>362</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#204a87;font-weight:700>&#34;content&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
      <span style=color:#204a87;font-weight:700>&#34;main&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;First revision text&#34;</span><span style=color:#000;font-weight:700>,</span>
      <span style=color:#204a87;font-weight:700>&#34;signature-slot&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;[\n    {\n        \&#34;user\&#34;: \&#34;0xa2026582b94feb9124231fbf7b052c39218954c2\&#34;,\n        \&#34;timestamp\&#34;: \&#34;20220116090439\&#34;\n    }\n]&#34;</span><span style=color:#000;font-weight:700>,</span>
      <span style=color:#204a87;font-weight:700>&#34;transclusion-hashes&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;&#34;</span>
    <span style=color:#000;font-weight:700>},</span>
    <span style=color:#204a87;font-weight:700>&#34;content_hash&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;9732084a45fd344d63687ccf9b5cd942f99ffe1debd11622b05d0cd24a2de3e5608d5f5121bdd7559c0a2d39067f9258c4f9612e44728df2e8d9026a88ed650c&#34;</span>
  <span style=color:#000;font-weight:700>},</span>
  <span style=color:#204a87;font-weight:700>&#34;metadata&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
    <span style=color:#204a87;font-weight:700>&#34;domain_id&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;acfa9f682e&#34;</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#204a87;font-weight:700>&#34;time_stamp&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;20220116090439&#34;</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#204a87;font-weight:700>&#34;previous_verification_hash&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;9dab72c7635043452958c4cc2902f48ef7c4ae437058280197c6a2736ab9635f799cbf190d9d07dd76589055a8ad64e61c6bebd1487994207d4cb7918b471f57&#34;</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#204a87;font-weight:700>&#34;metadata_hash&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;8df483539e2f81e64c9b9df0c7e13ae7778947b5defef860fbaed1260eade794999839bb254ea5006a5d4b6a89a37980ab576dc546d6336518d65b80bf2a5cb5&#34;</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#204a87;font-weight:700>&#34;verification_hash&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;296347471b33f3d3c69cc6e0699d80b4cb68ffc79c3ecce96beb659fa324fab1de7a888932fbfb7c60bb8cc83c9445ce15532987a7b59440cada649681618293&#34;</span>
  <span style=color:#000;font-weight:700>},</span>
  <span style=color:#204a87;font-weight:700>&#34;signature&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
    <span style=color:#204a87;font-weight:700>&#34;signature&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;&#34;</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#204a87;font-weight:700>&#34;public_key&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;&#34;</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#204a87;font-weight:700>&#34;wallet_address&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;&#34;</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#204a87;font-weight:700>&#34;signature_hash&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;&#34;</span>
  <span style=color:#000;font-weight:700>},</span>
  <span style=color:#204a87;font-weight:700>&#34;witness&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>null</span>
<span style=color:#000;font-weight:700>}</span>
</code></pre></div><h3 id=3rd-revision>3rd Revision</h3>
<p>This revision features a transclusion-hash for an immutable link to another
revision.</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=color:#000;font-weight:700>{</span>
  <span style=color:#204a87;font-weight:700>&#34;verification_context&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
    <span style=color:#204a87;font-weight:700>&#34;has_previous_signature&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>false</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#204a87;font-weight:700>&#34;has_previous_witness&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>false</span>
  <span style=color:#000;font-weight:700>},</span>
  <span style=color:#204a87;font-weight:700>&#34;content&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
    <span style=color:#204a87;font-weight:700>&#34;rev_id&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>363</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#204a87;font-weight:700>&#34;content&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
      <span style=color:#204a87;font-weight:700>&#34;main&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;First revision text\n\n[[File:Logo_inblockio.png]]&#34;</span><span style=color:#000;font-weight:700>,</span>
      <span style=color:#204a87;font-weight:700>&#34;signature-slot&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;[\n    {\n        \&#34;user\&#34;: \&#34;0xa2026582b94feb9124231fbf7b052c39218954c2\&#34;,\n        \&#34;timestamp\&#34;: \&#34;20220116090439\&#34;\n    }\n]&#34;</span><span style=color:#000;font-weight:700>,</span>
      <span style=color:#204a87;font-weight:700>&#34;transclusion-hashes&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;[{\&#34;dbkey\&#34;:\&#34;Logo_inblockio.png\&#34;,\&#34;ns\&#34;:6,\&#34;verification_hash\&#34;:\&#34;9b2b3cafb90a07433a2b61885a9e64641a99b1e9024cf53b640501d3706b142fed7bc372300973137ef9d92584fac70976c3889d5610abcfe1f187c248263a56\&#34;}]&#34;</span>
    <span style=color:#000;font-weight:700>},</span>
    <span style=color:#204a87;font-weight:700>&#34;content_hash&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;14b8256ccd5fa1d883983317f92f428eadb52f699f476b9be69f14c6892b41979ff7b5b7a7a978177985d6aaa0bcfd9857a2646aedc4cbb3299373daa647814b&#34;</span>
  <span style=color:#000;font-weight:700>},</span>
  <span style=color:#204a87;font-weight:700>&#34;metadata&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
    <span style=color:#204a87;font-weight:700>&#34;domain_id&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;acfa9f682e&#34;</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#204a87;font-weight:700>&#34;time_stamp&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;20220116090556&#34;</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#204a87;font-weight:700>&#34;previous_verification_hash&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;296347471b33f3d3c69cc6e0699d80b4cb68ffc79c3ecce96beb659fa324fab1de7a888932fbfb7c60bb8cc83c9445ce15532987a7b59440cada649681618293&#34;</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#204a87;font-weight:700>&#34;metadata_hash&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;09688c05a83bb74bb255fb0c571cb6314b65f5b7f00750547a2c43f4959d4702ae2aec019c6fb4b0e5d23adea87fd456b0eaffc6ae271163a1fa45b4bae54230&#34;</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#204a87;font-weight:700>&#34;verification_hash&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;b35894d74dfcf8b41ff95eed97705e1acf9081021e0d478d8645cb04b8a0b4a013ee8f7fb6e140d149f2c92f20bba984fad5535938a5e36ae6a799a18343b806&#34;</span>
  <span style=color:#000;font-weight:700>},</span>
  <span style=color:#204a87;font-weight:700>&#34;signature&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
    <span style=color:#204a87;font-weight:700>&#34;signature&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;&#34;</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#204a87;font-weight:700>&#34;public_key&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;&#34;</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#204a87;font-weight:700>&#34;wallet_address&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;&#34;</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#204a87;font-weight:700>&#34;signature_hash&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;&#34;</span>
  <span style=color:#000;font-weight:700>},</span>
  <span style=color:#204a87;font-weight:700>&#34;witness&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>null</span>
<span style=color:#000;font-weight:700>}</span>
</code></pre></div><h1 id=api-endpoints>API Endpoints</h1>
<p>The AQP provides 3 API endpoints which return data from a host that runs the
AQP:</p>
<h2 id=get-hash-chain>Get Hash Chain</h2>
<p><code>/get_hash_chain_info/{identifier}?identifier=&lt;title or genesis hash></code><br>
Input:</p>
<ul>
<li><code>identifier_type</code>: the value must either be &ldquo;title&rdquo; or &ldquo;genesis_hash&rdquo;</li>
<li><code>identifier</code>: the title or genesis_hash string, e.g. &ldquo;Main Page&rdquo; or &ldquo;02c3c2&mldr;215d8d&rdquo;
Returns: all context for the requested hash_chain.</li>
</ul>
<p>Example:</p>
<p>API Request:
<code>/get_hash_chain_info/genesis_hash?identifier=dffd37be12adc9e774b51aa712f7c5bfc09f48b083540d8ca55f91f317e8685bf09daf004f7c841e53732b8c7992de3f3b9b79350d13570c3b46803ba5119c26</code></p>
<p>API Response:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=color:#000;font-weight:700>{</span>
  <span style=color:#204a87;font-weight:700>&#34;genesis_hash&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;dffd37be12adc9e774b51aa712f7c5bfc09f48b083540d8ca55f91f317e8685bf09daf004f7c841e53732b8c7992de3f3b9b79350d13570c3b46803ba5119c26&#34;</span><span style=color:#000;font-weight:700>,</span>
  <span style=color:#204a87;font-weight:700>&#34;domain_id&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;acfa9f682e&#34;</span><span style=color:#000;font-weight:700>,</span>
  <span style=color:#204a87;font-weight:700>&#34;latest_verification_hash&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;2554fb53531f4de26ff3ad1fb8c61feea6ea47c3f13c4abda385c46ef8541361f7eee42433050281714a3900115f04fe52b5a8d781a71c4c439c5de6b91cbe3c&#34;</span><span style=color:#000;font-weight:700>,</span>
  <span style=color:#204a87;font-weight:700>&#34;site_info&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
    <span style=color:#204a87;font-weight:700>&#34;sitename&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;Personal Knowledge Container&#34;</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#204a87;font-weight:700>&#34;dbname&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;my_wiki&#34;</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#204a87;font-weight:700>&#34;base&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;http://localhost:9352/index.php/Aqua&#34;</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#204a87;font-weight:700>&#34;generator&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;MediaWiki 1.37.1&#34;</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#204a87;font-weight:700>&#34;case&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;first-letter&#34;</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#204a87;font-weight:700>&#34;namespaces&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
      <span style=color:#204a87;font-weight:700>&#34;0&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
        <span style=color:#204a87;font-weight:700>&#34;case&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>true</span><span style=color:#000;font-weight:700>,</span>
        <span style=color:#204a87;font-weight:700>&#34;title&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;&#34;</span>
      <span style=color:#000;font-weight:700>},</span>
     <span style=color:#204a87;font-weight:700>&#34;6942&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
        <span style=color:#204a87;font-weight:700>&#34;case&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>true</span><span style=color:#000;font-weight:700>,</span>
        <span style=color:#204a87;font-weight:700>&#34;title&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;Data Accounting&#34;</span>
      <span style=color:#000;font-weight:700>}</span>
    <span style=color:#000;font-weight:700>},</span>
    <span style=color:#204a87;font-weight:700>&#34;version&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;0.3.0&#34;</span>
  <span style=color:#000;font-weight:700>},</span>
  <span style=color:#204a87;font-weight:700>&#34;title&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;Aqua&#34;</span><span style=color:#000;font-weight:700>,</span>
  <span style=color:#204a87;font-weight:700>&#34;namespace&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>,</span>
  <span style=color:#204a87;font-weight:700>&#34;chain_height&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>3</span>
<span style=color:#000;font-weight:700>}</span>
</code></pre></div><h2 id=get-revision-hashes>Get Revision Hashes</h2>
<p><code>/get_revision_hashes/{verification_hash}</code>
Input:</p>
<ul>
<li><code>verification_hash</code>
Returns: the revision requested if it exists and/or a list of any newer
revision than the one requested.</li>
</ul>
<p>Example:</p>
<p>API Request:
<code>/get_revision_hashes/dffd37be12adc9e774b51aa712f7c5bfc09f48b083540d8ca55f91f317e8685bf09daf004f7c841e53732b8c7992de3f3b9b79350d13570c3b46803ba5119c26</code></p>
<p>API Response:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=color:#000;font-weight:700>[</span>
  <span style=color:#4e9a06>&#34;dffd37be12adc9e774b51aa712f7c5bfc09f48b083540d8ca55f91f317e8685bf09daf004f7c841e53732b8c7992de3f3b9b79350d13570c3b46803ba5119c26&#34;</span><span style=color:#000;font-weight:700>,</span>
  <span style=color:#4e9a06>&#34;f483d7746f67e7099099bcfa8ea5a93148251c598857e8fad21ce842da62794467067802ef9e818d240cd3312a3346a769f363145a87bfc1eeae19fe8d21b328&#34;</span><span style=color:#000;font-weight:700>,</span>
  <span style=color:#4e9a06>&#34;2554fb53531f4de26ff3ad1fb8c61feea6ea47c3f13c4abda385c46ef8541361f7eee42433050281714a3900115f04fe52b5a8d781a71c4c439c5de6b91cbe3c&#34;</span>
<span style=color:#000;font-weight:700>]</span>
</code></pre></div><h2 id=get-revision>Get Revision</h2>
<p><code>/get_revision/{verification_hash}</code>
Input:</p>
<ul>
<li><code>verification_hash</code>
Returns: the revision content together with its verification data</li>
</ul>
<p>Example: See example above.</p>
<p>API Request: <code>/get_revision/dffd37be12adc9e774b51aa712f7c5bfc09f48b083540d8ca55f91f317e8685bf09daf004f7c841e53732b8c7992de3f3b9b79350d13570c3b46803ba5119c26</code></p>
<h1 id=verification-process>Verification Process</h1>
<p>The verification process is a redo of the verification data generation
process, and additionally a comparison of their results.</p>
<p><strong>Verification of Content</strong></p>
<p>All hashes are recalculated in a separate client implementation, and
compared with the ones sent via the API. If the data was not altered or
corrupted; nor was there a difference in the process to calculate the
hash, they will match. This will create a high level of assurance that
the integrity and history of the portable hash chain in question has not been
altered.</p>
<p><strong>Verification of Account</strong></p>
<p>We cryptographically verify that the revision signature is indeed generated by the account specified in the verification data.</p>
<p><strong>Verification of Time</strong></p>
<p>To verify that the witness event included in a revision is correct, a
lookup and comparison of the <code>witness_event_verification_hash</code> on-chain is
performed and compared with the recalculated event.</p>
<p><strong>Reference Implementation</strong></p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Command-Line-Verification-Tool</td>
<td><a href=https://github.com/inblockio/aqua-verifier-js>https://github.com/inblockio/aqua-verifier-js</a></td>
</tr>
<tr>
<td>Chrome Extension Verification Tool</td>
<td><a href=https://github.com/inblockio/aqua-verifier-webextension>https://github.com/inblockio/aqua-verifier-webextension</a></td>
</tr>
</tbody>
</table>
<h1 id=appendix>Appendix</h1>
<p>The following content is informational and not part of the
specification. It should help to better understand utility, context and
services which can be built on top of AQP.</p>
<h2 id=aqua-protocol-v11-changes>Aqua Protocol v1.1 Changes</h2>
<p>Moving over to revision based verification. This allows:</p>
<ul>
<li>Bulk / in parallel verification; ensuring logarithmic verification
times, not linear increasing verification times with longer history.
In short: Much faster and scalable.</li>
<li>Single revision and range verification (you want to verify a
specific part of the content-chain)
<ul>
<li>This is useful for verification of identity claims, where
trusted parties have signed the claim and for the validator it&rsquo;s
sufficient to see that signature.</li>
</ul>
</li>
<li>This allows direct verification after every edit via the Guardian.
This is the preparation in the interaction to provide services
through the <a href=Guardian.md>Guardian</a>.</li>
<li>Changing the design to include transclusions e.g. this allows the
verification of subpages via their stateful links /
revision_verification_hashes
<ul>
<li>This also allows the inclusion of media files in the
verification process</li>
<li>You can upload pictures, PDF&rsquo;s, Word-Documents and have them
automatically included in the aqua protocol and therefore in the
verified data-structure</li>
</ul>
</li>
<li>Introduction of verification_context which indicates if the previous
revision has signature or witness data, or if the current revision
has transcluded resources. This will build the correct verification
structure before verification.</li>
</ul>
<p>Change in the data-structure:</p>
<ul>
<li>when requesting a revision this is done via the
GetRevisionHandler.php</li>
<li>the previous verification hash is always served as well</li>
<li>if signature or witness data is present in the previous revision,
there is a flag (1/0) that this revision depends on the previous
revision</li>
<li>transcluded resources will be added to the content hash for
verification</li>
</ul>
<h2 id=data-accounting-protocol-v12-tbd>Data Accounting Protocol v1.2 [TBD]</h2>
<ul>
<li>Generalization of the Signature-Metadata to inform which signature
method was used.
<ul>
<li>GPG Signatures</li>
<li>BTC Wallet Signatures</li>
<li>Ethereum Wallet Signatures</li>
<li>Done by: Displaying method used for signing, displaying
underlying architecture.</li>
</ul>
</li>
<li>Including Account as part of the verified data structure</li>
<li>Defining maximum payload size per revision</li>
</ul>
<h2 id=services-on-aqp-not-yet-implemented-exploration>Services on AQP (Not yet implemented, exploration)</h2>
<ul>
<li>
<p>AQP-DACS: <a href=#domain>Domain</a> Access Control System</p>
</li>
<li>
<p>See: <a href=Guardian.md>Guardian</a> (Acting similar to a WebApplication-Firewall)</p>
</li>
<li>
<p>ANS: Name-System and Name-Registry.</p>
</li>
<li>
<p>See <a href=Aqua_Name_Resolution.md>Aqua Name Resolution</a></p>
</li>
<li>
<p>AQP-SSI: Self-Sovereign-Identity Protocol for <a href=Aqua_Identity_Protocol.md#self-issued-identity-claims>Identity
Claim</a> management</p>
</li>
<li>
<p>See <a href=Aqua_Identity_Protocol.md>Aqua Identity Protocol</a></p>
</li>
<li>
<p>AQP Delegated Witnessing</p>
<ul>
<li>See <a href=Delegated_Witnessing.md>Delegated Witnessing</a></li>
</ul>
</li>
</ul>
<h2 id=similar-projects>Similar Projects</h2>
<p>None of the listed projects apply the concepts of versioning to their documents,
the concept of portable hash chains, the concept of personal data vaults for data
management in comparison with the AQP reference implementation.</p>
<p>This following list is not exhaustive:</p>
<ul>
<li><a href=http://surety.com/>Surety</a>
The oldest blockchain-like timestamping service which has been publishing
to the New York Times since 1995.</li>
<li><a href=https://opentimestamps.org/>OpenTimestamp</a>
A free and open-source service provided by Peter Todd using the Bitcoin
network as a distributed cryptographic clock. The AQP MAY use OpenTimestamp
as a witness network.</li>
<li><a href=https://originstamp.com/>OriginStamp</a>
A company providing paid timestamping services for their customers.
It looks very similar to OpenTimestamps with open-source client libraries.</li>
<li><a href=https://www.factomprotocol.org/>Factom Protocol</a>
A service which creates an architecture with an extra layer of blockchain,
to provide an extra layer of trusted parties while providing their own
token. In our opinion, it introduces unnecessary complexity and
intermediaries as dependencies compared to the AQP.</li>
<li><a href=https://www.openattestation.com/>OpenAttestation</a>
An implementation of a timestamping service for document certification. One
application of it is for secure digital vaccination certificates by the
Singaporean government. They use the MetaMask Ethereum wallet for signing
documents making it the most similar project to AQP to our knowledge.</li>
</ul>
<h2 id=blockchain-context>Blockchain Context</h2>
<p>DISCLAIMER: AQP is not a permissionless distributed ledger. In order for the
AQP to be valuable and working, a single node implementation and single node
deployments are sufficient, and do not require the witnessing part. The AQP MAY
benefit from being published to a distributed ledger technology (DLT)) to
achieve a witness event with high transaction security. AQP does not have a
token nor is it distributing data by default.</p>
<p>As some concepts are very similar as those used in DLT&rsquo;s, please refer to the
following:</p>
<p>A portable hash chain and its revisions are similar to a blockchain structure
and its blocks, which has its own root hash and a set of transactions which
are included inside.</p>
<table>
<thead>
<tr class=header>
<th><p>Blockchain Term</p>
</th>
<th><p>AQP Term</p>
</th>
<th><p>Explanation</p>
</th>
</tr>
</thead>
<tbody>
<tr class=odd>
<td><p>Transaction</p>
</td>
<td><p>Input Data</p>
</td>
<td><p>In a blockchain its a signed transaction. In AQP its all the input data provided to calculate the respective content slot hashes.</p>
</td>
</tr>
<tr class=even>
<td><p>Block</p>
</td>
<td><p>Revision</p>
</td>
<td><p>A block contains the Merklized list of transactions. A&nbsp;revision contains various&nbsp;hashed data inputs such as</p>
<ul>
<li>Content slots</li>
<li>Metadata data</li>
<li>Signature data</li>
<li>Witness data</li>
</ul>
</td>
</tr>
<tr class=odd>
<td><p>Genesis Block</p>
</td>
<td><p>Genesis Revision</p>
</td>
<td><p>The first object in the hash chain / block chain.</p>
</td>
</tr>
<tr class=even>
<td><p>Blockchain</p>
</td>
<td>Hash Chain</td>
<td>The hash chain is not distributed but by default only in the local PKC, therefore it is not a distributed ledger. Furthermore the PKC is missing a consensus algorithm to create a shared truth between notes.</td>
</tr>
</tbody>
</table>
<h3 id=a-side-note>A side note</h3>
<p>It has not escaped our notice that the provided AQP improves the existing
process of double-entry bookkeeping and provides a foundation for a new data
economy. This also allows to create unforgeable invoices which can be clearly
attributed to its sender, avoiding fraud. This is one of many other use cases,
e.g. providing trusted news via revision-controlled journalism.</p>
<div class="text-muted mt-5 pt-3 border-top">
Last modified January 29, 2022: <a href=https://github.com/inblockio/aqua-docs/commit/9c9b8e1cb4aff0abec7aee0f5595498d8ac71db9>style: üíÑ Fix minor formatting and wording issues (9c9b8e1)</a>
</div>
</div>
</main>
</div>
</div>
<footer class="bg-dark py-5 row d-print-none">
<div class="container-fluid mx-sm-5">
<div class=row>
<div class="col-6 col-sm-4 text-xs-center order-sm-2">
<ul class="list-inline mb-0">
<li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="User mailing list" aria-label="User mailing list">
<a class=text-white target=_blank rel=noopener href=mailto:info@inblock.io aria-label="User mailing list">
<i class="fa fa-envelope"></i>
</a>
</li>
<li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Twitter aria-label=Twitter>
<a class=text-white target=_blank rel=noopener href=https://twitter.com/inblockio aria-label=Twitter>
<i class="fab fa-twitter"></i>
</a>
</li>
<li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Matrix aria-label=Matrix>
<a class=text-white target=_blank rel=noopener href=https://matrix.to/#/#aqua-community:matrix.jembawan.com aria-label=Matrix>
<i class="fa fa-comment"></i>
</a>
</li>
</ul>
</div>
<div class="col-6 col-sm-4 text-right text-xs-center order-sm-3">
<ul class="list-inline mb-0">
<li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=GitHub aria-label=GitHub>
<a class=text-white target=_blank rel=noopener href=https://github.com/inblockio aria-label=GitHub>
<i class="fab fa-github"></i>
</a>
</li>
<li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="Stack Overflow" aria-label="Stack Overflow">
<a class=text-white target=_blank rel=noopener href=https://stackoverflow.com/questions/tagged/aqua aria-label="Stack Overflow">
<i class="fab fa-stack-overflow"></i>
</a>
</li>
</ul>
</div>
<div class="col-12 col-sm-4 text-center py-2 order-sm-2">
<small class=text-white>&copy; 2022 AQUA Protocol All Rights Reserved</small>
<small class=ml-1><a href=https://aqua-protocol.org/privacy target=_blank rel=noopener>Privacy Policy</a></small>
</div>
</div>
</div>
</footer>
</div>
<script src=https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js integrity=sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.min.js integrity="sha512-UR25UO94eTnCVwjbXozyeVd6ZqpaAE9naiEUBK/A+QDbfSTQFhPGj5lOR6d8tsgbBk84Ggb5A3EkjsOgPRPcKA==" crossorigin=anonymous></script>
<script src=/js/tabpane-persist.js></script>
<script src=/js/main.min.8ab8f81ff7e1454d30024cd6f956d4d341c3a97e2a673f988065f2ee4e147922.js integrity="sha256-irj4H/fhRU0wAkzW+VbU00HDqX4qZz+YgGXy7k4UeSI=" crossorigin=anonymous></script>
</body>
</html>