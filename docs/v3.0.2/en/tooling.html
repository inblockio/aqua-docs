<!DOCTYPE html><!--DJ8Iqvr9DWq0AQJCrsokn--><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" href="/_next/static/media/797e433ab948586e-s.p.dbea232f.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="preload" href="/_next/static/media/caa3a2e1cccd8315-s.p.853070df.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="preload" as="image" href="/logo/aqua-logo.png"/><link rel="stylesheet" href="/_next/static/chunks/a06cf6f745569492.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/chunks/4bfa5a2d9fbd2059.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/a6e47069aa2a5c7c.js"/><script src="/_next/static/chunks/4af27f77bd5de33b.js" async=""></script><script src="/_next/static/chunks/41110fe9573610ba.js" async=""></script><script src="/_next/static/chunks/turbopack-771160cd9c29df65.js" async=""></script><script src="/_next/static/chunks/a423cf2782ee23a6.js" async=""></script><script src="/_next/static/chunks/150ebe81571675a9.js" async=""></script><script src="/_next/static/chunks/4421a3eabdff5f47.js" async=""></script><script src="/_next/static/chunks/d96012bcfc98706a.js" async=""></script><script src="/_next/static/chunks/73e3194f06db260e.js" async=""></script><meta name="next-size-adjust" content=""/><title>Tooling &amp; SDK | Aqua Protocol</title><meta name="description" content="Aqua JS SDK API reference and usage guide"/><link rel="canonical" href="https://aqua-protocol.org/docs/v3.0.2/en/tooling"/><meta property="og:title" content="Tooling &amp; SDK"/><meta property="og:description" content="Aqua JS SDK API reference and usage guide"/><meta property="og:url" content="https://aqua-protocol.org/docs/v3.0.2/en/tooling"/><meta property="og:site_name" content="Documentation Platform"/><meta property="og:locale" content="en_US"/><meta property="og:type" content="article"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:title" content="Tooling &amp; SDK"/><meta name="twitter:description" content="Aqua JS SDK API reference and usage guide"/><link rel="icon" href="/logo/aqua-logo.png"/><link rel="apple-touch-icon" href="/apple-icon.png"/><script src="/_next/static/chunks/a6dad97d9634a72d.js" noModule=""></script></head><body class="font-sans antialiased"><div hidden=""><!--$--><!--/$--></div><!--$--><!--$?--><template id="B:0"></template><div class="max-w-4xl mx-auto px-2 md:px-6 py-8"><div class="animate-pulse space-y-4"><div class="h-8 bg-gray-200 rounded w-3/4"></div><div class="h-4 bg-gray-200 rounded w-1/2"></div><div class="space-y-3 mt-8"><div class="h-4 bg-gray-200 rounded"></div><div class="h-4 bg-gray-200 rounded w-5/6"></div><div class="h-4 bg-gray-200 rounded w-4/6"></div></div></div></div><!--/$--><!--$--><!--/$--><!--/$--><script>requestAnimationFrame(function(){$RT=performance.now()});</script><script src="/_next/static/chunks/a6e47069aa2a5c7c.js" id="_R_" async=""></script><div hidden id="S:0"><div class="min-h-screen bg-background"><header class="sticky top-0 z-50 w-full border-b border-border bg-background/95 backdrop-blur supports-backdrop-filter:bg-background/60"><div class="container flex h-16 items-center justify-between px-2 md:px-6 mx-auto"><div class="flex items-center gap-1"><button class="lg:hidden hover:bg-muted p-2 rounded-md transition-colors" aria-label="Toggle menu"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-menu h-5 w-5"><line x1="4" x2="20" y1="12" y2="12"></line><line x1="4" x2="20" y1="6" y2="6"></line><line x1="4" x2="20" y1="18" y2="18"></line></svg></button><a class="flex items-center gap-2" href="/"><img src="/logo/aqua-logo.png" alt="Aqua Protocol" class="h-12 w-auto object-contain"/><span class="font-semibold text-lg text-foreground">Aqua Protocol</span></a></div><div class="flex items-center gap-2"><div class="relative"><button class="flex items-center gap-2 px-3 py-2 text-sm text-foreground bg-muted rounded-md hover:bg-muted/80 transition-colors"><span class="font-medium">v3.0.2</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down h-4 w-4"><path d="m6 9 6 6 6-6"></path></svg></button></div><a href="https://github.com/inblockio" target="_blank" rel="noopener noreferrer" class="hidden md:flex items-center justify-center h-9 w-9 rounded-md hover:bg-muted transition-colors" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-github h-4 w-4"><path d="M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4"></path><path d="M9 18c-4.51 2-5-2-7-2"></path></svg></a><a href="https://twitter.com/inblockio" target="_blank" rel="noopener noreferrer" class="hidden md:flex items-center justify-center h-9 w-9 rounded-md hover:bg-muted transition-colors" aria-label="Twitter"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-twitter h-4 w-4"><path d="M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z"></path></svg></a><button class="flex items-center justify-center w-9 h-9 rounded-md border border-border bg-background hover:bg-accent transition-colors" aria-label="Toggle theme"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-sun h-4 w-4 text-foreground"><circle cx="12" cy="12" r="4"></circle><path d="M12 2v2"></path><path d="M12 20v2"></path><path d="m4.93 4.93 1.41 1.41"></path><path d="m17.66 17.66 1.41 1.41"></path><path d="M2 12h2"></path><path d="M20 12h2"></path><path d="m6.34 17.66-1.41 1.41"></path><path d="m19.07 4.93-1.41 1.41"></path></svg></button><div class="relative"><button class="flex items-center gap-1.5 px-2 h-9 rounded-md hover:bg-muted transition-colors" aria-label="Switch language"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-languages h-4 w-4"><path d="m5 8 6 6"></path><path d="m4 14 6-6 2-3"></path><path d="M2 5h12"></path><path d="M7 2h1"></path><path d="m22 22-5-10-5 10"></path><path d="M14 18h6"></path></svg><span class="text-xs font-bold uppercase">en</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down h-3 w-3 text-muted-foreground"><path d="m6 9 6 6 6-6"></path></svg></button></div></div></div></header><div class="lg:hidden fixed top-0 left-0 h-full w-72 bg-background border-r border-border z-50 transform transition-transform duration-300 ease-in-out -translate-x-full"><div class="flex flex-col h-full"><div class="shrink-0 px-4 py-4 border-b border-border"><a class="flex items-center gap-2 group justify-center" href="/"><img src="/logo/aqua-logo.png" alt="Aqua Protocol" class="w-18 object-contain"/><div class="flex flex-col"><span class="font-semibold text-foreground group-hover:text-primary transition-colors">Aqua Protocol</span><span class="text-xs text-muted-foreground line-clamp-1">Aqua</span></div></a></div><div class="shrink-0 px-4 pt-4 pb-2"><h2 class="text-xs font-semibold text-muted-foreground uppercase tracking-wider px-2">Documentation</h2></div><div class="flex-1 overflow-y-auto px-4 py-4"><nav class="space-y-1"><a class="flex items-center gap-2 px-3 py-2 text-sm rounded-xl transition-all text-foreground hover:text-foreground hover:bg-accent/50" href="/docs/v3.0.2/en/concepts">Concepts</a><a class="flex items-center gap-2 px-3 py-2 text-sm rounded-xl transition-all text-foreground hover:text-foreground hover:bg-accent/50" href="/docs/v3.0.2/en/introduction">Aqua Protocol v3</a><a class="flex items-center gap-2 px-3 py-2 text-sm rounded-xl transition-all text-foreground hover:text-foreground hover:bg-accent/50" href="/docs/v3.0.2/en/schema">Schema Reference</a><a class="flex items-center gap-2 px-3 py-2 text-sm rounded-xl transition-all bg-primary/10 text-primary font-medium" href="/docs/v3.0.2/en/tooling">Tooling &amp; SDK</a></nav></div></div></div><main class="container mx-auto px-2 md:px-6 py-8"><div class="flex"><div class="hidden lg:block"><aside class="w-64 shrink-0 sticky top-24 self-start"><div class="max-h-[calc(100vh-7rem)] overflow-y-auto bg-muted/30 dark:bg-muted/10 rounded-2xl p-4 border border-border/50"><h2 class="text-xs font-semibold text-muted-foreground uppercase tracking-wider mb-4 px-2">Documentation</h2><nav class="space-y-1"><a class="flex items-center gap-2 px-3 py-2 text-sm rounded-xl transition-all text-foreground hover:text-foreground hover:bg-accent/50" href="/docs/v3.0.2/en/concepts">Concepts</a><a class="flex items-center gap-2 px-3 py-2 text-sm rounded-xl transition-all text-foreground hover:text-foreground hover:bg-accent/50" href="/docs/v3.0.2/en/introduction">Aqua Protocol v3</a><a class="flex items-center gap-2 px-3 py-2 text-sm rounded-xl transition-all text-foreground hover:text-foreground hover:bg-accent/50" href="/docs/v3.0.2/en/schema">Schema Reference</a><a class="flex items-center gap-2 px-3 py-2 text-sm rounded-xl transition-all bg-primary/10 text-primary font-medium" href="/docs/v3.0.2/en/tooling">Tooling &amp; SDK</a></nav></div></aside></div><div class="flex-1 min-w-0"><div class="flex flex-col gap-2 px-2 md:px-8"><article class="flex-1 min-w-0"><nav class="flex items-center gap-2 text-sm text-muted-foreground mb-4" aria-label="Breadcrumb"><div class="flex items-center gap-2"><a class="hover:text-foreground transition-colors" href="/docs/v3.0.2/en">Docs</a></div><div class="flex items-center gap-2"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4"><path d="m9 18 6-6-6-6"></path></svg><span class="text-foreground font-medium">Tooling &amp; SDK</span></div></nav><div class="mb-8"><h1 class="text-4xl font-bold tracking-tight mb-3 text-foreground">Tooling &amp; SDK</h1><p class="text-lg text-muted-foreground leading-relaxed">Aqua JS SDK API reference and usage guide</p></div><div class="flex flex-wrap items-center gap-4 text-sm text-muted-foreground border-b border-border pb-4 mb-6"><div class="flex items-center gap-1.5"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clock h-4 w-4"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg><span>9<!-- --> min read</span></div></div><div class="prose prose-slate dark:prose-invert max-w-none prose-headings:scroll-mt-24 prose-headings:font-semibold prose-h1:text-4xl prose-h2:text-3xl prose-h2:mt-12 prose-h2:mb-4 prose-h3:text-2xl prose-h3:mt-8 prose-h3:mb-3 prose-p:text-base prose-p:leading-7 prose-p:text-muted-foreground prose-p:mb-4 prose-a:font-normal prose-a:transition-all prose-code:text-primary prose-code:bg-muted/50 prose-code:px-1.5 prose-code:py-0.5 prose-code:rounded-md prose-code:text-[13px] prose-code:font-mono prose-code:border prose-code:border-border/50 prose-code:before:content-none prose-code:after:content-none prose-pre:bg-transparent prose-pre:p-0 prose-ul:list-disc prose-ul:list-inside prose-ul:space-y-2 prose-ul:mb-4 prose-ol:list-decimal prose-ol:list-inside prose-ol:space-y-2 prose-ol:mb-4 prose-li:leading-7 prose-li:text-muted-foreground prose-strong:text-foreground prose-strong:font-semibold"><h1 class="text-3xl font-semibold tracking-tight mb-6 text-foreground">Aqua Protocol v3 - Tooling &amp; SDK</h1>
<p class="text-base leading-7 text-muted-foreground mb-4">The Aqua JS SDK (aqua-js-sdk) is a comprehensive TypeScript library for working with Aqua Protocol v3. It provides a complete API for creating, signing, witnessing, and verifying revision chains across multiple platforms.</p>
<h2 id="installation" class="text-2xl font-semibold tracking-tight mt-10 mb-4 text-foreground scroll-mt-24">Installation</h2>
<div class="relative group my-2"><div class="bg-muted/50 dark:bg-muted/30 px-4 py-2 rounded-t-xl border border-b-0 border-border/50 flex items-center justify-between"><div class="flex items-center gap-3"><div class="flex items-center gap-1.5"><div class="w-3 h-3 rounded-full bg-red-500/80 dark:bg-red-500/60"></div><div class="w-3 h-3 rounded-full bg-yellow-500/80 dark:bg-yellow-500/60"></div><div class="w-3 h-3 rounded-full bg-green-500/80 dark:bg-green-500/60"></div></div><span class="text-xs font-mono text-foreground">Code</span></div><div class="flex items-center gap-2"><span class="text-xs text-muted-foreground/60 font-mono uppercase tracking-wide">bash</span><button class="p-1.5 rounded-md hover:bg-muted/50 transition-colors" aria-label="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-4 w-4 text-muted-foreground"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div></div><div class="bg-gray-200/50 dark:bg-[#0d1117] rounded-b-xl overflow-x-auto border border-border/50"><pre class="p-2 text-[13px] font-mono leading-relaxed text-gray-800 dark:text-gray-200"><code class="table w-full"><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">1</span><span class="table-cell align-top"><span class="token-text">n</span><span class="token-text">p</span><span class="token-text">m</span><span class="token-text"> </span><span class="token-text">i</span><span class="token-text">n</span><span class="token-text">s</span><span class="token-text">t</span><span class="token-text">a</span><span class="token-text">l</span><span class="token-text">l</span><span class="token-text"> </span><span class="token-text">a</span><span class="token-text">q</span><span class="token-text">u</span><span class="token-text">a</span><span class="token-operator">-</span><span class="token-text">j</span><span class="token-text">s</span><span class="token-operator">-</span><span class="token-text">s</span><span class="token-text">d</span><span class="token-text">k</span></span></div></code></pre></div></div>
<h3 id="platform-specific-imports" class="text-xl font-medium tracking-tight mt-8 mb-3 text-foreground scroll-mt-24">Platform-Specific Imports</h3>
<div class="relative group my-2"><div class="bg-muted/50 dark:bg-muted/30 px-4 py-2 rounded-t-xl border border-b-0 border-border/50 flex items-center justify-between"><div class="flex items-center gap-3"><div class="flex items-center gap-1.5"><div class="w-3 h-3 rounded-full bg-red-500/80 dark:bg-red-500/60"></div><div class="w-3 h-3 rounded-full bg-yellow-500/80 dark:bg-yellow-500/60"></div><div class="w-3 h-3 rounded-full bg-green-500/80 dark:bg-green-500/60"></div></div><span class="text-xs font-mono text-foreground">Code</span></div><div class="flex items-center gap-2"><span class="text-xs text-muted-foreground/60 font-mono uppercase tracking-wide">typescript</span><button class="p-1.5 rounded-md hover:bg-muted/50 transition-colors" aria-label="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-4 w-4 text-muted-foreground"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div></div><div class="bg-gray-200/50 dark:bg-[#0d1117] rounded-b-xl overflow-x-auto border border-border/50"><pre class="p-2 text-[13px] font-mono leading-relaxed text-gray-800 dark:text-gray-200"><code class="table w-full"><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">1</span><span class="table-cell align-top"><span class="token-comment">// Node.js (default)</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">2</span><span class="table-cell align-top"><span class="token-keyword">import</span><span class="token-text"> </span><span class="token-text">A</span><span class="token-text">q</span><span class="token-text">u</span><span class="token-text">a</span><span class="token-text">f</span><span class="token-text">i</span><span class="token-text">e</span><span class="token-text">r</span><span class="token-text"> </span><span class="token-keyword">from</span><span class="token-text"> </span><span class="token-string">&#x27;aqua-js-sdk&#x27;</span><span class="token-punctuation">;</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">3</span><span class="table-cell align-top"><span> </span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">4</span><span class="table-cell align-top"><span class="token-comment">// Web Browser</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">5</span><span class="table-cell align-top"><span class="token-keyword">import</span><span class="token-text"> </span><span class="token-text">A</span><span class="token-text">q</span><span class="token-text">u</span><span class="token-text">a</span><span class="token-text">f</span><span class="token-text">i</span><span class="token-text">e</span><span class="token-text">r</span><span class="token-text"> </span><span class="token-keyword">from</span><span class="token-text"> </span><span class="token-string">&#x27;aqua-js-sdk/web&#x27;</span><span class="token-punctuation">;</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">6</span><span class="table-cell align-top"><span> </span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">7</span><span class="table-cell align-top"><span class="token-comment">// React Native</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">8</span><span class="table-cell align-top"><span class="token-keyword">import</span><span class="token-text"> </span><span class="token-text">A</span><span class="token-text">q</span><span class="token-text">u</span><span class="token-text">a</span><span class="token-text">f</span><span class="token-text">i</span><span class="token-text">e</span><span class="token-text">r</span><span class="token-text"> </span><span class="token-keyword">from</span><span class="token-text"> </span><span class="token-string">&#x27;aqua-js-sdk/react-native&#x27;</span><span class="token-punctuation">;</span></span></div></code></pre></div></div>
<h2 id="core-api" class="text-2xl font-semibold tracking-tight mt-10 mb-4 text-foreground scroll-mt-24">Core API</h2>
<h3 id="aquafier-class" class="text-xl font-medium tracking-tight mt-8 mb-3 text-foreground scroll-mt-24">Aquafier Class</h3>
<p class="text-base leading-7 text-muted-foreground mb-4">The main class providing all Aqua Protocol operations.</p>
<h4 id="constructor">Constructor</h4>
<div class="relative group my-2"><div class="bg-muted/50 dark:bg-muted/30 px-4 py-2 rounded-t-xl border border-b-0 border-border/50 flex items-center justify-between"><div class="flex items-center gap-3"><div class="flex items-center gap-1.5"><div class="w-3 h-3 rounded-full bg-red-500/80 dark:bg-red-500/60"></div><div class="w-3 h-3 rounded-full bg-yellow-500/80 dark:bg-yellow-500/60"></div><div class="w-3 h-3 rounded-full bg-green-500/80 dark:bg-green-500/60"></div></div><span class="text-xs font-mono text-foreground">Code</span></div><div class="flex items-center gap-2"><span class="text-xs text-muted-foreground/60 font-mono uppercase tracking-wide">typescript</span><button class="p-1.5 rounded-md hover:bg-muted/50 transition-colors" aria-label="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-4 w-4 text-muted-foreground"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div></div><div class="bg-gray-200/50 dark:bg-[#0d1117] rounded-b-xl overflow-x-auto border border-border/50"><pre class="p-2 text-[13px] font-mono leading-relaxed text-gray-800 dark:text-gray-200"><code class="table w-full"><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">1</span><span class="table-cell align-top"><span class="token-keyword">const</span><span class="token-text"> </span><span class="token-text">a</span><span class="token-text">q</span><span class="token-text">u</span><span class="token-text">a</span><span class="token-text">f</span><span class="token-text">i</span><span class="token-text">e</span><span class="token-text">r</span><span class="token-text"> </span><span class="token-operator">=</span><span class="token-text"> </span><span class="token-keyword">new</span><span class="token-text"> </span><span class="token-function">Aquafier</span><span class="token-punctuation">(</span><span class="token-punctuation">)</span><span class="token-punctuation">;</span></span></div></code></pre></div></div>
<p class="text-base leading-7 text-muted-foreground mb-4">No configuration needed for initialization.</p>
<hr/>
<h3 id="creating-revisions" class="text-xl font-medium tracking-tight mt-8 mb-3 text-foreground scroll-mt-24">Creating Revisions</h3>
<h4 id="creategenesisrevision">createGenesisRevision()</h4>
<p class="text-base leading-7 text-muted-foreground mb-4">Creates the first revision in a new AquaTree.</p>
<p class="text-base leading-7 text-muted-foreground mb-4"><strong>Signature:</strong></p>
<div class="relative group my-2"><div class="bg-muted/50 dark:bg-muted/30 px-4 py-2 rounded-t-xl border border-b-0 border-border/50 flex items-center justify-between"><div class="flex items-center gap-3"><div class="flex items-center gap-1.5"><div class="w-3 h-3 rounded-full bg-red-500/80 dark:bg-red-500/60"></div><div class="w-3 h-3 rounded-full bg-yellow-500/80 dark:bg-yellow-500/60"></div><div class="w-3 h-3 rounded-full bg-green-500/80 dark:bg-green-500/60"></div></div><span class="text-xs font-mono text-foreground">Code</span></div><div class="flex items-center gap-2"><span class="text-xs text-muted-foreground/60 font-mono uppercase tracking-wide">typescript</span><button class="p-1.5 rounded-md hover:bg-muted/50 transition-colors" aria-label="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-4 w-4 text-muted-foreground"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div></div><div class="bg-gray-200/50 dark:bg-[#0d1117] rounded-b-xl overflow-x-auto border border-border/50"><pre class="p-2 text-[13px] font-mono leading-relaxed text-gray-800 dark:text-gray-200"><code class="table w-full"><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">1</span><span class="table-cell align-top"><span class="token-keyword">async</span><span class="token-text"> </span><span class="token-function">createGenesisRevision</span><span class="token-punctuation">(</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">2</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">f</span><span class="token-text">i</span><span class="token-text">l</span><span class="token-text">e</span><span class="token-text">O</span><span class="token-text">b</span><span class="token-text">j</span><span class="token-text">e</span><span class="token-text">c</span><span class="token-text">t</span><span class="token-operator">:</span><span class="token-text"> </span><span class="token-text">F</span><span class="token-text">i</span><span class="token-text">l</span><span class="token-text">e</span><span class="token-text">O</span><span class="token-text">b</span><span class="token-text">j</span><span class="token-text">e</span><span class="token-text">c</span><span class="token-text">t</span><span class="token-punctuation">,</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">3</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">i</span><span class="token-text">s</span><span class="token-text">F</span><span class="token-text">o</span><span class="token-text">r</span><span class="token-text">m</span><span class="token-operator">?:</span><span class="token-text"> </span><span class="token-text">b</span><span class="token-text">o</span><span class="token-text">o</span><span class="token-text">l</span><span class="token-text">e</span><span class="token-text">a</span><span class="token-text">n</span><span class="token-punctuation">,</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">4</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">e</span><span class="token-text">n</span><span class="token-text">a</span><span class="token-text">b</span><span class="token-text">l</span><span class="token-text">e</span><span class="token-text">C</span><span class="token-text">o</span><span class="token-text">n</span><span class="token-text">t</span><span class="token-text">e</span><span class="token-text">n</span><span class="token-text">t</span><span class="token-operator">?:</span><span class="token-text"> </span><span class="token-text">b</span><span class="token-text">o</span><span class="token-text">o</span><span class="token-text">l</span><span class="token-text">e</span><span class="token-text">a</span><span class="token-text">n</span><span class="token-punctuation">,</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">5</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">e</span><span class="token-text">n</span><span class="token-text">a</span><span class="token-text">b</span><span class="token-text">l</span><span class="token-text">e</span><span class="token-text">S</span><span class="token-text">c</span><span class="token-text">a</span><span class="token-text">l</span><span class="token-text">a</span><span class="token-text">r</span><span class="token-operator">?:</span><span class="token-text"> </span><span class="token-text">b</span><span class="token-text">o</span><span class="token-text">o</span><span class="token-text">l</span><span class="token-text">e</span><span class="token-text">a</span><span class="token-text">n</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">6</span><span class="table-cell align-top"><span class="token-punctuation">)</span><span class="token-operator">:</span><span class="token-text"> </span><span class="token-text">P</span><span class="token-text">r</span><span class="token-text">o</span><span class="token-text">m</span><span class="token-text">i</span><span class="token-text">s</span><span class="token-text">e</span><span class="token-operator">&lt;</span><span class="token-text">R</span><span class="token-text">e</span><span class="token-text">s</span><span class="token-text">u</span><span class="token-text">l</span><span class="token-text">t</span><span class="token-operator">&lt;</span><span class="token-text">A</span><span class="token-text">q</span><span class="token-text">u</span><span class="token-text">a</span><span class="token-text">O</span><span class="token-text">p</span><span class="token-text">e</span><span class="token-text">r</span><span class="token-text">a</span><span class="token-text">t</span><span class="token-text">i</span><span class="token-text">o</span><span class="token-text">n</span><span class="token-text">D</span><span class="token-text">a</span><span class="token-text">t</span><span class="token-text">a</span><span class="token-punctuation">,</span><span class="token-text"> </span><span class="token-text">L</span><span class="token-text">o</span><span class="token-text">g</span><span class="token-text">D</span><span class="token-text">a</span><span class="token-text">t</span><span class="token-text">a</span><span class="token-punctuation">[</span><span class="token-punctuation">]</span><span class="token-operator">&gt;&gt;</span></span></div></code></pre></div></div>
<p class="text-base leading-7 text-muted-foreground mb-4"><strong>Parameters:</strong></p>
<ul class="list-disc list-outside pl-5 space-y-2 mb-4 text-muted-foreground [&amp;_p]:mb-0 [&amp;_p]:inline [&amp;_ul]:ml-6 [&amp;_ol]:ml-6">
<li class="leading-7 [&amp;&gt;p]:mb-0 [&amp;&gt;p]:inline"><code class="px-1.5 py-0.5 rounded-md bg-muted/50 text-primary font-mono text-[13px] border border-border/50">fileObject</code>: File data to create revision from</li>
<li class="leading-7 [&amp;&gt;p]:mb-0 [&amp;&gt;p]:inline"><code class="px-1.5 py-0.5 rounded-md bg-muted/50 text-primary font-mono text-[13px] border border-border/50">isForm</code>: If true, creates form revision (default: false)</li>
<li class="leading-7 [&amp;&gt;p]:mb-0 [&amp;&gt;p]:inline"><code class="px-1.5 py-0.5 rounded-md bg-muted/50 text-primary font-mono text-[13px] border border-border/50">enableContent</code>: Include file content in revision (default: false)</li>
<li class="leading-7 [&amp;&gt;p]:mb-0 [&amp;&gt;p]:inline"><code class="px-1.5 py-0.5 rounded-md bg-muted/50 text-primary font-mono text-[13px] border border-border/50">enableScalar</code>: Use scalar method instead of tree (default: true)</li>
</ul>
<p class="text-base leading-7 text-muted-foreground mb-4"><strong>Returns:</strong></p>
<ul class="list-disc list-outside pl-5 space-y-2 mb-4 text-muted-foreground [&amp;_p]:mb-0 [&amp;_p]:inline [&amp;_ul]:ml-6 [&amp;_ol]:ml-6">
<li class="leading-7 [&amp;&gt;p]:mb-0 [&amp;&gt;p]:inline">Success: <code class="px-1.5 py-0.5 rounded-md bg-muted/50 text-primary font-mono text-[13px] border border-border/50">AquaOperationData</code> with new AquaTree</li>
<li class="leading-7 [&amp;&gt;p]:mb-0 [&amp;&gt;p]:inline">Failure: Array of error logs</li>
</ul>
<p class="text-base leading-7 text-muted-foreground mb-4"><strong>Example:</strong></p>
<div class="relative group my-2"><div class="bg-muted/50 dark:bg-muted/30 px-4 py-2 rounded-t-xl border border-b-0 border-border/50 flex items-center justify-between"><div class="flex items-center gap-3"><div class="flex items-center gap-1.5"><div class="w-3 h-3 rounded-full bg-red-500/80 dark:bg-red-500/60"></div><div class="w-3 h-3 rounded-full bg-yellow-500/80 dark:bg-yellow-500/60"></div><div class="w-3 h-3 rounded-full bg-green-500/80 dark:bg-green-500/60"></div></div><span class="text-xs font-mono text-foreground">Code</span></div><div class="flex items-center gap-2"><span class="text-xs text-muted-foreground/60 font-mono uppercase tracking-wide">typescript</span><button class="p-1.5 rounded-md hover:bg-muted/50 transition-colors" aria-label="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-4 w-4 text-muted-foreground"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div></div><div class="bg-gray-200/50 dark:bg-[#0d1117] rounded-b-xl overflow-x-auto border border-border/50"><pre class="p-2 text-[13px] font-mono leading-relaxed text-gray-800 dark:text-gray-200"><code class="table w-full"><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">1</span><span class="table-cell align-top"><span class="token-keyword">const</span><span class="token-text"> </span><span class="token-text">f</span><span class="token-text">i</span><span class="token-text">l</span><span class="token-text">e</span><span class="token-text">O</span><span class="token-text">b</span><span class="token-text">j</span><span class="token-text">e</span><span class="token-text">c</span><span class="token-text">t</span><span class="token-operator">:</span><span class="token-text"> </span><span class="token-text">F</span><span class="token-text">i</span><span class="token-text">l</span><span class="token-text">e</span><span class="token-text">O</span><span class="token-text">b</span><span class="token-text">j</span><span class="token-text">e</span><span class="token-text">c</span><span class="token-text">t</span><span class="token-text"> </span><span class="token-operator">=</span><span class="token-text"> </span><span class="token-punctuation">{</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">2</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">f</span><span class="token-text">i</span><span class="token-text">l</span><span class="token-text">e</span><span class="token-text">N</span><span class="token-text">a</span><span class="token-text">m</span><span class="token-text">e</span><span class="token-operator">:</span><span class="token-text"> </span><span class="token-string">&quot;contract.pdf&quot;</span><span class="token-punctuation">,</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">3</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">f</span><span class="token-text">i</span><span class="token-text">l</span><span class="token-text">e</span><span class="token-text">C</span><span class="token-text">o</span><span class="token-text">n</span><span class="token-text">t</span><span class="token-text">e</span><span class="token-text">n</span><span class="token-text">t</span><span class="token-operator">:</span><span class="token-text"> </span><span class="token-text">p</span><span class="token-text">d</span><span class="token-text">f</span><span class="token-text">B</span><span class="token-text">u</span><span class="token-text">f</span><span class="token-text">f</span><span class="token-text">e</span><span class="token-text">r</span><span class="token-punctuation">,</span><span class="token-text"> </span><span class="token-comment">// Uint8Array or string</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">4</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">p</span><span class="token-text">a</span><span class="token-text">t</span><span class="token-text">h</span><span class="token-operator">:</span><span class="token-text"> </span><span class="token-string">&quot;/documents/contract.pdf&quot;</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">5</span><span class="table-cell align-top"><span class="token-punctuation">}</span><span class="token-punctuation">;</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">6</span><span class="table-cell align-top"><span> </span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">7</span><span class="table-cell align-top"><span class="token-keyword">const</span><span class="token-text"> </span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">s</span><span class="token-text">u</span><span class="token-text">l</span><span class="token-text">t</span><span class="token-text"> </span><span class="token-operator">=</span><span class="token-text"> </span><span class="token-keyword">await</span><span class="token-text"> </span><span class="token-text">a</span><span class="token-text">q</span><span class="token-text">u</span><span class="token-text">a</span><span class="token-text">f</span><span class="token-text">i</span><span class="token-text">e</span><span class="token-text">r</span><span class="token-property">.createGenesisRevision</span><span class="token-punctuation">(</span><span class="token-text">f</span><span class="token-text">i</span><span class="token-text">l</span><span class="token-text">e</span><span class="token-text">O</span><span class="token-text">b</span><span class="token-text">j</span><span class="token-text">e</span><span class="token-text">c</span><span class="token-text">t</span><span class="token-punctuation">)</span><span class="token-punctuation">;</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">8</span><span class="table-cell align-top"><span> </span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">9</span><span class="table-cell align-top"><span class="token-keyword">if</span><span class="token-text"> </span><span class="token-punctuation">(</span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">s</span><span class="token-text">u</span><span class="token-text">l</span><span class="token-text">t</span><span class="token-property">.isErr</span><span class="token-punctuation">)</span><span class="token-text"> </span><span class="token-punctuation">{</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">10</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">s</span><span class="token-text">u</span><span class="token-text">l</span><span class="token-text">t</span><span class="token-property">.data</span><span class="token-property">.logData</span><span class="token-property">.forEach</span><span class="token-punctuation">(</span><span class="token-text">l</span><span class="token-text">o</span><span class="token-text">g</span><span class="token-text"> </span><span class="token-operator">=&gt;</span><span class="token-text"> </span><span class="token-text">c</span><span class="token-text">o</span><span class="token-text">n</span><span class="token-text">s</span><span class="token-text">o</span><span class="token-text">l</span><span class="token-text">e</span><span class="token-property">.error</span><span class="token-punctuation">(</span><span class="token-text">l</span><span class="token-text">o</span><span class="token-text">g</span><span class="token-punctuation">)</span><span class="token-punctuation">)</span><span class="token-punctuation">;</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">11</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-keyword">return</span><span class="token-punctuation">;</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">12</span><span class="table-cell align-top"><span class="token-punctuation">}</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">13</span><span class="table-cell align-top"><span> </span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">14</span><span class="table-cell align-top"><span class="token-keyword">const</span><span class="token-text"> </span><span class="token-text">a</span><span class="token-text">q</span><span class="token-text">u</span><span class="token-text">a</span><span class="token-text">T</span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">e</span><span class="token-text"> </span><span class="token-operator">=</span><span class="token-text"> </span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">s</span><span class="token-text">u</span><span class="token-text">l</span><span class="token-text">t</span><span class="token-property">.data</span><span class="token-property">.aquaTree</span><span class="token-punctuation">;</span></span></div></code></pre></div></div>
<h4 id="createnewrevision">createNewRevision()</h4>
<p class="text-base leading-7 text-muted-foreground mb-4">Adds a new file/form revision to an existing AquaTree.</p>
<p class="text-base leading-7 text-muted-foreground mb-4"><strong>Signature:</strong></p>
<div class="relative group my-2"><div class="bg-muted/50 dark:bg-muted/30 px-4 py-2 rounded-t-xl border border-b-0 border-border/50 flex items-center justify-between"><div class="flex items-center gap-3"><div class="flex items-center gap-1.5"><div class="w-3 h-3 rounded-full bg-red-500/80 dark:bg-red-500/60"></div><div class="w-3 h-3 rounded-full bg-yellow-500/80 dark:bg-yellow-500/60"></div><div class="w-3 h-3 rounded-full bg-green-500/80 dark:bg-green-500/60"></div></div><span class="text-xs font-mono text-foreground">Code</span></div><div class="flex items-center gap-2"><span class="text-xs text-muted-foreground/60 font-mono uppercase tracking-wide">typescript</span><button class="p-1.5 rounded-md hover:bg-muted/50 transition-colors" aria-label="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-4 w-4 text-muted-foreground"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div></div><div class="bg-gray-200/50 dark:bg-[#0d1117] rounded-b-xl overflow-x-auto border border-border/50"><pre class="p-2 text-[13px] font-mono leading-relaxed text-gray-800 dark:text-gray-200"><code class="table w-full"><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">1</span><span class="table-cell align-top"><span class="token-keyword">async</span><span class="token-text"> </span><span class="token-function">createNewRevision</span><span class="token-punctuation">(</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">2</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">a</span><span class="token-text">q</span><span class="token-text">u</span><span class="token-text">a</span><span class="token-text">T</span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">e</span><span class="token-operator">:</span><span class="token-text"> </span><span class="token-text">A</span><span class="token-text">q</span><span class="token-text">u</span><span class="token-text">a</span><span class="token-text">T</span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">e</span><span class="token-punctuation">,</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">3</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">f</span><span class="token-text">i</span><span class="token-text">l</span><span class="token-text">e</span><span class="token-text">O</span><span class="token-text">b</span><span class="token-text">j</span><span class="token-text">e</span><span class="token-text">c</span><span class="token-text">t</span><span class="token-operator">:</span><span class="token-text"> </span><span class="token-text">F</span><span class="token-text">i</span><span class="token-text">l</span><span class="token-text">e</span><span class="token-text">O</span><span class="token-text">b</span><span class="token-text">j</span><span class="token-text">e</span><span class="token-text">c</span><span class="token-text">t</span><span class="token-punctuation">,</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">4</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">i</span><span class="token-text">s</span><span class="token-text">F</span><span class="token-text">o</span><span class="token-text">r</span><span class="token-text">m</span><span class="token-operator">?:</span><span class="token-text"> </span><span class="token-text">b</span><span class="token-text">o</span><span class="token-text">o</span><span class="token-text">l</span><span class="token-text">e</span><span class="token-text">a</span><span class="token-text">n</span><span class="token-punctuation">,</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">5</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">e</span><span class="token-text">n</span><span class="token-text">a</span><span class="token-text">b</span><span class="token-text">l</span><span class="token-text">e</span><span class="token-text">C</span><span class="token-text">o</span><span class="token-text">n</span><span class="token-text">t</span><span class="token-text">e</span><span class="token-text">n</span><span class="token-text">t</span><span class="token-operator">?:</span><span class="token-text"> </span><span class="token-text">b</span><span class="token-text">o</span><span class="token-text">o</span><span class="token-text">l</span><span class="token-text">e</span><span class="token-text">a</span><span class="token-text">n</span><span class="token-punctuation">,</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">6</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">e</span><span class="token-text">n</span><span class="token-text">a</span><span class="token-text">b</span><span class="token-text">l</span><span class="token-text">e</span><span class="token-text">S</span><span class="token-text">c</span><span class="token-text">a</span><span class="token-text">l</span><span class="token-text">a</span><span class="token-text">r</span><span class="token-operator">?:</span><span class="token-text"> </span><span class="token-text">b</span><span class="token-text">o</span><span class="token-text">o</span><span class="token-text">l</span><span class="token-text">e</span><span class="token-text">a</span><span class="token-text">n</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">7</span><span class="table-cell align-top"><span class="token-punctuation">)</span><span class="token-operator">:</span><span class="token-text"> </span><span class="token-text">P</span><span class="token-text">r</span><span class="token-text">o</span><span class="token-text">m</span><span class="token-text">i</span><span class="token-text">s</span><span class="token-text">e</span><span class="token-operator">&lt;</span><span class="token-text">R</span><span class="token-text">e</span><span class="token-text">s</span><span class="token-text">u</span><span class="token-text">l</span><span class="token-text">t</span><span class="token-operator">&lt;</span><span class="token-text">A</span><span class="token-text">q</span><span class="token-text">u</span><span class="token-text">a</span><span class="token-text">O</span><span class="token-text">p</span><span class="token-text">e</span><span class="token-text">r</span><span class="token-text">a</span><span class="token-text">t</span><span class="token-text">i</span><span class="token-text">o</span><span class="token-text">n</span><span class="token-text">D</span><span class="token-text">a</span><span class="token-text">t</span><span class="token-text">a</span><span class="token-punctuation">,</span><span class="token-text"> </span><span class="token-text">L</span><span class="token-text">o</span><span class="token-text">g</span><span class="token-text">D</span><span class="token-text">a</span><span class="token-text">t</span><span class="token-text">a</span><span class="token-punctuation">[</span><span class="token-punctuation">]</span><span class="token-operator">&gt;&gt;</span></span></div></code></pre></div></div>
<p class="text-base leading-7 text-muted-foreground mb-4"><strong>Example:</strong></p>
<div class="relative group my-2"><div class="bg-muted/50 dark:bg-muted/30 px-4 py-2 rounded-t-xl border border-b-0 border-border/50 flex items-center justify-between"><div class="flex items-center gap-3"><div class="flex items-center gap-1.5"><div class="w-3 h-3 rounded-full bg-red-500/80 dark:bg-red-500/60"></div><div class="w-3 h-3 rounded-full bg-yellow-500/80 dark:bg-yellow-500/60"></div><div class="w-3 h-3 rounded-full bg-green-500/80 dark:bg-green-500/60"></div></div><span class="text-xs font-mono text-foreground">Code</span></div><div class="flex items-center gap-2"><span class="text-xs text-muted-foreground/60 font-mono uppercase tracking-wide">typescript</span><button class="p-1.5 rounded-md hover:bg-muted/50 transition-colors" aria-label="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-4 w-4 text-muted-foreground"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div></div><div class="bg-gray-200/50 dark:bg-[#0d1117] rounded-b-xl overflow-x-auto border border-border/50"><pre class="p-2 text-[13px] font-mono leading-relaxed text-gray-800 dark:text-gray-200"><code class="table w-full"><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">1</span><span class="table-cell align-top"><span class="token-keyword">const</span><span class="token-text"> </span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">s</span><span class="token-text">u</span><span class="token-text">l</span><span class="token-text">t</span><span class="token-text"> </span><span class="token-operator">=</span><span class="token-text"> </span><span class="token-keyword">await</span><span class="token-text"> </span><span class="token-text">a</span><span class="token-text">q</span><span class="token-text">u</span><span class="token-text">a</span><span class="token-text">f</span><span class="token-text">i</span><span class="token-text">e</span><span class="token-text">r</span><span class="token-property">.createNewRevision</span><span class="token-punctuation">(</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">2</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">e</span><span class="token-text">x</span><span class="token-text">i</span><span class="token-text">s</span><span class="token-text">t</span><span class="token-text">i</span><span class="token-text">n</span><span class="token-text">g</span><span class="token-text">A</span><span class="token-text">q</span><span class="token-text">u</span><span class="token-text">a</span><span class="token-text">T</span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">e</span><span class="token-punctuation">,</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">3</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">u</span><span class="token-text">p</span><span class="token-text">d</span><span class="token-text">a</span><span class="token-text">t</span><span class="token-text">e</span><span class="token-text">d</span><span class="token-text">F</span><span class="token-text">i</span><span class="token-text">l</span><span class="token-text">e</span><span class="token-text">O</span><span class="token-text">b</span><span class="token-text">j</span><span class="token-text">e</span><span class="token-text">c</span><span class="token-text">t</span><span class="token-punctuation">,</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">4</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-keyword">false</span><span class="token-punctuation">,</span><span class="token-text">  </span><span class="token-comment">// not a form</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">5</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-keyword">false</span><span class="token-punctuation">,</span><span class="token-text">  </span><span class="token-comment">// don&#x27;t embed content</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">6</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-keyword">true</span><span class="token-text">    </span><span class="token-comment">// use scalar method</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">7</span><span class="table-cell align-top"><span class="token-punctuation">)</span><span class="token-punctuation">;</span></span></div></code></pre></div></div>
<hr/>
<h3 id="signing-revisions" class="text-xl font-medium tracking-tight mt-8 mb-3 text-foreground scroll-mt-24">Signing Revisions</h3>
<h4 id="signrevision">signRevision()</h4>
<p class="text-base leading-7 text-muted-foreground mb-4">Signs the latest revision in an AquaTree.</p>
<p class="text-base leading-7 text-muted-foreground mb-4"><strong>Signature:</strong></p>
<div class="relative group my-2"><div class="bg-muted/50 dark:bg-muted/30 px-4 py-2 rounded-t-xl border border-b-0 border-border/50 flex items-center justify-between"><div class="flex items-center gap-3"><div class="flex items-center gap-1.5"><div class="w-3 h-3 rounded-full bg-red-500/80 dark:bg-red-500/60"></div><div class="w-3 h-3 rounded-full bg-yellow-500/80 dark:bg-yellow-500/60"></div><div class="w-3 h-3 rounded-full bg-green-500/80 dark:bg-green-500/60"></div></div><span class="text-xs font-mono text-foreground">Code</span></div><div class="flex items-center gap-2"><span class="text-xs text-muted-foreground/60 font-mono uppercase tracking-wide">typescript</span><button class="p-1.5 rounded-md hover:bg-muted/50 transition-colors" aria-label="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-4 w-4 text-muted-foreground"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div></div><div class="bg-gray-200/50 dark:bg-[#0d1117] rounded-b-xl overflow-x-auto border border-border/50"><pre class="p-2 text-[13px] font-mono leading-relaxed text-gray-800 dark:text-gray-200"><code class="table w-full"><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">1</span><span class="table-cell align-top"><span class="token-keyword">async</span><span class="token-text"> </span><span class="token-function">signRevision</span><span class="token-punctuation">(</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">2</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">a</span><span class="token-text">q</span><span class="token-text">u</span><span class="token-text">a</span><span class="token-text">T</span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">e</span><span class="token-operator">:</span><span class="token-text"> </span><span class="token-text">A</span><span class="token-text">q</span><span class="token-text">u</span><span class="token-text">a</span><span class="token-text">T</span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">e</span><span class="token-punctuation">,</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">3</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">s</span><span class="token-text">i</span><span class="token-text">g</span><span class="token-text">n</span><span class="token-text">T</span><span class="token-text">y</span><span class="token-text">p</span><span class="token-text">e</span><span class="token-operator">:</span><span class="token-text"> </span><span class="token-text">S</span><span class="token-text">i</span><span class="token-text">g</span><span class="token-text">n</span><span class="token-text">T</span><span class="token-text">y</span><span class="token-text">p</span><span class="token-text">e</span><span class="token-punctuation">,</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">4</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">c</span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">d</span><span class="token-text">e</span><span class="token-text">n</span><span class="token-text">t</span><span class="token-text">i</span><span class="token-text">a</span><span class="token-text">l</span><span class="token-text">s</span><span class="token-operator">?:</span><span class="token-text"> </span><span class="token-text">C</span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">d</span><span class="token-text">e</span><span class="token-text">n</span><span class="token-text">t</span><span class="token-text">i</span><span class="token-text">a</span><span class="token-text">l</span><span class="token-text">s</span><span class="token-text">D</span><span class="token-text">a</span><span class="token-text">t</span><span class="token-text">a</span><span class="token-punctuation">,</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">5</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">i</span><span class="token-text">n</span><span class="token-text">l</span><span class="token-text">i</span><span class="token-text">n</span><span class="token-text">e</span><span class="token-text">O</span><span class="token-text">p</span><span class="token-text">t</span><span class="token-text">i</span><span class="token-text">o</span><span class="token-text">n</span><span class="token-text">s</span><span class="token-operator">?:</span><span class="token-text"> </span><span class="token-text">I</span><span class="token-text">n</span><span class="token-text">l</span><span class="token-text">i</span><span class="token-text">n</span><span class="token-text">e</span><span class="token-text">S</span><span class="token-text">i</span><span class="token-text">g</span><span class="token-text">n</span><span class="token-text">e</span><span class="token-text">r</span><span class="token-text">O</span><span class="token-text">p</span><span class="token-text">t</span><span class="token-text">i</span><span class="token-text">o</span><span class="token-text">n</span><span class="token-text">s</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">6</span><span class="table-cell align-top"><span class="token-punctuation">)</span><span class="token-operator">:</span><span class="token-text"> </span><span class="token-text">P</span><span class="token-text">r</span><span class="token-text">o</span><span class="token-text">m</span><span class="token-text">i</span><span class="token-text">s</span><span class="token-text">e</span><span class="token-operator">&lt;</span><span class="token-text">R</span><span class="token-text">e</span><span class="token-text">s</span><span class="token-text">u</span><span class="token-text">l</span><span class="token-text">t</span><span class="token-operator">&lt;</span><span class="token-text">A</span><span class="token-text">q</span><span class="token-text">u</span><span class="token-text">a</span><span class="token-text">O</span><span class="token-text">p</span><span class="token-text">e</span><span class="token-text">r</span><span class="token-text">a</span><span class="token-text">t</span><span class="token-text">i</span><span class="token-text">o</span><span class="token-text">n</span><span class="token-text">D</span><span class="token-text">a</span><span class="token-text">t</span><span class="token-text">a</span><span class="token-punctuation">,</span><span class="token-text"> </span><span class="token-text">L</span><span class="token-text">o</span><span class="token-text">g</span><span class="token-text">D</span><span class="token-text">a</span><span class="token-text">t</span><span class="token-text">a</span><span class="token-punctuation">[</span><span class="token-punctuation">]</span><span class="token-operator">&gt;&gt;</span></span></div></code></pre></div></div>
<p class="text-base leading-7 text-muted-foreground mb-4"><strong>Parameters:</strong></p>
<ul class="list-disc list-outside pl-5 space-y-2 mb-4 text-muted-foreground [&amp;_p]:mb-0 [&amp;_p]:inline [&amp;_ul]:ml-6 [&amp;_ol]:ml-6">
<li class="leading-7 [&amp;&gt;p]:mb-0 [&amp;&gt;p]:inline"><code class="px-1.5 py-0.5 rounded-md bg-muted/50 text-primary font-mono text-[13px] border border-border/50">signType</code>: One of <code class="px-1.5 py-0.5 rounded-md bg-muted/50 text-primary font-mono text-[13px] border border-border/50">&quot;cli&quot;</code>, <code class="px-1.5 py-0.5 rounded-md bg-muted/50 text-primary font-mono text-[13px] border border-border/50">&quot;metamask&quot;</code>, <code class="px-1.5 py-0.5 rounded-md bg-muted/50 text-primary font-mono text-[13px] border border-border/50">&quot;did&quot;</code>, <code class="px-1.5 py-0.5 rounded-md bg-muted/50 text-primary font-mono text-[13px] border border-border/50">&quot;p12&quot;</code>, <code class="px-1.5 py-0.5 rounded-md bg-muted/50 text-primary font-mono text-[13px] border border-border/50">&quot;inline&quot;</code></li>
<li class="leading-7 [&amp;&gt;p]:mb-0 [&amp;&gt;p]:inline"><code class="px-1.5 py-0.5 rounded-md bg-muted/50 text-primary font-mono text-[13px] border border-border/50">credentials</code>: Credentials for CLI, DID, or P12 signing</li>
<li class="leading-7 [&amp;&gt;p]:mb-0 [&amp;&gt;p]:inline"><code class="px-1.5 py-0.5 rounded-md bg-muted/50 text-primary font-mono text-[13px] border border-border/50">inlineOptions</code>: Pre-computed signature for inline mode</li>
</ul>
<p class="text-base leading-7 text-muted-foreground mb-4"><strong>Sign Types:</strong></p>
<h5 id="cli-signing">CLI Signing</h5>
<p class="text-base leading-7 text-muted-foreground mb-4">Uses BIP39 mnemonic to derive wallet and sign.</p>
<div class="relative group my-2"><div class="bg-muted/50 dark:bg-muted/30 px-4 py-2 rounded-t-xl border border-b-0 border-border/50 flex items-center justify-between"><div class="flex items-center gap-3"><div class="flex items-center gap-1.5"><div class="w-3 h-3 rounded-full bg-red-500/80 dark:bg-red-500/60"></div><div class="w-3 h-3 rounded-full bg-yellow-500/80 dark:bg-yellow-500/60"></div><div class="w-3 h-3 rounded-full bg-green-500/80 dark:bg-green-500/60"></div></div><span class="text-xs font-mono text-foreground">Code</span></div><div class="flex items-center gap-2"><span class="text-xs text-muted-foreground/60 font-mono uppercase tracking-wide">typescript</span><button class="p-1.5 rounded-md hover:bg-muted/50 transition-colors" aria-label="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-4 w-4 text-muted-foreground"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div></div><div class="bg-gray-200/50 dark:bg-[#0d1117] rounded-b-xl overflow-x-auto border border-border/50"><pre class="p-2 text-[13px] font-mono leading-relaxed text-gray-800 dark:text-gray-200"><code class="table w-full"><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">1</span><span class="table-cell align-top"><span class="token-keyword">const</span><span class="token-text"> </span><span class="token-text">c</span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">d</span><span class="token-text">e</span><span class="token-text">n</span><span class="token-text">t</span><span class="token-text">i</span><span class="token-text">a</span><span class="token-text">l</span><span class="token-text">s</span><span class="token-operator">:</span><span class="token-text"> </span><span class="token-text">C</span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">d</span><span class="token-text">e</span><span class="token-text">n</span><span class="token-text">t</span><span class="token-text">i</span><span class="token-text">a</span><span class="token-text">l</span><span class="token-text">s</span><span class="token-text">D</span><span class="token-text">a</span><span class="token-text">t</span><span class="token-text">a</span><span class="token-text"> </span><span class="token-operator">=</span><span class="token-text"> </span><span class="token-punctuation">{</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">2</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">m</span><span class="token-text">n</span><span class="token-text">e</span><span class="token-text">m</span><span class="token-text">o</span><span class="token-text">n</span><span class="token-text">i</span><span class="token-text">c</span><span class="token-operator">:</span><span class="token-text"> </span><span class="token-string">&quot;abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon about&quot;</span><span class="token-punctuation">,</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">3</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-comment">// ... other fields</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">4</span><span class="table-cell align-top"><span class="token-punctuation">}</span><span class="token-punctuation">;</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">5</span><span class="table-cell align-top"><span> </span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">6</span><span class="table-cell align-top"><span class="token-keyword">const</span><span class="token-text"> </span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">s</span><span class="token-text">u</span><span class="token-text">l</span><span class="token-text">t</span><span class="token-text"> </span><span class="token-operator">=</span><span class="token-text"> </span><span class="token-keyword">await</span><span class="token-text"> </span><span class="token-text">a</span><span class="token-text">q</span><span class="token-text">u</span><span class="token-text">a</span><span class="token-text">f</span><span class="token-text">i</span><span class="token-text">e</span><span class="token-text">r</span><span class="token-property">.signRevision</span><span class="token-punctuation">(</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">7</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">a</span><span class="token-text">q</span><span class="token-text">u</span><span class="token-text">a</span><span class="token-text">T</span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">e</span><span class="token-punctuation">,</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">8</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-string">&quot;cli&quot;</span><span class="token-punctuation">,</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">9</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">c</span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">d</span><span class="token-text">e</span><span class="token-text">n</span><span class="token-text">t</span><span class="token-text">i</span><span class="token-text">a</span><span class="token-text">l</span><span class="token-text">s</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">10</span><span class="table-cell align-top"><span class="token-punctuation">)</span><span class="token-punctuation">;</span></span></div></code></pre></div></div>
<h5 id="metamask-signing">MetaMask Signing</h5>
<p class="text-base leading-7 text-muted-foreground mb-4">Opens MetaMask for user to sign (browser only).</p>
<div class="relative group my-2"><div class="bg-muted/50 dark:bg-muted/30 px-4 py-2 rounded-t-xl border border-b-0 border-border/50 flex items-center justify-between"><div class="flex items-center gap-3"><div class="flex items-center gap-1.5"><div class="w-3 h-3 rounded-full bg-red-500/80 dark:bg-red-500/60"></div><div class="w-3 h-3 rounded-full bg-yellow-500/80 dark:bg-yellow-500/60"></div><div class="w-3 h-3 rounded-full bg-green-500/80 dark:bg-green-500/60"></div></div><span class="text-xs font-mono text-foreground">Code</span></div><div class="flex items-center gap-2"><span class="text-xs text-muted-foreground/60 font-mono uppercase tracking-wide">typescript</span><button class="p-1.5 rounded-md hover:bg-muted/50 transition-colors" aria-label="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-4 w-4 text-muted-foreground"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div></div><div class="bg-gray-200/50 dark:bg-[#0d1117] rounded-b-xl overflow-x-auto border border-border/50"><pre class="p-2 text-[13px] font-mono leading-relaxed text-gray-800 dark:text-gray-200"><code class="table w-full"><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">1</span><span class="table-cell align-top"><span class="token-keyword">const</span><span class="token-text"> </span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">s</span><span class="token-text">u</span><span class="token-text">l</span><span class="token-text">t</span><span class="token-text"> </span><span class="token-operator">=</span><span class="token-text"> </span><span class="token-keyword">await</span><span class="token-text"> </span><span class="token-text">a</span><span class="token-text">q</span><span class="token-text">u</span><span class="token-text">a</span><span class="token-text">f</span><span class="token-text">i</span><span class="token-text">e</span><span class="token-text">r</span><span class="token-property">.signRevision</span><span class="token-punctuation">(</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">2</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">a</span><span class="token-text">q</span><span class="token-text">u</span><span class="token-text">a</span><span class="token-text">T</span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">e</span><span class="token-punctuation">,</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">3</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-string">&quot;metamask&quot;</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">4</span><span class="table-cell align-top"><span class="token-punctuation">)</span><span class="token-punctuation">;</span></span></div></code></pre></div></div>
<p class="text-base leading-7 text-muted-foreground mb-4"><strong>React Native MetaMask:</strong></p>
<div class="relative group my-2"><div class="bg-muted/50 dark:bg-muted/30 px-4 py-2 rounded-t-xl border border-b-0 border-border/50 flex items-center justify-between"><div class="flex items-center gap-3"><div class="flex items-center gap-1.5"><div class="w-3 h-3 rounded-full bg-red-500/80 dark:bg-red-500/60"></div><div class="w-3 h-3 rounded-full bg-yellow-500/80 dark:bg-yellow-500/60"></div><div class="w-3 h-3 rounded-full bg-green-500/80 dark:bg-green-500/60"></div></div><span class="text-xs font-mono text-foreground">Code</span></div><div class="flex items-center gap-2"><span class="text-xs text-muted-foreground/60 font-mono uppercase tracking-wide">typescript</span><button class="p-1.5 rounded-md hover:bg-muted/50 transition-colors" aria-label="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-4 w-4 text-muted-foreground"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div></div><div class="bg-gray-200/50 dark:bg-[#0d1117] rounded-b-xl overflow-x-auto border border-border/50"><pre class="p-2 text-[13px] font-mono leading-relaxed text-gray-800 dark:text-gray-200"><code class="table w-full"><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">1</span><span class="table-cell align-top"><span class="token-keyword">const</span><span class="token-text"> </span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">s</span><span class="token-text">u</span><span class="token-text">l</span><span class="token-text">t</span><span class="token-text"> </span><span class="token-operator">=</span><span class="token-text"> </span><span class="token-keyword">await</span><span class="token-text"> </span><span class="token-text">a</span><span class="token-text">q</span><span class="token-text">u</span><span class="token-text">a</span><span class="token-text">f</span><span class="token-text">i</span><span class="token-text">e</span><span class="token-text">r</span><span class="token-property">.signRevision</span><span class="token-punctuation">(</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">2</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">a</span><span class="token-text">q</span><span class="token-text">u</span><span class="token-text">a</span><span class="token-text">T</span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">e</span><span class="token-punctuation">,</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">3</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-string">&quot;metamask&quot;</span><span class="token-punctuation">,</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">4</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-keyword">undefined</span><span class="token-punctuation">,</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">5</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-punctuation">{</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">6</span><span class="table-cell align-top"><span class="token-text">    </span><span class="token-text">d</span><span class="token-text">e</span><span class="token-text">e</span><span class="token-text">p</span><span class="token-text">L</span><span class="token-text">i</span><span class="token-text">n</span><span class="token-text">k</span><span class="token-text">U</span><span class="token-text">r</span><span class="token-text">l</span><span class="token-operator">:</span><span class="token-text"> </span><span class="token-string">&quot;metamask://&quot;</span><span class="token-punctuation">,</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">7</span><span class="table-cell align-top"><span class="token-text">    </span><span class="token-text">c</span><span class="token-text">a</span><span class="token-text">l</span><span class="token-text">l</span><span class="token-text">b</span><span class="token-text">a</span><span class="token-text">c</span><span class="token-text">k</span><span class="token-text">U</span><span class="token-text">r</span><span class="token-text">l</span><span class="token-operator">:</span><span class="token-text"> </span><span class="token-string">&quot;myapp://metamask-callback&quot;</span><span class="token-punctuation">,</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">8</span><span class="table-cell align-top"><span class="token-text">    </span><span class="token-text">o</span><span class="token-text">n</span><span class="token-text">D</span><span class="token-text">e</span><span class="token-text">e</span><span class="token-text">p</span><span class="token-text">L</span><span class="token-text">i</span><span class="token-text">n</span><span class="token-text">k</span><span class="token-text">R</span><span class="token-text">e</span><span class="token-text">a</span><span class="token-text">d</span><span class="token-text">y</span><span class="token-operator">:</span><span class="token-text"> </span><span class="token-punctuation">(</span><span class="token-text">u</span><span class="token-text">r</span><span class="token-text">l</span><span class="token-punctuation">)</span><span class="token-text"> </span><span class="token-operator">=&gt;</span><span class="token-text"> </span><span class="token-punctuation">{</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">9</span><span class="table-cell align-top"><span class="token-text">      </span><span class="token-comment">// Open MetaMask app</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">10</span><span class="table-cell align-top"><span class="token-text">      </span><span class="token-text">L</span><span class="token-text">i</span><span class="token-text">n</span><span class="token-text">k</span><span class="token-text">i</span><span class="token-text">n</span><span class="token-text">g</span><span class="token-property">.openURL</span><span class="token-punctuation">(</span><span class="token-text">u</span><span class="token-text">r</span><span class="token-text">l</span><span class="token-punctuation">)</span><span class="token-punctuation">;</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">11</span><span class="table-cell align-top"><span class="token-text">    </span><span class="token-punctuation">}</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">12</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-punctuation">}</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">13</span><span class="table-cell align-top"><span class="token-punctuation">)</span><span class="token-punctuation">;</span></span></div></code></pre></div></div>
<h5 id="did-signing">DID Signing</h5>
<p class="text-base leading-7 text-muted-foreground mb-4">Signs with Decentralized Identifier.</p>
<div class="relative group my-2"><div class="bg-muted/50 dark:bg-muted/30 px-4 py-2 rounded-t-xl border border-b-0 border-border/50 flex items-center justify-between"><div class="flex items-center gap-3"><div class="flex items-center gap-1.5"><div class="w-3 h-3 rounded-full bg-red-500/80 dark:bg-red-500/60"></div><div class="w-3 h-3 rounded-full bg-yellow-500/80 dark:bg-yellow-500/60"></div><div class="w-3 h-3 rounded-full bg-green-500/80 dark:bg-green-500/60"></div></div><span class="text-xs font-mono text-foreground">Code</span></div><div class="flex items-center gap-2"><span class="text-xs text-muted-foreground/60 font-mono uppercase tracking-wide">typescript</span><button class="p-1.5 rounded-md hover:bg-muted/50 transition-colors" aria-label="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-4 w-4 text-muted-foreground"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div></div><div class="bg-gray-200/50 dark:bg-[#0d1117] rounded-b-xl overflow-x-auto border border-border/50"><pre class="p-2 text-[13px] font-mono leading-relaxed text-gray-800 dark:text-gray-200"><code class="table w-full"><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">1</span><span class="table-cell align-top"><span class="token-keyword">const</span><span class="token-text"> </span><span class="token-text">c</span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">d</span><span class="token-text">e</span><span class="token-text">n</span><span class="token-text">t</span><span class="token-text">i</span><span class="token-text">a</span><span class="token-text">l</span><span class="token-text">s</span><span class="token-operator">:</span><span class="token-text"> </span><span class="token-text">C</span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">d</span><span class="token-text">e</span><span class="token-text">n</span><span class="token-text">t</span><span class="token-text">i</span><span class="token-text">a</span><span class="token-text">l</span><span class="token-text">s</span><span class="token-text">D</span><span class="token-text">a</span><span class="token-text">t</span><span class="token-text">a</span><span class="token-text"> </span><span class="token-operator">=</span><span class="token-text"> </span><span class="token-punctuation">{</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">2</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">d</span><span class="token-text">i</span><span class="token-text">d</span><span class="token-text">_</span><span class="token-text">k</span><span class="token-text">e</span><span class="token-text">y</span><span class="token-operator">:</span><span class="token-text"> </span><span class="token-string">&quot;your-did-key-here&quot;</span><span class="token-punctuation">,</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">3</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-comment">// ... other fields</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">4</span><span class="table-cell align-top"><span class="token-punctuation">}</span><span class="token-punctuation">;</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">5</span><span class="table-cell align-top"><span> </span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">6</span><span class="table-cell align-top"><span class="token-keyword">const</span><span class="token-text"> </span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">s</span><span class="token-text">u</span><span class="token-text">l</span><span class="token-text">t</span><span class="token-text"> </span><span class="token-operator">=</span><span class="token-text"> </span><span class="token-keyword">await</span><span class="token-text"> </span><span class="token-text">a</span><span class="token-text">q</span><span class="token-text">u</span><span class="token-text">a</span><span class="token-text">f</span><span class="token-text">i</span><span class="token-text">e</span><span class="token-text">r</span><span class="token-property">.signRevision</span><span class="token-punctuation">(</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">7</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">a</span><span class="token-text">q</span><span class="token-text">u</span><span class="token-text">a</span><span class="token-text">T</span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">e</span><span class="token-punctuation">,</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">8</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-string">&quot;did&quot;</span><span class="token-punctuation">,</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">9</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">c</span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">d</span><span class="token-text">e</span><span class="token-text">n</span><span class="token-text">t</span><span class="token-text">i</span><span class="token-text">a</span><span class="token-text">l</span><span class="token-text">s</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">10</span><span class="table-cell align-top"><span class="token-punctuation">)</span><span class="token-punctuation">;</span></span></div></code></pre></div></div>
<h5 id="p12-certificate-signing">P12 Certificate Signing</h5>
<p class="text-base leading-7 text-muted-foreground mb-4">Signs with P12 certificate.</p>
<div class="relative group my-2"><div class="bg-muted/50 dark:bg-muted/30 px-4 py-2 rounded-t-xl border border-b-0 border-border/50 flex items-center justify-between"><div class="flex items-center gap-3"><div class="flex items-center gap-1.5"><div class="w-3 h-3 rounded-full bg-red-500/80 dark:bg-red-500/60"></div><div class="w-3 h-3 rounded-full bg-yellow-500/80 dark:bg-yellow-500/60"></div><div class="w-3 h-3 rounded-full bg-green-500/80 dark:bg-green-500/60"></div></div><span class="text-xs font-mono text-foreground">Code</span></div><div class="flex items-center gap-2"><span class="text-xs text-muted-foreground/60 font-mono uppercase tracking-wide">typescript</span><button class="p-1.5 rounded-md hover:bg-muted/50 transition-colors" aria-label="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-4 w-4 text-muted-foreground"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div></div><div class="bg-gray-200/50 dark:bg-[#0d1117] rounded-b-xl overflow-x-auto border border-border/50"><pre class="p-2 text-[13px] font-mono leading-relaxed text-gray-800 dark:text-gray-200"><code class="table w-full"><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">1</span><span class="table-cell align-top"><span class="token-keyword">const</span><span class="token-text"> </span><span class="token-text">c</span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">d</span><span class="token-text">e</span><span class="token-text">n</span><span class="token-text">t</span><span class="token-text">i</span><span class="token-text">a</span><span class="token-text">l</span><span class="token-text">s</span><span class="token-operator">:</span><span class="token-text"> </span><span class="token-text">C</span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">d</span><span class="token-text">e</span><span class="token-text">n</span><span class="token-text">t</span><span class="token-text">i</span><span class="token-text">a</span><span class="token-text">l</span><span class="token-text">s</span><span class="token-text">D</span><span class="token-text">a</span><span class="token-text">t</span><span class="token-text">a</span><span class="token-text"> </span><span class="token-operator">=</span><span class="token-text"> </span><span class="token-punctuation">{</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">2</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">p</span><span class="token-text">1</span><span class="token-text">2</span><span class="token-text">_</span><span class="token-text">p</span><span class="token-text">a</span><span class="token-text">s</span><span class="token-text">s</span><span class="token-text">w</span><span class="token-text">o</span><span class="token-text">r</span><span class="token-text">d</span><span class="token-operator">:</span><span class="token-text"> </span><span class="token-string">&quot;certificate-password&quot;</span><span class="token-punctuation">,</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">3</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">p</span><span class="token-text">1</span><span class="token-text">2</span><span class="token-text">_</span><span class="token-text">c</span><span class="token-text">o</span><span class="token-text">n</span><span class="token-text">t</span><span class="token-text">e</span><span class="token-text">n</span><span class="token-text">t</span><span class="token-operator">:</span><span class="token-text"> </span><span class="token-string">&quot;base64-encoded-p12-content&quot;</span><span class="token-punctuation">,</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">4</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-comment">// ... other fields</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">5</span><span class="table-cell align-top"><span class="token-punctuation">}</span><span class="token-punctuation">;</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">6</span><span class="table-cell align-top"><span> </span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">7</span><span class="table-cell align-top"><span class="token-keyword">const</span><span class="token-text"> </span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">s</span><span class="token-text">u</span><span class="token-text">l</span><span class="token-text">t</span><span class="token-text"> </span><span class="token-operator">=</span><span class="token-text"> </span><span class="token-keyword">await</span><span class="token-text"> </span><span class="token-text">a</span><span class="token-text">q</span><span class="token-text">u</span><span class="token-text">a</span><span class="token-text">f</span><span class="token-text">i</span><span class="token-text">e</span><span class="token-text">r</span><span class="token-property">.signRevision</span><span class="token-punctuation">(</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">8</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">a</span><span class="token-text">q</span><span class="token-text">u</span><span class="token-text">a</span><span class="token-text">T</span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">e</span><span class="token-punctuation">,</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">9</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-string">&quot;p12&quot;</span><span class="token-punctuation">,</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">10</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">c</span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">d</span><span class="token-text">e</span><span class="token-text">n</span><span class="token-text">t</span><span class="token-text">i</span><span class="token-text">a</span><span class="token-text">l</span><span class="token-text">s</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">11</span><span class="table-cell align-top"><span class="token-punctuation">)</span><span class="token-punctuation">;</span></span></div></code></pre></div></div>
<h5 id="inline-signing">Inline Signing</h5>
<p class="text-base leading-7 text-muted-foreground mb-4">Use pre-computed signature.</p>
<div class="relative group my-2"><div class="bg-muted/50 dark:bg-muted/30 px-4 py-2 rounded-t-xl border border-b-0 border-border/50 flex items-center justify-between"><div class="flex items-center gap-3"><div class="flex items-center gap-1.5"><div class="w-3 h-3 rounded-full bg-red-500/80 dark:bg-red-500/60"></div><div class="w-3 h-3 rounded-full bg-yellow-500/80 dark:bg-yellow-500/60"></div><div class="w-3 h-3 rounded-full bg-green-500/80 dark:bg-green-500/60"></div></div><span class="text-xs font-mono text-foreground">Code</span></div><div class="flex items-center gap-2"><span class="text-xs text-muted-foreground/60 font-mono uppercase tracking-wide">typescript</span><button class="p-1.5 rounded-md hover:bg-muted/50 transition-colors" aria-label="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-4 w-4 text-muted-foreground"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div></div><div class="bg-gray-200/50 dark:bg-[#0d1117] rounded-b-xl overflow-x-auto border border-border/50"><pre class="p-2 text-[13px] font-mono leading-relaxed text-gray-800 dark:text-gray-200"><code class="table w-full"><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">1</span><span class="table-cell align-top"><span class="token-keyword">const</span><span class="token-text"> </span><span class="token-text">i</span><span class="token-text">n</span><span class="token-text">l</span><span class="token-text">i</span><span class="token-text">n</span><span class="token-text">e</span><span class="token-text">O</span><span class="token-text">p</span><span class="token-text">t</span><span class="token-text">i</span><span class="token-text">o</span><span class="token-text">n</span><span class="token-text">s</span><span class="token-operator">:</span><span class="token-text"> </span><span class="token-text">I</span><span class="token-text">n</span><span class="token-text">l</span><span class="token-text">i</span><span class="token-text">n</span><span class="token-text">e</span><span class="token-text">S</span><span class="token-text">i</span><span class="token-text">g</span><span class="token-text">n</span><span class="token-text">e</span><span class="token-text">r</span><span class="token-text">O</span><span class="token-text">p</span><span class="token-text">t</span><span class="token-text">i</span><span class="token-text">o</span><span class="token-text">n</span><span class="token-text">s</span><span class="token-text"> </span><span class="token-operator">=</span><span class="token-text"> </span><span class="token-punctuation">{</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">2</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">w</span><span class="token-text">a</span><span class="token-text">l</span><span class="token-text">l</span><span class="token-text">e</span><span class="token-text">t</span><span class="token-text">A</span><span class="token-text">d</span><span class="token-text">d</span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">s</span><span class="token-text">s</span><span class="token-operator">:</span><span class="token-text"> </span><span class="token-string">&quot;0x742d35Cc6634C0532925a3b844Bc9e7595f0bEb8&quot;</span><span class="token-punctuation">,</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">3</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">s</span><span class="token-text">i</span><span class="token-text">g</span><span class="token-text">n</span><span class="token-text">a</span><span class="token-text">t</span><span class="token-text">u</span><span class="token-text">r</span><span class="token-text">e</span><span class="token-operator">:</span><span class="token-text"> </span><span class="token-string">&quot;0x8c9d0e1f2a3b4c5d6e7f8a9b0c1d2e3f...&quot;</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">4</span><span class="table-cell align-top"><span class="token-punctuation">}</span><span class="token-punctuation">;</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">5</span><span class="table-cell align-top"><span> </span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">6</span><span class="table-cell align-top"><span class="token-keyword">const</span><span class="token-text"> </span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">s</span><span class="token-text">u</span><span class="token-text">l</span><span class="token-text">t</span><span class="token-text"> </span><span class="token-operator">=</span><span class="token-text"> </span><span class="token-keyword">await</span><span class="token-text"> </span><span class="token-text">a</span><span class="token-text">q</span><span class="token-text">u</span><span class="token-text">a</span><span class="token-text">f</span><span class="token-text">i</span><span class="token-text">e</span><span class="token-text">r</span><span class="token-property">.signRevision</span><span class="token-punctuation">(</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">7</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">a</span><span class="token-text">q</span><span class="token-text">u</span><span class="token-text">a</span><span class="token-text">T</span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">e</span><span class="token-punctuation">,</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">8</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-string">&quot;inline&quot;</span><span class="token-punctuation">,</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">9</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-keyword">undefined</span><span class="token-punctuation">,</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">10</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">i</span><span class="token-text">n</span><span class="token-text">l</span><span class="token-text">i</span><span class="token-text">n</span><span class="token-text">e</span><span class="token-text">O</span><span class="token-text">p</span><span class="token-text">t</span><span class="token-text">i</span><span class="token-text">o</span><span class="token-text">n</span><span class="token-text">s</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">11</span><span class="table-cell align-top"><span class="token-punctuation">)</span><span class="token-punctuation">;</span></span></div></code></pre></div></div>
<hr/>
<h3 id="witnessing-revisions" class="text-xl font-medium tracking-tight mt-8 mb-3 text-foreground scroll-mt-24">Witnessing Revisions</h3>
<h4 id="witnessrevision">witnessRevision()</h4>
<p class="text-base leading-7 text-muted-foreground mb-4">Timestamps a revision via blockchain or TSA.</p>
<p class="text-base leading-7 text-muted-foreground mb-4"><strong>Signature:</strong></p>
<div class="relative group my-2"><div class="bg-muted/50 dark:bg-muted/30 px-4 py-2 rounded-t-xl border border-b-0 border-border/50 flex items-center justify-between"><div class="flex items-center gap-3"><div class="flex items-center gap-1.5"><div class="w-3 h-3 rounded-full bg-red-500/80 dark:bg-red-500/60"></div><div class="w-3 h-3 rounded-full bg-yellow-500/80 dark:bg-yellow-500/60"></div><div class="w-3 h-3 rounded-full bg-green-500/80 dark:bg-green-500/60"></div></div><span class="text-xs font-mono text-foreground">Code</span></div><div class="flex items-center gap-2"><span class="text-xs text-muted-foreground/60 font-mono uppercase tracking-wide">typescript</span><button class="p-1.5 rounded-md hover:bg-muted/50 transition-colors" aria-label="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-4 w-4 text-muted-foreground"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div></div><div class="bg-gray-200/50 dark:bg-[#0d1117] rounded-b-xl overflow-x-auto border border-border/50"><pre class="p-2 text-[13px] font-mono leading-relaxed text-gray-800 dark:text-gray-200"><code class="table w-full"><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">1</span><span class="table-cell align-top"><span class="token-keyword">async</span><span class="token-text"> </span><span class="token-function">witnessRevision</span><span class="token-punctuation">(</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">2</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">a</span><span class="token-text">q</span><span class="token-text">u</span><span class="token-text">a</span><span class="token-text">T</span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">e</span><span class="token-operator">:</span><span class="token-text"> </span><span class="token-text">A</span><span class="token-text">q</span><span class="token-text">u</span><span class="token-text">a</span><span class="token-text">T</span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">e</span><span class="token-punctuation">,</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">3</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">w</span><span class="token-text">i</span><span class="token-text">t</span><span class="token-text">n</span><span class="token-text">e</span><span class="token-text">s</span><span class="token-text">s</span><span class="token-text">T</span><span class="token-text">y</span><span class="token-text">p</span><span class="token-text">e</span><span class="token-operator">:</span><span class="token-text"> </span><span class="token-text">W</span><span class="token-text">i</span><span class="token-text">t</span><span class="token-text">n</span><span class="token-text">e</span><span class="token-text">s</span><span class="token-text">s</span><span class="token-text">T</span><span class="token-text">y</span><span class="token-text">p</span><span class="token-text">e</span><span class="token-punctuation">,</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">4</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">w</span><span class="token-text">i</span><span class="token-text">t</span><span class="token-text">n</span><span class="token-text">e</span><span class="token-text">s</span><span class="token-text">s</span><span class="token-text">C</span><span class="token-text">o</span><span class="token-text">n</span><span class="token-text">f</span><span class="token-text">i</span><span class="token-text">g</span><span class="token-operator">:</span><span class="token-text"> </span><span class="token-text">W</span><span class="token-text">i</span><span class="token-text">t</span><span class="token-text">n</span><span class="token-text">e</span><span class="token-text">s</span><span class="token-text">s</span><span class="token-text">C</span><span class="token-text">o</span><span class="token-text">n</span><span class="token-text">f</span><span class="token-text">i</span><span class="token-text">g</span><span class="token-punctuation">,</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">5</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">c</span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">d</span><span class="token-text">e</span><span class="token-text">n</span><span class="token-text">t</span><span class="token-text">i</span><span class="token-text">a</span><span class="token-text">l</span><span class="token-text">s</span><span class="token-operator">?:</span><span class="token-text"> </span><span class="token-text">C</span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">d</span><span class="token-text">e</span><span class="token-text">n</span><span class="token-text">t</span><span class="token-text">i</span><span class="token-text">a</span><span class="token-text">l</span><span class="token-text">s</span><span class="token-text">D</span><span class="token-text">a</span><span class="token-text">t</span><span class="token-text">a</span><span class="token-punctuation">,</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">6</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">w</span><span class="token-text">i</span><span class="token-text">t</span><span class="token-text">n</span><span class="token-text">e</span><span class="token-text">s</span><span class="token-text">s</span><span class="token-text">P</span><span class="token-text">l</span><span class="token-text">a</span><span class="token-text">t</span><span class="token-text">f</span><span class="token-text">o</span><span class="token-text">r</span><span class="token-text">m</span><span class="token-operator">?:</span><span class="token-text"> </span><span class="token-text">W</span><span class="token-text">i</span><span class="token-text">t</span><span class="token-text">n</span><span class="token-text">e</span><span class="token-text">s</span><span class="token-text">s</span><span class="token-text">P</span><span class="token-text">l</span><span class="token-text">a</span><span class="token-text">t</span><span class="token-text">f</span><span class="token-text">o</span><span class="token-text">r</span><span class="token-text">m</span><span class="token-text">T</span><span class="token-text">y</span><span class="token-text">p</span><span class="token-text">e</span><span class="token-punctuation">,</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">7</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">i</span><span class="token-text">n</span><span class="token-text">l</span><span class="token-text">i</span><span class="token-text">n</span><span class="token-text">e</span><span class="token-text">O</span><span class="token-text">p</span><span class="token-text">t</span><span class="token-text">i</span><span class="token-text">o</span><span class="token-text">n</span><span class="token-text">s</span><span class="token-operator">?:</span><span class="token-text"> </span><span class="token-text">I</span><span class="token-text">n</span><span class="token-text">l</span><span class="token-text">i</span><span class="token-text">n</span><span class="token-text">e</span><span class="token-text">W</span><span class="token-text">i</span><span class="token-text">t</span><span class="token-text">n</span><span class="token-text">e</span><span class="token-text">s</span><span class="token-text">s</span><span class="token-text">O</span><span class="token-text">p</span><span class="token-text">t</span><span class="token-text">i</span><span class="token-text">o</span><span class="token-text">n</span><span class="token-text">s</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">8</span><span class="table-cell align-top"><span class="token-punctuation">)</span><span class="token-operator">:</span><span class="token-text"> </span><span class="token-text">P</span><span class="token-text">r</span><span class="token-text">o</span><span class="token-text">m</span><span class="token-text">i</span><span class="token-text">s</span><span class="token-text">e</span><span class="token-operator">&lt;</span><span class="token-text">R</span><span class="token-text">e</span><span class="token-text">s</span><span class="token-text">u</span><span class="token-text">l</span><span class="token-text">t</span><span class="token-operator">&lt;</span><span class="token-text">A</span><span class="token-text">q</span><span class="token-text">u</span><span class="token-text">a</span><span class="token-text">O</span><span class="token-text">p</span><span class="token-text">e</span><span class="token-text">r</span><span class="token-text">a</span><span class="token-text">t</span><span class="token-text">i</span><span class="token-text">o</span><span class="token-text">n</span><span class="token-text">D</span><span class="token-text">a</span><span class="token-text">t</span><span class="token-text">a</span><span class="token-punctuation">,</span><span class="token-text"> </span><span class="token-text">L</span><span class="token-text">o</span><span class="token-text">g</span><span class="token-text">D</span><span class="token-text">a</span><span class="token-text">t</span><span class="token-text">a</span><span class="token-punctuation">[</span><span class="token-punctuation">]</span><span class="token-operator">&gt;&gt;</span></span></div></code></pre></div></div>
<p class="text-base leading-7 text-muted-foreground mb-4"><strong>Parameters:</strong></p>
<ul class="list-disc list-outside pl-5 space-y-2 mb-4 text-muted-foreground [&amp;_p]:mb-0 [&amp;_p]:inline [&amp;_ul]:ml-6 [&amp;_ol]:ml-6">
<li class="leading-7 [&amp;&gt;p]:mb-0 [&amp;&gt;p]:inline"><code class="px-1.5 py-0.5 rounded-md bg-muted/50 text-primary font-mono text-[13px] border border-border/50">witnessType</code>: <code class="px-1.5 py-0.5 rounded-md bg-muted/50 text-primary font-mono text-[13px] border border-border/50">&quot;eth&quot;</code>, <code class="px-1.5 py-0.5 rounded-md bg-muted/50 text-primary font-mono text-[13px] border border-border/50">&quot;nostr&quot;</code>, or <code class="px-1.5 py-0.5 rounded-md bg-muted/50 text-primary font-mono text-[13px] border border-border/50">&quot;tsa&quot;</code></li>
<li class="leading-7 [&amp;&gt;p]:mb-0 [&amp;&gt;p]:inline"><code class="px-1.5 py-0.5 rounded-md bg-muted/50 text-primary font-mono text-[13px] border border-border/50">witnessConfig</code>: Network and contract configuration</li>
<li class="leading-7 [&amp;&gt;p]:mb-0 [&amp;&gt;p]:inline"><code class="px-1.5 py-0.5 rounded-md bg-muted/50 text-primary font-mono text-[13px] border border-border/50">credentials</code>: Credentials for signing transaction</li>
<li class="leading-7 [&amp;&gt;p]:mb-0 [&amp;&gt;p]:inline"><code class="px-1.5 py-0.5 rounded-md bg-muted/50 text-primary font-mono text-[13px] border border-border/50">witnessPlatform</code>: <code class="px-1.5 py-0.5 rounded-md bg-muted/50 text-primary font-mono text-[13px] border border-border/50">&quot;cli&quot;</code> or <code class="px-1.5 py-0.5 rounded-md bg-muted/50 text-primary font-mono text-[13px] border border-border/50">&quot;metamask&quot;</code> (Ethereum only)</li>
<li class="leading-7 [&amp;&gt;p]:mb-0 [&amp;&gt;p]:inline"><code class="px-1.5 py-0.5 rounded-md bg-muted/50 text-primary font-mono text-[13px] border border-border/50">inlineOptions</code>: Pre-computed transaction (inline mode)</li>
</ul>
<h4 id="ethereum-witnessing">Ethereum Witnessing</h4>
<p class="text-base leading-7 text-muted-foreground mb-4"><strong>Configuration:</strong></p>
<div class="relative group my-2"><div class="bg-muted/50 dark:bg-muted/30 px-4 py-2 rounded-t-xl border border-b-0 border-border/50 flex items-center justify-between"><div class="flex items-center gap-3"><div class="flex items-center gap-1.5"><div class="w-3 h-3 rounded-full bg-red-500/80 dark:bg-red-500/60"></div><div class="w-3 h-3 rounded-full bg-yellow-500/80 dark:bg-yellow-500/60"></div><div class="w-3 h-3 rounded-full bg-green-500/80 dark:bg-green-500/60"></div></div><span class="text-xs font-mono text-foreground">Code</span></div><div class="flex items-center gap-2"><span class="text-xs text-muted-foreground/60 font-mono uppercase tracking-wide">typescript</span><button class="p-1.5 rounded-md hover:bg-muted/50 transition-colors" aria-label="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-4 w-4 text-muted-foreground"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div></div><div class="bg-gray-200/50 dark:bg-[#0d1117] rounded-b-xl overflow-x-auto border border-border/50"><pre class="p-2 text-[13px] font-mono leading-relaxed text-gray-800 dark:text-gray-200"><code class="table w-full"><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">1</span><span class="table-cell align-top"><span class="token-keyword">const</span><span class="token-text"> </span><span class="token-text">w</span><span class="token-text">i</span><span class="token-text">t</span><span class="token-text">n</span><span class="token-text">e</span><span class="token-text">s</span><span class="token-text">s</span><span class="token-text">C</span><span class="token-text">o</span><span class="token-text">n</span><span class="token-text">f</span><span class="token-text">i</span><span class="token-text">g</span><span class="token-operator">:</span><span class="token-text"> </span><span class="token-text">W</span><span class="token-text">i</span><span class="token-text">t</span><span class="token-text">n</span><span class="token-text">e</span><span class="token-text">s</span><span class="token-text">s</span><span class="token-text">C</span><span class="token-text">o</span><span class="token-text">n</span><span class="token-text">f</span><span class="token-text">i</span><span class="token-text">g</span><span class="token-text"> </span><span class="token-operator">=</span><span class="token-text"> </span><span class="token-punctuation">{</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">2</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">w</span><span class="token-text">i</span><span class="token-text">t</span><span class="token-text">n</span><span class="token-text">e</span><span class="token-text">s</span><span class="token-text">s</span><span class="token-text">E</span><span class="token-text">v</span><span class="token-text">e</span><span class="token-text">n</span><span class="token-text">t</span><span class="token-text">V</span><span class="token-text">e</span><span class="token-text">r</span><span class="token-text">i</span><span class="token-text">f</span><span class="token-text">i</span><span class="token-text">c</span><span class="token-text">a</span><span class="token-text">t</span><span class="token-text">i</span><span class="token-text">o</span><span class="token-text">n</span><span class="token-text">H</span><span class="token-text">a</span><span class="token-text">s</span><span class="token-text">h</span><span class="token-operator">:</span><span class="token-text"> </span><span class="token-text">l</span><span class="token-text">a</span><span class="token-text">t</span><span class="token-text">e</span><span class="token-text">s</span><span class="token-text">t</span><span class="token-text">R</span><span class="token-text">e</span><span class="token-text">v</span><span class="token-text">i</span><span class="token-text">s</span><span class="token-text">i</span><span class="token-text">o</span><span class="token-text">n</span><span class="token-text">H</span><span class="token-text">a</span><span class="token-text">s</span><span class="token-text">h</span><span class="token-punctuation">,</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">3</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">w</span><span class="token-text">i</span><span class="token-text">t</span><span class="token-text">n</span><span class="token-text">e</span><span class="token-text">s</span><span class="token-text">s</span><span class="token-text">N</span><span class="token-text">e</span><span class="token-text">t</span><span class="token-text">w</span><span class="token-text">o</span><span class="token-text">r</span><span class="token-text">k</span><span class="token-operator">:</span><span class="token-text"> </span><span class="token-string">&quot;sepolia&quot;</span><span class="token-punctuation">,</span><span class="token-text">  </span><span class="token-comment">// or &quot;mainnet&quot;, &quot;holesky&quot;</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">4</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">s</span><span class="token-text">m</span><span class="token-text">a</span><span class="token-text">r</span><span class="token-text">t</span><span class="token-text">C</span><span class="token-text">o</span><span class="token-text">n</span><span class="token-text">t</span><span class="token-text">r</span><span class="token-text">a</span><span class="token-text">c</span><span class="token-text">t</span><span class="token-text">A</span><span class="token-text">d</span><span class="token-text">d</span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">s</span><span class="token-text">s</span><span class="token-operator">:</span><span class="token-text"> </span><span class="token-string">&quot;0x5FbDB2315678afecb367f032d93F642f64180aa3&quot;</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">5</span><span class="table-cell align-top"><span class="token-punctuation">}</span><span class="token-punctuation">;</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">6</span><span class="table-cell align-top"><span> </span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">7</span><span class="table-cell align-top"><span class="token-keyword">const</span><span class="token-text"> </span><span class="token-text">c</span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">d</span><span class="token-text">e</span><span class="token-text">n</span><span class="token-text">t</span><span class="token-text">i</span><span class="token-text">a</span><span class="token-text">l</span><span class="token-text">s</span><span class="token-operator">:</span><span class="token-text"> </span><span class="token-text">C</span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">d</span><span class="token-text">e</span><span class="token-text">n</span><span class="token-text">t</span><span class="token-text">i</span><span class="token-text">a</span><span class="token-text">l</span><span class="token-text">s</span><span class="token-text">D</span><span class="token-text">a</span><span class="token-text">t</span><span class="token-text">a</span><span class="token-text"> </span><span class="token-operator">=</span><span class="token-text"> </span><span class="token-punctuation">{</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">8</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">m</span><span class="token-text">n</span><span class="token-text">e</span><span class="token-text">m</span><span class="token-text">o</span><span class="token-text">n</span><span class="token-text">i</span><span class="token-text">c</span><span class="token-operator">:</span><span class="token-text"> </span><span class="token-string">&quot;your mnemonic here&quot;</span><span class="token-punctuation">,</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">9</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-comment">// ...</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">10</span><span class="table-cell align-top"><span class="token-punctuation">}</span><span class="token-punctuation">;</span></span></div></code></pre></div></div>
<p class="text-base leading-7 text-muted-foreground mb-4"><strong>CLI Method</strong> (uses mnemonic):</p>
<div class="relative group my-2"><div class="bg-muted/50 dark:bg-muted/30 px-4 py-2 rounded-t-xl border border-b-0 border-border/50 flex items-center justify-between"><div class="flex items-center gap-3"><div class="flex items-center gap-1.5"><div class="w-3 h-3 rounded-full bg-red-500/80 dark:bg-red-500/60"></div><div class="w-3 h-3 rounded-full bg-yellow-500/80 dark:bg-yellow-500/60"></div><div class="w-3 h-3 rounded-full bg-green-500/80 dark:bg-green-500/60"></div></div><span class="text-xs font-mono text-foreground">Code</span></div><div class="flex items-center gap-2"><span class="text-xs text-muted-foreground/60 font-mono uppercase tracking-wide">typescript</span><button class="p-1.5 rounded-md hover:bg-muted/50 transition-colors" aria-label="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-4 w-4 text-muted-foreground"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div></div><div class="bg-gray-200/50 dark:bg-[#0d1117] rounded-b-xl overflow-x-auto border border-border/50"><pre class="p-2 text-[13px] font-mono leading-relaxed text-gray-800 dark:text-gray-200"><code class="table w-full"><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">1</span><span class="table-cell align-top"><span class="token-keyword">const</span><span class="token-text"> </span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">s</span><span class="token-text">u</span><span class="token-text">l</span><span class="token-text">t</span><span class="token-text"> </span><span class="token-operator">=</span><span class="token-text"> </span><span class="token-keyword">await</span><span class="token-text"> </span><span class="token-text">a</span><span class="token-text">q</span><span class="token-text">u</span><span class="token-text">a</span><span class="token-text">f</span><span class="token-text">i</span><span class="token-text">e</span><span class="token-text">r</span><span class="token-property">.witnessRevision</span><span class="token-punctuation">(</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">2</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">a</span><span class="token-text">q</span><span class="token-text">u</span><span class="token-text">a</span><span class="token-text">T</span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">e</span><span class="token-punctuation">,</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">3</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-string">&quot;eth&quot;</span><span class="token-punctuation">,</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">4</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">w</span><span class="token-text">i</span><span class="token-text">t</span><span class="token-text">n</span><span class="token-text">e</span><span class="token-text">s</span><span class="token-text">s</span><span class="token-text">C</span><span class="token-text">o</span><span class="token-text">n</span><span class="token-text">f</span><span class="token-text">i</span><span class="token-text">g</span><span class="token-punctuation">,</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">5</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">c</span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">d</span><span class="token-text">e</span><span class="token-text">n</span><span class="token-text">t</span><span class="token-text">i</span><span class="token-text">a</span><span class="token-text">l</span><span class="token-text">s</span><span class="token-punctuation">,</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">6</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-string">&quot;cli&quot;</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">7</span><span class="table-cell align-top"><span class="token-punctuation">)</span><span class="token-punctuation">;</span></span></div></code></pre></div></div>
<p class="text-base leading-7 text-muted-foreground mb-4"><strong>MetaMask Method</strong> (prompts user):</p>
<div class="relative group my-2"><div class="bg-muted/50 dark:bg-muted/30 px-4 py-2 rounded-t-xl border border-b-0 border-border/50 flex items-center justify-between"><div class="flex items-center gap-3"><div class="flex items-center gap-1.5"><div class="w-3 h-3 rounded-full bg-red-500/80 dark:bg-red-500/60"></div><div class="w-3 h-3 rounded-full bg-yellow-500/80 dark:bg-yellow-500/60"></div><div class="w-3 h-3 rounded-full bg-green-500/80 dark:bg-green-500/60"></div></div><span class="text-xs font-mono text-foreground">Code</span></div><div class="flex items-center gap-2"><span class="text-xs text-muted-foreground/60 font-mono uppercase tracking-wide">typescript</span><button class="p-1.5 rounded-md hover:bg-muted/50 transition-colors" aria-label="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-4 w-4 text-muted-foreground"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div></div><div class="bg-gray-200/50 dark:bg-[#0d1117] rounded-b-xl overflow-x-auto border border-border/50"><pre class="p-2 text-[13px] font-mono leading-relaxed text-gray-800 dark:text-gray-200"><code class="table w-full"><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">1</span><span class="table-cell align-top"><span class="token-keyword">const</span><span class="token-text"> </span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">s</span><span class="token-text">u</span><span class="token-text">l</span><span class="token-text">t</span><span class="token-text"> </span><span class="token-operator">=</span><span class="token-text"> </span><span class="token-keyword">await</span><span class="token-text"> </span><span class="token-text">a</span><span class="token-text">q</span><span class="token-text">u</span><span class="token-text">a</span><span class="token-text">f</span><span class="token-text">i</span><span class="token-text">e</span><span class="token-text">r</span><span class="token-property">.witnessRevision</span><span class="token-punctuation">(</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">2</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">a</span><span class="token-text">q</span><span class="token-text">u</span><span class="token-text">a</span><span class="token-text">T</span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">e</span><span class="token-punctuation">,</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">3</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-string">&quot;eth&quot;</span><span class="token-punctuation">,</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">4</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">w</span><span class="token-text">i</span><span class="token-text">t</span><span class="token-text">n</span><span class="token-text">e</span><span class="token-text">s</span><span class="token-text">s</span><span class="token-text">C</span><span class="token-text">o</span><span class="token-text">n</span><span class="token-text">f</span><span class="token-text">i</span><span class="token-text">g</span><span class="token-punctuation">,</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">5</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-keyword">undefined</span><span class="token-punctuation">,</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">6</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-string">&quot;metamask&quot;</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">7</span><span class="table-cell align-top"><span class="token-punctuation">)</span><span class="token-punctuation">;</span></span></div></code></pre></div></div>
<h4 id="nostr-witnessing">Nostr Witnessing</h4>
<div class="relative group my-2"><div class="bg-muted/50 dark:bg-muted/30 px-4 py-2 rounded-t-xl border border-b-0 border-border/50 flex items-center justify-between"><div class="flex items-center gap-3"><div class="flex items-center gap-1.5"><div class="w-3 h-3 rounded-full bg-red-500/80 dark:bg-red-500/60"></div><div class="w-3 h-3 rounded-full bg-yellow-500/80 dark:bg-yellow-500/60"></div><div class="w-3 h-3 rounded-full bg-green-500/80 dark:bg-green-500/60"></div></div><span class="text-xs font-mono text-foreground">Code</span></div><div class="flex items-center gap-2"><span class="text-xs text-muted-foreground/60 font-mono uppercase tracking-wide">typescript</span><button class="p-1.5 rounded-md hover:bg-muted/50 transition-colors" aria-label="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-4 w-4 text-muted-foreground"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div></div><div class="bg-gray-200/50 dark:bg-[#0d1117] rounded-b-xl overflow-x-auto border border-border/50"><pre class="p-2 text-[13px] font-mono leading-relaxed text-gray-800 dark:text-gray-200"><code class="table w-full"><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">1</span><span class="table-cell align-top"><span class="token-keyword">const</span><span class="token-text"> </span><span class="token-text">w</span><span class="token-text">i</span><span class="token-text">t</span><span class="token-text">n</span><span class="token-text">e</span><span class="token-text">s</span><span class="token-text">s</span><span class="token-text">C</span><span class="token-text">o</span><span class="token-text">n</span><span class="token-text">f</span><span class="token-text">i</span><span class="token-text">g</span><span class="token-operator">:</span><span class="token-text"> </span><span class="token-text">W</span><span class="token-text">i</span><span class="token-text">t</span><span class="token-text">n</span><span class="token-text">e</span><span class="token-text">s</span><span class="token-text">s</span><span class="token-text">C</span><span class="token-text">o</span><span class="token-text">n</span><span class="token-text">f</span><span class="token-text">i</span><span class="token-text">g</span><span class="token-text"> </span><span class="token-operator">=</span><span class="token-text"> </span><span class="token-punctuation">{</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">2</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">w</span><span class="token-text">i</span><span class="token-text">t</span><span class="token-text">n</span><span class="token-text">e</span><span class="token-text">s</span><span class="token-text">s</span><span class="token-text">E</span><span class="token-text">v</span><span class="token-text">e</span><span class="token-text">n</span><span class="token-text">t</span><span class="token-text">V</span><span class="token-text">e</span><span class="token-text">r</span><span class="token-text">i</span><span class="token-text">f</span><span class="token-text">i</span><span class="token-text">c</span><span class="token-text">a</span><span class="token-text">t</span><span class="token-text">i</span><span class="token-text">o</span><span class="token-text">n</span><span class="token-text">H</span><span class="token-text">a</span><span class="token-text">s</span><span class="token-text">h</span><span class="token-operator">:</span><span class="token-text"> </span><span class="token-text">l</span><span class="token-text">a</span><span class="token-text">t</span><span class="token-text">e</span><span class="token-text">s</span><span class="token-text">t</span><span class="token-text">R</span><span class="token-text">e</span><span class="token-text">v</span><span class="token-text">i</span><span class="token-text">s</span><span class="token-text">i</span><span class="token-text">o</span><span class="token-text">n</span><span class="token-text">H</span><span class="token-text">a</span><span class="token-text">s</span><span class="token-text">h</span><span class="token-punctuation">,</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">3</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">w</span><span class="token-text">i</span><span class="token-text">t</span><span class="token-text">n</span><span class="token-text">e</span><span class="token-text">s</span><span class="token-text">s</span><span class="token-text">N</span><span class="token-text">e</span><span class="token-text">t</span><span class="token-text">w</span><span class="token-text">o</span><span class="token-text">r</span><span class="token-text">k</span><span class="token-operator">:</span><span class="token-text"> </span><span class="token-string">&quot;sepolia&quot;</span><span class="token-punctuation">,</span><span class="token-text">  </span><span class="token-comment">// not used for Nostr</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">4</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">s</span><span class="token-text">m</span><span class="token-text">a</span><span class="token-text">r</span><span class="token-text">t</span><span class="token-text">C</span><span class="token-text">o</span><span class="token-text">n</span><span class="token-text">t</span><span class="token-text">r</span><span class="token-text">a</span><span class="token-text">c</span><span class="token-text">t</span><span class="token-text">A</span><span class="token-text">d</span><span class="token-text">d</span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">s</span><span class="token-text">s</span><span class="token-operator">:</span><span class="token-text"> </span><span class="token-string">&quot;&quot;</span><span class="token-text">     </span><span class="token-comment">// not used for Nostr</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">5</span><span class="table-cell align-top"><span class="token-punctuation">}</span><span class="token-punctuation">;</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">6</span><span class="table-cell align-top"><span> </span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">7</span><span class="table-cell align-top"><span class="token-keyword">const</span><span class="token-text"> </span><span class="token-text">c</span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">d</span><span class="token-text">e</span><span class="token-text">n</span><span class="token-text">t</span><span class="token-text">i</span><span class="token-text">a</span><span class="token-text">l</span><span class="token-text">s</span><span class="token-operator">:</span><span class="token-text"> </span><span class="token-text">C</span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">d</span><span class="token-text">e</span><span class="token-text">n</span><span class="token-text">t</span><span class="token-text">i</span><span class="token-text">a</span><span class="token-text">l</span><span class="token-text">s</span><span class="token-text">D</span><span class="token-text">a</span><span class="token-text">t</span><span class="token-text">a</span><span class="token-text"> </span><span class="token-operator">=</span><span class="token-text"> </span><span class="token-punctuation">{</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">8</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">n</span><span class="token-text">o</span><span class="token-text">s</span><span class="token-text">t</span><span class="token-text">r</span><span class="token-text">_</span><span class="token-text">s</span><span class="token-text">k</span><span class="token-operator">:</span><span class="token-text"> </span><span class="token-string">&quot;your-nostr-secret-key&quot;</span><span class="token-punctuation">,</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">9</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-comment">// ...</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">10</span><span class="table-cell align-top"><span class="token-punctuation">}</span><span class="token-punctuation">;</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">11</span><span class="table-cell align-top"><span> </span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">12</span><span class="table-cell align-top"><span class="token-keyword">const</span><span class="token-text"> </span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">s</span><span class="token-text">u</span><span class="token-text">l</span><span class="token-text">t</span><span class="token-text"> </span><span class="token-operator">=</span><span class="token-text"> </span><span class="token-keyword">await</span><span class="token-text"> </span><span class="token-text">a</span><span class="token-text">q</span><span class="token-text">u</span><span class="token-text">a</span><span class="token-text">f</span><span class="token-text">i</span><span class="token-text">e</span><span class="token-text">r</span><span class="token-property">.witnessRevision</span><span class="token-punctuation">(</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">13</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">a</span><span class="token-text">q</span><span class="token-text">u</span><span class="token-text">a</span><span class="token-text">T</span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">e</span><span class="token-punctuation">,</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">14</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-string">&quot;nostr&quot;</span><span class="token-punctuation">,</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">15</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">w</span><span class="token-text">i</span><span class="token-text">t</span><span class="token-text">n</span><span class="token-text">e</span><span class="token-text">s</span><span class="token-text">s</span><span class="token-text">C</span><span class="token-text">o</span><span class="token-text">n</span><span class="token-text">f</span><span class="token-text">i</span><span class="token-text">g</span><span class="token-punctuation">,</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">16</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">c</span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">d</span><span class="token-text">e</span><span class="token-text">n</span><span class="token-text">t</span><span class="token-text">i</span><span class="token-text">a</span><span class="token-text">l</span><span class="token-text">s</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">17</span><span class="table-cell align-top"><span class="token-punctuation">)</span><span class="token-punctuation">;</span></span></div></code></pre></div></div>
<h4 id="tsa-witnessing">TSA Witnessing</h4>
<div class="relative group my-2"><div class="bg-muted/50 dark:bg-muted/30 px-4 py-2 rounded-t-xl border border-b-0 border-border/50 flex items-center justify-between"><div class="flex items-center gap-3"><div class="flex items-center gap-1.5"><div class="w-3 h-3 rounded-full bg-red-500/80 dark:bg-red-500/60"></div><div class="w-3 h-3 rounded-full bg-yellow-500/80 dark:bg-yellow-500/60"></div><div class="w-3 h-3 rounded-full bg-green-500/80 dark:bg-green-500/60"></div></div><span class="text-xs font-mono text-foreground">Code</span></div><div class="flex items-center gap-2"><span class="text-xs text-muted-foreground/60 font-mono uppercase tracking-wide">typescript</span><button class="p-1.5 rounded-md hover:bg-muted/50 transition-colors" aria-label="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-4 w-4 text-muted-foreground"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div></div><div class="bg-gray-200/50 dark:bg-[#0d1117] rounded-b-xl overflow-x-auto border border-border/50"><pre class="p-2 text-[13px] font-mono leading-relaxed text-gray-800 dark:text-gray-200"><code class="table w-full"><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">1</span><span class="table-cell align-top"><span class="token-keyword">const</span><span class="token-text"> </span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">s</span><span class="token-text">u</span><span class="token-text">l</span><span class="token-text">t</span><span class="token-text"> </span><span class="token-operator">=</span><span class="token-text"> </span><span class="token-keyword">await</span><span class="token-text"> </span><span class="token-text">a</span><span class="token-text">q</span><span class="token-text">u</span><span class="token-text">a</span><span class="token-text">f</span><span class="token-text">i</span><span class="token-text">e</span><span class="token-text">r</span><span class="token-property">.witnessRevision</span><span class="token-punctuation">(</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">2</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">a</span><span class="token-text">q</span><span class="token-text">u</span><span class="token-text">a</span><span class="token-text">T</span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">e</span><span class="token-punctuation">,</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">3</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-string">&quot;tsa&quot;</span><span class="token-punctuation">,</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">4</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">w</span><span class="token-text">i</span><span class="token-text">t</span><span class="token-text">n</span><span class="token-text">e</span><span class="token-text">s</span><span class="token-text">s</span><span class="token-text">C</span><span class="token-text">o</span><span class="token-text">n</span><span class="token-text">f</span><span class="token-text">i</span><span class="token-text">g</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">5</span><span class="table-cell align-top"><span class="token-punctuation">)</span><span class="token-punctuation">;</span></span></div></code></pre></div></div>
<hr/>
<h3 id="linking-revisions" class="text-xl font-medium tracking-tight mt-8 mb-3 text-foreground scroll-mt-24">Linking Revisions</h3>
<h4 id="linkrevision">linkRevision()</h4>
<p class="text-base leading-7 text-muted-foreground mb-4">Creates a link revision connecting to other AquaTrees.</p>
<p class="text-base leading-7 text-muted-foreground mb-4"><strong>Signature:</strong></p>
<div class="relative group my-2"><div class="bg-muted/50 dark:bg-muted/30 px-4 py-2 rounded-t-xl border border-b-0 border-border/50 flex items-center justify-between"><div class="flex items-center gap-3"><div class="flex items-center gap-1.5"><div class="w-3 h-3 rounded-full bg-red-500/80 dark:bg-red-500/60"></div><div class="w-3 h-3 rounded-full bg-yellow-500/80 dark:bg-yellow-500/60"></div><div class="w-3 h-3 rounded-full bg-green-500/80 dark:bg-green-500/60"></div></div><span class="text-xs font-mono text-foreground">Code</span></div><div class="flex items-center gap-2"><span class="text-xs text-muted-foreground/60 font-mono uppercase tracking-wide">typescript</span><button class="p-1.5 rounded-md hover:bg-muted/50 transition-colors" aria-label="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-4 w-4 text-muted-foreground"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div></div><div class="bg-gray-200/50 dark:bg-[#0d1117] rounded-b-xl overflow-x-auto border border-border/50"><pre class="p-2 text-[13px] font-mono leading-relaxed text-gray-800 dark:text-gray-200"><code class="table w-full"><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">1</span><span class="table-cell align-top"><span class="token-keyword">async</span><span class="token-text"> </span><span class="token-function">linkRevision</span><span class="token-punctuation">(</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">2</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">a</span><span class="token-text">q</span><span class="token-text">u</span><span class="token-text">a</span><span class="token-text">T</span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">e</span><span class="token-operator">:</span><span class="token-text"> </span><span class="token-text">A</span><span class="token-text">q</span><span class="token-text">u</span><span class="token-text">a</span><span class="token-text">T</span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">e</span><span class="token-punctuation">,</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">3</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">l</span><span class="token-text">i</span><span class="token-text">n</span><span class="token-text">k</span><span class="token-text">e</span><span class="token-text">d</span><span class="token-text">A</span><span class="token-text">q</span><span class="token-text">u</span><span class="token-text">a</span><span class="token-text">T</span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">e</span><span class="token-text">s</span><span class="token-operator">:</span><span class="token-text"> </span><span class="token-text">A</span><span class="token-text">q</span><span class="token-text">u</span><span class="token-text">a</span><span class="token-text">T</span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">e</span><span class="token-punctuation">[</span><span class="token-punctuation">]</span><span class="token-punctuation">,</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">4</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">l</span><span class="token-text">i</span><span class="token-text">n</span><span class="token-text">k</span><span class="token-text">T</span><span class="token-text">y</span><span class="token-text">p</span><span class="token-text">e</span><span class="token-operator">?:</span><span class="token-text"> </span><span class="token-text">s</span><span class="token-text">t</span><span class="token-text">r</span><span class="token-text">i</span><span class="token-text">n</span><span class="token-text">g</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">5</span><span class="table-cell align-top"><span class="token-punctuation">)</span><span class="token-operator">:</span><span class="token-text"> </span><span class="token-text">P</span><span class="token-text">r</span><span class="token-text">o</span><span class="token-text">m</span><span class="token-text">i</span><span class="token-text">s</span><span class="token-text">e</span><span class="token-operator">&lt;</span><span class="token-text">R</span><span class="token-text">e</span><span class="token-text">s</span><span class="token-text">u</span><span class="token-text">l</span><span class="token-text">t</span><span class="token-operator">&lt;</span><span class="token-text">A</span><span class="token-text">q</span><span class="token-text">u</span><span class="token-text">a</span><span class="token-text">O</span><span class="token-text">p</span><span class="token-text">e</span><span class="token-text">r</span><span class="token-text">a</span><span class="token-text">t</span><span class="token-text">i</span><span class="token-text">o</span><span class="token-text">n</span><span class="token-text">D</span><span class="token-text">a</span><span class="token-text">t</span><span class="token-text">a</span><span class="token-punctuation">,</span><span class="token-text"> </span><span class="token-text">L</span><span class="token-text">o</span><span class="token-text">g</span><span class="token-text">D</span><span class="token-text">a</span><span class="token-text">t</span><span class="token-text">a</span><span class="token-punctuation">[</span><span class="token-punctuation">]</span><span class="token-operator">&gt;&gt;</span></span></div></code></pre></div></div>
<p class="text-base leading-7 text-muted-foreground mb-4"><strong>Example:</strong></p>
<div class="relative group my-2"><div class="bg-muted/50 dark:bg-muted/30 px-4 py-2 rounded-t-xl border border-b-0 border-border/50 flex items-center justify-between"><div class="flex items-center gap-3"><div class="flex items-center gap-1.5"><div class="w-3 h-3 rounded-full bg-red-500/80 dark:bg-red-500/60"></div><div class="w-3 h-3 rounded-full bg-yellow-500/80 dark:bg-yellow-500/60"></div><div class="w-3 h-3 rounded-full bg-green-500/80 dark:bg-green-500/60"></div></div><span class="text-xs font-mono text-foreground">Code</span></div><div class="flex items-center gap-2"><span class="text-xs text-muted-foreground/60 font-mono uppercase tracking-wide">typescript</span><button class="p-1.5 rounded-md hover:bg-muted/50 transition-colors" aria-label="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-4 w-4 text-muted-foreground"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div></div><div class="bg-gray-200/50 dark:bg-[#0d1117] rounded-b-xl overflow-x-auto border border-border/50"><pre class="p-2 text-[13px] font-mono leading-relaxed text-gray-800 dark:text-gray-200"><code class="table w-full"><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">1</span><span class="table-cell align-top"><span class="token-keyword">const</span><span class="token-text"> </span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">s</span><span class="token-text">u</span><span class="token-text">l</span><span class="token-text">t</span><span class="token-text"> </span><span class="token-operator">=</span><span class="token-text"> </span><span class="token-keyword">await</span><span class="token-text"> </span><span class="token-text">a</span><span class="token-text">q</span><span class="token-text">u</span><span class="token-text">a</span><span class="token-text">f</span><span class="token-text">i</span><span class="token-text">e</span><span class="token-text">r</span><span class="token-property">.linkRevision</span><span class="token-punctuation">(</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">2</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">m</span><span class="token-text">a</span><span class="token-text">i</span><span class="token-text">n</span><span class="token-text">A</span><span class="token-text">q</span><span class="token-text">u</span><span class="token-text">a</span><span class="token-text">T</span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">e</span><span class="token-punctuation">,</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">3</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-punctuation">[</span><span class="token-text">d</span><span class="token-text">e</span><span class="token-text">p</span><span class="token-text">e</span><span class="token-text">n</span><span class="token-text">d</span><span class="token-text">e</span><span class="token-text">n</span><span class="token-text">c</span><span class="token-text">y</span><span class="token-text">1</span><span class="token-text">T</span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">e</span><span class="token-punctuation">,</span><span class="token-text"> </span><span class="token-text">d</span><span class="token-text">e</span><span class="token-text">p</span><span class="token-text">e</span><span class="token-text">n</span><span class="token-text">d</span><span class="token-text">e</span><span class="token-text">n</span><span class="token-text">c</span><span class="token-text">y</span><span class="token-text">2</span><span class="token-text">T</span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">e</span><span class="token-punctuation">,</span><span class="token-text"> </span><span class="token-text">d</span><span class="token-text">e</span><span class="token-text">p</span><span class="token-text">e</span><span class="token-text">n</span><span class="token-text">d</span><span class="token-text">e</span><span class="token-text">n</span><span class="token-text">c</span><span class="token-text">y</span><span class="token-text">3</span><span class="token-text">T</span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">e</span><span class="token-punctuation">]</span><span class="token-punctuation">,</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">4</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-string">&quot;dependencies&quot;</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">5</span><span class="table-cell align-top"><span class="token-punctuation">)</span><span class="token-punctuation">;</span></span></div></code></pre></div></div>
<hr/>
<h3 id="verification" class="text-xl font-medium tracking-tight mt-8 mb-3 text-foreground scroll-mt-24">Verification</h3>
<h4 id="verifyrevisionchain">verifyRevisionChain()</h4>
<p class="text-base leading-7 text-muted-foreground mb-4">Verifies an entire AquaTree chain.</p>
<p class="text-base leading-7 text-muted-foreground mb-4"><strong>Signature:</strong></p>
<div class="relative group my-2"><div class="bg-muted/50 dark:bg-muted/30 px-4 py-2 rounded-t-xl border border-b-0 border-border/50 flex items-center justify-between"><div class="flex items-center gap-3"><div class="flex items-center gap-1.5"><div class="w-3 h-3 rounded-full bg-red-500/80 dark:bg-red-500/60"></div><div class="w-3 h-3 rounded-full bg-yellow-500/80 dark:bg-yellow-500/60"></div><div class="w-3 h-3 rounded-full bg-green-500/80 dark:bg-green-500/60"></div></div><span class="text-xs font-mono text-foreground">Code</span></div><div class="flex items-center gap-2"><span class="text-xs text-muted-foreground/60 font-mono uppercase tracking-wide">typescript</span><button class="p-1.5 rounded-md hover:bg-muted/50 transition-colors" aria-label="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-4 w-4 text-muted-foreground"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div></div><div class="bg-gray-200/50 dark:bg-[#0d1117] rounded-b-xl overflow-x-auto border border-border/50"><pre class="p-2 text-[13px] font-mono leading-relaxed text-gray-800 dark:text-gray-200"><code class="table w-full"><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">1</span><span class="table-cell align-top"><span class="token-keyword">async</span><span class="token-text"> </span><span class="token-function">verifyRevisionChain</span><span class="token-punctuation">(</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">2</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">a</span><span class="token-text">q</span><span class="token-text">u</span><span class="token-text">a</span><span class="token-text">T</span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">e</span><span class="token-operator">:</span><span class="token-text"> </span><span class="token-text">A</span><span class="token-text">q</span><span class="token-text">u</span><span class="token-text">a</span><span class="token-text">T</span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">e</span><span class="token-punctuation">,</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">3</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">c</span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">d</span><span class="token-text">e</span><span class="token-text">n</span><span class="token-text">t</span><span class="token-text">i</span><span class="token-text">a</span><span class="token-text">l</span><span class="token-text">s</span><span class="token-operator">?:</span><span class="token-text"> </span><span class="token-text">C</span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">d</span><span class="token-text">e</span><span class="token-text">n</span><span class="token-text">t</span><span class="token-text">i</span><span class="token-text">a</span><span class="token-text">l</span><span class="token-text">s</span><span class="token-text">D</span><span class="token-text">a</span><span class="token-text">t</span><span class="token-text">a</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">4</span><span class="table-cell align-top"><span class="token-punctuation">)</span><span class="token-operator">:</span><span class="token-text"> </span><span class="token-text">P</span><span class="token-text">r</span><span class="token-text">o</span><span class="token-text">m</span><span class="token-text">i</span><span class="token-text">s</span><span class="token-text">e</span><span class="token-operator">&lt;</span><span class="token-text">V</span><span class="token-text">e</span><span class="token-text">r</span><span class="token-text">i</span><span class="token-text">f</span><span class="token-text">i</span><span class="token-text">c</span><span class="token-text">a</span><span class="token-text">t</span><span class="token-text">i</span><span class="token-text">o</span><span class="token-text">n</span><span class="token-text">G</span><span class="token-text">r</span><span class="token-text">a</span><span class="token-text">p</span><span class="token-text">h</span><span class="token-text">D</span><span class="token-text">a</span><span class="token-text">t</span><span class="token-text">a</span><span class="token-operator">&gt;</span></span></div></code></pre></div></div>
<p class="text-base leading-7 text-muted-foreground mb-4"><strong>Parameters:</strong></p>
<ul class="list-disc list-outside pl-5 space-y-2 mb-4 text-muted-foreground [&amp;_p]:mb-0 [&amp;_p]:inline [&amp;_ul]:ml-6 [&amp;_ol]:ml-6">
<li class="leading-7 [&amp;&gt;p]:mb-0 [&amp;&gt;p]:inline"><code class="px-1.5 py-0.5 rounded-md bg-muted/50 text-primary font-mono text-[13px] border border-border/50">aquaTree</code>: Tree to verify</li>
<li class="leading-7 [&amp;&gt;p]:mb-0 [&amp;&gt;p]:inline"><code class="px-1.5 py-0.5 rounded-md bg-muted/50 text-primary font-mono text-[13px] border border-border/50">credentials</code>: Optional, for Ethereum witness lookup</li>
</ul>
<p class="text-base leading-7 text-muted-foreground mb-4"><strong>Returns:</strong></p>
<ul class="list-disc list-outside pl-5 space-y-2 mb-4 text-muted-foreground [&amp;_p]:mb-0 [&amp;_p]:inline [&amp;_ul]:ml-6 [&amp;_ol]:ml-6">
<li class="leading-7 [&amp;&gt;p]:mb-0 [&amp;&gt;p]:inline"><code class="px-1.5 py-0.5 rounded-md bg-muted/50 text-primary font-mono text-[13px] border border-border/50">VerificationGraphData</code>: Graph structure with verification results</li>
</ul>
<p class="text-base leading-7 text-muted-foreground mb-4"><strong>Example:</strong></p>
<div class="relative group my-2"><div class="bg-muted/50 dark:bg-muted/30 px-4 py-2 rounded-t-xl border border-b-0 border-border/50 flex items-center justify-between"><div class="flex items-center gap-3"><div class="flex items-center gap-1.5"><div class="w-3 h-3 rounded-full bg-red-500/80 dark:bg-red-500/60"></div><div class="w-3 h-3 rounded-full bg-yellow-500/80 dark:bg-yellow-500/60"></div><div class="w-3 h-3 rounded-full bg-green-500/80 dark:bg-green-500/60"></div></div><span class="text-xs font-mono text-foreground">Code</span></div><div class="flex items-center gap-2"><span class="text-xs text-muted-foreground/60 font-mono uppercase tracking-wide">typescript</span><button class="p-1.5 rounded-md hover:bg-muted/50 transition-colors" aria-label="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-4 w-4 text-muted-foreground"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div></div><div class="bg-gray-200/50 dark:bg-[#0d1117] rounded-b-xl overflow-x-auto border border-border/50"><pre class="p-2 text-[13px] font-mono leading-relaxed text-gray-800 dark:text-gray-200"><code class="table w-full"><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">1</span><span class="table-cell align-top"><span class="token-keyword">const</span><span class="token-text"> </span><span class="token-text">v</span><span class="token-text">e</span><span class="token-text">r</span><span class="token-text">i</span><span class="token-text">f</span><span class="token-text">i</span><span class="token-text">c</span><span class="token-text">a</span><span class="token-text">t</span><span class="token-text">i</span><span class="token-text">o</span><span class="token-text">n</span><span class="token-text">R</span><span class="token-text">e</span><span class="token-text">s</span><span class="token-text">u</span><span class="token-text">l</span><span class="token-text">t</span><span class="token-text"> </span><span class="token-operator">=</span><span class="token-text"> </span><span class="token-keyword">await</span><span class="token-text"> </span><span class="token-text">a</span><span class="token-text">q</span><span class="token-text">u</span><span class="token-text">a</span><span class="token-text">f</span><span class="token-text">i</span><span class="token-text">e</span><span class="token-text">r</span><span class="token-property">.verifyRevisionChain</span><span class="token-punctuation">(</span><span class="token-text">a</span><span class="token-text">q</span><span class="token-text">u</span><span class="token-text">a</span><span class="token-text">T</span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">e</span><span class="token-punctuation">,</span><span class="token-text"> </span><span class="token-text">c</span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">d</span><span class="token-text">e</span><span class="token-text">n</span><span class="token-text">t</span><span class="token-text">i</span><span class="token-text">a</span><span class="token-text">l</span><span class="token-text">s</span><span class="token-punctuation">)</span><span class="token-punctuation">;</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">2</span><span class="table-cell align-top"><span> </span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">3</span><span class="table-cell align-top"><span class="token-comment">// Check overall success</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">4</span><span class="table-cell align-top"><span class="token-keyword">if</span><span class="token-text"> </span><span class="token-punctuation">(</span><span class="token-text">v</span><span class="token-text">e</span><span class="token-text">r</span><span class="token-text">i</span><span class="token-text">f</span><span class="token-text">i</span><span class="token-text">c</span><span class="token-text">a</span><span class="token-text">t</span><span class="token-text">i</span><span class="token-text">o</span><span class="token-text">n</span><span class="token-text">R</span><span class="token-text">e</span><span class="token-text">s</span><span class="token-text">u</span><span class="token-text">l</span><span class="token-text">t</span><span class="token-property">.isValidationSuccessful</span><span class="token-punctuation">)</span><span class="token-text"> </span><span class="token-punctuation">{</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">5</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">c</span><span class="token-text">o</span><span class="token-text">n</span><span class="token-text">s</span><span class="token-text">o</span><span class="token-text">l</span><span class="token-text">e</span><span class="token-property">.log</span><span class="token-punctuation">(</span><span class="token-string">&quot;✓ Chain is valid&quot;</span><span class="token-punctuation">)</span><span class="token-punctuation">;</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">6</span><span class="table-cell align-top"><span class="token-punctuation">}</span><span class="token-text"> </span><span class="token-keyword">else</span><span class="token-text"> </span><span class="token-punctuation">{</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">7</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">c</span><span class="token-text">o</span><span class="token-text">n</span><span class="token-text">s</span><span class="token-text">o</span><span class="token-text">l</span><span class="token-text">e</span><span class="token-property">.log</span><span class="token-punctuation">(</span><span class="token-string">&quot;✗ Chain validation failed&quot;</span><span class="token-punctuation">)</span><span class="token-punctuation">;</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">8</span><span class="table-cell align-top"><span class="token-punctuation">}</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">9</span><span class="table-cell align-top"><span> </span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">10</span><span class="table-cell align-top"><span class="token-comment">// Traverse verification graph</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">11</span><span class="table-cell align-top"><span class="token-keyword">function</span><span class="token-text"> </span><span class="token-function">printResults</span><span class="token-punctuation">(</span><span class="token-text">n</span><span class="token-text">o</span><span class="token-text">d</span><span class="token-text">e</span><span class="token-operator">:</span><span class="token-text"> </span><span class="token-text">V</span><span class="token-text">e</span><span class="token-text">r</span><span class="token-text">i</span><span class="token-text">f</span><span class="token-text">i</span><span class="token-text">c</span><span class="token-text">a</span><span class="token-text">t</span><span class="token-text">i</span><span class="token-text">o</span><span class="token-text">n</span><span class="token-text">G</span><span class="token-text">r</span><span class="token-text">a</span><span class="token-text">p</span><span class="token-text">h</span><span class="token-text">D</span><span class="token-text">a</span><span class="token-text">t</span><span class="token-text">a</span><span class="token-punctuation">,</span><span class="token-text"> </span><span class="token-text">d</span><span class="token-text">e</span><span class="token-text">p</span><span class="token-text">t</span><span class="token-text">h</span><span class="token-text"> </span><span class="token-operator">=</span><span class="token-text"> </span><span class="token-number">0</span><span class="token-punctuation">)</span><span class="token-text"> </span><span class="token-punctuation">{</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">12</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-keyword">const</span><span class="token-text"> </span><span class="token-text">i</span><span class="token-text">n</span><span class="token-text">d</span><span class="token-text">e</span><span class="token-text">n</span><span class="token-text">t</span><span class="token-text"> </span><span class="token-operator">=</span><span class="token-text"> </span><span class="token-string">&quot;  &quot;</span><span class="token-property">.repeat</span><span class="token-punctuation">(</span><span class="token-text">d</span><span class="token-text">e</span><span class="token-text">p</span><span class="token-text">t</span><span class="token-text">h</span><span class="token-punctuation">)</span><span class="token-punctuation">;</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">13</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-keyword">const</span><span class="token-text"> </span><span class="token-text">s</span><span class="token-text">t</span><span class="token-text">a</span><span class="token-text">t</span><span class="token-text">u</span><span class="token-text">s</span><span class="token-text"> </span><span class="token-operator">=</span><span class="token-text"> </span><span class="token-text">n</span><span class="token-text">o</span><span class="token-text">d</span><span class="token-text">e</span><span class="token-property">.isValidationSuccessful</span><span class="token-text"> </span><span class="token-operator">?</span><span class="token-text"> </span><span class="token-string">&quot;✓&quot;</span><span class="token-text"> </span><span class="token-operator">:</span><span class="token-text"> </span><span class="token-string">&quot;✗&quot;</span><span class="token-punctuation">;</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">14</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">c</span><span class="token-text">o</span><span class="token-text">n</span><span class="token-text">s</span><span class="token-text">o</span><span class="token-text">l</span><span class="token-text">e</span><span class="token-property">.log</span><span class="token-punctuation">(</span><span class="token-string">`${indent}${status} ${node.revisionType}`</span><span class="token-punctuation">)</span><span class="token-punctuation">;</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">15</span><span class="table-cell align-top"><span> </span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">16</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">n</span><span class="token-text">o</span><span class="token-text">d</span><span class="token-text">e</span><span class="token-property">.verificationGraphData</span><span class="token-property">.forEach</span><span class="token-punctuation">(</span><span class="token-text">c</span><span class="token-text">h</span><span class="token-text">i</span><span class="token-text">l</span><span class="token-text">d</span><span class="token-text"> </span><span class="token-operator">=&gt;</span><span class="token-text"> </span><span class="token-function">printResults</span><span class="token-punctuation">(</span><span class="token-text">c</span><span class="token-text">h</span><span class="token-text">i</span><span class="token-text">l</span><span class="token-text">d</span><span class="token-punctuation">,</span><span class="token-text"> </span><span class="token-text">d</span><span class="token-text">e</span><span class="token-text">p</span><span class="token-text">t</span><span class="token-text">h</span><span class="token-text"> </span><span class="token-operator">+</span><span class="token-text"> </span><span class="token-number">1</span><span class="token-punctuation">)</span><span class="token-punctuation">)</span><span class="token-punctuation">;</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">17</span><span class="table-cell align-top"><span class="token-punctuation">}</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">18</span><span class="table-cell align-top"><span> </span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">19</span><span class="table-cell align-top"><span class="token-function">printResults</span><span class="token-punctuation">(</span><span class="token-text">v</span><span class="token-text">e</span><span class="token-text">r</span><span class="token-text">i</span><span class="token-text">f</span><span class="token-text">i</span><span class="token-text">c</span><span class="token-text">a</span><span class="token-text">t</span><span class="token-text">i</span><span class="token-text">o</span><span class="token-text">n</span><span class="token-text">R</span><span class="token-text">e</span><span class="token-text">s</span><span class="token-text">u</span><span class="token-text">l</span><span class="token-text">t</span><span class="token-punctuation">)</span><span class="token-punctuation">;</span></span></div></code></pre></div></div>
<h4 id="verifyformrevision">verifyFormRevision()</h4>
<p class="text-base leading-7 text-muted-foreground mb-4">Verifies form-specific data.</p>
<p class="text-base leading-7 text-muted-foreground mb-4"><strong>Signature:</strong></p>
<div class="relative group my-2"><div class="bg-muted/50 dark:bg-muted/30 px-4 py-2 rounded-t-xl border border-b-0 border-border/50 flex items-center justify-between"><div class="flex items-center gap-3"><div class="flex items-center gap-1.5"><div class="w-3 h-3 rounded-full bg-red-500/80 dark:bg-red-500/60"></div><div class="w-3 h-3 rounded-full bg-yellow-500/80 dark:bg-yellow-500/60"></div><div class="w-3 h-3 rounded-full bg-green-500/80 dark:bg-green-500/60"></div></div><span class="text-xs font-mono text-foreground">Code</span></div><div class="flex items-center gap-2"><span class="text-xs text-muted-foreground/60 font-mono uppercase tracking-wide">typescript</span><button class="p-1.5 rounded-md hover:bg-muted/50 transition-colors" aria-label="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-4 w-4 text-muted-foreground"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div></div><div class="bg-gray-200/50 dark:bg-[#0d1117] rounded-b-xl overflow-x-auto border border-border/50"><pre class="p-2 text-[13px] font-mono leading-relaxed text-gray-800 dark:text-gray-200"><code class="table w-full"><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">1</span><span class="table-cell align-top"><span class="token-keyword">async</span><span class="token-text"> </span><span class="token-function">verifyFormRevision</span><span class="token-punctuation">(</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">2</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">a</span><span class="token-text">q</span><span class="token-text">u</span><span class="token-text">a</span><span class="token-text">T</span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">e</span><span class="token-operator">:</span><span class="token-text"> </span><span class="token-text">A</span><span class="token-text">q</span><span class="token-text">u</span><span class="token-text">a</span><span class="token-text">T</span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">e</span><span class="token-punctuation">,</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">3</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">f</span><span class="token-text">o</span><span class="token-text">r</span><span class="token-text">m</span><span class="token-text">D</span><span class="token-text">a</span><span class="token-text">t</span><span class="token-text">a</span><span class="token-operator">:</span><span class="token-text"> </span><span class="token-text">F</span><span class="token-text">o</span><span class="token-text">r</span><span class="token-text">m</span><span class="token-text">D</span><span class="token-text">a</span><span class="token-text">t</span><span class="token-text">a</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">4</span><span class="table-cell align-top"><span class="token-punctuation">)</span><span class="token-operator">:</span><span class="token-text"> </span><span class="token-text">P</span><span class="token-text">r</span><span class="token-text">o</span><span class="token-text">m</span><span class="token-text">i</span><span class="token-text">s</span><span class="token-text">e</span><span class="token-operator">&lt;</span><span class="token-text">F</span><span class="token-text">o</span><span class="token-text">r</span><span class="token-text">m</span><span class="token-text">V</span><span class="token-text">e</span><span class="token-text">r</span><span class="token-text">i</span><span class="token-text">f</span><span class="token-text">i</span><span class="token-text">c</span><span class="token-text">a</span><span class="token-text">t</span><span class="token-text">i</span><span class="token-text">o</span><span class="token-text">n</span><span class="token-text">R</span><span class="token-text">e</span><span class="token-text">s</span><span class="token-text">p</span><span class="token-text">o</span><span class="token-text">n</span><span class="token-text">s</span><span class="token-text">e</span><span class="token-text">D</span><span class="token-text">a</span><span class="token-text">t</span><span class="token-text">a</span><span class="token-operator">&gt;</span></span></div></code></pre></div></div>
<hr/>
<h3 id="utility-methods" class="text-xl font-medium tracking-tight mt-8 mb-3 text-foreground scroll-mt-24">Utility Methods</h3>
<h4 id="removelastrevision">removeLastRevision()</h4>
<p class="text-base leading-7 text-muted-foreground mb-4">Removes the most recent revision from an AquaTree.</p>
<p class="text-base leading-7 text-muted-foreground mb-4"><strong>Signature:</strong></p>
<div class="relative group my-2"><div class="bg-muted/50 dark:bg-muted/30 px-4 py-2 rounded-t-xl border border-b-0 border-border/50 flex items-center justify-between"><div class="flex items-center gap-3"><div class="flex items-center gap-1.5"><div class="w-3 h-3 rounded-full bg-red-500/80 dark:bg-red-500/60"></div><div class="w-3 h-3 rounded-full bg-yellow-500/80 dark:bg-yellow-500/60"></div><div class="w-3 h-3 rounded-full bg-green-500/80 dark:bg-green-500/60"></div></div><span class="text-xs font-mono text-foreground">Code</span></div><div class="flex items-center gap-2"><span class="text-xs text-muted-foreground/60 font-mono uppercase tracking-wide">typescript</span><button class="p-1.5 rounded-md hover:bg-muted/50 transition-colors" aria-label="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-4 w-4 text-muted-foreground"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div></div><div class="bg-gray-200/50 dark:bg-[#0d1117] rounded-b-xl overflow-x-auto border border-border/50"><pre class="p-2 text-[13px] font-mono leading-relaxed text-gray-800 dark:text-gray-200"><code class="table w-full"><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">1</span><span class="table-cell align-top"><span class="token-function">removeLastRevision</span><span class="token-punctuation">(</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">2</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">a</span><span class="token-text">q</span><span class="token-text">u</span><span class="token-text">a</span><span class="token-text">T</span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">e</span><span class="token-operator">:</span><span class="token-text"> </span><span class="token-text">A</span><span class="token-text">q</span><span class="token-text">u</span><span class="token-text">a</span><span class="token-text">T</span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">e</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">3</span><span class="table-cell align-top"><span class="token-punctuation">)</span><span class="token-operator">:</span><span class="token-text"> </span><span class="token-text">R</span><span class="token-text">e</span><span class="token-text">s</span><span class="token-text">u</span><span class="token-text">l</span><span class="token-text">t</span><span class="token-operator">&lt;</span><span class="token-text">A</span><span class="token-text">q</span><span class="token-text">u</span><span class="token-text">a</span><span class="token-text">O</span><span class="token-text">p</span><span class="token-text">e</span><span class="token-text">r</span><span class="token-text">a</span><span class="token-text">t</span><span class="token-text">i</span><span class="token-text">o</span><span class="token-text">n</span><span class="token-text">D</span><span class="token-text">a</span><span class="token-text">t</span><span class="token-text">a</span><span class="token-punctuation">,</span><span class="token-text"> </span><span class="token-text">L</span><span class="token-text">o</span><span class="token-text">g</span><span class="token-text">D</span><span class="token-text">a</span><span class="token-text">t</span><span class="token-text">a</span><span class="token-punctuation">[</span><span class="token-punctuation">]</span><span class="token-operator">&gt;</span></span></div></code></pre></div></div>
<p class="text-base leading-7 text-muted-foreground mb-4"><strong>Example:</strong></p>
<div class="relative group my-2"><div class="bg-muted/50 dark:bg-muted/30 px-4 py-2 rounded-t-xl border border-b-0 border-border/50 flex items-center justify-between"><div class="flex items-center gap-3"><div class="flex items-center gap-1.5"><div class="w-3 h-3 rounded-full bg-red-500/80 dark:bg-red-500/60"></div><div class="w-3 h-3 rounded-full bg-yellow-500/80 dark:bg-yellow-500/60"></div><div class="w-3 h-3 rounded-full bg-green-500/80 dark:bg-green-500/60"></div></div><span class="text-xs font-mono text-foreground">Code</span></div><div class="flex items-center gap-2"><span class="text-xs text-muted-foreground/60 font-mono uppercase tracking-wide">typescript</span><button class="p-1.5 rounded-md hover:bg-muted/50 transition-colors" aria-label="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-4 w-4 text-muted-foreground"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div></div><div class="bg-gray-200/50 dark:bg-[#0d1117] rounded-b-xl overflow-x-auto border border-border/50"><pre class="p-2 text-[13px] font-mono leading-relaxed text-gray-800 dark:text-gray-200"><code class="table w-full"><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">1</span><span class="table-cell align-top"><span class="token-keyword">const</span><span class="token-text"> </span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">s</span><span class="token-text">u</span><span class="token-text">l</span><span class="token-text">t</span><span class="token-text"> </span><span class="token-operator">=</span><span class="token-text"> </span><span class="token-text">a</span><span class="token-text">q</span><span class="token-text">u</span><span class="token-text">a</span><span class="token-text">f</span><span class="token-text">i</span><span class="token-text">e</span><span class="token-text">r</span><span class="token-property">.removeLastRevision</span><span class="token-punctuation">(</span><span class="token-text">a</span><span class="token-text">q</span><span class="token-text">u</span><span class="token-text">a</span><span class="token-text">T</span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">e</span><span class="token-punctuation">)</span><span class="token-punctuation">;</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">2</span><span class="table-cell align-top"><span> </span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">3</span><span class="table-cell align-top"><span class="token-keyword">if</span><span class="token-text"> </span><span class="token-punctuation">(</span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">s</span><span class="token-text">u</span><span class="token-text">l</span><span class="token-text">t</span><span class="token-property">.isOk</span><span class="token-punctuation">)</span><span class="token-text"> </span><span class="token-punctuation">{</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">4</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-keyword">const</span><span class="token-text"> </span><span class="token-text">u</span><span class="token-text">p</span><span class="token-text">d</span><span class="token-text">a</span><span class="token-text">t</span><span class="token-text">e</span><span class="token-text">d</span><span class="token-text">T</span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">e</span><span class="token-text"> </span><span class="token-operator">=</span><span class="token-text"> </span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">s</span><span class="token-text">u</span><span class="token-text">l</span><span class="token-text">t</span><span class="token-property">.data</span><span class="token-property">.aquaTree</span><span class="token-punctuation">;</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">5</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">c</span><span class="token-text">o</span><span class="token-text">n</span><span class="token-text">s</span><span class="token-text">o</span><span class="token-text">l</span><span class="token-text">e</span><span class="token-property">.log</span><span class="token-punctuation">(</span><span class="token-string">&quot;Revision removed successfully&quot;</span><span class="token-punctuation">)</span><span class="token-punctuation">;</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">6</span><span class="table-cell align-top"><span class="token-punctuation">}</span></span></div></code></pre></div></div>
<h4 id="checkiffilealreadynotarized">checkIfFileAlreadyNotarized()</h4>
<p class="text-base leading-7 text-muted-foreground mb-4">Checks if a file has already been notarized.</p>
<p class="text-base leading-7 text-muted-foreground mb-4"><strong>Signature:</strong></p>
<div class="relative group my-2"><div class="bg-muted/50 dark:bg-muted/30 px-4 py-2 rounded-t-xl border border-b-0 border-border/50 flex items-center justify-between"><div class="flex items-center gap-3"><div class="flex items-center gap-1.5"><div class="w-3 h-3 rounded-full bg-red-500/80 dark:bg-red-500/60"></div><div class="w-3 h-3 rounded-full bg-yellow-500/80 dark:bg-yellow-500/60"></div><div class="w-3 h-3 rounded-full bg-green-500/80 dark:bg-green-500/60"></div></div><span class="text-xs font-mono text-foreground">Code</span></div><div class="flex items-center gap-2"><span class="text-xs text-muted-foreground/60 font-mono uppercase tracking-wide">typescript</span><button class="p-1.5 rounded-md hover:bg-muted/50 transition-colors" aria-label="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-4 w-4 text-muted-foreground"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div></div><div class="bg-gray-200/50 dark:bg-[#0d1117] rounded-b-xl overflow-x-auto border border-border/50"><pre class="p-2 text-[13px] font-mono leading-relaxed text-gray-800 dark:text-gray-200"><code class="table w-full"><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">1</span><span class="table-cell align-top"><span class="token-function">checkIfFileAlreadyNotarized</span><span class="token-punctuation">(</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">2</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">a</span><span class="token-text">q</span><span class="token-text">u</span><span class="token-text">a</span><span class="token-text">T</span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">e</span><span class="token-operator">:</span><span class="token-text"> </span><span class="token-text">A</span><span class="token-text">q</span><span class="token-text">u</span><span class="token-text">a</span><span class="token-text">T</span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">e</span><span class="token-punctuation">,</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">3</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">f</span><span class="token-text">i</span><span class="token-text">l</span><span class="token-text">e</span><span class="token-text">O</span><span class="token-text">b</span><span class="token-text">j</span><span class="token-text">e</span><span class="token-text">c</span><span class="token-text">t</span><span class="token-operator">:</span><span class="token-text"> </span><span class="token-text">F</span><span class="token-text">i</span><span class="token-text">l</span><span class="token-text">e</span><span class="token-text">O</span><span class="token-text">b</span><span class="token-text">j</span><span class="token-text">e</span><span class="token-text">c</span><span class="token-text">t</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">4</span><span class="table-cell align-top"><span class="token-punctuation">)</span><span class="token-operator">:</span><span class="token-text"> </span><span class="token-text">b</span><span class="token-text">o</span><span class="token-text">o</span><span class="token-text">l</span><span class="token-text">e</span><span class="token-text">a</span><span class="token-text">n</span></span></div></code></pre></div></div>
<h4 id="fetchfilestoberead">fetchFilesToBeRead()</h4>
<p class="text-base leading-7 text-muted-foreground mb-4">Gets list of files that need content loaded.</p>
<p class="text-base leading-7 text-muted-foreground mb-4"><strong>Signature:</strong></p>
<div class="relative group my-2"><div class="bg-muted/50 dark:bg-muted/30 px-4 py-2 rounded-t-xl border border-b-0 border-border/50 flex items-center justify-between"><div class="flex items-center gap-3"><div class="flex items-center gap-1.5"><div class="w-3 h-3 rounded-full bg-red-500/80 dark:bg-red-500/60"></div><div class="w-3 h-3 rounded-full bg-yellow-500/80 dark:bg-yellow-500/60"></div><div class="w-3 h-3 rounded-full bg-green-500/80 dark:bg-green-500/60"></div></div><span class="text-xs font-mono text-foreground">Code</span></div><div class="flex items-center gap-2"><span class="text-xs text-muted-foreground/60 font-mono uppercase tracking-wide">typescript</span><button class="p-1.5 rounded-md hover:bg-muted/50 transition-colors" aria-label="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-4 w-4 text-muted-foreground"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div></div><div class="bg-gray-200/50 dark:bg-[#0d1117] rounded-b-xl overflow-x-auto border border-border/50"><pre class="p-2 text-[13px] font-mono leading-relaxed text-gray-800 dark:text-gray-200"><code class="table w-full"><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">1</span><span class="table-cell align-top"><span class="token-function">fetchFilesToBeRead</span><span class="token-punctuation">(</span><span class="token-text">a</span><span class="token-text">q</span><span class="token-text">u</span><span class="token-text">a</span><span class="token-text">T</span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">e</span><span class="token-operator">:</span><span class="token-text"> </span><span class="token-text">A</span><span class="token-text">q</span><span class="token-text">u</span><span class="token-text">a</span><span class="token-text">T</span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">e</span><span class="token-punctuation">)</span><span class="token-operator">:</span><span class="token-text"> </span><span class="token-text">s</span><span class="token-text">t</span><span class="token-text">r</span><span class="token-text">i</span><span class="token-text">n</span><span class="token-text">g</span><span class="token-punctuation">[</span><span class="token-punctuation">]</span></span></div></code></pre></div></div>
<hr/>
<h2 id="type-reference" class="text-2xl font-semibold tracking-tight mt-10 mb-4 text-foreground scroll-mt-24">Type Reference</h2>
<h3 id="core-types" class="text-xl font-medium tracking-tight mt-8 mb-3 text-foreground scroll-mt-24">Core Types</h3>
<div class="relative group my-2"><div class="bg-muted/50 dark:bg-muted/30 px-4 py-2 rounded-t-xl border border-b-0 border-border/50 flex items-center justify-between"><div class="flex items-center gap-3"><div class="flex items-center gap-1.5"><div class="w-3 h-3 rounded-full bg-red-500/80 dark:bg-red-500/60"></div><div class="w-3 h-3 rounded-full bg-yellow-500/80 dark:bg-yellow-500/60"></div><div class="w-3 h-3 rounded-full bg-green-500/80 dark:bg-green-500/60"></div></div><span class="text-xs font-mono text-foreground">Code</span></div><div class="flex items-center gap-2"><span class="text-xs text-muted-foreground/60 font-mono uppercase tracking-wide">typescript</span><button class="p-1.5 rounded-md hover:bg-muted/50 transition-colors" aria-label="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-4 w-4 text-muted-foreground"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div></div><div class="bg-gray-200/50 dark:bg-[#0d1117] rounded-b-xl overflow-x-auto border border-border/50"><pre class="p-2 text-[13px] font-mono leading-relaxed text-gray-800 dark:text-gray-200"><code class="table w-full"><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">1</span><span class="table-cell align-top"><span class="token-keyword">interface</span><span class="token-text"> </span><span class="token-text">F</span><span class="token-text">i</span><span class="token-text">l</span><span class="token-text">e</span><span class="token-text">O</span><span class="token-text">b</span><span class="token-text">j</span><span class="token-text">e</span><span class="token-text">c</span><span class="token-text">t</span><span class="token-text"> </span><span class="token-punctuation">{</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">2</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">f</span><span class="token-text">i</span><span class="token-text">l</span><span class="token-text">e</span><span class="token-text">N</span><span class="token-text">a</span><span class="token-text">m</span><span class="token-text">e</span><span class="token-operator">:</span><span class="token-text"> </span><span class="token-text">s</span><span class="token-text">t</span><span class="token-text">r</span><span class="token-text">i</span><span class="token-text">n</span><span class="token-text">g</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">3</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">f</span><span class="token-text">i</span><span class="token-text">l</span><span class="token-text">e</span><span class="token-text">C</span><span class="token-text">o</span><span class="token-text">n</span><span class="token-text">t</span><span class="token-text">e</span><span class="token-text">n</span><span class="token-text">t</span><span class="token-operator">:</span><span class="token-text"> </span><span class="token-text">s</span><span class="token-text">t</span><span class="token-text">r</span><span class="token-text">i</span><span class="token-text">n</span><span class="token-text">g</span><span class="token-text"> </span><span class="token-operator">|</span><span class="token-text"> </span><span class="token-text">A</span><span class="token-text">q</span><span class="token-text">u</span><span class="token-text">a</span><span class="token-text">T</span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">e</span><span class="token-text"> </span><span class="token-operator">|</span><span class="token-text"> </span><span class="token-text">U</span><span class="token-text">i</span><span class="token-text">n</span><span class="token-text">t</span><span class="token-text">8</span><span class="token-text">A</span><span class="token-text">r</span><span class="token-text">r</span><span class="token-text">a</span><span class="token-text">y</span><span class="token-text"> </span><span class="token-operator">|</span><span class="token-text"> </span><span class="token-text">R</span><span class="token-text">e</span><span class="token-text">c</span><span class="token-text">o</span><span class="token-text">r</span><span class="token-text">d</span><span class="token-operator">&lt;</span><span class="token-text">s</span><span class="token-text">t</span><span class="token-text">r</span><span class="token-text">i</span><span class="token-text">n</span><span class="token-text">g</span><span class="token-punctuation">,</span><span class="token-text"> </span><span class="token-text">s</span><span class="token-text">t</span><span class="token-text">r</span><span class="token-text">i</span><span class="token-text">n</span><span class="token-text">g</span><span class="token-operator">&gt;</span><span class="token-text"> </span><span class="token-operator">|</span><span class="token-text"> </span><span class="token-text">o</span><span class="token-text">b</span><span class="token-text">j</span><span class="token-text">e</span><span class="token-text">c</span><span class="token-text">t</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">4</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">p</span><span class="token-text">a</span><span class="token-text">t</span><span class="token-text">h</span><span class="token-operator">:</span><span class="token-text"> </span><span class="token-text">s</span><span class="token-text">t</span><span class="token-text">r</span><span class="token-text">i</span><span class="token-text">n</span><span class="token-text">g</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">5</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">f</span><span class="token-text">i</span><span class="token-text">l</span><span class="token-text">e</span><span class="token-text">S</span><span class="token-text">i</span><span class="token-text">z</span><span class="token-text">e</span><span class="token-operator">?:</span><span class="token-text"> </span><span class="token-text">n</span><span class="token-text">u</span><span class="token-text">m</span><span class="token-text">b</span><span class="token-text">e</span><span class="token-text">r</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">6</span><span class="table-cell align-top"><span class="token-punctuation">}</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">7</span><span class="table-cell align-top"><span> </span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">8</span><span class="table-cell align-top"><span class="token-keyword">interface</span><span class="token-text"> </span><span class="token-text">A</span><span class="token-text">q</span><span class="token-text">u</span><span class="token-text">a</span><span class="token-text">T</span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">e</span><span class="token-text"> </span><span class="token-punctuation">{</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">9</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">v</span><span class="token-text">i</span><span class="token-text">s</span><span class="token-text">i</span><span class="token-text">o</span><span class="token-text">n</span><span class="token-text">s</span><span class="token-operator">:</span><span class="token-text"> </span><span class="token-text">R</span><span class="token-text">e</span><span class="token-text">v</span><span class="token-text">i</span><span class="token-text">s</span><span class="token-text">i</span><span class="token-text">o</span><span class="token-text">n</span><span class="token-text">s</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">10</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">f</span><span class="token-text">i</span><span class="token-text">l</span><span class="token-text">e</span><span class="token-text">_</span><span class="token-text">i</span><span class="token-text">n</span><span class="token-text">d</span><span class="token-text">e</span><span class="token-text">x</span><span class="token-operator">:</span><span class="token-text"> </span><span class="token-text">F</span><span class="token-text">i</span><span class="token-text">l</span><span class="token-text">e</span><span class="token-text">I</span><span class="token-text">n</span><span class="token-text">d</span><span class="token-text">e</span><span class="token-text">x</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">11</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">t</span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">e</span><span class="token-operator">?:</span><span class="token-text"> </span><span class="token-text">R</span><span class="token-text">e</span><span class="token-text">v</span><span class="token-text">i</span><span class="token-text">s</span><span class="token-text">i</span><span class="token-text">o</span><span class="token-text">n</span><span class="token-text">T</span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">e</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">12</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">t</span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">e</span><span class="token-text">M</span><span class="token-text">a</span><span class="token-text">p</span><span class="token-text">p</span><span class="token-text">i</span><span class="token-text">n</span><span class="token-text">g</span><span class="token-operator">?:</span><span class="token-text"> </span><span class="token-text">T</span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">e</span><span class="token-text">M</span><span class="token-text">a</span><span class="token-text">p</span><span class="token-text">p</span><span class="token-text">i</span><span class="token-text">n</span><span class="token-text">g</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">13</span><span class="table-cell align-top"><span class="token-punctuation">}</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">14</span><span class="table-cell align-top"><span> </span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">15</span><span class="table-cell align-top"><span class="token-keyword">interface</span><span class="token-text"> </span><span class="token-text">R</span><span class="token-text">e</span><span class="token-text">v</span><span class="token-text">i</span><span class="token-text">s</span><span class="token-text">i</span><span class="token-text">o</span><span class="token-text">n</span><span class="token-text"> </span><span class="token-punctuation">{</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">16</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">p</span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">v</span><span class="token-text">i</span><span class="token-text">o</span><span class="token-text">u</span><span class="token-text">s</span><span class="token-text">_</span><span class="token-text">v</span><span class="token-text">e</span><span class="token-text">r</span><span class="token-text">i</span><span class="token-text">f</span><span class="token-text">i</span><span class="token-text">c</span><span class="token-text">a</span><span class="token-text">t</span><span class="token-text">i</span><span class="token-text">o</span><span class="token-text">n</span><span class="token-text">_</span><span class="token-text">h</span><span class="token-text">a</span><span class="token-text">s</span><span class="token-text">h</span><span class="token-operator">:</span><span class="token-text"> </span><span class="token-text">s</span><span class="token-text">t</span><span class="token-text">r</span><span class="token-text">i</span><span class="token-text">n</span><span class="token-text">g</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">17</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">l</span><span class="token-text">o</span><span class="token-text">c</span><span class="token-text">a</span><span class="token-text">l</span><span class="token-text">_</span><span class="token-text">t</span><span class="token-text">i</span><span class="token-text">m</span><span class="token-text">e</span><span class="token-text">s</span><span class="token-text">t</span><span class="token-text">a</span><span class="token-text">m</span><span class="token-text">p</span><span class="token-operator">:</span><span class="token-text"> </span><span class="token-text">s</span><span class="token-text">t</span><span class="token-text">r</span><span class="token-text">i</span><span class="token-text">n</span><span class="token-text">g</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">18</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">v</span><span class="token-text">i</span><span class="token-text">s</span><span class="token-text">i</span><span class="token-text">o</span><span class="token-text">n</span><span class="token-text">_</span><span class="token-keyword">type</span><span class="token-operator">:</span><span class="token-text"> </span><span class="token-text">R</span><span class="token-text">e</span><span class="token-text">v</span><span class="token-text">i</span><span class="token-text">s</span><span class="token-text">i</span><span class="token-text">o</span><span class="token-text">n</span><span class="token-text">T</span><span class="token-text">y</span><span class="token-text">p</span><span class="token-text">e</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">19</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">v</span><span class="token-text">e</span><span class="token-text">r</span><span class="token-text">s</span><span class="token-text">i</span><span class="token-text">o</span><span class="token-text">n</span><span class="token-operator">:</span><span class="token-text"> </span><span class="token-text">s</span><span class="token-text">t</span><span class="token-text">r</span><span class="token-text">i</span><span class="token-text">n</span><span class="token-text">g</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">20</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-comment">// ... type-specific fields</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">21</span><span class="table-cell align-top"><span class="token-punctuation">}</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">22</span><span class="table-cell align-top"><span> </span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">23</span><span class="table-cell align-top"><span class="token-keyword">type</span><span class="token-text"> </span><span class="token-text">R</span><span class="token-text">e</span><span class="token-text">v</span><span class="token-text">i</span><span class="token-text">s</span><span class="token-text">i</span><span class="token-text">o</span><span class="token-text">n</span><span class="token-text">T</span><span class="token-text">y</span><span class="token-text">p</span><span class="token-text">e</span><span class="token-text"> </span><span class="token-operator">=</span><span class="token-text"> </span><span class="token-string">&quot;file&quot;</span><span class="token-text"> </span><span class="token-operator">|</span><span class="token-text"> </span><span class="token-string">&quot;witness&quot;</span><span class="token-text"> </span><span class="token-operator">|</span><span class="token-text"> </span><span class="token-string">&quot;signature&quot;</span><span class="token-text"> </span><span class="token-operator">|</span><span class="token-text"> </span><span class="token-string">&quot;form&quot;</span><span class="token-text"> </span><span class="token-operator">|</span><span class="token-text"> </span><span class="token-string">&quot;link&quot;</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">24</span><span class="table-cell align-top"><span class="token-keyword">type</span><span class="token-text"> </span><span class="token-text">S</span><span class="token-text">i</span><span class="token-text">g</span><span class="token-text">n</span><span class="token-text">T</span><span class="token-text">y</span><span class="token-text">p</span><span class="token-text">e</span><span class="token-text"> </span><span class="token-operator">=</span><span class="token-text"> </span><span class="token-string">&quot;metamask&quot;</span><span class="token-text"> </span><span class="token-operator">|</span><span class="token-text"> </span><span class="token-string">&quot;cli&quot;</span><span class="token-text"> </span><span class="token-operator">|</span><span class="token-text"> </span><span class="token-string">&quot;did&quot;</span><span class="token-text"> </span><span class="token-operator">|</span><span class="token-text"> </span><span class="token-string">&quot;p12&quot;</span><span class="token-text"> </span><span class="token-operator">|</span><span class="token-text"> </span><span class="token-string">&quot;inline&quot;</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">25</span><span class="table-cell align-top"><span class="token-keyword">type</span><span class="token-text"> </span><span class="token-text">W</span><span class="token-text">i</span><span class="token-text">t</span><span class="token-text">n</span><span class="token-text">e</span><span class="token-text">s</span><span class="token-text">s</span><span class="token-text">T</span><span class="token-text">y</span><span class="token-text">p</span><span class="token-text">e</span><span class="token-text"> </span><span class="token-operator">=</span><span class="token-text"> </span><span class="token-string">&quot;tsa&quot;</span><span class="token-text"> </span><span class="token-operator">|</span><span class="token-text"> </span><span class="token-string">&quot;eth&quot;</span><span class="token-text"> </span><span class="token-operator">|</span><span class="token-text"> </span><span class="token-string">&quot;nostr&quot;</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">26</span><span class="table-cell align-top"><span class="token-keyword">type</span><span class="token-text"> </span><span class="token-text">W</span><span class="token-text">i</span><span class="token-text">t</span><span class="token-text">n</span><span class="token-text">e</span><span class="token-text">s</span><span class="token-text">s</span><span class="token-text">N</span><span class="token-text">e</span><span class="token-text">t</span><span class="token-text">w</span><span class="token-text">o</span><span class="token-text">r</span><span class="token-text">k</span><span class="token-text"> </span><span class="token-operator">=</span><span class="token-text"> </span><span class="token-string">&quot;sepolia&quot;</span><span class="token-text"> </span><span class="token-operator">|</span><span class="token-text"> </span><span class="token-string">&quot;mainnet&quot;</span><span class="token-text"> </span><span class="token-operator">|</span><span class="token-text"> </span><span class="token-string">&quot;holesky&quot;</span></span></div></code></pre></div></div>
<h3 id="result-type" class="text-xl font-medium tracking-tight mt-8 mb-3 text-foreground scroll-mt-24">Result Type</h3>
<div class="relative group my-2"><div class="bg-muted/50 dark:bg-muted/30 px-4 py-2 rounded-t-xl border border-b-0 border-border/50 flex items-center justify-between"><div class="flex items-center gap-3"><div class="flex items-center gap-1.5"><div class="w-3 h-3 rounded-full bg-red-500/80 dark:bg-red-500/60"></div><div class="w-3 h-3 rounded-full bg-yellow-500/80 dark:bg-yellow-500/60"></div><div class="w-3 h-3 rounded-full bg-green-500/80 dark:bg-green-500/60"></div></div><span class="text-xs font-mono text-foreground">Code</span></div><div class="flex items-center gap-2"><span class="text-xs text-muted-foreground/60 font-mono uppercase tracking-wide">typescript</span><button class="p-1.5 rounded-md hover:bg-muted/50 transition-colors" aria-label="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-4 w-4 text-muted-foreground"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div></div><div class="bg-gray-200/50 dark:bg-[#0d1117] rounded-b-xl overflow-x-auto border border-border/50"><pre class="p-2 text-[13px] font-mono leading-relaxed text-gray-800 dark:text-gray-200"><code class="table w-full"><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">1</span><span class="table-cell align-top"><span class="token-keyword">type</span><span class="token-text"> </span><span class="token-text">R</span><span class="token-text">e</span><span class="token-text">s</span><span class="token-text">u</span><span class="token-text">l</span><span class="token-text">t</span><span class="token-operator">&lt;</span><span class="token-text">T</span><span class="token-punctuation">,</span><span class="token-text"> </span><span class="token-text">E</span><span class="token-operator">&gt;</span><span class="token-text"> </span><span class="token-operator">=</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">2</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-operator">|</span><span class="token-text"> </span><span class="token-punctuation">{</span><span class="token-text"> </span><span class="token-text">i</span><span class="token-text">s</span><span class="token-text">O</span><span class="token-text">k</span><span class="token-operator">:</span><span class="token-text"> </span><span class="token-keyword">true</span><span class="token-punctuation">;</span><span class="token-text"> </span><span class="token-text">i</span><span class="token-text">s</span><span class="token-text">E</span><span class="token-text">r</span><span class="token-text">r</span><span class="token-operator">:</span><span class="token-text"> </span><span class="token-keyword">false</span><span class="token-punctuation">;</span><span class="token-text"> </span><span class="token-text">d</span><span class="token-text">a</span><span class="token-text">t</span><span class="token-text">a</span><span class="token-operator">:</span><span class="token-text"> </span><span class="token-text">T</span><span class="token-text"> </span><span class="token-punctuation">}</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">3</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-operator">|</span><span class="token-text"> </span><span class="token-punctuation">{</span><span class="token-text"> </span><span class="token-text">i</span><span class="token-text">s</span><span class="token-text">O</span><span class="token-text">k</span><span class="token-operator">:</span><span class="token-text"> </span><span class="token-keyword">false</span><span class="token-punctuation">;</span><span class="token-text"> </span><span class="token-text">i</span><span class="token-text">s</span><span class="token-text">E</span><span class="token-text">r</span><span class="token-text">r</span><span class="token-operator">:</span><span class="token-text"> </span><span class="token-keyword">true</span><span class="token-punctuation">;</span><span class="token-text"> </span><span class="token-text">d</span><span class="token-text">a</span><span class="token-text">t</span><span class="token-text">a</span><span class="token-operator">:</span><span class="token-text"> </span><span class="token-text">E</span><span class="token-text"> </span><span class="token-punctuation">}</span></span></div></code></pre></div></div>
<h3 id="configuration-types" class="text-xl font-medium tracking-tight mt-8 mb-3 text-foreground scroll-mt-24">Configuration Types</h3>
<div class="relative group my-2"><div class="bg-muted/50 dark:bg-muted/30 px-4 py-2 rounded-t-xl border border-b-0 border-border/50 flex items-center justify-between"><div class="flex items-center gap-3"><div class="flex items-center gap-1.5"><div class="w-3 h-3 rounded-full bg-red-500/80 dark:bg-red-500/60"></div><div class="w-3 h-3 rounded-full bg-yellow-500/80 dark:bg-yellow-500/60"></div><div class="w-3 h-3 rounded-full bg-green-500/80 dark:bg-green-500/60"></div></div><span class="text-xs font-mono text-foreground">Code</span></div><div class="flex items-center gap-2"><span class="text-xs text-muted-foreground/60 font-mono uppercase tracking-wide">typescript</span><button class="p-1.5 rounded-md hover:bg-muted/50 transition-colors" aria-label="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-4 w-4 text-muted-foreground"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div></div><div class="bg-gray-200/50 dark:bg-[#0d1117] rounded-b-xl overflow-x-auto border border-border/50"><pre class="p-2 text-[13px] font-mono leading-relaxed text-gray-800 dark:text-gray-200"><code class="table w-full"><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">1</span><span class="table-cell align-top"><span class="token-keyword">interface</span><span class="token-text"> </span><span class="token-text">C</span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">d</span><span class="token-text">e</span><span class="token-text">n</span><span class="token-text">t</span><span class="token-text">i</span><span class="token-text">a</span><span class="token-text">l</span><span class="token-text">s</span><span class="token-text">D</span><span class="token-text">a</span><span class="token-text">t</span><span class="token-text">a</span><span class="token-text"> </span><span class="token-punctuation">{</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">2</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">m</span><span class="token-text">n</span><span class="token-text">e</span><span class="token-text">m</span><span class="token-text">o</span><span class="token-text">n</span><span class="token-text">i</span><span class="token-text">c</span><span class="token-operator">:</span><span class="token-text"> </span><span class="token-text">s</span><span class="token-text">t</span><span class="token-text">r</span><span class="token-text">i</span><span class="token-text">n</span><span class="token-text">g</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">3</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">n</span><span class="token-text">o</span><span class="token-text">s</span><span class="token-text">t</span><span class="token-text">r</span><span class="token-text">_</span><span class="token-text">s</span><span class="token-text">k</span><span class="token-operator">:</span><span class="token-text"> </span><span class="token-text">s</span><span class="token-text">t</span><span class="token-text">r</span><span class="token-text">i</span><span class="token-text">n</span><span class="token-text">g</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">4</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">d</span><span class="token-text">i</span><span class="token-text">d</span><span class="token-text">_</span><span class="token-text">k</span><span class="token-text">e</span><span class="token-text">y</span><span class="token-operator">:</span><span class="token-text"> </span><span class="token-text">s</span><span class="token-text">t</span><span class="token-text">r</span><span class="token-text">i</span><span class="token-text">n</span><span class="token-text">g</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">5</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">a</span><span class="token-text">l</span><span class="token-text">c</span><span class="token-text">h</span><span class="token-text">e</span><span class="token-text">m</span><span class="token-text">y</span><span class="token-text">_</span><span class="token-text">k</span><span class="token-text">e</span><span class="token-text">y</span><span class="token-operator">:</span><span class="token-text"> </span><span class="token-text">s</span><span class="token-text">t</span><span class="token-text">r</span><span class="token-text">i</span><span class="token-text">n</span><span class="token-text">g</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">6</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">w</span><span class="token-text">i</span><span class="token-text">t</span><span class="token-text">n</span><span class="token-text">e</span><span class="token-text">s</span><span class="token-text">s</span><span class="token-text">_</span><span class="token-text">e</span><span class="token-text">t</span><span class="token-text">h</span><span class="token-text">_</span><span class="token-text">n</span><span class="token-text">e</span><span class="token-text">t</span><span class="token-text">w</span><span class="token-text">o</span><span class="token-text">r</span><span class="token-text">k</span><span class="token-operator">:</span><span class="token-text"> </span><span class="token-text">s</span><span class="token-text">t</span><span class="token-text">r</span><span class="token-text">i</span><span class="token-text">n</span><span class="token-text">g</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">7</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">w</span><span class="token-text">i</span><span class="token-text">t</span><span class="token-text">n</span><span class="token-text">e</span><span class="token-text">s</span><span class="token-text">s</span><span class="token-text">_</span><span class="token-text">m</span><span class="token-text">e</span><span class="token-text">t</span><span class="token-text">h</span><span class="token-text">o</span><span class="token-text">d</span><span class="token-operator">:</span><span class="token-text"> </span><span class="token-text">s</span><span class="token-text">t</span><span class="token-text">r</span><span class="token-text">i</span><span class="token-text">n</span><span class="token-text">g</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">8</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">p</span><span class="token-text">1</span><span class="token-text">2</span><span class="token-text">_</span><span class="token-text">p</span><span class="token-text">a</span><span class="token-text">s</span><span class="token-text">s</span><span class="token-text">w</span><span class="token-text">o</span><span class="token-text">r</span><span class="token-text">d</span><span class="token-operator">?:</span><span class="token-text"> </span><span class="token-text">s</span><span class="token-text">t</span><span class="token-text">r</span><span class="token-text">i</span><span class="token-text">n</span><span class="token-text">g</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">9</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">p</span><span class="token-text">1</span><span class="token-text">2</span><span class="token-text">_</span><span class="token-text">c</span><span class="token-text">o</span><span class="token-text">n</span><span class="token-text">t</span><span class="token-text">e</span><span class="token-text">n</span><span class="token-text">t</span><span class="token-operator">?:</span><span class="token-text"> </span><span class="token-text">s</span><span class="token-text">t</span><span class="token-text">r</span><span class="token-text">i</span><span class="token-text">n</span><span class="token-text">g</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">10</span><span class="table-cell align-top"><span class="token-punctuation">}</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">11</span><span class="table-cell align-top"><span> </span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">12</span><span class="table-cell align-top"><span class="token-keyword">interface</span><span class="token-text"> </span><span class="token-text">W</span><span class="token-text">i</span><span class="token-text">t</span><span class="token-text">n</span><span class="token-text">e</span><span class="token-text">s</span><span class="token-text">s</span><span class="token-text">C</span><span class="token-text">o</span><span class="token-text">n</span><span class="token-text">f</span><span class="token-text">i</span><span class="token-text">g</span><span class="token-text"> </span><span class="token-punctuation">{</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">13</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">w</span><span class="token-text">i</span><span class="token-text">t</span><span class="token-text">n</span><span class="token-text">e</span><span class="token-text">s</span><span class="token-text">s</span><span class="token-text">E</span><span class="token-text">v</span><span class="token-text">e</span><span class="token-text">n</span><span class="token-text">t</span><span class="token-text">V</span><span class="token-text">e</span><span class="token-text">r</span><span class="token-text">i</span><span class="token-text">f</span><span class="token-text">i</span><span class="token-text">c</span><span class="token-text">a</span><span class="token-text">t</span><span class="token-text">i</span><span class="token-text">o</span><span class="token-text">n</span><span class="token-text">H</span><span class="token-text">a</span><span class="token-text">s</span><span class="token-text">h</span><span class="token-operator">:</span><span class="token-text"> </span><span class="token-text">s</span><span class="token-text">t</span><span class="token-text">r</span><span class="token-text">i</span><span class="token-text">n</span><span class="token-text">g</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">14</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">w</span><span class="token-text">i</span><span class="token-text">t</span><span class="token-text">n</span><span class="token-text">e</span><span class="token-text">s</span><span class="token-text">s</span><span class="token-text">N</span><span class="token-text">e</span><span class="token-text">t</span><span class="token-text">w</span><span class="token-text">o</span><span class="token-text">r</span><span class="token-text">k</span><span class="token-operator">:</span><span class="token-text"> </span><span class="token-text">W</span><span class="token-text">i</span><span class="token-text">t</span><span class="token-text">n</span><span class="token-text">e</span><span class="token-text">s</span><span class="token-text">s</span><span class="token-text">N</span><span class="token-text">e</span><span class="token-text">t</span><span class="token-text">w</span><span class="token-text">o</span><span class="token-text">r</span><span class="token-text">k</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">15</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">s</span><span class="token-text">m</span><span class="token-text">a</span><span class="token-text">r</span><span class="token-text">t</span><span class="token-text">C</span><span class="token-text">o</span><span class="token-text">n</span><span class="token-text">t</span><span class="token-text">r</span><span class="token-text">a</span><span class="token-text">c</span><span class="token-text">t</span><span class="token-text">A</span><span class="token-text">d</span><span class="token-text">d</span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">s</span><span class="token-text">s</span><span class="token-operator">:</span><span class="token-text"> </span><span class="token-text">s</span><span class="token-text">t</span><span class="token-text">r</span><span class="token-text">i</span><span class="token-text">n</span><span class="token-text">g</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">16</span><span class="table-cell align-top"><span class="token-punctuation">}</span></span></div></code></pre></div></div>
<hr/>
<h2 id="platform-specific-notes" class="text-2xl font-semibold tracking-tight mt-10 mb-4 text-foreground scroll-mt-24">Platform-Specific Notes</h2>
<h3 id="nodejs" class="text-xl font-medium tracking-tight mt-8 mb-3 text-foreground scroll-mt-24">Node.js</h3>
<p class="text-base leading-7 text-muted-foreground mb-4">Full functionality available:</p>
<ul class="list-disc list-outside pl-5 space-y-2 mb-4 text-muted-foreground [&amp;_p]:mb-0 [&amp;_p]:inline [&amp;_ul]:ml-6 [&amp;_ol]:ml-6">
<li class="leading-7 [&amp;&gt;p]:mb-0 [&amp;&gt;p]:inline">All signing methods</li>
<li class="leading-7 [&amp;&gt;p]:mb-0 [&amp;&gt;p]:inline">All witnessing methods</li>
<li class="leading-7 [&amp;&gt;p]:mb-0 [&amp;&gt;p]:inline">File system access</li>
<li class="leading-7 [&amp;&gt;p]:mb-0 [&amp;&gt;p]:inline">HTTP server for MetaMask callback</li>
</ul>
<div class="relative group my-2"><div class="bg-muted/50 dark:bg-muted/30 px-4 py-2 rounded-t-xl border border-b-0 border-border/50 flex items-center justify-between"><div class="flex items-center gap-3"><div class="flex items-center gap-1.5"><div class="w-3 h-3 rounded-full bg-red-500/80 dark:bg-red-500/60"></div><div class="w-3 h-3 rounded-full bg-yellow-500/80 dark:bg-yellow-500/60"></div><div class="w-3 h-3 rounded-full bg-green-500/80 dark:bg-green-500/60"></div></div><span class="text-xs font-mono text-foreground">Code</span></div><div class="flex items-center gap-2"><span class="text-xs text-muted-foreground/60 font-mono uppercase tracking-wide">typescript</span><button class="p-1.5 rounded-md hover:bg-muted/50 transition-colors" aria-label="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-4 w-4 text-muted-foreground"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div></div><div class="bg-gray-200/50 dark:bg-[#0d1117] rounded-b-xl overflow-x-auto border border-border/50"><pre class="p-2 text-[13px] font-mono leading-relaxed text-gray-800 dark:text-gray-200"><code class="table w-full"><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">1</span><span class="table-cell align-top"><span class="token-keyword">import</span><span class="token-text"> </span><span class="token-text">A</span><span class="token-text">q</span><span class="token-text">u</span><span class="token-text">a</span><span class="token-text">f</span><span class="token-text">i</span><span class="token-text">e</span><span class="token-text">r</span><span class="token-text"> </span><span class="token-keyword">from</span><span class="token-text"> </span><span class="token-string">&#x27;aqua-js-sdk&#x27;</span><span class="token-punctuation">;</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">2</span><span class="table-cell align-top"><span class="token-keyword">import</span><span class="token-text"> </span><span class="token-text">f</span><span class="token-text">s</span><span class="token-text"> </span><span class="token-keyword">from</span><span class="token-text"> </span><span class="token-string">&#x27;fs&#x27;</span><span class="token-punctuation">;</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">3</span><span class="table-cell align-top"><span> </span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">4</span><span class="table-cell align-top"><span class="token-keyword">const</span><span class="token-text"> </span><span class="token-text">a</span><span class="token-text">q</span><span class="token-text">u</span><span class="token-text">a</span><span class="token-text">f</span><span class="token-text">i</span><span class="token-text">e</span><span class="token-text">r</span><span class="token-text"> </span><span class="token-operator">=</span><span class="token-text"> </span><span class="token-keyword">new</span><span class="token-text"> </span><span class="token-function">Aquafier</span><span class="token-punctuation">(</span><span class="token-punctuation">)</span><span class="token-punctuation">;</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">5</span><span class="table-cell align-top"><span> </span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">6</span><span class="table-cell align-top"><span class="token-comment">// Read file from disk</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">7</span><span class="table-cell align-top"><span class="token-keyword">const</span><span class="token-text"> </span><span class="token-text">f</span><span class="token-text">i</span><span class="token-text">l</span><span class="token-text">e</span><span class="token-text">C</span><span class="token-text">o</span><span class="token-text">n</span><span class="token-text">t</span><span class="token-text">e</span><span class="token-text">n</span><span class="token-text">t</span><span class="token-text"> </span><span class="token-operator">=</span><span class="token-text"> </span><span class="token-text">f</span><span class="token-text">s</span><span class="token-property">.readFileSync</span><span class="token-punctuation">(</span><span class="token-string">&#x27;document.pdf&#x27;</span><span class="token-punctuation">)</span><span class="token-punctuation">;</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">8</span><span class="table-cell align-top"><span> </span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">9</span><span class="table-cell align-top"><span class="token-keyword">const</span><span class="token-text"> </span><span class="token-text">f</span><span class="token-text">i</span><span class="token-text">l</span><span class="token-text">e</span><span class="token-text">O</span><span class="token-text">b</span><span class="token-text">j</span><span class="token-text">e</span><span class="token-text">c</span><span class="token-text">t</span><span class="token-text"> </span><span class="token-operator">=</span><span class="token-text"> </span><span class="token-punctuation">{</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">10</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">f</span><span class="token-text">i</span><span class="token-text">l</span><span class="token-text">e</span><span class="token-text">N</span><span class="token-text">a</span><span class="token-text">m</span><span class="token-text">e</span><span class="token-operator">:</span><span class="token-text"> </span><span class="token-string">&#x27;document.pdf&#x27;</span><span class="token-punctuation">,</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">11</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">f</span><span class="token-text">i</span><span class="token-text">l</span><span class="token-text">e</span><span class="token-text">C</span><span class="token-text">o</span><span class="token-text">n</span><span class="token-text">t</span><span class="token-text">e</span><span class="token-text">n</span><span class="token-text">t</span><span class="token-operator">:</span><span class="token-text"> </span><span class="token-text">f</span><span class="token-text">i</span><span class="token-text">l</span><span class="token-text">e</span><span class="token-text">C</span><span class="token-text">o</span><span class="token-text">n</span><span class="token-text">t</span><span class="token-text">e</span><span class="token-text">n</span><span class="token-text">t</span><span class="token-punctuation">,</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">12</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">p</span><span class="token-text">a</span><span class="token-text">t</span><span class="token-text">h</span><span class="token-operator">:</span><span class="token-text"> </span><span class="token-string">&#x27;./document.pdf&#x27;</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">13</span><span class="table-cell align-top"><span class="token-punctuation">}</span><span class="token-punctuation">;</span></span></div></code></pre></div></div>
<h3 id="web-browser" class="text-xl font-medium tracking-tight mt-8 mb-3 text-foreground scroll-mt-24">Web Browser</h3>
<p class="text-base leading-7 text-muted-foreground mb-4">Most functionality available:</p>
<ul class="list-disc list-outside pl-5 space-y-2 mb-4 text-muted-foreground [&amp;_p]:mb-0 [&amp;_p]:inline [&amp;_ul]:ml-6 [&amp;_ol]:ml-6">
<li class="leading-7 [&amp;&gt;p]:mb-0 [&amp;&gt;p]:inline">MetaMask signing (primary method)</li>
<li class="leading-7 [&amp;&gt;p]:mb-0 [&amp;&gt;p]:inline">DID signing</li>
<li class="leading-7 [&amp;&gt;p]:mb-0 [&amp;&gt;p]:inline">Ethereum witnessing via MetaMask</li>
<li class="leading-7 [&amp;&gt;p]:mb-0 [&amp;&gt;p]:inline">Nostr, TSA witnessing</li>
</ul>
<p class="text-base leading-7 text-muted-foreground mb-4"><strong>Limitations:</strong></p>
<ul class="list-disc list-outside pl-5 space-y-2 mb-4 text-muted-foreground [&amp;_p]:mb-0 [&amp;_p]:inline [&amp;_ul]:ml-6 [&amp;_ol]:ml-6">
<li class="leading-7 [&amp;&gt;p]:mb-0 [&amp;&gt;p]:inline">No P12 signing (requires file system)</li>
<li class="leading-7 [&amp;&gt;p]:mb-0 [&amp;&gt;p]:inline">No CLI signing with mnemonic (security risk in browser)</li>
</ul>
<div class="relative group my-2"><div class="bg-muted/50 dark:bg-muted/30 px-4 py-2 rounded-t-xl border border-b-0 border-border/50 flex items-center justify-between"><div class="flex items-center gap-3"><div class="flex items-center gap-1.5"><div class="w-3 h-3 rounded-full bg-red-500/80 dark:bg-red-500/60"></div><div class="w-3 h-3 rounded-full bg-yellow-500/80 dark:bg-yellow-500/60"></div><div class="w-3 h-3 rounded-full bg-green-500/80 dark:bg-green-500/60"></div></div><span class="text-xs font-mono text-foreground">Code</span></div><div class="flex items-center gap-2"><span class="text-xs text-muted-foreground/60 font-mono uppercase tracking-wide">typescript</span><button class="p-1.5 rounded-md hover:bg-muted/50 transition-colors" aria-label="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-4 w-4 text-muted-foreground"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div></div><div class="bg-gray-200/50 dark:bg-[#0d1117] rounded-b-xl overflow-x-auto border border-border/50"><pre class="p-2 text-[13px] font-mono leading-relaxed text-gray-800 dark:text-gray-200"><code class="table w-full"><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">1</span><span class="table-cell align-top"><span class="token-keyword">import</span><span class="token-text"> </span><span class="token-text">A</span><span class="token-text">q</span><span class="token-text">u</span><span class="token-text">a</span><span class="token-text">f</span><span class="token-text">i</span><span class="token-text">e</span><span class="token-text">r</span><span class="token-text"> </span><span class="token-keyword">from</span><span class="token-text"> </span><span class="token-string">&#x27;aqua-js-sdk/web&#x27;</span><span class="token-punctuation">;</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">2</span><span class="table-cell align-top"><span> </span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">3</span><span class="table-cell align-top"><span class="token-keyword">const</span><span class="token-text"> </span><span class="token-text">a</span><span class="token-text">q</span><span class="token-text">u</span><span class="token-text">a</span><span class="token-text">f</span><span class="token-text">i</span><span class="token-text">e</span><span class="token-text">r</span><span class="token-text"> </span><span class="token-operator">=</span><span class="token-text"> </span><span class="token-keyword">new</span><span class="token-text"> </span><span class="token-function">Aquafier</span><span class="token-punctuation">(</span><span class="token-punctuation">)</span><span class="token-punctuation">;</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">4</span><span class="table-cell align-top"><span> </span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">5</span><span class="table-cell align-top"><span class="token-comment">// File from input element</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">6</span><span class="table-cell align-top"><span class="token-keyword">const</span><span class="token-text"> </span><span class="token-text">f</span><span class="token-text">i</span><span class="token-text">l</span><span class="token-text">e</span><span class="token-text"> </span><span class="token-operator">=</span><span class="token-text"> </span><span class="token-text">d</span><span class="token-text">o</span><span class="token-text">c</span><span class="token-text">u</span><span class="token-text">m</span><span class="token-text">e</span><span class="token-text">n</span><span class="token-text">t</span><span class="token-property">.getElementById</span><span class="token-punctuation">(</span><span class="token-string">&#x27;fileInput&#x27;</span><span class="token-punctuation">)</span><span class="token-property">.files</span><span class="token-punctuation">[</span><span class="token-number">0</span><span class="token-punctuation">]</span><span class="token-punctuation">;</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">7</span><span class="table-cell align-top"><span class="token-keyword">const</span><span class="token-text"> </span><span class="token-text">a</span><span class="token-text">r</span><span class="token-text">r</span><span class="token-text">a</span><span class="token-text">y</span><span class="token-text">B</span><span class="token-text">u</span><span class="token-text">f</span><span class="token-text">f</span><span class="token-text">e</span><span class="token-text">r</span><span class="token-text"> </span><span class="token-operator">=</span><span class="token-text"> </span><span class="token-keyword">await</span><span class="token-text"> </span><span class="token-text">f</span><span class="token-text">i</span><span class="token-text">l</span><span class="token-text">e</span><span class="token-property">.arrayBuffer</span><span class="token-punctuation">(</span><span class="token-punctuation">)</span><span class="token-punctuation">;</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">8</span><span class="table-cell align-top"><span> </span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">9</span><span class="table-cell align-top"><span class="token-keyword">const</span><span class="token-text"> </span><span class="token-text">f</span><span class="token-text">i</span><span class="token-text">l</span><span class="token-text">e</span><span class="token-text">O</span><span class="token-text">b</span><span class="token-text">j</span><span class="token-text">e</span><span class="token-text">c</span><span class="token-text">t</span><span class="token-text"> </span><span class="token-operator">=</span><span class="token-text"> </span><span class="token-punctuation">{</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">10</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">f</span><span class="token-text">i</span><span class="token-text">l</span><span class="token-text">e</span><span class="token-text">N</span><span class="token-text">a</span><span class="token-text">m</span><span class="token-text">e</span><span class="token-operator">:</span><span class="token-text"> </span><span class="token-text">f</span><span class="token-text">i</span><span class="token-text">l</span><span class="token-text">e</span><span class="token-property">.name</span><span class="token-punctuation">,</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">11</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">f</span><span class="token-text">i</span><span class="token-text">l</span><span class="token-text">e</span><span class="token-text">C</span><span class="token-text">o</span><span class="token-text">n</span><span class="token-text">t</span><span class="token-text">e</span><span class="token-text">n</span><span class="token-text">t</span><span class="token-operator">:</span><span class="token-text"> </span><span class="token-keyword">new</span><span class="token-text"> </span><span class="token-function">Uint8Array</span><span class="token-punctuation">(</span><span class="token-text">a</span><span class="token-text">r</span><span class="token-text">r</span><span class="token-text">a</span><span class="token-text">y</span><span class="token-text">B</span><span class="token-text">u</span><span class="token-text">f</span><span class="token-text">f</span><span class="token-text">e</span><span class="token-text">r</span><span class="token-punctuation">)</span><span class="token-punctuation">,</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">12</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">p</span><span class="token-text">a</span><span class="token-text">t</span><span class="token-text">h</span><span class="token-operator">:</span><span class="token-text"> </span><span class="token-text">f</span><span class="token-text">i</span><span class="token-text">l</span><span class="token-text">e</span><span class="token-property">.name</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">13</span><span class="table-cell align-top"><span class="token-punctuation">}</span><span class="token-punctuation">;</span></span></div></code></pre></div></div>
<h3 id="react-native" class="text-xl font-medium tracking-tight mt-8 mb-3 text-foreground scroll-mt-24">React Native</h3>
<p class="text-base leading-7 text-muted-foreground mb-4">Most functionality with platform adaptations:</p>
<ul class="list-disc list-outside pl-5 space-y-2 mb-4 text-muted-foreground [&amp;_p]:mb-0 [&amp;_p]:inline [&amp;_ul]:ml-6 [&amp;_ol]:ml-6">
<li class="leading-7 [&amp;&gt;p]:mb-0 [&amp;&gt;p]:inline">MetaMask via deep linking</li>
<li class="leading-7 [&amp;&gt;p]:mb-0 [&amp;&gt;p]:inline">DID signing</li>
<li class="leading-7 [&amp;&gt;p]:mb-0 [&amp;&gt;p]:inline">Limited witnessing</li>
</ul>
<p class="text-base leading-7 text-muted-foreground mb-4"><strong>Limitations:</strong></p>
<ul class="list-disc list-outside pl-5 space-y-2 mb-4 text-muted-foreground [&amp;_p]:mb-0 [&amp;_p]:inline [&amp;_ul]:ml-6 [&amp;_ol]:ml-6">
<li class="leading-7 [&amp;&gt;p]:mb-0 [&amp;&gt;p]:inline">No local HTTP server</li>
<li class="leading-7 [&amp;&gt;p]:mb-0 [&amp;&gt;p]:inline">MetaMask requires custom deep linking</li>
<li class="leading-7 [&amp;&gt;p]:mb-0 [&amp;&gt;p]:inline">File system needs react-native-fs</li>
</ul>
<div class="relative group my-2"><div class="bg-muted/50 dark:bg-muted/30 px-4 py-2 rounded-t-xl border border-b-0 border-border/50 flex items-center justify-between"><div class="flex items-center gap-3"><div class="flex items-center gap-1.5"><div class="w-3 h-3 rounded-full bg-red-500/80 dark:bg-red-500/60"></div><div class="w-3 h-3 rounded-full bg-yellow-500/80 dark:bg-yellow-500/60"></div><div class="w-3 h-3 rounded-full bg-green-500/80 dark:bg-green-500/60"></div></div><span class="text-xs font-mono text-foreground">Code</span></div><div class="flex items-center gap-2"><span class="text-xs text-muted-foreground/60 font-mono uppercase tracking-wide">typescript</span><button class="p-1.5 rounded-md hover:bg-muted/50 transition-colors" aria-label="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-4 w-4 text-muted-foreground"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div></div><div class="bg-gray-200/50 dark:bg-[#0d1117] rounded-b-xl overflow-x-auto border border-border/50"><pre class="p-2 text-[13px] font-mono leading-relaxed text-gray-800 dark:text-gray-200"><code class="table w-full"><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">1</span><span class="table-cell align-top"><span class="token-keyword">import</span><span class="token-text"> </span><span class="token-text">A</span><span class="token-text">q</span><span class="token-text">u</span><span class="token-text">a</span><span class="token-text">f</span><span class="token-text">i</span><span class="token-text">e</span><span class="token-text">r</span><span class="token-text"> </span><span class="token-keyword">from</span><span class="token-text"> </span><span class="token-string">&#x27;aqua-js-sdk/react-native&#x27;</span><span class="token-punctuation">;</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">2</span><span class="table-cell align-top"><span class="token-keyword">import</span><span class="token-text"> </span><span class="token-text">R</span><span class="token-text">N</span><span class="token-text">F</span><span class="token-text">S</span><span class="token-text"> </span><span class="token-keyword">from</span><span class="token-text"> </span><span class="token-string">&#x27;react-native-fs&#x27;</span><span class="token-punctuation">;</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">3</span><span class="table-cell align-top"><span> </span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">4</span><span class="table-cell align-top"><span class="token-keyword">const</span><span class="token-text"> </span><span class="token-text">a</span><span class="token-text">q</span><span class="token-text">u</span><span class="token-text">a</span><span class="token-text">f</span><span class="token-text">i</span><span class="token-text">e</span><span class="token-text">r</span><span class="token-text"> </span><span class="token-operator">=</span><span class="token-text"> </span><span class="token-keyword">new</span><span class="token-text"> </span><span class="token-function">Aquafier</span><span class="token-punctuation">(</span><span class="token-punctuation">)</span><span class="token-punctuation">;</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">5</span><span class="table-cell align-top"><span> </span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">6</span><span class="table-cell align-top"><span class="token-comment">// Read file</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">7</span><span class="table-cell align-top"><span class="token-keyword">const</span><span class="token-text"> </span><span class="token-text">f</span><span class="token-text">i</span><span class="token-text">l</span><span class="token-text">e</span><span class="token-text">C</span><span class="token-text">o</span><span class="token-text">n</span><span class="token-text">t</span><span class="token-text">e</span><span class="token-text">n</span><span class="token-text">t</span><span class="token-text"> </span><span class="token-operator">=</span><span class="token-text"> </span><span class="token-keyword">await</span><span class="token-text"> </span><span class="token-text">R</span><span class="token-text">N</span><span class="token-text">F</span><span class="token-text">S</span><span class="token-property">.readFile</span><span class="token-punctuation">(</span><span class="token-text">f</span><span class="token-text">i</span><span class="token-text">l</span><span class="token-text">e</span><span class="token-text">P</span><span class="token-text">a</span><span class="token-text">t</span><span class="token-text">h</span><span class="token-punctuation">,</span><span class="token-text"> </span><span class="token-string">&#x27;base64&#x27;</span><span class="token-punctuation">)</span><span class="token-punctuation">;</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">8</span><span class="table-cell align-top"><span> </span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">9</span><span class="table-cell align-top"><span class="token-keyword">const</span><span class="token-text"> </span><span class="token-text">f</span><span class="token-text">i</span><span class="token-text">l</span><span class="token-text">e</span><span class="token-text">O</span><span class="token-text">b</span><span class="token-text">j</span><span class="token-text">e</span><span class="token-text">c</span><span class="token-text">t</span><span class="token-text"> </span><span class="token-operator">=</span><span class="token-text"> </span><span class="token-punctuation">{</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">10</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">f</span><span class="token-text">i</span><span class="token-text">l</span><span class="token-text">e</span><span class="token-text">N</span><span class="token-text">a</span><span class="token-text">m</span><span class="token-text">e</span><span class="token-operator">:</span><span class="token-text"> </span><span class="token-string">&#x27;document.pdf&#x27;</span><span class="token-punctuation">,</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">11</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">f</span><span class="token-text">i</span><span class="token-text">l</span><span class="token-text">e</span><span class="token-text">C</span><span class="token-text">o</span><span class="token-text">n</span><span class="token-text">t</span><span class="token-text">e</span><span class="token-text">n</span><span class="token-text">t</span><span class="token-operator">:</span><span class="token-text"> </span><span class="token-text">B</span><span class="token-text">u</span><span class="token-text">f</span><span class="token-text">f</span><span class="token-text">e</span><span class="token-text">r</span><span class="token-property">.from</span><span class="token-punctuation">(</span><span class="token-text">f</span><span class="token-text">i</span><span class="token-text">l</span><span class="token-text">e</span><span class="token-text">C</span><span class="token-text">o</span><span class="token-text">n</span><span class="token-text">t</span><span class="token-text">e</span><span class="token-text">n</span><span class="token-text">t</span><span class="token-punctuation">,</span><span class="token-text"> </span><span class="token-string">&#x27;base64&#x27;</span><span class="token-punctuation">)</span><span class="token-punctuation">,</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">12</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">p</span><span class="token-text">a</span><span class="token-text">t</span><span class="token-text">h</span><span class="token-operator">:</span><span class="token-text"> </span><span class="token-text">f</span><span class="token-text">i</span><span class="token-text">l</span><span class="token-text">e</span><span class="token-text">P</span><span class="token-text">a</span><span class="token-text">t</span><span class="token-text">h</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">13</span><span class="table-cell align-top"><span class="token-punctuation">}</span><span class="token-punctuation">;</span></span></div></code></pre></div></div>
<hr/>
<h2 id="complete-workflow-examples" class="text-2xl font-semibold tracking-tight mt-10 mb-4 text-foreground scroll-mt-24">Complete Workflow Examples</h2>
<h3 id="document-notarization" class="text-xl font-medium tracking-tight mt-8 mb-3 text-foreground scroll-mt-24">Document Notarization</h3>
<div class="relative group my-2"><div class="bg-muted/50 dark:bg-muted/30 px-4 py-2 rounded-t-xl border border-b-0 border-border/50 flex items-center justify-between"><div class="flex items-center gap-3"><div class="flex items-center gap-1.5"><div class="w-3 h-3 rounded-full bg-red-500/80 dark:bg-red-500/60"></div><div class="w-3 h-3 rounded-full bg-yellow-500/80 dark:bg-yellow-500/60"></div><div class="w-3 h-3 rounded-full bg-green-500/80 dark:bg-green-500/60"></div></div><span class="text-xs font-mono text-foreground">Code</span></div><div class="flex items-center gap-2"><span class="text-xs text-muted-foreground/60 font-mono uppercase tracking-wide">typescript</span><button class="p-1.5 rounded-md hover:bg-muted/50 transition-colors" aria-label="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-4 w-4 text-muted-foreground"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div></div><div class="bg-gray-200/50 dark:bg-[#0d1117] rounded-b-xl overflow-x-auto border border-border/50"><pre class="p-2 text-[13px] font-mono leading-relaxed text-gray-800 dark:text-gray-200"><code class="table w-full"><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">1</span><span class="table-cell align-top"><span class="token-comment">// 1. Create genesis</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">2</span><span class="table-cell align-top"><span class="token-keyword">const</span><span class="token-text"> </span><span class="token-text">f</span><span class="token-text">i</span><span class="token-text">l</span><span class="token-text">e</span><span class="token-text">O</span><span class="token-text">b</span><span class="token-text">j</span><span class="token-text">e</span><span class="token-text">c</span><span class="token-text">t</span><span class="token-operator">:</span><span class="token-text"> </span><span class="token-text">F</span><span class="token-text">i</span><span class="token-text">l</span><span class="token-text">e</span><span class="token-text">O</span><span class="token-text">b</span><span class="token-text">j</span><span class="token-text">e</span><span class="token-text">c</span><span class="token-text">t</span><span class="token-text"> </span><span class="token-operator">=</span><span class="token-text"> </span><span class="token-punctuation">{</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">3</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">f</span><span class="token-text">i</span><span class="token-text">l</span><span class="token-text">e</span><span class="token-text">N</span><span class="token-text">a</span><span class="token-text">m</span><span class="token-text">e</span><span class="token-operator">:</span><span class="token-text"> </span><span class="token-string">&quot;contract.pdf&quot;</span><span class="token-punctuation">,</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">4</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">f</span><span class="token-text">i</span><span class="token-text">l</span><span class="token-text">e</span><span class="token-text">C</span><span class="token-text">o</span><span class="token-text">n</span><span class="token-text">t</span><span class="token-text">e</span><span class="token-text">n</span><span class="token-text">t</span><span class="token-operator">:</span><span class="token-text"> </span><span class="token-text">p</span><span class="token-text">d</span><span class="token-text">f</span><span class="token-text">B</span><span class="token-text">u</span><span class="token-text">f</span><span class="token-text">f</span><span class="token-text">e</span><span class="token-text">r</span><span class="token-punctuation">,</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">5</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">p</span><span class="token-text">a</span><span class="token-text">t</span><span class="token-text">h</span><span class="token-operator">:</span><span class="token-text"> </span><span class="token-string">&quot;/contracts/contract.pdf&quot;</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">6</span><span class="table-cell align-top"><span class="token-punctuation">}</span><span class="token-punctuation">;</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">7</span><span class="table-cell align-top"><span> </span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">8</span><span class="table-cell align-top"><span class="token-keyword">let</span><span class="token-text"> </span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">s</span><span class="token-text">u</span><span class="token-text">l</span><span class="token-text">t</span><span class="token-text"> </span><span class="token-operator">=</span><span class="token-text"> </span><span class="token-keyword">await</span><span class="token-text"> </span><span class="token-text">a</span><span class="token-text">q</span><span class="token-text">u</span><span class="token-text">a</span><span class="token-text">f</span><span class="token-text">i</span><span class="token-text">e</span><span class="token-text">r</span><span class="token-property">.createGenesisRevision</span><span class="token-punctuation">(</span><span class="token-text">f</span><span class="token-text">i</span><span class="token-text">l</span><span class="token-text">e</span><span class="token-text">O</span><span class="token-text">b</span><span class="token-text">j</span><span class="token-text">e</span><span class="token-text">c</span><span class="token-text">t</span><span class="token-punctuation">)</span><span class="token-punctuation">;</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">9</span><span class="table-cell align-top"><span class="token-keyword">let</span><span class="token-text"> </span><span class="token-text">a</span><span class="token-text">q</span><span class="token-text">u</span><span class="token-text">a</span><span class="token-text">T</span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">e</span><span class="token-text"> </span><span class="token-operator">=</span><span class="token-text"> </span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">s</span><span class="token-text">u</span><span class="token-text">l</span><span class="token-text">t</span><span class="token-property">.data</span><span class="token-property">.aquaTree</span><span class="token-punctuation">;</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">10</span><span class="table-cell align-top"><span> </span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">11</span><span class="table-cell align-top"><span class="token-comment">// 2. Sign with CLI</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">12</span><span class="table-cell align-top"><span class="token-keyword">const</span><span class="token-text"> </span><span class="token-text">c</span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">d</span><span class="token-text">e</span><span class="token-text">n</span><span class="token-text">t</span><span class="token-text">i</span><span class="token-text">a</span><span class="token-text">l</span><span class="token-text">s</span><span class="token-operator">:</span><span class="token-text"> </span><span class="token-text">C</span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">d</span><span class="token-text">e</span><span class="token-text">n</span><span class="token-text">t</span><span class="token-text">i</span><span class="token-text">a</span><span class="token-text">l</span><span class="token-text">s</span><span class="token-text">D</span><span class="token-text">a</span><span class="token-text">t</span><span class="token-text">a</span><span class="token-text"> </span><span class="token-operator">=</span><span class="token-text"> </span><span class="token-punctuation">{</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">13</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">m</span><span class="token-text">n</span><span class="token-text">e</span><span class="token-text">m</span><span class="token-text">o</span><span class="token-text">n</span><span class="token-text">i</span><span class="token-text">c</span><span class="token-operator">:</span><span class="token-text"> </span><span class="token-text">p</span><span class="token-text">r</span><span class="token-text">o</span><span class="token-text">c</span><span class="token-text">e</span><span class="token-text">s</span><span class="token-text">s</span><span class="token-property">.env</span><span class="token-property">.MNEMONIC</span><span class="token-punctuation">,</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">14</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-comment">// ... other fields</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">15</span><span class="table-cell align-top"><span class="token-punctuation">}</span><span class="token-punctuation">;</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">16</span><span class="table-cell align-top"><span> </span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">17</span><span class="table-cell align-top"><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">s</span><span class="token-text">u</span><span class="token-text">l</span><span class="token-text">t</span><span class="token-text"> </span><span class="token-operator">=</span><span class="token-text"> </span><span class="token-keyword">await</span><span class="token-text"> </span><span class="token-text">a</span><span class="token-text">q</span><span class="token-text">u</span><span class="token-text">a</span><span class="token-text">f</span><span class="token-text">i</span><span class="token-text">e</span><span class="token-text">r</span><span class="token-property">.signRevision</span><span class="token-punctuation">(</span><span class="token-text">a</span><span class="token-text">q</span><span class="token-text">u</span><span class="token-text">a</span><span class="token-text">T</span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">e</span><span class="token-punctuation">,</span><span class="token-text"> </span><span class="token-string">&quot;cli&quot;</span><span class="token-punctuation">,</span><span class="token-text"> </span><span class="token-text">c</span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">d</span><span class="token-text">e</span><span class="token-text">n</span><span class="token-text">t</span><span class="token-text">i</span><span class="token-text">a</span><span class="token-text">l</span><span class="token-text">s</span><span class="token-punctuation">)</span><span class="token-punctuation">;</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">18</span><span class="table-cell align-top"><span class="token-text">a</span><span class="token-text">q</span><span class="token-text">u</span><span class="token-text">a</span><span class="token-text">T</span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">e</span><span class="token-text"> </span><span class="token-operator">=</span><span class="token-text"> </span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">s</span><span class="token-text">u</span><span class="token-text">l</span><span class="token-text">t</span><span class="token-property">.data</span><span class="token-property">.aquaTree</span><span class="token-punctuation">;</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">19</span><span class="table-cell align-top"><span> </span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">20</span><span class="table-cell align-top"><span class="token-comment">// 3. Witness to Ethereum</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">21</span><span class="table-cell align-top"><span class="token-keyword">const</span><span class="token-text"> </span><span class="token-text">w</span><span class="token-text">i</span><span class="token-text">t</span><span class="token-text">n</span><span class="token-text">e</span><span class="token-text">s</span><span class="token-text">s</span><span class="token-text">C</span><span class="token-text">o</span><span class="token-text">n</span><span class="token-text">f</span><span class="token-text">i</span><span class="token-text">g</span><span class="token-operator">:</span><span class="token-text"> </span><span class="token-text">W</span><span class="token-text">i</span><span class="token-text">t</span><span class="token-text">n</span><span class="token-text">e</span><span class="token-text">s</span><span class="token-text">s</span><span class="token-text">C</span><span class="token-text">o</span><span class="token-text">n</span><span class="token-text">f</span><span class="token-text">i</span><span class="token-text">g</span><span class="token-text"> </span><span class="token-operator">=</span><span class="token-text"> </span><span class="token-punctuation">{</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">22</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">w</span><span class="token-text">i</span><span class="token-text">t</span><span class="token-text">n</span><span class="token-text">e</span><span class="token-text">s</span><span class="token-text">s</span><span class="token-text">E</span><span class="token-text">v</span><span class="token-text">e</span><span class="token-text">n</span><span class="token-text">t</span><span class="token-text">V</span><span class="token-text">e</span><span class="token-text">r</span><span class="token-text">i</span><span class="token-text">f</span><span class="token-text">i</span><span class="token-text">c</span><span class="token-text">a</span><span class="token-text">t</span><span class="token-text">i</span><span class="token-text">o</span><span class="token-text">n</span><span class="token-text">H</span><span class="token-text">a</span><span class="token-text">s</span><span class="token-text">h</span><span class="token-operator">:</span><span class="token-text"> </span><span class="token-text">O</span><span class="token-text">b</span><span class="token-text">j</span><span class="token-text">e</span><span class="token-text">c</span><span class="token-text">t</span><span class="token-property">.keys</span><span class="token-punctuation">(</span><span class="token-text">a</span><span class="token-text">q</span><span class="token-text">u</span><span class="token-text">a</span><span class="token-text">T</span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">e</span><span class="token-property">.revisions</span><span class="token-punctuation">)</span><span class="token-punctuation">[</span><span class="token-text">O</span><span class="token-text">b</span><span class="token-text">j</span><span class="token-text">e</span><span class="token-text">c</span><span class="token-text">t</span><span class="token-property">.keys</span><span class="token-punctuation">(</span><span class="token-text">a</span><span class="token-text">q</span><span class="token-text">u</span><span class="token-text">a</span><span class="token-text">T</span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">e</span><span class="token-property">.revisions</span><span class="token-punctuation">)</span><span class="token-property">.length</span><span class="token-text"> </span><span class="token-operator">-</span><span class="token-text"> </span><span class="token-number">1</span><span class="token-punctuation">]</span><span class="token-punctuation">,</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">23</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">w</span><span class="token-text">i</span><span class="token-text">t</span><span class="token-text">n</span><span class="token-text">e</span><span class="token-text">s</span><span class="token-text">s</span><span class="token-text">N</span><span class="token-text">e</span><span class="token-text">t</span><span class="token-text">w</span><span class="token-text">o</span><span class="token-text">r</span><span class="token-text">k</span><span class="token-operator">:</span><span class="token-text"> </span><span class="token-string">&quot;sepolia&quot;</span><span class="token-punctuation">,</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">24</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">s</span><span class="token-text">m</span><span class="token-text">a</span><span class="token-text">r</span><span class="token-text">t</span><span class="token-text">C</span><span class="token-text">o</span><span class="token-text">n</span><span class="token-text">t</span><span class="token-text">r</span><span class="token-text">a</span><span class="token-text">c</span><span class="token-text">t</span><span class="token-text">A</span><span class="token-text">d</span><span class="token-text">d</span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">s</span><span class="token-text">s</span><span class="token-operator">:</span><span class="token-text"> </span><span class="token-string">&quot;0x5FbDB2315678afecb367f032d93F642f64180aa3&quot;</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">25</span><span class="table-cell align-top"><span class="token-punctuation">}</span><span class="token-punctuation">;</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">26</span><span class="table-cell align-top"><span> </span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">27</span><span class="table-cell align-top"><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">s</span><span class="token-text">u</span><span class="token-text">l</span><span class="token-text">t</span><span class="token-text"> </span><span class="token-operator">=</span><span class="token-text"> </span><span class="token-keyword">await</span><span class="token-text"> </span><span class="token-text">a</span><span class="token-text">q</span><span class="token-text">u</span><span class="token-text">a</span><span class="token-text">f</span><span class="token-text">i</span><span class="token-text">e</span><span class="token-text">r</span><span class="token-property">.witnessRevision</span><span class="token-punctuation">(</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">28</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">a</span><span class="token-text">q</span><span class="token-text">u</span><span class="token-text">a</span><span class="token-text">T</span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">e</span><span class="token-punctuation">,</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">29</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-string">&quot;eth&quot;</span><span class="token-punctuation">,</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">30</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">w</span><span class="token-text">i</span><span class="token-text">t</span><span class="token-text">n</span><span class="token-text">e</span><span class="token-text">s</span><span class="token-text">s</span><span class="token-text">C</span><span class="token-text">o</span><span class="token-text">n</span><span class="token-text">f</span><span class="token-text">i</span><span class="token-text">g</span><span class="token-punctuation">,</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">31</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">c</span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">d</span><span class="token-text">e</span><span class="token-text">n</span><span class="token-text">t</span><span class="token-text">i</span><span class="token-text">a</span><span class="token-text">l</span><span class="token-text">s</span><span class="token-punctuation">,</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">32</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-string">&quot;cli&quot;</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">33</span><span class="table-cell align-top"><span class="token-punctuation">)</span><span class="token-punctuation">;</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">34</span><span class="table-cell align-top"><span class="token-text">a</span><span class="token-text">q</span><span class="token-text">u</span><span class="token-text">a</span><span class="token-text">T</span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">e</span><span class="token-text"> </span><span class="token-operator">=</span><span class="token-text"> </span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">s</span><span class="token-text">u</span><span class="token-text">l</span><span class="token-text">t</span><span class="token-property">.data</span><span class="token-property">.aquaTree</span><span class="token-punctuation">;</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">35</span><span class="table-cell align-top"><span> </span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">36</span><span class="table-cell align-top"><span class="token-comment">// 4. Save</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">37</span><span class="table-cell align-top"><span class="token-text">f</span><span class="token-text">s</span><span class="token-property">.writeFileSync</span><span class="token-punctuation">(</span><span class="token-string">&#x27;contract.aqua.json&#x27;</span><span class="token-punctuation">,</span><span class="token-text"> </span><span class="token-text">J</span><span class="token-text">S</span><span class="token-text">O</span><span class="token-text">N</span><span class="token-property">.stringify</span><span class="token-punctuation">(</span><span class="token-text">a</span><span class="token-text">q</span><span class="token-text">u</span><span class="token-text">a</span><span class="token-text">T</span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">e</span><span class="token-punctuation">,</span><span class="token-text"> </span><span class="token-keyword">null</span><span class="token-punctuation">,</span><span class="token-text"> </span><span class="token-number">2</span><span class="token-punctuation">)</span><span class="token-punctuation">)</span><span class="token-punctuation">;</span></span></div></code></pre></div></div>
<h3 id="multi-party-approval" class="text-xl font-medium tracking-tight mt-8 mb-3 text-foreground scroll-mt-24">Multi-Party Approval</h3>
<div class="relative group my-2"><div class="bg-muted/50 dark:bg-muted/30 px-4 py-2 rounded-t-xl border border-b-0 border-border/50 flex items-center justify-between"><div class="flex items-center gap-3"><div class="flex items-center gap-1.5"><div class="w-3 h-3 rounded-full bg-red-500/80 dark:bg-red-500/60"></div><div class="w-3 h-3 rounded-full bg-yellow-500/80 dark:bg-yellow-500/60"></div><div class="w-3 h-3 rounded-full bg-green-500/80 dark:bg-green-500/60"></div></div><span class="text-xs font-mono text-foreground">Code</span></div><div class="flex items-center gap-2"><span class="text-xs text-muted-foreground/60 font-mono uppercase tracking-wide">typescript</span><button class="p-1.5 rounded-md hover:bg-muted/50 transition-colors" aria-label="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-4 w-4 text-muted-foreground"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div></div><div class="bg-gray-200/50 dark:bg-[#0d1117] rounded-b-xl overflow-x-auto border border-border/50"><pre class="p-2 text-[13px] font-mono leading-relaxed text-gray-800 dark:text-gray-200"><code class="table w-full"><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">1</span><span class="table-cell align-top"><span class="token-comment">// Party 1: Create and sign</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">2</span><span class="table-cell align-top"><span class="token-keyword">let</span><span class="token-text"> </span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">s</span><span class="token-text">u</span><span class="token-text">l</span><span class="token-text">t</span><span class="token-text"> </span><span class="token-operator">=</span><span class="token-text"> </span><span class="token-keyword">await</span><span class="token-text"> </span><span class="token-text">a</span><span class="token-text">q</span><span class="token-text">u</span><span class="token-text">a</span><span class="token-text">f</span><span class="token-text">i</span><span class="token-text">e</span><span class="token-text">r</span><span class="token-property">.createGenesisRevision</span><span class="token-punctuation">(</span><span class="token-text">f</span><span class="token-text">i</span><span class="token-text">l</span><span class="token-text">e</span><span class="token-text">O</span><span class="token-text">b</span><span class="token-text">j</span><span class="token-text">e</span><span class="token-text">c</span><span class="token-text">t</span><span class="token-punctuation">)</span><span class="token-punctuation">;</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">3</span><span class="table-cell align-top"><span class="token-keyword">let</span><span class="token-text"> </span><span class="token-text">a</span><span class="token-text">q</span><span class="token-text">u</span><span class="token-text">a</span><span class="token-text">T</span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">e</span><span class="token-text"> </span><span class="token-operator">=</span><span class="token-text"> </span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">s</span><span class="token-text">u</span><span class="token-text">l</span><span class="token-text">t</span><span class="token-property">.data</span><span class="token-property">.aquaTree</span><span class="token-punctuation">;</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">4</span><span class="table-cell align-top"><span> </span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">5</span><span class="table-cell align-top"><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">s</span><span class="token-text">u</span><span class="token-text">l</span><span class="token-text">t</span><span class="token-text"> </span><span class="token-operator">=</span><span class="token-text"> </span><span class="token-keyword">await</span><span class="token-text"> </span><span class="token-text">a</span><span class="token-text">q</span><span class="token-text">u</span><span class="token-text">a</span><span class="token-text">f</span><span class="token-text">i</span><span class="token-text">e</span><span class="token-text">r</span><span class="token-property">.signRevision</span><span class="token-punctuation">(</span><span class="token-text">a</span><span class="token-text">q</span><span class="token-text">u</span><span class="token-text">a</span><span class="token-text">T</span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">e</span><span class="token-punctuation">,</span><span class="token-text"> </span><span class="token-string">&quot;cli&quot;</span><span class="token-punctuation">,</span><span class="token-text"> </span><span class="token-text">p</span><span class="token-text">a</span><span class="token-text">r</span><span class="token-text">t</span><span class="token-text">y</span><span class="token-text">1</span><span class="token-text">C</span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">d</span><span class="token-text">e</span><span class="token-text">n</span><span class="token-text">t</span><span class="token-text">i</span><span class="token-text">a</span><span class="token-text">l</span><span class="token-text">s</span><span class="token-punctuation">)</span><span class="token-punctuation">;</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">6</span><span class="table-cell align-top"><span class="token-text">a</span><span class="token-text">q</span><span class="token-text">u</span><span class="token-text">a</span><span class="token-text">T</span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">e</span><span class="token-text"> </span><span class="token-operator">=</span><span class="token-text"> </span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">s</span><span class="token-text">u</span><span class="token-text">l</span><span class="token-text">t</span><span class="token-property">.data</span><span class="token-property">.aquaTree</span><span class="token-punctuation">;</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">7</span><span class="table-cell align-top"><span> </span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">8</span><span class="table-cell align-top"><span class="token-comment">// Send aquaTree to Party 2</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">9</span><span class="table-cell align-top"><span> </span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">10</span><span class="table-cell align-top"><span class="token-comment">// Party 2: Add signature</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">11</span><span class="table-cell align-top"><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">s</span><span class="token-text">u</span><span class="token-text">l</span><span class="token-text">t</span><span class="token-text"> </span><span class="token-operator">=</span><span class="token-text"> </span><span class="token-keyword">await</span><span class="token-text"> </span><span class="token-text">a</span><span class="token-text">q</span><span class="token-text">u</span><span class="token-text">a</span><span class="token-text">f</span><span class="token-text">i</span><span class="token-text">e</span><span class="token-text">r</span><span class="token-property">.signRevision</span><span class="token-punctuation">(</span><span class="token-text">a</span><span class="token-text">q</span><span class="token-text">u</span><span class="token-text">a</span><span class="token-text">T</span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">e</span><span class="token-punctuation">,</span><span class="token-text"> </span><span class="token-string">&quot;metamask&quot;</span><span class="token-punctuation">)</span><span class="token-punctuation">;</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">12</span><span class="table-cell align-top"><span class="token-text">a</span><span class="token-text">q</span><span class="token-text">u</span><span class="token-text">a</span><span class="token-text">T</span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">e</span><span class="token-text"> </span><span class="token-operator">=</span><span class="token-text"> </span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">s</span><span class="token-text">u</span><span class="token-text">l</span><span class="token-text">t</span><span class="token-property">.data</span><span class="token-property">.aquaTree</span><span class="token-punctuation">;</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">13</span><span class="table-cell align-top"><span> </span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">14</span><span class="table-cell align-top"><span class="token-comment">// Send back to Party 1</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">15</span><span class="table-cell align-top"><span> </span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">16</span><span class="table-cell align-top"><span class="token-comment">// Party 1: Witness</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">17</span><span class="table-cell align-top"><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">s</span><span class="token-text">u</span><span class="token-text">l</span><span class="token-text">t</span><span class="token-text"> </span><span class="token-operator">=</span><span class="token-text"> </span><span class="token-keyword">await</span><span class="token-text"> </span><span class="token-text">a</span><span class="token-text">q</span><span class="token-text">u</span><span class="token-text">a</span><span class="token-text">f</span><span class="token-text">i</span><span class="token-text">e</span><span class="token-text">r</span><span class="token-property">.witnessRevision</span><span class="token-punctuation">(</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">18</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">a</span><span class="token-text">q</span><span class="token-text">u</span><span class="token-text">a</span><span class="token-text">T</span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">e</span><span class="token-punctuation">,</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">19</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-string">&quot;eth&quot;</span><span class="token-punctuation">,</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">20</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">w</span><span class="token-text">i</span><span class="token-text">t</span><span class="token-text">n</span><span class="token-text">e</span><span class="token-text">s</span><span class="token-text">s</span><span class="token-text">C</span><span class="token-text">o</span><span class="token-text">n</span><span class="token-text">f</span><span class="token-text">i</span><span class="token-text">g</span><span class="token-punctuation">,</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">21</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">p</span><span class="token-text">a</span><span class="token-text">r</span><span class="token-text">t</span><span class="token-text">y</span><span class="token-text">1</span><span class="token-text">C</span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">d</span><span class="token-text">e</span><span class="token-text">n</span><span class="token-text">t</span><span class="token-text">i</span><span class="token-text">a</span><span class="token-text">l</span><span class="token-text">s</span><span class="token-punctuation">,</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">22</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-string">&quot;cli&quot;</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">23</span><span class="table-cell align-top"><span class="token-punctuation">)</span><span class="token-punctuation">;</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">24</span><span class="table-cell align-top"><span class="token-text">a</span><span class="token-text">q</span><span class="token-text">u</span><span class="token-text">a</span><span class="token-text">T</span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">e</span><span class="token-text"> </span><span class="token-operator">=</span><span class="token-text"> </span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">s</span><span class="token-text">u</span><span class="token-text">l</span><span class="token-text">t</span><span class="token-property">.data</span><span class="token-property">.aquaTree</span><span class="token-punctuation">;</span></span></div></code></pre></div></div>
<h3 id="form-submission-with-verification" class="text-xl font-medium tracking-tight mt-8 mb-3 text-foreground scroll-mt-24">Form Submission with Verification</h3>
<div class="relative group my-2"><div class="bg-muted/50 dark:bg-muted/30 px-4 py-2 rounded-t-xl border border-b-0 border-border/50 flex items-center justify-between"><div class="flex items-center gap-3"><div class="flex items-center gap-1.5"><div class="w-3 h-3 rounded-full bg-red-500/80 dark:bg-red-500/60"></div><div class="w-3 h-3 rounded-full bg-yellow-500/80 dark:bg-yellow-500/60"></div><div class="w-3 h-3 rounded-full bg-green-500/80 dark:bg-green-500/60"></div></div><span class="text-xs font-mono text-foreground">Code</span></div><div class="flex items-center gap-2"><span class="text-xs text-muted-foreground/60 font-mono uppercase tracking-wide">typescript</span><button class="p-1.5 rounded-md hover:bg-muted/50 transition-colors" aria-label="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-4 w-4 text-muted-foreground"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div></div><div class="bg-gray-200/50 dark:bg-[#0d1117] rounded-b-xl overflow-x-auto border border-border/50"><pre class="p-2 text-[13px] font-mono leading-relaxed text-gray-800 dark:text-gray-200"><code class="table w-full"><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">1</span><span class="table-cell align-top"><span class="token-comment">// 1. Create form genesis</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">2</span><span class="table-cell align-top"><span class="token-keyword">const</span><span class="token-text"> </span><span class="token-text">f</span><span class="token-text">o</span><span class="token-text">r</span><span class="token-text">m</span><span class="token-text">D</span><span class="token-text">a</span><span class="token-text">t</span><span class="token-text">a</span><span class="token-text"> </span><span class="token-operator">=</span><span class="token-text"> </span><span class="token-punctuation">{</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">3</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">n</span><span class="token-text">a</span><span class="token-text">m</span><span class="token-text">e</span><span class="token-operator">:</span><span class="token-text"> </span><span class="token-string">&quot;John Doe&quot;</span><span class="token-punctuation">,</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">4</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">e</span><span class="token-text">m</span><span class="token-text">a</span><span class="token-text">i</span><span class="token-text">l</span><span class="token-operator">:</span><span class="token-text"> </span><span class="token-string">&quot;john@example.com&quot;</span><span class="token-punctuation">,</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">5</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">s</span><span class="token-text">t</span><span class="token-text">a</span><span class="token-text">t</span><span class="token-text">u</span><span class="token-text">s</span><span class="token-operator">:</span><span class="token-text"> </span><span class="token-string">&quot;pending&quot;</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">6</span><span class="table-cell align-top"><span class="token-punctuation">}</span><span class="token-punctuation">;</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">7</span><span class="table-cell align-top"><span> </span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">8</span><span class="table-cell align-top"><span class="token-keyword">const</span><span class="token-text"> </span><span class="token-text">f</span><span class="token-text">i</span><span class="token-text">l</span><span class="token-text">e</span><span class="token-text">O</span><span class="token-text">b</span><span class="token-text">j</span><span class="token-text">e</span><span class="token-text">c</span><span class="token-text">t</span><span class="token-operator">:</span><span class="token-text"> </span><span class="token-text">F</span><span class="token-text">i</span><span class="token-text">l</span><span class="token-text">e</span><span class="token-text">O</span><span class="token-text">b</span><span class="token-text">j</span><span class="token-text">e</span><span class="token-text">c</span><span class="token-text">t</span><span class="token-text"> </span><span class="token-operator">=</span><span class="token-text"> </span><span class="token-punctuation">{</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">9</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">f</span><span class="token-text">i</span><span class="token-text">l</span><span class="token-text">e</span><span class="token-text">N</span><span class="token-text">a</span><span class="token-text">m</span><span class="token-text">e</span><span class="token-operator">:</span><span class="token-text"> </span><span class="token-string">&quot;application.json&quot;</span><span class="token-punctuation">,</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">10</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">f</span><span class="token-text">i</span><span class="token-text">l</span><span class="token-text">e</span><span class="token-text">C</span><span class="token-text">o</span><span class="token-text">n</span><span class="token-text">t</span><span class="token-text">e</span><span class="token-text">n</span><span class="token-text">t</span><span class="token-operator">:</span><span class="token-text"> </span><span class="token-text">f</span><span class="token-text">o</span><span class="token-text">r</span><span class="token-text">m</span><span class="token-text">D</span><span class="token-text">a</span><span class="token-text">t</span><span class="token-text">a</span><span class="token-punctuation">,</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">11</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">p</span><span class="token-text">a</span><span class="token-text">t</span><span class="token-text">h</span><span class="token-operator">:</span><span class="token-text"> </span><span class="token-string">&quot;/forms/application.json&quot;</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">12</span><span class="table-cell align-top"><span class="token-punctuation">}</span><span class="token-punctuation">;</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">13</span><span class="table-cell align-top"><span> </span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">14</span><span class="table-cell align-top"><span class="token-keyword">let</span><span class="token-text"> </span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">s</span><span class="token-text">u</span><span class="token-text">l</span><span class="token-text">t</span><span class="token-text"> </span><span class="token-operator">=</span><span class="token-text"> </span><span class="token-keyword">await</span><span class="token-text"> </span><span class="token-text">a</span><span class="token-text">q</span><span class="token-text">u</span><span class="token-text">a</span><span class="token-text">f</span><span class="token-text">i</span><span class="token-text">e</span><span class="token-text">r</span><span class="token-property">.createGenesisRevision</span><span class="token-punctuation">(</span><span class="token-text">f</span><span class="token-text">i</span><span class="token-text">l</span><span class="token-text">e</span><span class="token-text">O</span><span class="token-text">b</span><span class="token-text">j</span><span class="token-text">e</span><span class="token-text">c</span><span class="token-text">t</span><span class="token-punctuation">,</span><span class="token-text"> </span><span class="token-keyword">true</span><span class="token-punctuation">)</span><span class="token-punctuation">;</span><span class="token-text">  </span><span class="token-comment">// isForm=true</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">15</span><span class="table-cell align-top"><span class="token-keyword">let</span><span class="token-text"> </span><span class="token-text">a</span><span class="token-text">q</span><span class="token-text">u</span><span class="token-text">a</span><span class="token-text">T</span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">e</span><span class="token-text"> </span><span class="token-operator">=</span><span class="token-text"> </span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">s</span><span class="token-text">u</span><span class="token-text">l</span><span class="token-text">t</span><span class="token-property">.data</span><span class="token-property">.aquaTree</span><span class="token-punctuation">;</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">16</span><span class="table-cell align-top"><span> </span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">17</span><span class="table-cell align-top"><span class="token-comment">// 2. Sign</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">18</span><span class="table-cell align-top"><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">s</span><span class="token-text">u</span><span class="token-text">l</span><span class="token-text">t</span><span class="token-text"> </span><span class="token-operator">=</span><span class="token-text"> </span><span class="token-keyword">await</span><span class="token-text"> </span><span class="token-text">a</span><span class="token-text">q</span><span class="token-text">u</span><span class="token-text">a</span><span class="token-text">f</span><span class="token-text">i</span><span class="token-text">e</span><span class="token-text">r</span><span class="token-property">.signRevision</span><span class="token-punctuation">(</span><span class="token-text">a</span><span class="token-text">q</span><span class="token-text">u</span><span class="token-text">a</span><span class="token-text">T</span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">e</span><span class="token-punctuation">,</span><span class="token-text"> </span><span class="token-string">&quot;did&quot;</span><span class="token-punctuation">,</span><span class="token-text"> </span><span class="token-text">c</span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">d</span><span class="token-text">e</span><span class="token-text">n</span><span class="token-text">t</span><span class="token-text">i</span><span class="token-text">a</span><span class="token-text">l</span><span class="token-text">s</span><span class="token-punctuation">)</span><span class="token-punctuation">;</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">19</span><span class="table-cell align-top"><span class="token-text">a</span><span class="token-text">q</span><span class="token-text">u</span><span class="token-text">a</span><span class="token-text">T</span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">e</span><span class="token-text"> </span><span class="token-operator">=</span><span class="token-text"> </span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">s</span><span class="token-text">u</span><span class="token-text">l</span><span class="token-text">t</span><span class="token-property">.data</span><span class="token-property">.aquaTree</span><span class="token-punctuation">;</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">20</span><span class="table-cell align-top"><span> </span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">21</span><span class="table-cell align-top"><span class="token-comment">// 3. Witness</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">22</span><span class="table-cell align-top"><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">s</span><span class="token-text">u</span><span class="token-text">l</span><span class="token-text">t</span><span class="token-text"> </span><span class="token-operator">=</span><span class="token-text"> </span><span class="token-keyword">await</span><span class="token-text"> </span><span class="token-text">a</span><span class="token-text">q</span><span class="token-text">u</span><span class="token-text">a</span><span class="token-text">f</span><span class="token-text">i</span><span class="token-text">e</span><span class="token-text">r</span><span class="token-property">.witnessRevision</span><span class="token-punctuation">(</span><span class="token-text">a</span><span class="token-text">q</span><span class="token-text">u</span><span class="token-text">a</span><span class="token-text">T</span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">e</span><span class="token-punctuation">,</span><span class="token-text"> </span><span class="token-string">&quot;nostr&quot;</span><span class="token-punctuation">,</span><span class="token-text"> </span><span class="token-text">w</span><span class="token-text">i</span><span class="token-text">t</span><span class="token-text">n</span><span class="token-text">e</span><span class="token-text">s</span><span class="token-text">s</span><span class="token-text">C</span><span class="token-text">o</span><span class="token-text">n</span><span class="token-text">f</span><span class="token-text">i</span><span class="token-text">g</span><span class="token-punctuation">,</span><span class="token-text"> </span><span class="token-text">c</span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">d</span><span class="token-text">e</span><span class="token-text">n</span><span class="token-text">t</span><span class="token-text">i</span><span class="token-text">a</span><span class="token-text">l</span><span class="token-text">s</span><span class="token-punctuation">)</span><span class="token-punctuation">;</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">23</span><span class="table-cell align-top"><span class="token-text">a</span><span class="token-text">q</span><span class="token-text">u</span><span class="token-text">a</span><span class="token-text">T</span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">e</span><span class="token-text"> </span><span class="token-operator">=</span><span class="token-text"> </span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">s</span><span class="token-text">u</span><span class="token-text">l</span><span class="token-text">t</span><span class="token-property">.data</span><span class="token-property">.aquaTree</span><span class="token-punctuation">;</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">24</span><span class="table-cell align-top"><span> </span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">25</span><span class="table-cell align-top"><span class="token-comment">// 4. Verify form</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">26</span><span class="table-cell align-top"><span class="token-keyword">const</span><span class="token-text"> </span><span class="token-text">v</span><span class="token-text">e</span><span class="token-text">r</span><span class="token-text">i</span><span class="token-text">f</span><span class="token-text">y</span><span class="token-text">R</span><span class="token-text">e</span><span class="token-text">s</span><span class="token-text">u</span><span class="token-text">l</span><span class="token-text">t</span><span class="token-text"> </span><span class="token-operator">=</span><span class="token-text"> </span><span class="token-keyword">await</span><span class="token-text"> </span><span class="token-text">a</span><span class="token-text">q</span><span class="token-text">u</span><span class="token-text">a</span><span class="token-text">f</span><span class="token-text">i</span><span class="token-text">e</span><span class="token-text">r</span><span class="token-property">.verifyFormRevision</span><span class="token-punctuation">(</span><span class="token-text">a</span><span class="token-text">q</span><span class="token-text">u</span><span class="token-text">a</span><span class="token-text">T</span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">e</span><span class="token-punctuation">,</span><span class="token-text"> </span><span class="token-text">f</span><span class="token-text">o</span><span class="token-text">r</span><span class="token-text">m</span><span class="token-text">D</span><span class="token-text">a</span><span class="token-text">t</span><span class="token-text">a</span><span class="token-punctuation">)</span><span class="token-punctuation">;</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">27</span><span class="table-cell align-top"><span class="token-text">c</span><span class="token-text">o</span><span class="token-text">n</span><span class="token-text">s</span><span class="token-text">o</span><span class="token-text">l</span><span class="token-text">e</span><span class="token-property">.log</span><span class="token-punctuation">(</span><span class="token-string">&quot;Form valid:&quot;</span><span class="token-punctuation">,</span><span class="token-text"> </span><span class="token-text">v</span><span class="token-text">e</span><span class="token-text">r</span><span class="token-text">i</span><span class="token-text">f</span><span class="token-text">y</span><span class="token-text">R</span><span class="token-text">e</span><span class="token-text">s</span><span class="token-text">u</span><span class="token-text">l</span><span class="token-text">t</span><span class="token-property">.isOk</span><span class="token-punctuation">)</span><span class="token-punctuation">;</span></span></div></code></pre></div></div>
<hr/>
<h2 id="error-handling" class="text-2xl font-semibold tracking-tight mt-10 mb-4 text-foreground scroll-mt-24">Error Handling</h2>
<p class="text-base leading-7 text-muted-foreground mb-4">All methods return <code class="px-1.5 py-0.5 rounded-md bg-muted/50 text-primary font-mono text-[13px] border border-border/50">Result&lt;T, E&gt;</code> type. Always check for errors:</p>
<div class="relative group my-2"><div class="bg-muted/50 dark:bg-muted/30 px-4 py-2 rounded-t-xl border border-b-0 border-border/50 flex items-center justify-between"><div class="flex items-center gap-3"><div class="flex items-center gap-1.5"><div class="w-3 h-3 rounded-full bg-red-500/80 dark:bg-red-500/60"></div><div class="w-3 h-3 rounded-full bg-yellow-500/80 dark:bg-yellow-500/60"></div><div class="w-3 h-3 rounded-full bg-green-500/80 dark:bg-green-500/60"></div></div><span class="text-xs font-mono text-foreground">Code</span></div><div class="flex items-center gap-2"><span class="text-xs text-muted-foreground/60 font-mono uppercase tracking-wide">typescript</span><button class="p-1.5 rounded-md hover:bg-muted/50 transition-colors" aria-label="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-4 w-4 text-muted-foreground"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div></div><div class="bg-gray-200/50 dark:bg-[#0d1117] rounded-b-xl overflow-x-auto border border-border/50"><pre class="p-2 text-[13px] font-mono leading-relaxed text-gray-800 dark:text-gray-200"><code class="table w-full"><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">1</span><span class="table-cell align-top"><span class="token-keyword">const</span><span class="token-text"> </span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">s</span><span class="token-text">u</span><span class="token-text">l</span><span class="token-text">t</span><span class="token-text"> </span><span class="token-operator">=</span><span class="token-text"> </span><span class="token-keyword">await</span><span class="token-text"> </span><span class="token-text">a</span><span class="token-text">q</span><span class="token-text">u</span><span class="token-text">a</span><span class="token-text">f</span><span class="token-text">i</span><span class="token-text">e</span><span class="token-text">r</span><span class="token-property">.createGenesisRevision</span><span class="token-punctuation">(</span><span class="token-text">f</span><span class="token-text">i</span><span class="token-text">l</span><span class="token-text">e</span><span class="token-text">O</span><span class="token-text">b</span><span class="token-text">j</span><span class="token-text">e</span><span class="token-text">c</span><span class="token-text">t</span><span class="token-punctuation">)</span><span class="token-punctuation">;</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">2</span><span class="table-cell align-top"><span> </span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">3</span><span class="table-cell align-top"><span class="token-keyword">if</span><span class="token-text"> </span><span class="token-punctuation">(</span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">s</span><span class="token-text">u</span><span class="token-text">l</span><span class="token-text">t</span><span class="token-property">.isErr</span><span class="token-punctuation">)</span><span class="token-text"> </span><span class="token-punctuation">{</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">4</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-comment">// Handle error</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">5</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">c</span><span class="token-text">o</span><span class="token-text">n</span><span class="token-text">s</span><span class="token-text">o</span><span class="token-text">l</span><span class="token-text">e</span><span class="token-property">.error</span><span class="token-punctuation">(</span><span class="token-string">&quot;Failed to create genesis:&quot;</span><span class="token-punctuation">)</span><span class="token-punctuation">;</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">6</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">s</span><span class="token-text">u</span><span class="token-text">l</span><span class="token-text">t</span><span class="token-property">.data</span><span class="token-property">.forEach</span><span class="token-punctuation">(</span><span class="token-text">l</span><span class="token-text">o</span><span class="token-text">g</span><span class="token-text"> </span><span class="token-operator">=&gt;</span><span class="token-text"> </span><span class="token-punctuation">{</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">7</span><span class="table-cell align-top"><span class="token-text">    </span><span class="token-text">c</span><span class="token-text">o</span><span class="token-text">n</span><span class="token-text">s</span><span class="token-text">o</span><span class="token-text">l</span><span class="token-text">e</span><span class="token-property">.error</span><span class="token-punctuation">(</span><span class="token-string">`[${log.logType}] ${log.log}`</span><span class="token-punctuation">)</span><span class="token-punctuation">;</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">8</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-punctuation">}</span><span class="token-punctuation">)</span><span class="token-punctuation">;</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">9</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-keyword">return</span><span class="token-punctuation">;</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">10</span><span class="table-cell align-top"><span class="token-punctuation">}</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">11</span><span class="table-cell align-top"><span> </span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">12</span><span class="table-cell align-top"><span class="token-comment">// Success</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">13</span><span class="table-cell align-top"><span class="token-keyword">const</span><span class="token-text"> </span><span class="token-text">a</span><span class="token-text">q</span><span class="token-text">u</span><span class="token-text">a</span><span class="token-text">T</span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">e</span><span class="token-text"> </span><span class="token-operator">=</span><span class="token-text"> </span><span class="token-text">r</span><span class="token-text">e</span><span class="token-text">s</span><span class="token-text">u</span><span class="token-text">l</span><span class="token-text">t</span><span class="token-property">.data</span><span class="token-property">.aquaTree</span><span class="token-punctuation">;</span></span></div></code></pre></div></div>
<hr/>
<h2 id="best-practices" class="text-2xl font-semibold tracking-tight mt-10 mb-4 text-foreground scroll-mt-24">Best Practices</h2>
<ol class="list-decimal list-outside pl-5 space-y-2 mb-4 text-muted-foreground [&amp;_p]:mb-0 [&amp;_p]:inline [&amp;_ul]:ml-6 [&amp;_ol]:ml-6">
<li class="leading-7 [&amp;&gt;p]:mb-0 [&amp;&gt;p]:inline"><strong>Always verify results</strong>: Check <code class="px-1.5 py-0.5 rounded-md bg-muted/50 text-primary font-mono text-[13px] border border-border/50">isErr</code> before using data</li>
<li class="leading-7 [&amp;&gt;p]:mb-0 [&amp;&gt;p]:inline"><strong>Store credentials securely</strong>: Never commit mnemonic/keys</li>
<li class="leading-7 [&amp;&gt;p]:mb-0 [&amp;&gt;p]:inline"><strong>Use environment variables</strong>: Store sensitive data in <code class="px-1.5 py-0.5 rounded-md bg-muted/50 text-primary font-mono text-[13px] border border-border/50">.env</code></li>
<li class="leading-7 [&amp;&gt;p]:mb-0 [&amp;&gt;p]:inline"><strong>Validate inputs</strong>: Check file sizes and formats before processing</li>
<li class="leading-7 [&amp;&gt;p]:mb-0 [&amp;&gt;p]:inline"><strong>Handle logs</strong>: Display or log all LogData for debugging</li>
<li class="leading-7 [&amp;&gt;p]:mb-0 [&amp;&gt;p]:inline"><strong>Test on testnets</strong>: Use Sepolia/Holesky before mainnet</li>
<li class="leading-7 [&amp;&gt;p]:mb-0 [&amp;&gt;p]:inline"><strong>Save AquaTrees</strong>: Persist JSON after each operation</li>
<li class="leading-7 [&amp;&gt;p]:mb-0 [&amp;&gt;p]:inline"><strong>Verify chains</strong>: Run verification after receiving AquaTrees</li>
</ol>
<hr/>
<h2 id="testing" class="text-2xl font-semibold tracking-tight mt-10 mb-4 text-foreground scroll-mt-24">Testing</h2>
<p class="text-base leading-7 text-muted-foreground mb-4">Create <code class="px-1.5 py-0.5 rounded-md bg-muted/50 text-primary font-mono text-[13px] border border-border/50">credentials.json</code> for testing:</p>
<div class="relative group my-2"><div class="bg-muted/50 dark:bg-muted/30 px-4 py-2 rounded-t-xl border border-b-0 border-border/50 flex items-center justify-between"><div class="flex items-center gap-3"><div class="flex items-center gap-1.5"><div class="w-3 h-3 rounded-full bg-red-500/80 dark:bg-red-500/60"></div><div class="w-3 h-3 rounded-full bg-yellow-500/80 dark:bg-yellow-500/60"></div><div class="w-3 h-3 rounded-full bg-green-500/80 dark:bg-green-500/60"></div></div><span class="text-xs font-mono text-foreground">Code</span></div><div class="flex items-center gap-2"><span class="text-xs text-muted-foreground/60 font-mono uppercase tracking-wide">json</span><button class="p-1.5 rounded-md hover:bg-muted/50 transition-colors" aria-label="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-4 w-4 text-muted-foreground"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div></div><div class="bg-gray-200/50 dark:bg-[#0d1117] rounded-b-xl overflow-x-auto border border-border/50"><pre class="p-2 text-[13px] font-mono leading-relaxed text-gray-800 dark:text-gray-200"><code class="table w-full"><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">1</span><span class="table-cell align-top"><span class="token-punctuation">{</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">2</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-string">&quot;mnemonic&quot;</span><span class="token-operator">:</span><span class="token-text"> </span><span class="token-string">&quot;your test mnemonic&quot;</span><span class="token-punctuation">,</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">3</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-string">&quot;nostr_sk&quot;</span><span class="token-operator">:</span><span class="token-text"> </span><span class="token-string">&quot;your nostr secret key&quot;</span><span class="token-punctuation">,</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">4</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-string">&quot;did_key&quot;</span><span class="token-operator">:</span><span class="token-text"> </span><span class="token-string">&quot;your did key&quot;</span><span class="token-punctuation">,</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">5</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-string">&quot;alchemy_key&quot;</span><span class="token-operator">:</span><span class="token-text"> </span><span class="token-string">&quot;your alchemy api key&quot;</span><span class="token-punctuation">,</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">6</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-string">&quot;witness_eth_network&quot;</span><span class="token-operator">:</span><span class="token-text"> </span><span class="token-string">&quot;sepolia&quot;</span><span class="token-punctuation">,</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">7</span><span class="table-cell align-top"><span class="token-text">  </span><span class="token-string">&quot;witness_method&quot;</span><span class="token-operator">:</span><span class="token-text"> </span><span class="token-string">&quot;cli&quot;</span></span></div><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">8</span><span class="table-cell align-top"><span class="token-punctuation">}</span></span></div></code></pre></div></div>
<p class="text-base leading-7 text-muted-foreground mb-4">Run tests:</p>
<div class="relative group my-2"><div class="bg-muted/50 dark:bg-muted/30 px-4 py-2 rounded-t-xl border border-b-0 border-border/50 flex items-center justify-between"><div class="flex items-center gap-3"><div class="flex items-center gap-1.5"><div class="w-3 h-3 rounded-full bg-red-500/80 dark:bg-red-500/60"></div><div class="w-3 h-3 rounded-full bg-yellow-500/80 dark:bg-yellow-500/60"></div><div class="w-3 h-3 rounded-full bg-green-500/80 dark:bg-green-500/60"></div></div><span class="text-xs font-mono text-foreground">Code</span></div><div class="flex items-center gap-2"><span class="text-xs text-muted-foreground/60 font-mono uppercase tracking-wide">bash</span><button class="p-1.5 rounded-md hover:bg-muted/50 transition-colors" aria-label="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-4 w-4 text-muted-foreground"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div></div><div class="bg-gray-200/50 dark:bg-[#0d1117] rounded-b-xl overflow-x-auto border border-border/50"><pre class="p-2 text-[13px] font-mono leading-relaxed text-gray-800 dark:text-gray-200"><code class="table w-full"><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">1</span><span class="table-cell align-top"><span class="token-text">n</span><span class="token-text">p</span><span class="token-text">m</span><span class="token-text"> </span><span class="token-text">t</span><span class="token-text">e</span><span class="token-text">s</span><span class="token-text">t</span></span></div></code></pre></div></div>
<p class="text-base leading-7 text-muted-foreground mb-4">Run specific test file:</p>
<div class="relative group my-2"><div class="bg-muted/50 dark:bg-muted/30 px-4 py-2 rounded-t-xl border border-b-0 border-border/50 flex items-center justify-between"><div class="flex items-center gap-3"><div class="flex items-center gap-1.5"><div class="w-3 h-3 rounded-full bg-red-500/80 dark:bg-red-500/60"></div><div class="w-3 h-3 rounded-full bg-yellow-500/80 dark:bg-yellow-500/60"></div><div class="w-3 h-3 rounded-full bg-green-500/80 dark:bg-green-500/60"></div></div><span class="text-xs font-mono text-foreground">Code</span></div><div class="flex items-center gap-2"><span class="text-xs text-muted-foreground/60 font-mono uppercase tracking-wide">bash</span><button class="p-1.5 rounded-md hover:bg-muted/50 transition-colors" aria-label="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-4 w-4 text-muted-foreground"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div></div><div class="bg-gray-200/50 dark:bg-[#0d1117] rounded-b-xl overflow-x-auto border border-border/50"><pre class="p-2 text-[13px] font-mono leading-relaxed text-gray-800 dark:text-gray-200"><code class="table w-full"><div class="table-row "><span class="table-cell pr-4 text-right select-none text-muted-foreground/40 w-8 align-top">1</span><span class="table-cell align-top"><span class="token-text">n</span><span class="token-text">p</span><span class="token-text">m</span><span class="token-text"> </span><span class="token-text">t</span><span class="token-text">e</span><span class="token-text">s</span><span class="token-text">t</span><span class="token-text"> </span><span class="token-operator">--</span><span class="token-text"> </span><span class="token-text">.</span><span class="token-operator">/</span><span class="token-text">t</span><span class="token-text">e</span><span class="token-text">s</span><span class="token-text">t</span><span class="token-text">s</span><span class="token-operator">/</span><span class="token-text">a</span><span class="token-text">q</span><span class="token-text">u</span><span class="token-text">a</span><span class="token-text">f</span><span class="token-text">i</span><span class="token-text">e</span><span class="token-text">r</span><span class="token-property">.test</span><span class="token-property">.ts</span></span></div></code></pre></div></div>
<hr/>
<h2 id="see-also" class="text-2xl font-semibold tracking-tight mt-10 mb-4 text-foreground scroll-mt-24">See Also</h2>
<ul class="list-disc list-outside pl-5 space-y-2 mb-4 text-muted-foreground [&amp;_p]:mb-0 [&amp;_p]:inline [&amp;_ul]:ml-6 [&amp;_ol]:ml-6">
<li class="leading-7 [&amp;&gt;p]:mb-0 [&amp;&gt;p]:inline"><a href="/previous_versions/version_3/introduction" class="text-primary hover:underline font-medium">Introduction</a> - Getting started</li>
<li class="leading-7 [&amp;&gt;p]:mb-0 [&amp;&gt;p]:inline"><a href="/previous_versions/version_3/concepts" class="text-primary hover:underline font-medium">Concepts</a> - Core concepts</li>
<li class="leading-7 [&amp;&gt;p]:mb-0 [&amp;&gt;p]:inline"><a href="/previous_versions/version_3/schema" class="text-primary hover:underline font-medium">Schema Reference</a> - Revision specifications</li>
<li class="leading-7 [&amp;&gt;p]:mb-0 [&amp;&gt;p]:inline"><a href="https://github.com/inblockio/aqua-verifier-js-lib" class="text-primary hover:underline font-medium" target="_blank" rel="noopener noreferrer">GitHub Repository</a> - Source code and examples</li>
</ul></div><div class="mt-12 pt-6 border-t border-border flex items-center justify-between"><a href="https://github.com/inblockio/aqua-docs/edit/main/docs/v3.0.2/en/tooling.mdx" target="_blank" rel="noopener noreferrer" class="flex items-center gap-2 text-sm text-muted-foreground hover:text-foreground transition-colors"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-file-pen h-4 w-4"><path d="M12.5 22H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v9.5"></path><path d="M14 2v4a2 2 0 0 0 2 2h4"></path><path d="M13.378 15.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z"></path></svg>Edit this page</a><a href="https://github.com/inblockio/issues/new" target="_blank" rel="noopener noreferrer" class="flex items-center gap-2 text-sm text-muted-foreground hover:text-foreground transition-colors"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-external-link h-4 w-4"><path d="M15 3h6v6"></path><path d="M10 14 21 3"></path><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path></svg>Report an issue</a></div><div class="mt-12 pt-8 border-t border-border grid grid-cols-2 gap-4"><a class="group flex flex-col gap-2 p-4 rounded-xl border border-border hover:border-primary/50 hover:bg-muted/50 transition-all" style="text-decoration:none !important" href="/docs/v3.0.2/en/schema"><div class="flex items-center gap-2 text-sm text-muted-foreground"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-left h-4 w-4"><path d="m15 18-6-6 6-6"></path></svg><span>Previous</span></div><div class="text-base font-medium text-foreground group-hover:text-primary transition-colors">Schema Reference</div></a><div></div></div></article><footer class="bg-muted/30 dark:bg-muted/10 rounded-2xl mt-24"><div class="px-2 md:px-6 py-12"><div class="grid grid-cols-2 md:grid-cols-4 gap-8 mb-8"><div><h3 class="font-semibold text-foreground mb-4">Documentation</h3><ul class="space-y-2"><li><a class="text-sm text-muted-foreground hover:text-foreground transition-colors" href="/docs/v1.0.0/getting-started">Getting Started</a></li><li><a class="text-sm text-muted-foreground hover:text-foreground transition-colors" href="/docs/v1.0.0/api">API Reference</a></li></ul></div><div><h3 class="font-semibold text-foreground mb-4">Community</h3><ul class="space-y-2"><li><a class="text-sm text-muted-foreground hover:text-foreground transition-colors" href="https://github.com/inblockio/aqua-docs">GitHub</a></li><li><a class="text-sm text-muted-foreground hover:text-foreground transition-colors" href="#">Discord</a></li></ul></div></div><div class="pt-8 border-t border-border/50"><div class="flex flex-col md:flex-row items-center justify-between gap-4"><p class="text-sm text-muted-foreground text-center md:text-left">Copyright © 2024 Aqua. All rights reserved.</p></div></div></div></footer></div></div><aside class="w-64 hidden xl:block shrink-0 sticky top-24 self-start"><div class="max-h-[calc(100vh-7rem)] overflow-y-auto bg-muted/30 dark:bg-muted/10 rounded-2xl p-4 border border-border/50"><h3 class="text-xs font-semibold text-muted-foreground uppercase tracking-wider mb-4 px-2">On this page</h3><nav class="space-y-1"><a href="#installation" class="block text-sm transition-all cursor-pointer rounded-xl px-3 py-2  text-foreground hover:bg-accent/50">Installation</a><a href="#platform-specific-imports" class="block text-sm transition-all cursor-pointer rounded-xl px-3 py-2 ml-3 text-foreground hover:bg-accent/50">Platform-Specific Imports</a><a href="#core-api" class="block text-sm transition-all cursor-pointer rounded-xl px-3 py-2  text-foreground hover:bg-accent/50">Core API</a><a href="#aquafier-class" class="block text-sm transition-all cursor-pointer rounded-xl px-3 py-2 ml-3 text-foreground hover:bg-accent/50">Aquafier Class</a><a href="#creating-revisions" class="block text-sm transition-all cursor-pointer rounded-xl px-3 py-2 ml-3 text-foreground hover:bg-accent/50">Creating Revisions</a><a href="#signing-revisions" class="block text-sm transition-all cursor-pointer rounded-xl px-3 py-2 ml-3 text-foreground hover:bg-accent/50">Signing Revisions</a><a href="#witnessing-revisions" class="block text-sm transition-all cursor-pointer rounded-xl px-3 py-2 ml-3 text-foreground hover:bg-accent/50">Witnessing Revisions</a><a href="#linking-revisions" class="block text-sm transition-all cursor-pointer rounded-xl px-3 py-2 ml-3 text-foreground hover:bg-accent/50">Linking Revisions</a><a href="#verification" class="block text-sm transition-all cursor-pointer rounded-xl px-3 py-2 ml-3 text-foreground hover:bg-accent/50">Verification</a><a href="#utility-methods" class="block text-sm transition-all cursor-pointer rounded-xl px-3 py-2 ml-3 text-foreground hover:bg-accent/50">Utility Methods</a><a href="#type-reference" class="block text-sm transition-all cursor-pointer rounded-xl px-3 py-2  text-foreground hover:bg-accent/50">Type Reference</a><a href="#core-types" class="block text-sm transition-all cursor-pointer rounded-xl px-3 py-2 ml-3 text-foreground hover:bg-accent/50">Core Types</a><a href="#result-type" class="block text-sm transition-all cursor-pointer rounded-xl px-3 py-2 ml-3 text-foreground hover:bg-accent/50">Result Type</a><a href="#configuration-types" class="block text-sm transition-all cursor-pointer rounded-xl px-3 py-2 ml-3 text-foreground hover:bg-accent/50">Configuration Types</a><a href="#platform-specific-notes" class="block text-sm transition-all cursor-pointer rounded-xl px-3 py-2  text-foreground hover:bg-accent/50">Platform-Specific Notes</a><a href="#nodejs" class="block text-sm transition-all cursor-pointer rounded-xl px-3 py-2 ml-3 text-foreground hover:bg-accent/50">Node.js</a><a href="#web-browser" class="block text-sm transition-all cursor-pointer rounded-xl px-3 py-2 ml-3 text-foreground hover:bg-accent/50">Web Browser</a><a href="#react-native" class="block text-sm transition-all cursor-pointer rounded-xl px-3 py-2 ml-3 text-foreground hover:bg-accent/50">React Native</a><a href="#complete-workflow-examples" class="block text-sm transition-all cursor-pointer rounded-xl px-3 py-2  text-foreground hover:bg-accent/50">Complete Workflow Examples</a><a href="#document-notarization" class="block text-sm transition-all cursor-pointer rounded-xl px-3 py-2 ml-3 text-foreground hover:bg-accent/50">Document Notarization</a><a href="#multi-party-approval" class="block text-sm transition-all cursor-pointer rounded-xl px-3 py-2 ml-3 text-foreground hover:bg-accent/50">Multi-Party Approval</a><a href="#form-submission-with-verification" class="block text-sm transition-all cursor-pointer rounded-xl px-3 py-2 ml-3 text-foreground hover:bg-accent/50">Form Submission with Verification</a><a href="#error-handling" class="block text-sm transition-all cursor-pointer rounded-xl px-3 py-2  text-foreground hover:bg-accent/50">Error Handling</a><a href="#best-practices" class="block text-sm transition-all cursor-pointer rounded-xl px-3 py-2  text-foreground hover:bg-accent/50">Best Practices</a><a href="#testing" class="block text-sm transition-all cursor-pointer rounded-xl px-3 py-2  text-foreground hover:bg-accent/50">Testing</a><a href="#see-also" class="block text-sm transition-all cursor-pointer rounded-xl px-3 py-2  text-foreground hover:bg-accent/50">See Also</a></nav></div></aside></div></main></div></div><script>$RB=[];$RV=function(a){$RT=performance.now();for(var b=0;b<a.length;b+=2){var c=a[b],e=a[b+1];null!==e.parentNode&&e.parentNode.removeChild(e);var f=c.parentNode;if(f){var g=c.previousSibling,h=0;do{if(c&&8===c.nodeType){var d=c.data;if("/$"===d||"/&"===d)if(0===h)break;else h--;else"$"!==d&&"$?"!==d&&"$~"!==d&&"$!"!==d&&"&"!==d||h++}d=c.nextSibling;f.removeChild(c);c=d}while(c);for(;e.firstChild;)f.insertBefore(e.firstChild,c);g.data="$";g._reactRetry&&requestAnimationFrame(g._reactRetry)}}a.length=0};
$RC=function(a,b){if(b=document.getElementById(b))(a=document.getElementById(a))?(a.previousSibling.data="$~",$RB.push(a,b),2===$RB.length&&("number"!==typeof $RT?requestAnimationFrame($RV.bind(null,$RB)):(a=performance.now(),setTimeout($RV.bind(null,$RB),2300>a&&2E3<a?2300-a:$RT+300-a)))):b.parentNode.removeChild(b)};$RC("B:0","S:0")</script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:\"$Sreact.fragment\"\n2:I[839694,[\"/_next/static/chunks/a423cf2782ee23a6.js\",\"/_next/static/chunks/150ebe81571675a9.js\",\"/_next/static/chunks/4421a3eabdff5f47.js\"],\"ConfigProvider\"]\n3:I[839694,[\"/_next/static/chunks/a423cf2782ee23a6.js\",\"/_next/static/chunks/150ebe81571675a9.js\",\"/_next/static/chunks/4421a3eabdff5f47.js\"],\"TabProvider\"]\n4:I[339756,[\"/_next/static/chunks/d96012bcfc98706a.js\",\"/_next/static/chunks/73e3194f06db260e.js\"],\"default\"]\n5:I[837457,[\"/_next/static/chunks/d96012bcfc98706a.js\",\"/_next/static/chunks/73e3194f06db260e.js\"],\"default\"]\n6:I[839694,[\"/_next/static/chunks/a423cf2782ee23a6.js\",\"/_next/static/chunks/150ebe81571675a9.js\",\"/_next/static/chunks/4421a3eabdff5f47.js\"],\"Button\"]\n7:I[522016,[\"/_next/static/chunks/a423cf2782ee23a6.js\",\"/_next/static/chunks/150ebe81571675a9.js\",\"/_next/static/chunks/4421a3eabdff5f47.js\"],\"\"]\n10:I[168027,[\"/_next/static/chunks/d96012bcfc98706a.js\",\"/_next/static/chunks/73e3194f06db260e.js\"],\"default\"]\n:HL[\"/_next/static/chunks/a06cf6f745569492.css\",\"style\"]\n:HL[\"/_next/static/chunks/4bfa5a2d9fbd2059.css\",\"style\"]\n:HL[\"/_next/static/media/797e433ab948586e-s.p.dbea232f.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n:HL[\"/_next/static/media/caa3a2e1cccd8315-s.p.853070df.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n"])</script><script>self.__next_f.push([1,"0:{\"P\":null,\"b\":\"DJ8Iqvr9DWq0AQJCrsokn\",\"c\":[\"\",\"docs\",\"v3.0.2\",\"en\",\"tooling\"],\"q\":\"\",\"i\":false,\"f\":[[[\"\",{\"children\":[\"docs\",{\"children\":[[\"version\",\"v3.0.2\",\"d\"],{\"children\":[[\"slug\",\"en/tooling\",\"c\"],{\"children\":[\"__PAGE__\",{}]}]}]}]},\"$undefined\",\"$undefined\",true],[[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/chunks/a06cf6f745569492.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}],[\"$\",\"link\",\"1\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/chunks/4bfa5a2d9fbd2059.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}],[\"$\",\"script\",\"script-0\",{\"src\":\"/_next/static/chunks/a423cf2782ee23a6.js\",\"async\":true,\"nonce\":\"$undefined\"}],[\"$\",\"script\",\"script-1\",{\"src\":\"/_next/static/chunks/150ebe81571675a9.js\",\"async\":true,\"nonce\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"en\",\"suppressHydrationWarning\":true,\"children\":[\"$\",\"body\",null,{\"className\":\"font-sans antialiased\",\"children\":[\"$\",\"$L2\",null,{\"config\":{\"site\":{\"title\":\"Aqua Protocol\",\"description\":\"Aqua\",\"baseUrl\":\"/\",\"language\":\"en\",\"url\":\"https://aqua-protocol.org\",\"organizationName\":\"inblockio\",\"projectName\":\"aqua-docs\",\"activeVersion\":\"v4.0.0\",\"favicon\":\"/logo/aqua-logo.png\",\"logo\":{\"dark\":\"/logo/aqua-logo.png\",\"light\":\"/logo/aqua-logo.png\"}},\"theme\":{\"defaultMode\":\"system\",\"respectPrefersColorScheme\":true},\"navigation\":{\"showSidebar\":true,\"collapsibleSidebar\":true,\"showBreadcrumbs\":true,\"showTableOfContents\":true,\"tocPosition\":\"right\",\"tocMaxDepth\":3},\"search\":{\"enabled\":false,\"provider\":\"meilisearch\",\"placeholder\":\"Search documentation...\",\"meilisearch\":{\"host\":\"http://localhost:7700\",\"apiKey\":\"aSampleMasterKey\",\"indexName\":\"docs\"}},\"features\":{\"showLastUpdated\":true,\"showReadingTime\":true,\"showAuthors\":false,\"showTags\":true,\"versioning\":true,\"i18n\":{\"defaultLocale\":\"en\",\"locales\":[\"en\"],\"localeNames\":{\"en\":\"English\"},\"prefixDefault\":true},\"editUrl\":\"https://github.com/inblockio/aqua-docs/edit/main/docs\"},\"$schema\":\"./node_modules/specra/config/specra.config.schema.json\",\"social\":{\"github\":\"https://github.com/inblockio\",\"twitter\":\"https://twitter.com/inblockio\",\"custom\":[{\"label\":\"Website\",\"url\":\"https://dev.inblock.io\"}]},\"analytics\":{\"googleAnalytics\":\"\",\"plausible\":\"\"},\"footer\":{\"copyright\":\"Copyright © 2024 Aqua. All rights reserved.\",\"links\":[{\"title\":\"Documentation\",\"items\":[{\"label\":\"Getting Started\",\"href\":\"/docs/v1.0.0/getting-started\"},{\"label\":\"API Reference\",\"href\":\"/docs/v1.0.0/api\"}]},{\"title\":\"Community\",\"items\":[{\"label\":\"GitHub\",\"href\":\"https://github.com/inblockio/aqua-docs\"},{\"label\":\"Discord\",\"href\":\"#\"}]}]},\"banner\":{\"enabled\":false,\"message\":\"🎉 Aqua protocol - Let us build privacy infra together!\",\"type\":\"error\",\"dismissible\":true},\"env\":{\"AQUAFIER_URL\":\"https://aquafier.inblock.io\"},\"deployment\":{\"target\":\"github-pages\",\"basePath\":\"\",\"customDomain\":true}},\"children\":[\"$\",\"$L3\",null,{\"defaultTab\":\"\",\"children\":[\"$\",\"$L4\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L5\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[\"$\",\"div\",null,{\"className\":\"min-h-screen bg-background flex items-center justify-center px-6\",\"children\":[\"$\",\"div\",null,{\"className\":\"max-w-2xl mx-auto text-center space-y-6\",\"children\":[[\"$\",\"div\",null,{\"className\":\"space-y-2\",\"children\":[[\"$\",\"h1\",null,{\"className\":\"text-6xl md:text-8xl font-bold text-primary\",\"children\":\"404\"}],[\"$\",\"h2\",null,{\"className\":\"text-2xl md:text-3xl font-semibold text-foreground\",\"children\":\"Page Not Found\"}]]}],[\"$\",\"p\",null,{\"className\":\"text-muted-foreground text-lg max-w-md mx-auto\",\"children\":\"The page you're looking for doesn't exist or may have been moved.\"}],[\"$\",\"div\",null,{\"className\":\"flex flex-col sm:flex-row items-center justify-center gap-4 pt-6\",\"children\":[[\"$\",\"$L6\",null,{\"asChild\":true,\"size\":\"lg\",\"children\":[\"$\",\"$L7\",null,{\"href\":\"/\",\"children\":[[\"$\",\"svg\",null,{\"ref\":\"$undefined\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":24,\"height\":24,\"viewBox\":\"0 0 24 24\",\"fill\":\"none\",\"stroke\":\"currentColor\",\"strokeWidth\":2,\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"className\":\"lucide lucide-house mr-2 h-4 w-4\",\"children\":[[\"$\",\"path\",\"5wwlr5\",{\"d\":\"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8\"}],[\"$\",\"path\",\"1d0kgt\",{\"d\":\"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z\"}],\"$undefined\"]}],\"Go to Homepage\"]}]}],[\"$\",\"$L6\",null,{\"asChild\":true,\"variant\":\"outline\",\"size\":\"lg\",\"children\":[\"$\",\"$L7\",null,{\"href\":\"/docs/v4.0.0/welcome\",\"children\":[[\"$\",\"svg\",null,{\"ref\":\"$undefined\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":24,\"height\":24,\"viewBox\":\"0 0 24 24\",\"fill\":\"none\",\"stroke\":\"currentColor\",\"strokeWidth\":2,\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"className\":\"lucide lucide-arrow-left mr-2 h-4 w-4\",\"children\":[\"$L8\",\"$L9\",\"$undefined\"]}],\"View Documentation\"]}]}]]}]]}]}],[]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]}]}]}]}]]}],{\"children\":[\"$La\",{\"children\":[\"$Lb\",{\"children\":[\"$Lc\",{\"children\":[\"$Ld\",{},null,false,false]},[\"$Le\",[],[]],false,false]},null,false,false]},null,false,false]},null,false,false],\"$Lf\",false]],\"m\":\"$undefined\",\"G\":[\"$10\",[]],\"S\":true}\n"])</script><script>self.__next_f.push([1,"11:I[839694,[\"/_next/static/chunks/a423cf2782ee23a6.js\",\"/_next/static/chunks/150ebe81571675a9.js\",\"/_next/static/chunks/4421a3eabdff5f47.js\"],\"VersionNotFound\"]\n13:I[897367,[\"/_next/static/chunks/d96012bcfc98706a.js\",\"/_next/static/chunks/73e3194f06db260e.js\"],\"OutletBoundary\"]\n14:\"$Sreact.suspense\"\n16:I[897367,[\"/_next/static/chunks/d96012bcfc98706a.js\",\"/_next/static/chunks/73e3194f06db260e.js\"],\"ViewportBoundary\"]\n18:I[897367,[\"/_next/static/chunks/d96012bcfc98706a.js\",\"/_next/static/chunks/73e3194f06db260e.js\"],\"MetadataBoundary\"]\n8:[\"$\",\"path\",\"1l729n\",{\"d\":\"m12 19-7-7 7-7\"}]\n9:[\"$\",\"path\",\"x3x0zl\",{\"d\":\"M19 12H5\"}]\na:[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L4\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L5\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}]\nb:[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L4\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L5\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[\"$\",\"$L11\",null,{}],[]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}]\nc:[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L4\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L5\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}]\nd:[\"$\",\"$1\",\"c\",{\"children\":[\"$L12\",[[\"$\",\"script\",\"script-0\",{\"src\":\"/_next/static/chunks/4421a3eabdff5f47.js\",\"async\":true,\"nonce\":\"$undefined\"}]],[\"$\",\"$L13\",null,{\"children\":[\"$\",\"$14\",null,{\"name\":\"Next.MetadataOutlet\",\"children\":\"$@15\"}]}]]}]\ne:[\"$\",\"div\",\"l\",{\"className\":\"flex items-center justify-center min-h-screen\",\"children\":[\"$\",\"div\",null,{\"className\":\"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900\"}]}]\nf:[\"$\",\"$1\",\"h\",{\"children\":[null,[\"$\",\"$L16\",null,{\"children\":\"$L17\"}],[\"$\",\"div\",null,{\"hidden\":true,\"children\":[\"$\",\"$L18\",null,{\"children\":[\"$\",\"$14\",null,{\"name\":\"Next.Metadata\",\"children\":\"$L19\"}]}]}],[\"$\",\"meta\",null,{\"name\":\"next-size-adjust\",\"content\":\"\"}]]}]\n"])</script><script>self.__next_f.push([1,"1a:I[839694,[\"/_next/static/chunks/a423cf2782ee23a6.js\",\"/_next/static/chunks/150ebe81571675a9.js\",\"/_next/static/chunks/4421a3eabdff5f47.js\"],\"DocLoading\"]\n1b:I[839694,[\"/_next/static/chunks/a423cf2782ee23a6.js\",\"/_next/static/chunks/150ebe81571675a9.js\",\"/_next/static/chunks/4421a3eabdff5f47.js\"],\"DocLayoutWrapper\"]\n1c:I[839694,[\"/_next/static/chunks/a423cf2782ee23a6.js\",\"/_next/static/chunks/150ebe81571675a9.js\",\"/_next/static/chunks/4421a3eabdff5f47.js\"],\"Header\"]\n1d:T3875,"])</script><script>self.__next_f.push([1,"\n# Aqua Protocol v3 Concepts\n\nUnderstanding the core concepts of Aqua Protocol v3 is essential for effectively using the SDK and building applications. This guide covers the fundamental ideas, terminology, and patterns used throughout the protocol.\n\n## AquaTree\n\nThe **AquaTree** is the primary data structure in v3. It represents a complete, self-contained collection of revisions with their relationships and metadata.\n\n### Structure\n\n```typescript\ninterface AquaTree {\n  revisions: Revisions      // All revisions indexed by hash\n  file_index: FileIndex     // Maps file hashes to filenames\n  tree?: RevisionTree       // Tree structure of revisions\n  treeMapping?: TreeMapping // Path mappings for navigation\n}\n```\n\n### Components\n\n#### 1. Revisions\nA flat map of all revisions, keyed by their verification hash:\n\n```typescript\n{\n  \"0xabc123...\": {\n    previous_verification_hash: \"0xdef456...\",\n    local_timestamp: \"2024-01-01T12:00:00\",\n    revision_type: \"file\",\n    // ... other fields\n  },\n  \"0xdef456...\": {\n    // ... another revision\n  }\n}\n```\n\n#### 2. File Index\nMaps file content hashes to filenames for reference:\n\n```typescript\n{\n  \"0xfile_hash_1\": \"document.pdf\",\n  \"0xfile_hash_2\": \"image.png\"\n}\n```\n\n#### 3. Tree Structure (Optional)\nHierarchical representation showing parent-child relationships:\n\n```typescript\n{\n  hash: \"0xabc123...\",  // Root revision\n  children: [\n    {\n      hash: \"0xdef456...\",\n      children: [...]\n    }\n  ]\n}\n```\n\n#### 4. Tree Mapping (Optional)\nPath information for each revision:\n\n```typescript\n{\n  paths: {\n    \"0xabc123\": [\"0xroot\", \"0xabc123\"],\n    \"0xdef456\": [\"0xroot\", \"0xabc123\", \"0xdef456\"]\n  },\n  latestHash: \"0xdef456...\"  // Most recent revision\n}\n```\n\n## Revisions\n\nA **Revision** is a single entry in the AquaTree representing an operation or state change.\n\n### Common Fields\n\nAll revisions share these base fields:\n\n| Field | Type | Description |\n|-------|------|-------------|\n| `previous_verification_hash` | string | Hash linking to previous revision (empty string for genesis) |\n| `local_timestamp` | string | ISO 8601 timestamp when revision was created |\n| `revision_type` | string | One of: `\"file\"`, `\"form\"`, `\"signature\"`, `\"witness\"`, `\"link\"` |\n| `version` | string | Protocol version with method: `https://aqua-protocol.org/docs/v3/schema_2 \\| SHA256 \\| Method: scalar/tree` |\n\n### Genesis Revision\n\nThe **genesis revision** is the first revision in a chain:\n- `previous_verification_hash` is an empty string `\"\"`\n- Typically a file or form revision\n- Establishes the initial state\n\n### Verification Hash\n\nEach revision has a unique **verification hash** computed from its canonical form:\n\n```typescript\nhash = SHA256(canonicalized_revision_data)\n```\n\nThis hash serves as:\n- Unique identifier for the revision\n- Key in the revisions map\n- Reference in `previous_verification_hash` fields\n\n## Revision Types\n\n### 1. File Revision\n\nStores file metadata and optionally content.\n\n**Purpose**: Document file presence and content integrity\n\n**Fields**:\n- `file_hash`: SHA256 hash of file content\n- `file_nonce`: Random nonce for uniqueness\n- `content`: Optional file content (text or binary)\n- `leaves`: Array of hashes (tree mode only)\n\n**Example**:\n```json\n{\n  \"previous_verification_hash\": \"\",\n  \"local_timestamp\": \"2024-01-01T12:00:00\",\n  \"revision_type\": \"file\",\n  \"version\": \"https://aqua-protocol.org/docs/v3/schema_2 | SHA256 | Method: scalar\",\n  \"file_hash\": \"0x9f86d081884c7d659a2feaa0c55ad015a3bf4f1b2b0b822cd15d6c15b0f00a08\",\n  \"file_nonce\": \"0x3fa8b1c2d3e4f5a67b8c9d0e1f2a3b4c\"\n}\n```\n\n### 2. Form Revision\n\nStores structured key-value data.\n\n**Purpose**: Capture form submissions, structured data, or metadata\n\n**Fields**:\n- `file_hash`: Hash of form data\n- `file_nonce`: Random nonce\n- `content`: Form data as key-value object\n- `leaves`: Array of hashes (tree mode only)\n\n**Example**:\n```json\n{\n  \"previous_verification_hash\": \"\",\n  \"local_timestamp\": \"2024-01-01T12:00:00\",\n  \"revision_type\": \"form\",\n  \"version\": \"https://aqua-protocol.org/docs/v3/schema_2 | SHA256 | Method: tree\",\n  \"file_hash\": \"0xabc123...\",\n  \"file_nonce\": \"0x123abc...\",\n  \"content\": {\n    \"name\": \"John Doe\",\n    \"email\": \"john@example.com\",\n    \"status\": \"approved\"\n  },\n  \"leaves\": [\"0x...\", \"0x...\", \"0x...\"]\n}\n```\n\n### 3. Signature Revision\n\nAdds cryptographic signature to prove authenticity.\n\n**Purpose**: Authenticate revisions and establish authorship\n\n**Fields**:\n- `signature`: Signature value (format depends on type)\n- `signature_type`: One of `\"cli\"`, `\"metamask\"`, `\"did\"`, `\"p12\"`, `\"inline\"`\n- `signature_wallet_address`: Ethereum address (for cli/metamask)\n- `signature_public_key`: Public key (for p12)\n\n**Example (MetaMask)**:\n```json\n{\n  \"previous_verification_hash\": \"0xabc123...\",\n  \"local_timestamp\": \"2024-01-01T12:01:00\",\n  \"revision_type\": \"signature\",\n  \"version\": \"https://aqua-protocol.org/docs/v3/schema_2 | SHA256 | Method: scalar\",\n  \"signature_type\": \"metamask\",\n  \"signature\": \"0x8c9d0e1f2a3b4c5d6e7f8a9b0c1d2e3f...\",\n  \"signature_wallet_address\": \"0x742d35Cc6634C0532925a3b844Bc9e7595f0bEb8\"\n}\n```\n\n**Example (DID)**:\n```json\n{\n  \"previous_verification_hash\": \"0xabc123...\",\n  \"local_timestamp\": \"2024-01-01T12:01:00\",\n  \"revision_type\": \"signature\",\n  \"version\": \"https://aqua-protocol.org/docs/v3/schema_2 | SHA256 | Method: scalar\",\n  \"signature_type\": \"did\",\n  \"signature\": {\n    \"payload\": \"eyJhbGciOi...\",\n    \"signatures\": [{\n      \"protected\": \"eyJhbGci...\",\n      \"signature\": \"...\"\n    }]\n  }\n}\n```\n\n### 4. Witness Revision\n\nAnchors revision to external timestamping service.\n\n**Purpose**: Prove existence at specific time via blockchain or TSA\n\n**Fields**:\n- `witness_merkle_root`: Root hash of Merkle tree\n- `witness_timestamp`: Unix timestamp from witness service\n- `witness_network`: Network used (`\"mainnet\"`, `\"sepolia\"`, `\"holesky\"`, `\"tsa\"`, `\"nostr\"`)\n- `witness_smart_contract_address`: Contract address (Ethereum)\n- `witness_transaction_hash`: Transaction hash\n- `witness_sender_account_address`: Account that witnessed\n- `witness_merkle_proof`: Merkle proof array\n\n**Example (Ethereum)**:\n```json\n{\n  \"previous_verification_hash\": \"0xabc123...\",\n  \"local_timestamp\": \"2024-01-01T12:02:00\",\n  \"revision_type\": \"witness\",\n  \"version\": \"https://aqua-protocol.org/docs/v3/schema_2 | SHA256 | Method: scalar\",\n  \"witness_merkle_root\": \"0xdef456...\",\n  \"witness_timestamp\": 1704110520,\n  \"witness_network\": \"sepolia\",\n  \"witness_smart_contract_address\": \"0x5FbDB2315678afecb367f032d93F642f64180aa3\",\n  \"witness_transaction_hash\": \"0x9f86d081...\",\n  \"witness_sender_account_address\": \"0x742d35Cc...\",\n  \"witness_merkle_proof\": []\n}\n```\n\n### 5. Link Revision\n\nConnects to other AquaTree chains.\n\n**Purpose**: Establish relationships between separate chains\n\n**Fields**:\n- `link_type`: Type of link relationship (application-specific)\n- `link_verification_hashes`: Array of hashes from other chains\n- `link_file_hashes`: Array of corresponding file hashes\n\n**Example**:\n```json\n{\n  \"previous_verification_hash\": \"0xabc123...\",\n  \"local_timestamp\": \"2024-01-01T12:03:00\",\n  \"revision_type\": \"link\",\n  \"version\": \"https://aqua-protocol.org/docs/v3/schema_2 | SHA256 | Method: scalar\",\n  \"link_type\": \"dependency\",\n  \"link_verification_hashes\": [\n    \"0x111...\",\n    \"0x222...\",\n    \"0x333...\"\n  ],\n  \"link_file_hashes\": [\n    \"0xaaa...\",\n    \"0xbbb...\",\n    \"0xccc...\"\n  ]\n}\n```\n\n## Methods: Scalar vs Tree\n\nV3 supports two canonicalization methods, specified in the version string.\n\n### Scalar Method\n\n**Format**: `Method: scalar`\n\n**How it works**:\n- Revision is serialized as-is\n- Hash computed directly from canonical JSON\n- Simple, straightforward\n\n**When to use**:\n- Small revisions\n- Simple file/form data\n- Quick operations\n\n**Example**:\n```typescript\nversion: \"https://aqua-protocol.org/docs/v3/schema_2 | SHA256 | Method: scalar\"\n// No leaves field\n```\n\n### Tree Method\n\n**Format**: `Method: tree`\n\n**How it works**:\n- Content broken into key-value leaves\n- Each leaf hashed individually\n- Merkle tree constructed from leaves\n- Root becomes the verification hash\n\n**When to use**:\n- Large files or forms\n- Selective disclosure needed\n- Proof of specific fields\n\n**Example**:\n```typescript\nversion: \"https://aqua-protocol.org/docs/v3/schema_2 | SHA256 | Method: tree\"\nleaves: [\n  \"0xhash_of_key_value_1\",\n  \"0xhash_of_key_value_2\",\n  \"0xhash_of_key_value_3\"\n]\n```\n\n**Leaf Generation**:\n```typescript\n// For form data: { \"name\": \"John\", \"email\": \"john@example.com\" }\nleaves = [\n  SHA256(\"name:John\"),\n  SHA256(\"email:john@example.com\")\n]\n```\n\n## Chains and Trees\n\n### Linear Chain\n\nSimple sequence of revisions:\n\n```\nGenesis � Signature � Witness � Update � Signature � Witness\n```\n\nEach revision references the previous one.\n\n### Branching Tree\n\nMultiple paths from a common ancestor:\n\n```\n            Genesis\n               �\n          Signature\n             /  \\\n        Branch A  Branch B\n           �        �\n        Update 1  Update 2\n```\n\nV3 supports branching, allowing parallel development paths.\n\n### Path Mapping\n\nThe `treeMapping` provides paths to each revision:\n\n```typescript\n{\n  paths: {\n    \"genesis_hash\": [\"genesis_hash\"],\n    \"sig_hash\": [\"genesis_hash\", \"sig_hash\"],\n    \"branch_a_hash\": [\"genesis_hash\", \"sig_hash\", \"branch_a_hash\"],\n    \"branch_b_hash\": [\"genesis_hash\", \"sig_hash\", \"branch_b_hash\"]\n  },\n  latestHash: \"branch_a_hash\"  // Longest path\n}\n```\n\n## File Object\n\nInput format for creating revisions:\n\n```typescript\ninterface FileObject {\n  fileName: string           // Display name\n  fileContent: string |      // Text content\n                AquaTree |   // Linked tree\n                Uint8Array | // Binary data\n                Record\u003cstring, string\u003e | // Form data\n                object       // Structured data\n  path: string              // File path\n  fileSize?: number         // Size in bytes\n}\n```\n\n### Content Types\n\n**Text**: Plain text, HTML, JSON\n```typescript\n{\n  fileName: \"doc.txt\",\n  fileContent: \"Hello World\",\n  path: \"/docs/doc.txt\"\n}\n```\n\n**Binary**: Images, PDFs, any binary file\n```typescript\n{\n  fileName: \"image.png\",\n  fileContent: new Uint8Array([...]),\n  path: \"/images/image.png\"\n}\n```\n\n**Form**: Key-value structured data\n```typescript\n{\n  fileName: \"form.json\",\n  fileContent: {\n    \"field1\": \"value1\",\n    \"field2\": \"value2\"\n  },\n  path: \"/forms/form.json\"\n}\n```\n\n**Link**: Reference to another AquaTree\n```typescript\n{\n  fileName: \"linked.json\",\n  fileContent: anotherAquaTree,\n  path: \"/links/linked.json\"\n}\n```\n\n## Verification Graph\n\nResult of verification includes a graph structure:\n\n```typescript\ninterface VerificationGraphData {\n  hash: string\n  previous_verification_hash: string\n  timestamp: string\n  isValidationSuccessful: boolean\n  revisionType: RevisionType\n  info: RevisionGraphInfo  // Type-specific details\n  verificationGraphData: VerificationGraphData[]      // Children\n  linkVerificationGraphData: VerificationGraphData[]  // Links\n}\n```\n\n### Traversing the Graph\n\n```typescript\nfunction printVerification(graph: VerificationGraphData, depth = 0) {\n  const indent = \"  \".repeat(depth);\n  const status = graph.isValidationSuccessful ? \"\u0013\" : \"\u0017\";\n  console.log(`${indent}${status} ${graph.revisionType} (${graph.hash.slice(0, 10)}...)`);\n\n  // Traverse children\n  graph.verificationGraphData.forEach(child =\u003e {\n    printVerification(child, depth + 1);\n  });\n\n  // Traverse links\n  graph.linkVerificationGraphData.forEach(link =\u003e {\n    console.log(`${indent}  � Linked:`);\n    printVerification(link, depth + 2);\n  });\n}\n```\n\n## Credentials\n\nConfiguration for signing and witnessing:\n\n```typescript\ninterface CredentialsData {\n  mnemonic: string             // BIP39 mnemonic for CLI signing\n  nostr_sk: string             // Nostr secret key\n  did_key: string              // DID key for DID signing\n  alchemy_key: string          // Alchemy API key for verification\n  witness_eth_network: string  // \"mainnet\", \"sepolia\", \"holesky\"\n  witness_method: string       // \"cli\" or \"metamask\"\n  p12_password?: string        // P12 certificate password\n  p12_content?: string         // P12 certificate content\n}\n```\n\n## Logging\n\nV3 uses typed logging throughout:\n\n```typescript\nenum LogType {\n  SUCCESS = \"success\",\n  INFO = \"info\",\n  ERROR = \"error\",\n  WARNING = \"warning\",\n  HINT = \"hint\",\n  DEBUGDATA = \"debug_data\",\n  // ... revision types with emojis\n  FILE = \"file\",      // =�\n  LINK = \"link\",      // =\u0017\n  SIGNATURE = \"signature\",  // =\u000f\n  WITNESS = \"witness\",      // =@\n  FORM = \"form\"            // =�\n}\n```\n\nEach operation returns logs for debugging and user feedback.\n\n## Best Practices\n\n### 1. Genesis Patterns\n\n**Single File**:\n```\nFile Genesis � Sign � Witness\n```\n\n**Form Data**:\n```\nForm Genesis � Sign � Witness\n```\n\n### 2. Update Patterns\n\n**Content Update**:\n```\n... � New File Revision � Sign � Witness\n```\n\n**Multi-Party**:\n```\n... � Sign (Party 1) � Sign (Party 2) � Witness\n```\n\n### 3. Linking Patterns\n\n**Dependencies**:\n```\nMain Document � Link (to dependencies) � Sign � Witness\n```\n\n**Aggregation**:\n```\nComponent 1 \u0010\nComponent 2 \u001c� Aggregation Link � Sign � Witness\nComponent 3 \u0018\n```\n\n### 4. Verification Patterns\n\n**Full Chain**:\n```typescript\nconst result = await aquafier.verifyRevisionChain(aquaTree);\n```\n\n**Specific Revision**:\n```typescript\nconst revision = aquaTree.revisions[specificHash];\n// Manually verify hash computation\n```\n\n### 5. Storage Patterns\n\n**Database**: Store serialized AquaTree JSON\n```typescript\nconst json = JSON.stringify(aquaTree);\ndb.save(documentId, json);\n```\n\n**File System**: Save as .aqua.json file\n```typescript\nfs.writeFileSync('document.aqua.json', JSON.stringify(aquaTree, null, 2));\n```\n\n## Common Patterns\n\n### Document Lifecycle\n\n```\n1. Create � File Genesis\n2. Review � Sign (Reviewer)\n3. Approve � Sign (Approver)\n4. Timestamp � Witness (Ethereum)\n5. Archive � Store AquaTree\n6. Verify � Check entire chain\n```\n\n### Multi-Document Project\n\n```\n1. Create each document � Individual AquaTrees\n2. Link together � Link Revision in main tree\n3. Sign project � Sign main tree\n4. Witness � Witness main tree\n5. All documents timestamped through link\n```\n\n## See Also\n\n- [Introduction](/previous_versions/version_3/introduction) - Overview and quick start\n- [Tooling](/previous_versions/version_3/tooling) - SDK API reference\n- [Schema Reference](/previous_versions/version_3/schema) - Detailed specifications\n"])</script><script>self.__next_f.push([1,"1e:T3875,"])</script><script>self.__next_f.push([1,"\n# Aqua Protocol v3 Concepts\n\nUnderstanding the core concepts of Aqua Protocol v3 is essential for effectively using the SDK and building applications. This guide covers the fundamental ideas, terminology, and patterns used throughout the protocol.\n\n## AquaTree\n\nThe **AquaTree** is the primary data structure in v3. It represents a complete, self-contained collection of revisions with their relationships and metadata.\n\n### Structure\n\n```typescript\ninterface AquaTree {\n  revisions: Revisions      // All revisions indexed by hash\n  file_index: FileIndex     // Maps file hashes to filenames\n  tree?: RevisionTree       // Tree structure of revisions\n  treeMapping?: TreeMapping // Path mappings for navigation\n}\n```\n\n### Components\n\n#### 1. Revisions\nA flat map of all revisions, keyed by their verification hash:\n\n```typescript\n{\n  \"0xabc123...\": {\n    previous_verification_hash: \"0xdef456...\",\n    local_timestamp: \"2024-01-01T12:00:00\",\n    revision_type: \"file\",\n    // ... other fields\n  },\n  \"0xdef456...\": {\n    // ... another revision\n  }\n}\n```\n\n#### 2. File Index\nMaps file content hashes to filenames for reference:\n\n```typescript\n{\n  \"0xfile_hash_1\": \"document.pdf\",\n  \"0xfile_hash_2\": \"image.png\"\n}\n```\n\n#### 3. Tree Structure (Optional)\nHierarchical representation showing parent-child relationships:\n\n```typescript\n{\n  hash: \"0xabc123...\",  // Root revision\n  children: [\n    {\n      hash: \"0xdef456...\",\n      children: [...]\n    }\n  ]\n}\n```\n\n#### 4. Tree Mapping (Optional)\nPath information for each revision:\n\n```typescript\n{\n  paths: {\n    \"0xabc123\": [\"0xroot\", \"0xabc123\"],\n    \"0xdef456\": [\"0xroot\", \"0xabc123\", \"0xdef456\"]\n  },\n  latestHash: \"0xdef456...\"  // Most recent revision\n}\n```\n\n## Revisions\n\nA **Revision** is a single entry in the AquaTree representing an operation or state change.\n\n### Common Fields\n\nAll revisions share these base fields:\n\n| Field | Type | Description |\n|-------|------|-------------|\n| `previous_verification_hash` | string | Hash linking to previous revision (empty string for genesis) |\n| `local_timestamp` | string | ISO 8601 timestamp when revision was created |\n| `revision_type` | string | One of: `\"file\"`, `\"form\"`, `\"signature\"`, `\"witness\"`, `\"link\"` |\n| `version` | string | Protocol version with method: `https://aqua-protocol.org/docs/v3/schema_2 \\| SHA256 \\| Method: scalar/tree` |\n\n### Genesis Revision\n\nThe **genesis revision** is the first revision in a chain:\n- `previous_verification_hash` is an empty string `\"\"`\n- Typically a file or form revision\n- Establishes the initial state\n\n### Verification Hash\n\nEach revision has a unique **verification hash** computed from its canonical form:\n\n```typescript\nhash = SHA256(canonicalized_revision_data)\n```\n\nThis hash serves as:\n- Unique identifier for the revision\n- Key in the revisions map\n- Reference in `previous_verification_hash` fields\n\n## Revision Types\n\n### 1. File Revision\n\nStores file metadata and optionally content.\n\n**Purpose**: Document file presence and content integrity\n\n**Fields**:\n- `file_hash`: SHA256 hash of file content\n- `file_nonce`: Random nonce for uniqueness\n- `content`: Optional file content (text or binary)\n- `leaves`: Array of hashes (tree mode only)\n\n**Example**:\n```json\n{\n  \"previous_verification_hash\": \"\",\n  \"local_timestamp\": \"2024-01-01T12:00:00\",\n  \"revision_type\": \"file\",\n  \"version\": \"https://aqua-protocol.org/docs/v3/schema_2 | SHA256 | Method: scalar\",\n  \"file_hash\": \"0x9f86d081884c7d659a2feaa0c55ad015a3bf4f1b2b0b822cd15d6c15b0f00a08\",\n  \"file_nonce\": \"0x3fa8b1c2d3e4f5a67b8c9d0e1f2a3b4c\"\n}\n```\n\n### 2. Form Revision\n\nStores structured key-value data.\n\n**Purpose**: Capture form submissions, structured data, or metadata\n\n**Fields**:\n- `file_hash`: Hash of form data\n- `file_nonce`: Random nonce\n- `content`: Form data as key-value object\n- `leaves`: Array of hashes (tree mode only)\n\n**Example**:\n```json\n{\n  \"previous_verification_hash\": \"\",\n  \"local_timestamp\": \"2024-01-01T12:00:00\",\n  \"revision_type\": \"form\",\n  \"version\": \"https://aqua-protocol.org/docs/v3/schema_2 | SHA256 | Method: tree\",\n  \"file_hash\": \"0xabc123...\",\n  \"file_nonce\": \"0x123abc...\",\n  \"content\": {\n    \"name\": \"John Doe\",\n    \"email\": \"john@example.com\",\n    \"status\": \"approved\"\n  },\n  \"leaves\": [\"0x...\", \"0x...\", \"0x...\"]\n}\n```\n\n### 3. Signature Revision\n\nAdds cryptographic signature to prove authenticity.\n\n**Purpose**: Authenticate revisions and establish authorship\n\n**Fields**:\n- `signature`: Signature value (format depends on type)\n- `signature_type`: One of `\"cli\"`, `\"metamask\"`, `\"did\"`, `\"p12\"`, `\"inline\"`\n- `signature_wallet_address`: Ethereum address (for cli/metamask)\n- `signature_public_key`: Public key (for p12)\n\n**Example (MetaMask)**:\n```json\n{\n  \"previous_verification_hash\": \"0xabc123...\",\n  \"local_timestamp\": \"2024-01-01T12:01:00\",\n  \"revision_type\": \"signature\",\n  \"version\": \"https://aqua-protocol.org/docs/v3/schema_2 | SHA256 | Method: scalar\",\n  \"signature_type\": \"metamask\",\n  \"signature\": \"0x8c9d0e1f2a3b4c5d6e7f8a9b0c1d2e3f...\",\n  \"signature_wallet_address\": \"0x742d35Cc6634C0532925a3b844Bc9e7595f0bEb8\"\n}\n```\n\n**Example (DID)**:\n```json\n{\n  \"previous_verification_hash\": \"0xabc123...\",\n  \"local_timestamp\": \"2024-01-01T12:01:00\",\n  \"revision_type\": \"signature\",\n  \"version\": \"https://aqua-protocol.org/docs/v3/schema_2 | SHA256 | Method: scalar\",\n  \"signature_type\": \"did\",\n  \"signature\": {\n    \"payload\": \"eyJhbGciOi...\",\n    \"signatures\": [{\n      \"protected\": \"eyJhbGci...\",\n      \"signature\": \"...\"\n    }]\n  }\n}\n```\n\n### 4. Witness Revision\n\nAnchors revision to external timestamping service.\n\n**Purpose**: Prove existence at specific time via blockchain or TSA\n\n**Fields**:\n- `witness_merkle_root`: Root hash of Merkle tree\n- `witness_timestamp`: Unix timestamp from witness service\n- `witness_network`: Network used (`\"mainnet\"`, `\"sepolia\"`, `\"holesky\"`, `\"tsa\"`, `\"nostr\"`)\n- `witness_smart_contract_address`: Contract address (Ethereum)\n- `witness_transaction_hash`: Transaction hash\n- `witness_sender_account_address`: Account that witnessed\n- `witness_merkle_proof`: Merkle proof array\n\n**Example (Ethereum)**:\n```json\n{\n  \"previous_verification_hash\": \"0xabc123...\",\n  \"local_timestamp\": \"2024-01-01T12:02:00\",\n  \"revision_type\": \"witness\",\n  \"version\": \"https://aqua-protocol.org/docs/v3/schema_2 | SHA256 | Method: scalar\",\n  \"witness_merkle_root\": \"0xdef456...\",\n  \"witness_timestamp\": 1704110520,\n  \"witness_network\": \"sepolia\",\n  \"witness_smart_contract_address\": \"0x5FbDB2315678afecb367f032d93F642f64180aa3\",\n  \"witness_transaction_hash\": \"0x9f86d081...\",\n  \"witness_sender_account_address\": \"0x742d35Cc...\",\n  \"witness_merkle_proof\": []\n}\n```\n\n### 5. Link Revision\n\nConnects to other AquaTree chains.\n\n**Purpose**: Establish relationships between separate chains\n\n**Fields**:\n- `link_type`: Type of link relationship (application-specific)\n- `link_verification_hashes`: Array of hashes from other chains\n- `link_file_hashes`: Array of corresponding file hashes\n\n**Example**:\n```json\n{\n  \"previous_verification_hash\": \"0xabc123...\",\n  \"local_timestamp\": \"2024-01-01T12:03:00\",\n  \"revision_type\": \"link\",\n  \"version\": \"https://aqua-protocol.org/docs/v3/schema_2 | SHA256 | Method: scalar\",\n  \"link_type\": \"dependency\",\n  \"link_verification_hashes\": [\n    \"0x111...\",\n    \"0x222...\",\n    \"0x333...\"\n  ],\n  \"link_file_hashes\": [\n    \"0xaaa...\",\n    \"0xbbb...\",\n    \"0xccc...\"\n  ]\n}\n```\n\n## Methods: Scalar vs Tree\n\nV3 supports two canonicalization methods, specified in the version string.\n\n### Scalar Method\n\n**Format**: `Method: scalar`\n\n**How it works**:\n- Revision is serialized as-is\n- Hash computed directly from canonical JSON\n- Simple, straightforward\n\n**When to use**:\n- Small revisions\n- Simple file/form data\n- Quick operations\n\n**Example**:\n```typescript\nversion: \"https://aqua-protocol.org/docs/v3/schema_2 | SHA256 | Method: scalar\"\n// No leaves field\n```\n\n### Tree Method\n\n**Format**: `Method: tree`\n\n**How it works**:\n- Content broken into key-value leaves\n- Each leaf hashed individually\n- Merkle tree constructed from leaves\n- Root becomes the verification hash\n\n**When to use**:\n- Large files or forms\n- Selective disclosure needed\n- Proof of specific fields\n\n**Example**:\n```typescript\nversion: \"https://aqua-protocol.org/docs/v3/schema_2 | SHA256 | Method: tree\"\nleaves: [\n  \"0xhash_of_key_value_1\",\n  \"0xhash_of_key_value_2\",\n  \"0xhash_of_key_value_3\"\n]\n```\n\n**Leaf Generation**:\n```typescript\n// For form data: { \"name\": \"John\", \"email\": \"john@example.com\" }\nleaves = [\n  SHA256(\"name:John\"),\n  SHA256(\"email:john@example.com\")\n]\n```\n\n## Chains and Trees\n\n### Linear Chain\n\nSimple sequence of revisions:\n\n```\nGenesis � Signature � Witness � Update � Signature � Witness\n```\n\nEach revision references the previous one.\n\n### Branching Tree\n\nMultiple paths from a common ancestor:\n\n```\n            Genesis\n               �\n          Signature\n             /  \\\n        Branch A  Branch B\n           �        �\n        Update 1  Update 2\n```\n\nV3 supports branching, allowing parallel development paths.\n\n### Path Mapping\n\nThe `treeMapping` provides paths to each revision:\n\n```typescript\n{\n  paths: {\n    \"genesis_hash\": [\"genesis_hash\"],\n    \"sig_hash\": [\"genesis_hash\", \"sig_hash\"],\n    \"branch_a_hash\": [\"genesis_hash\", \"sig_hash\", \"branch_a_hash\"],\n    \"branch_b_hash\": [\"genesis_hash\", \"sig_hash\", \"branch_b_hash\"]\n  },\n  latestHash: \"branch_a_hash\"  // Longest path\n}\n```\n\n## File Object\n\nInput format for creating revisions:\n\n```typescript\ninterface FileObject {\n  fileName: string           // Display name\n  fileContent: string |      // Text content\n                AquaTree |   // Linked tree\n                Uint8Array | // Binary data\n                Record\u003cstring, string\u003e | // Form data\n                object       // Structured data\n  path: string              // File path\n  fileSize?: number         // Size in bytes\n}\n```\n\n### Content Types\n\n**Text**: Plain text, HTML, JSON\n```typescript\n{\n  fileName: \"doc.txt\",\n  fileContent: \"Hello World\",\n  path: \"/docs/doc.txt\"\n}\n```\n\n**Binary**: Images, PDFs, any binary file\n```typescript\n{\n  fileName: \"image.png\",\n  fileContent: new Uint8Array([...]),\n  path: \"/images/image.png\"\n}\n```\n\n**Form**: Key-value structured data\n```typescript\n{\n  fileName: \"form.json\",\n  fileContent: {\n    \"field1\": \"value1\",\n    \"field2\": \"value2\"\n  },\n  path: \"/forms/form.json\"\n}\n```\n\n**Link**: Reference to another AquaTree\n```typescript\n{\n  fileName: \"linked.json\",\n  fileContent: anotherAquaTree,\n  path: \"/links/linked.json\"\n}\n```\n\n## Verification Graph\n\nResult of verification includes a graph structure:\n\n```typescript\ninterface VerificationGraphData {\n  hash: string\n  previous_verification_hash: string\n  timestamp: string\n  isValidationSuccessful: boolean\n  revisionType: RevisionType\n  info: RevisionGraphInfo  // Type-specific details\n  verificationGraphData: VerificationGraphData[]      // Children\n  linkVerificationGraphData: VerificationGraphData[]  // Links\n}\n```\n\n### Traversing the Graph\n\n```typescript\nfunction printVerification(graph: VerificationGraphData, depth = 0) {\n  const indent = \"  \".repeat(depth);\n  const status = graph.isValidationSuccessful ? \"\u0013\" : \"\u0017\";\n  console.log(`${indent}${status} ${graph.revisionType} (${graph.hash.slice(0, 10)}...)`);\n\n  // Traverse children\n  graph.verificationGraphData.forEach(child =\u003e {\n    printVerification(child, depth + 1);\n  });\n\n  // Traverse links\n  graph.linkVerificationGraphData.forEach(link =\u003e {\n    console.log(`${indent}  � Linked:`);\n    printVerification(link, depth + 2);\n  });\n}\n```\n\n## Credentials\n\nConfiguration for signing and witnessing:\n\n```typescript\ninterface CredentialsData {\n  mnemonic: string             // BIP39 mnemonic for CLI signing\n  nostr_sk: string             // Nostr secret key\n  did_key: string              // DID key for DID signing\n  alchemy_key: string          // Alchemy API key for verification\n  witness_eth_network: string  // \"mainnet\", \"sepolia\", \"holesky\"\n  witness_method: string       // \"cli\" or \"metamask\"\n  p12_password?: string        // P12 certificate password\n  p12_content?: string         // P12 certificate content\n}\n```\n\n## Logging\n\nV3 uses typed logging throughout:\n\n```typescript\nenum LogType {\n  SUCCESS = \"success\",\n  INFO = \"info\",\n  ERROR = \"error\",\n  WARNING = \"warning\",\n  HINT = \"hint\",\n  DEBUGDATA = \"debug_data\",\n  // ... revision types with emojis\n  FILE = \"file\",      // =�\n  LINK = \"link\",      // =\u0017\n  SIGNATURE = \"signature\",  // =\u000f\n  WITNESS = \"witness\",      // =@\n  FORM = \"form\"            // =�\n}\n```\n\nEach operation returns logs for debugging and user feedback.\n\n## Best Practices\n\n### 1. Genesis Patterns\n\n**Single File**:\n```\nFile Genesis � Sign � Witness\n```\n\n**Form Data**:\n```\nForm Genesis � Sign � Witness\n```\n\n### 2. Update Patterns\n\n**Content Update**:\n```\n... � New File Revision � Sign � Witness\n```\n\n**Multi-Party**:\n```\n... � Sign (Party 1) � Sign (Party 2) � Witness\n```\n\n### 3. Linking Patterns\n\n**Dependencies**:\n```\nMain Document � Link (to dependencies) � Sign � Witness\n```\n\n**Aggregation**:\n```\nComponent 1 \u0010\nComponent 2 \u001c� Aggregation Link � Sign � Witness\nComponent 3 \u0018\n```\n\n### 4. Verification Patterns\n\n**Full Chain**:\n```typescript\nconst result = await aquafier.verifyRevisionChain(aquaTree);\n```\n\n**Specific Revision**:\n```typescript\nconst revision = aquaTree.revisions[specificHash];\n// Manually verify hash computation\n```\n\n### 5. Storage Patterns\n\n**Database**: Store serialized AquaTree JSON\n```typescript\nconst json = JSON.stringify(aquaTree);\ndb.save(documentId, json);\n```\n\n**File System**: Save as .aqua.json file\n```typescript\nfs.writeFileSync('document.aqua.json', JSON.stringify(aquaTree, null, 2));\n```\n\n## Common Patterns\n\n### Document Lifecycle\n\n```\n1. Create � File Genesis\n2. Review � Sign (Reviewer)\n3. Approve � Sign (Approver)\n4. Timestamp � Witness (Ethereum)\n5. Archive � Store AquaTree\n6. Verify � Check entire chain\n```\n\n### Multi-Document Project\n\n```\n1. Create each document � Individual AquaTrees\n2. Link together � Link Revision in main tree\n3. Sign project � Sign main tree\n4. Witness � Witness main tree\n5. All documents timestamped through link\n```\n\n## See Also\n\n- [Introduction](/previous_versions/version_3/introduction) - Overview and quick start\n- [Tooling](/previous_versions/version_3/tooling) - SDK API reference\n- [Schema Reference](/previous_versions/version_3/schema) - Detailed specifications\n"])</script><script>self.__next_f.push([1,"1f:T2045,"])</script><script>self.__next_f.push([1,"\n# Aqua Protocol v3\n\nAqua Protocol v3 is a mature version of the protocol with a comprehensive JavaScript/TypeScript SDK. It provides a robust framework for creating verifiable revision chains with support for files, forms, signatures, witnesses, and links.\n\n## Overview\n\nVersion 3 represents a stable, production-ready implementation of the Aqua Protocol specifically designed for JavaScript/TypeScript environments. It offers:\n\n- **Cross-Platform Support**: Node.js, Web browsers, and React Native\n- **Type Safety**: Full TypeScript support with comprehensive type definitions\n- **Flexible Revision Types**: File, Form, Signature, Witness, and Link revisions\n- **Multiple Signing Methods**: CLI, MetaMask, DID, and P12 certificate signing\n- **Multi-Network Witnessing**: Ethereum (mainnet, Sepolia, Holesky), Nostr, and TSA\n- **Tree Structure**: Native support for revision trees and path mapping\n\n## Version Identifier\n\n```\nhttps://aqua-protocol.org/docs/v3/schema_2 | SHA256 | Method: scalar/tree\n```\n\n## Core Components\n\n### AquaTree Structure\n\nThe AquaTree is the core data structure in v3:\n\n```typescript\ninterface AquaTree {\n  revisions: Revisions      // Map of revision hash to revision data\n  file_index: FileIndex     // Map of file hash to filename\n  tree?: RevisionTree       // Tree structure representation\n  treeMapping?: TreeMapping // Path mappings for navigation\n}\n```\n\n### Revision Types\n\nV3 supports five types of revisions:\n\n1. **File Revision** - Store file metadata and content hashes\n2. **Form Revision** - Store structured form data with key-value pairs\n3. **Signature Revision** - Add cryptographic signatures\n4. **Witness Revision** - Timestamp via blockchain or TSA\n5. **Link Revision** - Connect to other AquaTree chains\n\n## Key Features\n\n### 1. Dual Mode Support\n\n**Scalar Mode**: Direct hash computation\n```typescript\nversion: \"https://aqua-protocol.org/docs/v3/schema_2 | SHA256 | Method: scalar\"\n```\n\n**Tree Mode**: Merkle tree-based with leaves\n```typescript\nversion: \"https://aqua-protocol.org/docs/v3/schema_2 | SHA256 | Method: tree\"\nleaves: [\"hash1\", \"hash2\", \"hash3\", ...]\n```\n\n### 2. Platform Flexibility\n\n```typescript\n// Node.js\nimport Aquafier from 'aqua-js-sdk';\n\n// Web Browser\nimport Aquafier from 'aqua-js-sdk/web';\n\n// React Native\nimport Aquafier from 'aqua-js-sdk/react-native';\n```\n\n### 3. Comprehensive Signing\n\n- **CLI Signing**: Uses mnemonic phrase\n- **MetaMask**: Browser extension integration\n- **DID**: Decentralized identifiers with JWS\n- **P12**: Certificate-based signing\n- **Inline**: Pre-computed signatures\n\n### 4. Multi-Network Witnessing\n\n- **Ethereum**: Mainnet, Sepolia, Holesky testnets\n- **Nostr**: Decentralized social network\n- **TSA**: RFC 3161 timestamp authorities\n\n### 5. Content Flexibility\n\nFile content can be:\n- **Text**: HTML, plain text, JSON\n- **Binary**: Images, PDFs, any file type (as Uint8Array)\n- **Forms**: Key-value structured data\n- **Links**: References to other AquaTrees\n\n## Quick Start Example\n\n```typescript\nimport Aquafier, { FileObject } from 'aqua-js-sdk';\n\n// Initialize Aquafier\nconst aquafier = new Aquafier();\n\n// Create file object\nconst fileObject: FileObject = {\n  fileName: \"document.txt\",\n  fileContent: \"Important document content\",\n  path: \"/documents/document.txt\"\n};\n\n// Create genesis revision\nconst result = await aquafier.createGenesisRevision(fileObject);\n\nif (result.isErr) {\n  console.error(\"Error creating revision\");\n  result.logs.forEach(log =\u003e console.log(log));\n  return;\n}\n\n// Access the AquaTree\nconst aquaTree = result.data.aquaTree;\n\n// Sign the revision\nconst signResult = await aquafier.signRevision(\n  aquaTree,\n  \"cli\",  // or \"metamask\", \"did\", \"p12\"\n  credentials\n);\n\n// Witness to blockchain\nconst witnessResult = await aquafier.witnessRevision(\n  signResult.data.aquaTree,\n  \"eth\",  // or \"nostr\", \"tsa\"\n  witnessConfig\n);\n\n// Save aquaTree JSON for storage/transmission\nconst json = JSON.stringify(witnessResult.data.aquaTree);\n```\n\n## Architecture\n\n### Revision Chain Structure\n\n```\nGenesis Revision (File/Form)\n    ↓ previous_verification_hash\nSignature Revision\n    ↓ previous_verification_hash\nWitness Revision\n    ↓ previous_verification_hash\nNew Content Revision\n    ↓ previous_verification_hash\n...\n```\n\n### Tree Branching\n\nV3 supports tree structures for branching revisions:\n\n```\n        Genesis\n           ↓\n      Signature\n         /  \\\n    Branch A  Branch B\n       ↓        ↓\n    Update 1  Update 2\n```\n\n## Common Fields\n\nAll revisions share these core fields:\n\n| Field | Type | Description |\n|-------|------|-------------|\n| `previous_verification_hash` | string | Hash of previous revision (empty for genesis) |\n| `local_timestamp` | string | ISO 8601 timestamp |\n| `revision_type` | string | Type: `\"file\"`, `\"form\"`, `\"signature\"`, `\"witness\"`, `\"link\"` |\n| `version` | string | Protocol version and method identifier |\n\n## Installation\n\n```bash\nnpm install aqua-js-sdk\n```\n\n### Requirements\n\n- Node.js v20.9.0 or later\n- TypeScript 5.3+ (optional, for type checking)\n\n### Peer Dependencies\n\n- `ethers` ^6.7.1 (for Ethereum operations)\n- `react-native-fs` (optional, for React Native)\n- `@react-native-async-storage/async-storage` (optional, for React Native)\n\n## Use Cases\n\n### Document Notarization\n```\nDocument → Sign (Author) → Witness (Ethereum) → Verifiable Proof\n```\n\n### Form Data Accountability\n```\nForm Submission → Sign (User) → Witness → Audit Trail\n```\n\n### Multi-Party Approval\n```\nDocument → Sign (Party 1) → Sign (Party 2) → Witness → Approved\n```\n\n### Supply Chain Tracking\n```\nEvent 1 → Link to Event 2 → Link to Event 3 → Complete Chain\n```\n\n### Content Versioning\n```\nVersion 1 → Update → Version 2 → Update → Version 3 → History\n```\n\n## Verification\n\nV3 includes comprehensive verification capabilities:\n\n```typescript\n// Verify entire chain\nconst verification = await aquafier.verifyRevisionChain(aquaTree);\n\n// Check results\nverification.verificationGraphData.forEach(node =\u003e {\n  console.log(`${node.revisionType}: ${node.isValidationSuccessful ? '✓' : '✗'}`);\n});\n```\n\n## Key Differences from v4\n\n| Feature | v3 | v4 |\n|---------|----|----|\n| Language | JavaScript/TypeScript | Rust (with WASM support) |\n| Template System | No formal templates | Template revisions with JSON Schema |\n| Signature Types | 4 types (CLI, MetaMask, DID, P12) | 3 types (RSA, EIP-191, DID:JWS) |\n| Version Format | URL with embedded method | URL only, method as field |\n| Form Support | Native form revision type | Forms as object revisions with templates |\n| Platform Focus | Web/Node.js/React Native | Cross-platform with WASM |\n\n## Migration Considerations\n\n### From v3 to v4\n\n- **Breaking Changes**: Schema structure differs significantly\n- **No Direct Migration**: v3 and v4 chains are not directly compatible\n- **Use Case**: Continue using v3 for JavaScript-first projects\n- **Future**: v4 offers more structure and cross-platform consistency\n\n### When to Use v3\n\n- Existing JavaScript/TypeScript projects\n- React Native applications\n- Need for form revision type\n- Mature, stable implementation required\n- Quick prototyping and development\n\n### When to Use v4\n\n- New projects requiring maximum interoperability\n- Need for formal schema validation\n- Rust or multi-language environments\n- WASM compilation for web\n- Template-based data structures\n\n## Community and Support\n\n- **GitHub**: [aqua-verifier-js-lib](https://github.com/inblockio/aqua-verifier-js-lib)\n- **Issues**: Report bugs and request features on GitHub\n- **Documentation**: Examples in `/examples` directory\n\n## Next Steps\n\n- [Concepts](/previous_versions/version_3/concepts) - Core concepts and terminology\n- [Tooling](/previous_versions/version_3/tooling) - SDK usage and API reference\n- [Schema Reference](/previous_versions/version_3/schema) - Detailed revision specifications\n- [Examples](https://github.com/inblockio/aqua-verifier-js-lib/tree/main/examples) - Code examples\n\n## Version History\n\n- **3.2.1**: Current stable release\n- **3.2.0**: React Native support added\n- **3.1.x**: Performance improvements\n- **3.0.0**: Major release with TypeScript rewrite\n\nFor detailed changelog, see the [GitHub releases](https://github.com/inblockio/aqua-verifier-js-lib/releases).\n"])</script><script>self.__next_f.push([1,"20:T2045,"])</script><script>self.__next_f.push([1,"\n# Aqua Protocol v3\n\nAqua Protocol v3 is a mature version of the protocol with a comprehensive JavaScript/TypeScript SDK. It provides a robust framework for creating verifiable revision chains with support for files, forms, signatures, witnesses, and links.\n\n## Overview\n\nVersion 3 represents a stable, production-ready implementation of the Aqua Protocol specifically designed for JavaScript/TypeScript environments. It offers:\n\n- **Cross-Platform Support**: Node.js, Web browsers, and React Native\n- **Type Safety**: Full TypeScript support with comprehensive type definitions\n- **Flexible Revision Types**: File, Form, Signature, Witness, and Link revisions\n- **Multiple Signing Methods**: CLI, MetaMask, DID, and P12 certificate signing\n- **Multi-Network Witnessing**: Ethereum (mainnet, Sepolia, Holesky), Nostr, and TSA\n- **Tree Structure**: Native support for revision trees and path mapping\n\n## Version Identifier\n\n```\nhttps://aqua-protocol.org/docs/v3/schema_2 | SHA256 | Method: scalar/tree\n```\n\n## Core Components\n\n### AquaTree Structure\n\nThe AquaTree is the core data structure in v3:\n\n```typescript\ninterface AquaTree {\n  revisions: Revisions      // Map of revision hash to revision data\n  file_index: FileIndex     // Map of file hash to filename\n  tree?: RevisionTree       // Tree structure representation\n  treeMapping?: TreeMapping // Path mappings for navigation\n}\n```\n\n### Revision Types\n\nV3 supports five types of revisions:\n\n1. **File Revision** - Store file metadata and content hashes\n2. **Form Revision** - Store structured form data with key-value pairs\n3. **Signature Revision** - Add cryptographic signatures\n4. **Witness Revision** - Timestamp via blockchain or TSA\n5. **Link Revision** - Connect to other AquaTree chains\n\n## Key Features\n\n### 1. Dual Mode Support\n\n**Scalar Mode**: Direct hash computation\n```typescript\nversion: \"https://aqua-protocol.org/docs/v3/schema_2 | SHA256 | Method: scalar\"\n```\n\n**Tree Mode**: Merkle tree-based with leaves\n```typescript\nversion: \"https://aqua-protocol.org/docs/v3/schema_2 | SHA256 | Method: tree\"\nleaves: [\"hash1\", \"hash2\", \"hash3\", ...]\n```\n\n### 2. Platform Flexibility\n\n```typescript\n// Node.js\nimport Aquafier from 'aqua-js-sdk';\n\n// Web Browser\nimport Aquafier from 'aqua-js-sdk/web';\n\n// React Native\nimport Aquafier from 'aqua-js-sdk/react-native';\n```\n\n### 3. Comprehensive Signing\n\n- **CLI Signing**: Uses mnemonic phrase\n- **MetaMask**: Browser extension integration\n- **DID**: Decentralized identifiers with JWS\n- **P12**: Certificate-based signing\n- **Inline**: Pre-computed signatures\n\n### 4. Multi-Network Witnessing\n\n- **Ethereum**: Mainnet, Sepolia, Holesky testnets\n- **Nostr**: Decentralized social network\n- **TSA**: RFC 3161 timestamp authorities\n\n### 5. Content Flexibility\n\nFile content can be:\n- **Text**: HTML, plain text, JSON\n- **Binary**: Images, PDFs, any file type (as Uint8Array)\n- **Forms**: Key-value structured data\n- **Links**: References to other AquaTrees\n\n## Quick Start Example\n\n```typescript\nimport Aquafier, { FileObject } from 'aqua-js-sdk';\n\n// Initialize Aquafier\nconst aquafier = new Aquafier();\n\n// Create file object\nconst fileObject: FileObject = {\n  fileName: \"document.txt\",\n  fileContent: \"Important document content\",\n  path: \"/documents/document.txt\"\n};\n\n// Create genesis revision\nconst result = await aquafier.createGenesisRevision(fileObject);\n\nif (result.isErr) {\n  console.error(\"Error creating revision\");\n  result.logs.forEach(log =\u003e console.log(log));\n  return;\n}\n\n// Access the AquaTree\nconst aquaTree = result.data.aquaTree;\n\n// Sign the revision\nconst signResult = await aquafier.signRevision(\n  aquaTree,\n  \"cli\",  // or \"metamask\", \"did\", \"p12\"\n  credentials\n);\n\n// Witness to blockchain\nconst witnessResult = await aquafier.witnessRevision(\n  signResult.data.aquaTree,\n  \"eth\",  // or \"nostr\", \"tsa\"\n  witnessConfig\n);\n\n// Save aquaTree JSON for storage/transmission\nconst json = JSON.stringify(witnessResult.data.aquaTree);\n```\n\n## Architecture\n\n### Revision Chain Structure\n\n```\nGenesis Revision (File/Form)\n    ↓ previous_verification_hash\nSignature Revision\n    ↓ previous_verification_hash\nWitness Revision\n    ↓ previous_verification_hash\nNew Content Revision\n    ↓ previous_verification_hash\n...\n```\n\n### Tree Branching\n\nV3 supports tree structures for branching revisions:\n\n```\n        Genesis\n           ↓\n      Signature\n         /  \\\n    Branch A  Branch B\n       ↓        ↓\n    Update 1  Update 2\n```\n\n## Common Fields\n\nAll revisions share these core fields:\n\n| Field | Type | Description |\n|-------|------|-------------|\n| `previous_verification_hash` | string | Hash of previous revision (empty for genesis) |\n| `local_timestamp` | string | ISO 8601 timestamp |\n| `revision_type` | string | Type: `\"file\"`, `\"form\"`, `\"signature\"`, `\"witness\"`, `\"link\"` |\n| `version` | string | Protocol version and method identifier |\n\n## Installation\n\n```bash\nnpm install aqua-js-sdk\n```\n\n### Requirements\n\n- Node.js v20.9.0 or later\n- TypeScript 5.3+ (optional, for type checking)\n\n### Peer Dependencies\n\n- `ethers` ^6.7.1 (for Ethereum operations)\n- `react-native-fs` (optional, for React Native)\n- `@react-native-async-storage/async-storage` (optional, for React Native)\n\n## Use Cases\n\n### Document Notarization\n```\nDocument → Sign (Author) → Witness (Ethereum) → Verifiable Proof\n```\n\n### Form Data Accountability\n```\nForm Submission → Sign (User) → Witness → Audit Trail\n```\n\n### Multi-Party Approval\n```\nDocument → Sign (Party 1) → Sign (Party 2) → Witness → Approved\n```\n\n### Supply Chain Tracking\n```\nEvent 1 → Link to Event 2 → Link to Event 3 → Complete Chain\n```\n\n### Content Versioning\n```\nVersion 1 → Update → Version 2 → Update → Version 3 → History\n```\n\n## Verification\n\nV3 includes comprehensive verification capabilities:\n\n```typescript\n// Verify entire chain\nconst verification = await aquafier.verifyRevisionChain(aquaTree);\n\n// Check results\nverification.verificationGraphData.forEach(node =\u003e {\n  console.log(`${node.revisionType}: ${node.isValidationSuccessful ? '✓' : '✗'}`);\n});\n```\n\n## Key Differences from v4\n\n| Feature | v3 | v4 |\n|---------|----|----|\n| Language | JavaScript/TypeScript | Rust (with WASM support) |\n| Template System | No formal templates | Template revisions with JSON Schema |\n| Signature Types | 4 types (CLI, MetaMask, DID, P12) | 3 types (RSA, EIP-191, DID:JWS) |\n| Version Format | URL with embedded method | URL only, method as field |\n| Form Support | Native form revision type | Forms as object revisions with templates |\n| Platform Focus | Web/Node.js/React Native | Cross-platform with WASM |\n\n## Migration Considerations\n\n### From v3 to v4\n\n- **Breaking Changes**: Schema structure differs significantly\n- **No Direct Migration**: v3 and v4 chains are not directly compatible\n- **Use Case**: Continue using v3 for JavaScript-first projects\n- **Future**: v4 offers more structure and cross-platform consistency\n\n### When to Use v3\n\n- Existing JavaScript/TypeScript projects\n- React Native applications\n- Need for form revision type\n- Mature, stable implementation required\n- Quick prototyping and development\n\n### When to Use v4\n\n- New projects requiring maximum interoperability\n- Need for formal schema validation\n- Rust or multi-language environments\n- WASM compilation for web\n- Template-based data structures\n\n## Community and Support\n\n- **GitHub**: [aqua-verifier-js-lib](https://github.com/inblockio/aqua-verifier-js-lib)\n- **Issues**: Report bugs and request features on GitHub\n- **Documentation**: Examples in `/examples` directory\n\n## Next Steps\n\n- [Concepts](/previous_versions/version_3/concepts) - Core concepts and terminology\n- [Tooling](/previous_versions/version_3/tooling) - SDK usage and API reference\n- [Schema Reference](/previous_versions/version_3/schema) - Detailed revision specifications\n- [Examples](https://github.com/inblockio/aqua-verifier-js-lib/tree/main/examples) - Code examples\n\n## Version History\n\n- **3.2.1**: Current stable release\n- **3.2.0**: React Native support added\n- **3.1.x**: Performance improvements\n- **3.0.0**: Major release with TypeScript rewrite\n\nFor detailed changelog, see the [GitHub releases](https://github.com/inblockio/aqua-verifier-js-lib/releases).\n"])</script><script>self.__next_f.push([1,"21:T45aa,"])</script><script>self.__next_f.push([1,"\n# Aqua Protocol v3 - Schema Reference\n\nThis document provides comprehensive technical specifications for all revision types in Aqua Protocol v3. Each revision type has specific fields and validation rules.\n\n## Version String Format\n\n```\nhttps://aqua-protocol.org/docs/v3/schema_2 | SHA256 | Method: {scalar|tree}\n```\n\n**Components:**\n- Protocol URL: `https://aqua-protocol.org/docs/v3/schema_2`\n- Hash Algorithm: `SHA256`\n- Canonicalization Method: `scalar` or `tree`\n\n## Common Fields\n\nAll revisions share these mandatory fields:\n\n| Field | Type | Description | Validation |\n|-------|------|-------------|------------|\n| `previous_verification_hash` | string | Hash of previous revision | Empty string for genesis, otherwise 64-char hex with `0x` prefix |\n| `local_timestamp` | string | ISO 8601 timestamp | Valid ISO 8601 format: `YYYY-MM-DDTHH:mm:ss` |\n| `revision_type` | string | Type of revision | One of: `\"file\"`, `\"form\"`, `\"signature\"`, `\"witness\"`, `\"link\"` |\n| `version` | string | Protocol version and method | Must match format above |\n\n---\n\n## File Revision\n\nRepresents a file with metadata and optional content.\n\n### Fields\n\n| Field | Type | Required | Description |\n|-------|------|----------|-------------|\n| `previous_verification_hash` | string | Yes | Previous revision hash (empty for genesis) |\n| `local_timestamp` | string | Yes | ISO 8601 timestamp |\n| `revision_type` | string | Yes | Must be `\"file\"` |\n| `version` | string | Yes | Protocol version string |\n| `file_hash` | string | Yes | SHA256 hash of file content (hex with `0x`) |\n| `file_nonce` | string | Yes | Random 16-byte nonce (hex with `0x`) |\n| `content` | string/Uint8Array | No | Optional file content |\n| `leaves` | string[] | Conditional | Required if `Method: tree`, array of leaf hashes |\n\n### Genesis File Revision (Scalar)\n\n```json\n{\n  \"previous_verification_hash\": \"\",\n  \"local_timestamp\": \"2024-01-01T12:00:00\",\n  \"revision_type\": \"file\",\n  \"version\": \"https://aqua-protocol.org/docs/v3/schema_2 | SHA256 | Method: scalar\",\n  \"file_hash\": \"0x9f86d081884c7d659a2feaa0c55ad015a3bf4f1b2b0b822cd15d6c15b0f00a08\",\n  \"file_nonce\": \"0x3fa8b1c2d3e4f5a67b8c9d0e1f2a3b4c\"\n}\n```\n\n### Genesis File Revision (Tree)\n\n```json\n{\n  \"previous_verification_hash\": \"\",\n  \"local_timestamp\": \"2024-01-01T12:00:00\",\n  \"revision_type\": \"file\",\n  \"version\": \"https://aqua-protocol.org/docs/v3/schema_2 | SHA256 | Method: tree\",\n  \"file_hash\": \"0x9f86d081884c7d659a2feaa0c55ad015a3bf4f1b2b0b822cd15d6c15b0f00a08\",\n  \"file_nonce\": \"0x3fa8b1c2d3e4f5a67b8c9d0e1f2a3b4c\",\n  \"leaves\": [\n    \"0x1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef\",\n    \"0xabcdef1234567890abcdef1234567890abcdef1234567890abcdef1234567890\"\n  ]\n}\n```\n\n### With Content\n\n```json\n{\n  \"previous_verification_hash\": \"\",\n  \"local_timestamp\": \"2024-01-01T12:00:00\",\n  \"revision_type\": \"file\",\n  \"version\": \"https://aqua-protocol.org/docs/v3/schema_2 | SHA256 | Method: scalar\",\n  \"file_hash\": \"0x9f86d081884c7d659a2feaa0c55ad015a3bf4f1b2b0b822cd15d6c15b0f00a08\",\n  \"file_nonce\": \"0x3fa8b1c2d3e4f5a67b8c9d0e1f2a3b4c\",\n  \"content\": \"This is the file content as a string\"\n}\n```\n\n### Validation Rules\n\n1. `file_hash` must match SHA256 of file content\n2. `file_nonce` must be exactly 16 bytes (32 hex chars + `0x`)\n3. If `Method: tree`, `leaves` array must be present\n4. If `Method: scalar`, `leaves` must be absent\n5. `content` is optional but if present, hash must match `file_hash`\n\n---\n\n## Form Revision\n\nStores structured key-value data.\n\n### Fields\n\n| Field | Type | Required | Description |\n|-------|------|----------|-------------|\n| `previous_verification_hash` | string | Yes | Previous revision hash (empty for genesis) |\n| `local_timestamp` | string | Yes | ISO 8601 timestamp |\n| `revision_type` | string | Yes | Must be `\"form\"` |\n| `version` | string | Yes | Protocol version string |\n| `file_hash` | string | Yes | SHA256 hash of form data |\n| `file_nonce` | string | Yes | Random 16-byte nonce |\n| `content` | object | Yes | Form data as key-value pairs |\n| `leaves` | string[] | Conditional | Required if `Method: tree` |\n\n### Example (Scalar)\n\n```json\n{\n  \"previous_verification_hash\": \"\",\n  \"local_timestamp\": \"2024-01-01T12:00:00\",\n  \"revision_type\": \"form\",\n  \"version\": \"https://aqua-protocol.org/docs/v3/schema_2 | SHA256 | Method: scalar\",\n  \"file_hash\": \"0xabc123def456...\",\n  \"file_nonce\": \"0x7c8d9e0f1a2b3c4d5e6f7a8b9c0d1e2f\",\n  \"content\": {\n    \"name\": \"John Doe\",\n    \"email\": \"john@example.com\",\n    \"organization\": \"Example Corp\",\n    \"role\": \"Developer\"\n  }\n}\n```\n\n### Example (Tree)\n\n```json\n{\n  \"previous_verification_hash\": \"\",\n  \"local_timestamp\": \"2024-01-01T12:00:00\",\n  \"revision_type\": \"form\",\n  \"version\": \"https://aqua-protocol.org/docs/v3/schema_2 | SHA256 | Method: tree\",\n  \"file_hash\": \"0xabc123def456...\",\n  \"file_nonce\": \"0x7c8d9e0f1a2b3c4d5e6f7a8b9c0d1e2f\",\n  \"content\": {\n    \"name\": \"John Doe\",\n    \"email\": \"john@example.com\",\n    \"organization\": \"Example Corp\",\n    \"role\": \"Developer\"\n  },\n  \"leaves\": [\n    \"0x...\",  // SHA256(\"name:John Doe\")\n    \"0x...\",  // SHA256(\"email:john@example.com\")\n    \"0x...\",  // SHA256(\"organization:Example Corp\")\n    \"0x...\"   // SHA256(\"role:Developer\")\n  ]\n}\n```\n\n### Leaf Computation (Tree Mode)\n\nFor each key-value pair in `content`:\n```typescript\nleaf_hash = SHA256(`${key}:${value}`)\n```\n\n### Validation Rules\n\n1. `content` must be a valid JSON object\n2. All values in `content` must be strings\n3. `file_hash` must match hash of canonicalized content\n4. If `Method: tree`, number of leaves must match number of keys in content\n\n---\n\n## Signature Revision\n\nAdds cryptographic signature to verify authenticity.\n\n### Common Fields\n\n| Field | Type | Required | Description |\n|-------|------|----------|-------------|\n| `previous_verification_hash` | string | Yes | Hash of revision being signed |\n| `local_timestamp` | string | Yes | ISO 8601 timestamp |\n| `revision_type` | string | Yes | Must be `\"signature\"` |\n| `version` | string | Yes | Protocol version string |\n| `signature_type` | string | Yes | Type: `\"cli\"`, `\"metamask\"`, `\"did\"`, `\"p12\"`, `\"inline\"` |\n\n### CLI / MetaMask Signature\n\n**Additional Fields:**\n| Field | Type | Required | Description |\n|-------|------|----------|-------------|\n| `signature` | string | Yes | Hex-encoded signature (65 bytes for ECDSA) |\n| `signature_wallet_address` | string | Yes | Ethereum address (EIP-55 checksummed) |\n\n**Example:**\n```json\n{\n  \"previous_verification_hash\": \"0xabc123...\",\n  \"local_timestamp\": \"2024-01-01T12:01:00\",\n  \"revision_type\": \"signature\",\n  \"version\": \"https://aqua-protocol.org/docs/v3/schema_2 | SHA256 | Method: scalar\",\n  \"signature_type\": \"cli\",\n  \"signature\": \"0x8c9d0e1f2a3b4c5d6e7f8a9b0c1d2e3f4a5b6c7d8e9f0a1b2c3d4e5f6a7b8c9d0e1f2a3b4c5d6e7f8a9b0c1d2e3f4a5b6c7d8e9f0a1b2c3d4e5f6a7b8c9d1c\",\n  \"signature_wallet_address\": \"0x742d35Cc6634C0532925a3b844Bc9e7595f0bEb8\"\n}\n```\n\n### DID Signature\n\n**Additional Fields:**\n| Field | Type | Required | Description |\n|-------|------|----------|-------------|\n| `signature` | object | Yes | JWS (JSON Web Signature) object |\n\n**Signature Object Structure:**\n```typescript\n{\n  payload: string;       // Base64url-encoded payload\n  signatures: [{\n    protected: string;   // Base64url-encoded protected header\n    signature: string;   // Base64url-encoded signature\n  }]\n}\n```\n\n**Example:**\n```json\n{\n  \"previous_verification_hash\": \"0xabc123...\",\n  \"local_timestamp\": \"2024-01-01T12:01:00\",\n  \"revision_type\": \"signature\",\n  \"version\": \"https://aqua-protocol.org/docs/v3/schema_2 | SHA256 | Method: scalar\",\n  \"signature_type\": \"did\",\n  \"signature\": {\n    \"payload\": \"eyJhbGciOiJFZERTQSIsImI2NCI6ZmFsc2UsImNyaXQiOlsiYjY0Il19\",\n    \"signatures\": [{\n      \"protected\": \"eyJhbGciOiJFZERTQSJ9\",\n      \"signature\": \"kKvXJ_qjJRtGQFLpRvQlCdXMFD8sSE4DTlbMmLqg0BJ9FQKLHvX7y_z5Pr8u0xT8D2vCj9qL1KzN4rP2MzKfBQ\"\n    }]\n  }\n}\n```\n\n### P12 Certificate Signature\n\n**Additional Fields:**\n| Field | Type | Required | Description |\n|-------|------|----------|-------------|\n| `signature` | string | Yes | Hex-encoded signature |\n| `signature_public_key` | string | Yes | Hex-encoded DER public key |\n\n**Example:**\n```json\n{\n  \"previous_verification_hash\": \"0xabc123...\",\n  \"local_timestamp\": \"2024-01-01T12:01:00\",\n  \"revision_type\": \"signature\",\n  \"version\": \"https://aqua-protocol.org/docs/v3/schema_2 | SHA256 | Method: scalar\",\n  \"signature_type\": \"p12\",\n  \"signature\": \"0x...\",\n  \"signature_public_key\": \"0x308201a2300d06092a864886f70d01010105000382018f...\"\n}\n```\n\n### Inline Signature\n\nSame as CLI/MetaMask but with pre-computed signature.\n\n### Validation Rules\n\n1. Signature must be verifiable using provided credentials\n2. For CLI/MetaMask: Address must be recoverable from signature\n3. For DID: JWS must be valid and verifiable\n4. For P12: Signature must verify with public key\n5. Signature must be computed over `previous_verification_hash`\n\n---\n\n## Witness Revision\n\nAnchors revision to blockchain or timestamping service.\n\n### Fields\n\n| Field | Type | Required | Description |\n|-------|------|----------|-------------|\n| `previous_verification_hash` | string | Yes | Hash being witnessed |\n| `local_timestamp` | string | Yes | ISO 8601 timestamp |\n| `revision_type` | string | Yes | Must be `\"witness\"` |\n| `version` | string | Yes | Protocol version string |\n| `witness_merkle_root` | string | Yes | Root hash of Merkle tree |\n| `witness_timestamp` | number | Yes | Unix timestamp from witness service |\n| `witness_network` | string | Yes | Network: `\"mainnet\"`, `\"sepolia\"`, `\"holesky\"`, `\"tsa\"`, `\"nostr\"` |\n| `witness_smart_contract_address` | string | Conditional | Required for Ethereum |\n| `witness_transaction_hash` | string | Yes | Transaction or event hash |\n| `witness_sender_account_address` | string | Conditional | Required for Ethereum |\n| `witness_merkle_proof` | string[] | Yes | Merkle proof (empty for single witness) |\n\n### Ethereum Witness Example\n\n```json\n{\n  \"previous_verification_hash\": \"0xabc123...\",\n  \"local_timestamp\": \"2024-01-01T12:02:00\",\n  \"revision_type\": \"witness\",\n  \"version\": \"https://aqua-protocol.org/docs/v3/schema_2 | SHA256 | Method: scalar\",\n  \"witness_merkle_root\": \"0xdef456...\",\n  \"witness_timestamp\": 1704110520,\n  \"witness_network\": \"sepolia\",\n  \"witness_smart_contract_address\": \"0x5FbDB2315678afecb367f032d93F642f64180aa3\",\n  \"witness_transaction_hash\": \"0x9f86d081884c7d659a2feaa0c55ad015a3bf4f1b2b0b822cd15d6c15b0f00a08\",\n  \"witness_sender_account_address\": \"0x742d35Cc6634C0532925a3b844Bc9e7595f0bEb8\",\n  \"witness_merkle_proof\": []\n}\n```\n\n### Batched Witness Example\n\nMultiple revisions witnessed in single transaction:\n\n```json\n{\n  \"previous_verification_hash\": \"0xabc123...\",\n  \"local_timestamp\": \"2024-01-01T12:02:00\",\n  \"revision_type\": \"witness\",\n  \"version\": \"https://aqua-protocol.org/docs/v3/schema_2 | SHA256 | Method: scalar\",\n  \"witness_merkle_root\": \"0xroot...\",\n  \"witness_timestamp\": 1704110520,\n  \"witness_network\": \"mainnet\",\n  \"witness_smart_contract_address\": \"0x5FbDB2315678afecb367f032d93F642f64180aa3\",\n  \"witness_transaction_hash\": \"0x9f86d081...\",\n  \"witness_sender_account_address\": \"0x742d35Cc...\",\n  \"witness_merkle_proof\": [\n    \"0xsibling_hash_1\",\n    \"0xsibling_hash_2\",\n    \"0xsibling_hash_3\"\n  ]\n}\n```\n\n### Nostr Witness Example\n\n```json\n{\n  \"previous_verification_hash\": \"0xabc123...\",\n  \"local_timestamp\": \"2024-01-01T12:02:00\",\n  \"revision_type\": \"witness\",\n  \"version\": \"https://aqua-protocol.org/docs/v3/schema_2 | SHA256 | Method: scalar\",\n  \"witness_merkle_root\": \"0xabc123...\",\n  \"witness_timestamp\": 1704110520,\n  \"witness_network\": \"nostr\",\n  \"witness_smart_contract_address\": \"\",\n  \"witness_transaction_hash\": \"nevent1qqsw...\",\n  \"witness_sender_account_address\": \"npub1...\",\n  \"witness_merkle_proof\": []\n}\n```\n\n### TSA Witness Example\n\n```json\n{\n  \"previous_verification_hash\": \"0xabc123...\",\n  \"local_timestamp\": \"2024-01-01T12:02:00\",\n  \"revision_type\": \"witness\",\n  \"version\": \"https://aqua-protocol.org/docs/v3/schema_2 | SHA256 | Method: scalar\",\n  \"witness_merkle_root\": \"0xabc123...\",\n  \"witness_timestamp\": 1704110520,\n  \"witness_network\": \"tsa\",\n  \"witness_smart_contract_address\": \"https://timestamp.digicert.com\",\n  \"witness_transaction_hash\": \"base64_tsa_response\",\n  \"witness_sender_account_address\": \"\",\n  \"witness_merkle_proof\": []\n}\n```\n\n### Validation Rules\n\n1. For single witness: `witness_merkle_proof` must be empty array\n2. For single witness: `witness_merkle_root` equals `previous_verification_hash`\n3. For batched: Merkle proof must verify back to `witness_merkle_root`\n4. Transaction must exist and be confirmed on specified network\n5. `witness_timestamp` should match blockchain/service timestamp\n6. For Ethereum: Contract address and sender address required\n\n---\n\n## Link Revision\n\nConnects to other AquaTree chains.\n\n### Fields\n\n| Field | Type | Required | Description |\n|-------|------|----------|-------------|\n| `previous_verification_hash` | string | Yes | Previous revision in this chain |\n| `local_timestamp` | string | Yes | ISO 8601 timestamp |\n| `revision_type` | string | Yes | Must be `\"link\"` |\n| `version` | string | Yes | Protocol version string |\n| `link_type` | string | No | Application-specific link type |\n| `link_verification_hashes` | string[] | Yes | Array of hashes from other chains |\n| `link_file_hashes` | string[] | No | Corresponding file hashes |\n\n### Example\n\n```json\n{\n  \"previous_verification_hash\": \"0xabc123...\",\n  \"local_timestamp\": \"2024-01-01T12:03:00\",\n  \"revision_type\": \"link\",\n  \"version\": \"https://aqua-protocol.org/docs/v3/schema_2 | SHA256 | Method: scalar\",\n  \"link_type\": \"dependencies\",\n  \"link_verification_hashes\": [\n    \"0x111222333444555666777888999000aaabbbcccdddeeefff000111222333444\",\n    \"0x222333444555666777888999000aaabbbcccdddeeefff000111222333444555\",\n    \"0x333444555666777888999000aaabbbcccdddeeefff000111222333444555666\"\n  ],\n  \"link_file_hashes\": [\n    \"0xfileHash1...\",\n    \"0xfileHash2...\",\n    \"0xfileHash3...\"\n  ]\n}\n```\n\n### Validation Rules\n\n1. `link_verification_hashes` must be non-empty array\n2. Each hash in array must be valid revision hash\n3. If `link_file_hashes` present, must have same length as `link_verification_hashes`\n4. Referenced revisions should exist (optional strict validation)\n\n---\n\n## Hash Computation\n\n### Scalar Method\n\n1. Serialize revision as canonical JSON (sorted keys)\n2. Compute SHA256 hash of serialized string\n3. Prefix with `0x`\n\n```typescript\nconst canonical = JSON.stringify(sortKeys(revision));\nconst hash = \"0x\" + sha256(canonical).toString('hex');\n```\n\n### Tree Method\n\n1. Extract leaves array from revision\n2. Build Merkle tree from leaves\n3. Root hash becomes verification hash\n\n```typescript\nconst leaves = revision.leaves;\nconst tree = new MerkleTree(leaves, sha256);\nconst hash = \"0x\" + tree.getRoot().toString('hex');\n```\n\n---\n\n## AquaTree Storage Format\n\nComplete AquaTree structure for storage/transmission:\n\n```json\n{\n  \"revisions\": {\n    \"0xgenesis_hash\": {\n      \"previous_verification_hash\": \"\",\n      \"local_timestamp\": \"2024-01-01T12:00:00\",\n      \"revision_type\": \"file\",\n      \"version\": \"https://aqua-protocol.org/docs/v3/schema_2 | SHA256 | Method: scalar\",\n      \"file_hash\": \"0x...\",\n      \"file_nonce\": \"0x...\"\n    },\n    \"0xsignature_hash\": {\n      \"previous_verification_hash\": \"0xgenesis_hash\",\n      \"local_timestamp\": \"2024-01-01T12:01:00\",\n      \"revision_type\": \"signature\",\n      \"version\": \"https://aqua-protocol.org/docs/v3/schema_2 | SHA256 | Method: scalar\",\n      \"signature_type\": \"cli\",\n      \"signature\": \"0x...\",\n      \"signature_wallet_address\": \"0x...\"\n    },\n    \"0xwitness_hash\": {\n      \"previous_verification_hash\": \"0xsignature_hash\",\n      \"local_timestamp\": \"2024-01-01T12:02:00\",\n      \"revision_type\": \"witness\",\n      \"version\": \"https://aqua-protocol.org/docs/v3/schema_2 | SHA256 | Method: scalar\",\n      \"witness_merkle_root\": \"0x...\",\n      \"witness_timestamp\": 1704110520,\n      \"witness_network\": \"sepolia\",\n      \"witness_smart_contract_address\": \"0x...\",\n      \"witness_transaction_hash\": \"0x...\",\n      \"witness_sender_account_address\": \"0x...\",\n      \"witness_merkle_proof\": []\n    }\n  },\n  \"file_index\": {\n    \"0xfile_hash\": \"document.pdf\"\n  },\n  \"tree\": {\n    \"hash\": \"0xgenesis_hash\",\n    \"children\": [\n      {\n        \"hash\": \"0xsignature_hash\",\n        \"children\": [\n          {\n            \"hash\": \"0xwitness_hash\",\n            \"children\": []\n          }\n        ]\n      }\n    ]\n  },\n  \"treeMapping\": {\n    \"paths\": {\n      \"0xgenesis_hash\": [\"0xgenesis_hash\"],\n      \"0xsignature_hash\": [\"0xgenesis_hash\", \"0xsignature_hash\"],\n      \"0xwitness_hash\": [\"0xgenesis_hash\", \"0xsignature_hash\", \"0xwitness_hash\"]\n    },\n    \"latestHash\": \"0xwitness_hash\"\n  }\n}\n```\n\n---\n\n## Field Constraints\n\n### Hashes\n- Format: Lowercase hexadecimal with `0x` prefix\n- Length: 64 characters (32 bytes) + 2-char prefix = 66 total\n- Example: `0x9f86d081884c7d659a2feaa0c55ad015a3bf4f1b2b0b822cd15d6c15b0f00a08`\n\n### Timestamps\n- Format: ISO 8601\n- Pattern: `YYYY-MM-DDTHH:mm:ss`\n- Example: `2024-01-01T12:00:00`\n\n### Ethereum Addresses\n- Format: EIP-55 checksummed\n- Length: 42 characters (20 bytes + 0x)\n- Mixed case for checksum\n- Example: `0x742d35Cc6634C0532925a3b844Bc9e7595f0bEb8`\n\n### Nonces\n- Length: Exactly 16 bytes (32 hex chars + 0x)\n- Format: Lowercase hexadecimal with `0x` prefix\n- Example: `0x3fa8b1c2d3e4f5a67b8c9d0e1f2a3b4c`\n\n---\n\n## Version Compatibility\n\n- **v3.2.x**: Current version, fully compatible\n- **v3.1.x**: Compatible, minor improvements\n- **v3.0.x**: Compatible, initial TypeScript release\n- **v2.x**: Not compatible, different schema\n\n---\n\n## See Also\n\n- [Introduction](/previous_versions/version_3/introduction) - Getting started\n- [Concepts](/previous_versions/version_3/concepts) - Core concepts\n- [Tooling](/previous_versions/version_3/tooling) - SDK API reference\n"])</script><script>self.__next_f.push([1,"22:T45aa,"])</script><script>self.__next_f.push([1,"\n# Aqua Protocol v3 - Schema Reference\n\nThis document provides comprehensive technical specifications for all revision types in Aqua Protocol v3. Each revision type has specific fields and validation rules.\n\n## Version String Format\n\n```\nhttps://aqua-protocol.org/docs/v3/schema_2 | SHA256 | Method: {scalar|tree}\n```\n\n**Components:**\n- Protocol URL: `https://aqua-protocol.org/docs/v3/schema_2`\n- Hash Algorithm: `SHA256`\n- Canonicalization Method: `scalar` or `tree`\n\n## Common Fields\n\nAll revisions share these mandatory fields:\n\n| Field | Type | Description | Validation |\n|-------|------|-------------|------------|\n| `previous_verification_hash` | string | Hash of previous revision | Empty string for genesis, otherwise 64-char hex with `0x` prefix |\n| `local_timestamp` | string | ISO 8601 timestamp | Valid ISO 8601 format: `YYYY-MM-DDTHH:mm:ss` |\n| `revision_type` | string | Type of revision | One of: `\"file\"`, `\"form\"`, `\"signature\"`, `\"witness\"`, `\"link\"` |\n| `version` | string | Protocol version and method | Must match format above |\n\n---\n\n## File Revision\n\nRepresents a file with metadata and optional content.\n\n### Fields\n\n| Field | Type | Required | Description |\n|-------|------|----------|-------------|\n| `previous_verification_hash` | string | Yes | Previous revision hash (empty for genesis) |\n| `local_timestamp` | string | Yes | ISO 8601 timestamp |\n| `revision_type` | string | Yes | Must be `\"file\"` |\n| `version` | string | Yes | Protocol version string |\n| `file_hash` | string | Yes | SHA256 hash of file content (hex with `0x`) |\n| `file_nonce` | string | Yes | Random 16-byte nonce (hex with `0x`) |\n| `content` | string/Uint8Array | No | Optional file content |\n| `leaves` | string[] | Conditional | Required if `Method: tree`, array of leaf hashes |\n\n### Genesis File Revision (Scalar)\n\n```json\n{\n  \"previous_verification_hash\": \"\",\n  \"local_timestamp\": \"2024-01-01T12:00:00\",\n  \"revision_type\": \"file\",\n  \"version\": \"https://aqua-protocol.org/docs/v3/schema_2 | SHA256 | Method: scalar\",\n  \"file_hash\": \"0x9f86d081884c7d659a2feaa0c55ad015a3bf4f1b2b0b822cd15d6c15b0f00a08\",\n  \"file_nonce\": \"0x3fa8b1c2d3e4f5a67b8c9d0e1f2a3b4c\"\n}\n```\n\n### Genesis File Revision (Tree)\n\n```json\n{\n  \"previous_verification_hash\": \"\",\n  \"local_timestamp\": \"2024-01-01T12:00:00\",\n  \"revision_type\": \"file\",\n  \"version\": \"https://aqua-protocol.org/docs/v3/schema_2 | SHA256 | Method: tree\",\n  \"file_hash\": \"0x9f86d081884c7d659a2feaa0c55ad015a3bf4f1b2b0b822cd15d6c15b0f00a08\",\n  \"file_nonce\": \"0x3fa8b1c2d3e4f5a67b8c9d0e1f2a3b4c\",\n  \"leaves\": [\n    \"0x1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef\",\n    \"0xabcdef1234567890abcdef1234567890abcdef1234567890abcdef1234567890\"\n  ]\n}\n```\n\n### With Content\n\n```json\n{\n  \"previous_verification_hash\": \"\",\n  \"local_timestamp\": \"2024-01-01T12:00:00\",\n  \"revision_type\": \"file\",\n  \"version\": \"https://aqua-protocol.org/docs/v3/schema_2 | SHA256 | Method: scalar\",\n  \"file_hash\": \"0x9f86d081884c7d659a2feaa0c55ad015a3bf4f1b2b0b822cd15d6c15b0f00a08\",\n  \"file_nonce\": \"0x3fa8b1c2d3e4f5a67b8c9d0e1f2a3b4c\",\n  \"content\": \"This is the file content as a string\"\n}\n```\n\n### Validation Rules\n\n1. `file_hash` must match SHA256 of file content\n2. `file_nonce` must be exactly 16 bytes (32 hex chars + `0x`)\n3. If `Method: tree`, `leaves` array must be present\n4. If `Method: scalar`, `leaves` must be absent\n5. `content` is optional but if present, hash must match `file_hash`\n\n---\n\n## Form Revision\n\nStores structured key-value data.\n\n### Fields\n\n| Field | Type | Required | Description |\n|-------|------|----------|-------------|\n| `previous_verification_hash` | string | Yes | Previous revision hash (empty for genesis) |\n| `local_timestamp` | string | Yes | ISO 8601 timestamp |\n| `revision_type` | string | Yes | Must be `\"form\"` |\n| `version` | string | Yes | Protocol version string |\n| `file_hash` | string | Yes | SHA256 hash of form data |\n| `file_nonce` | string | Yes | Random 16-byte nonce |\n| `content` | object | Yes | Form data as key-value pairs |\n| `leaves` | string[] | Conditional | Required if `Method: tree` |\n\n### Example (Scalar)\n\n```json\n{\n  \"previous_verification_hash\": \"\",\n  \"local_timestamp\": \"2024-01-01T12:00:00\",\n  \"revision_type\": \"form\",\n  \"version\": \"https://aqua-protocol.org/docs/v3/schema_2 | SHA256 | Method: scalar\",\n  \"file_hash\": \"0xabc123def456...\",\n  \"file_nonce\": \"0x7c8d9e0f1a2b3c4d5e6f7a8b9c0d1e2f\",\n  \"content\": {\n    \"name\": \"John Doe\",\n    \"email\": \"john@example.com\",\n    \"organization\": \"Example Corp\",\n    \"role\": \"Developer\"\n  }\n}\n```\n\n### Example (Tree)\n\n```json\n{\n  \"previous_verification_hash\": \"\",\n  \"local_timestamp\": \"2024-01-01T12:00:00\",\n  \"revision_type\": \"form\",\n  \"version\": \"https://aqua-protocol.org/docs/v3/schema_2 | SHA256 | Method: tree\",\n  \"file_hash\": \"0xabc123def456...\",\n  \"file_nonce\": \"0x7c8d9e0f1a2b3c4d5e6f7a8b9c0d1e2f\",\n  \"content\": {\n    \"name\": \"John Doe\",\n    \"email\": \"john@example.com\",\n    \"organization\": \"Example Corp\",\n    \"role\": \"Developer\"\n  },\n  \"leaves\": [\n    \"0x...\",  // SHA256(\"name:John Doe\")\n    \"0x...\",  // SHA256(\"email:john@example.com\")\n    \"0x...\",  // SHA256(\"organization:Example Corp\")\n    \"0x...\"   // SHA256(\"role:Developer\")\n  ]\n}\n```\n\n### Leaf Computation (Tree Mode)\n\nFor each key-value pair in `content`:\n```typescript\nleaf_hash = SHA256(`${key}:${value}`)\n```\n\n### Validation Rules\n\n1. `content` must be a valid JSON object\n2. All values in `content` must be strings\n3. `file_hash` must match hash of canonicalized content\n4. If `Method: tree`, number of leaves must match number of keys in content\n\n---\n\n## Signature Revision\n\nAdds cryptographic signature to verify authenticity.\n\n### Common Fields\n\n| Field | Type | Required | Description |\n|-------|------|----------|-------------|\n| `previous_verification_hash` | string | Yes | Hash of revision being signed |\n| `local_timestamp` | string | Yes | ISO 8601 timestamp |\n| `revision_type` | string | Yes | Must be `\"signature\"` |\n| `version` | string | Yes | Protocol version string |\n| `signature_type` | string | Yes | Type: `\"cli\"`, `\"metamask\"`, `\"did\"`, `\"p12\"`, `\"inline\"` |\n\n### CLI / MetaMask Signature\n\n**Additional Fields:**\n| Field | Type | Required | Description |\n|-------|------|----------|-------------|\n| `signature` | string | Yes | Hex-encoded signature (65 bytes for ECDSA) |\n| `signature_wallet_address` | string | Yes | Ethereum address (EIP-55 checksummed) |\n\n**Example:**\n```json\n{\n  \"previous_verification_hash\": \"0xabc123...\",\n  \"local_timestamp\": \"2024-01-01T12:01:00\",\n  \"revision_type\": \"signature\",\n  \"version\": \"https://aqua-protocol.org/docs/v3/schema_2 | SHA256 | Method: scalar\",\n  \"signature_type\": \"cli\",\n  \"signature\": \"0x8c9d0e1f2a3b4c5d6e7f8a9b0c1d2e3f4a5b6c7d8e9f0a1b2c3d4e5f6a7b8c9d0e1f2a3b4c5d6e7f8a9b0c1d2e3f4a5b6c7d8e9f0a1b2c3d4e5f6a7b8c9d1c\",\n  \"signature_wallet_address\": \"0x742d35Cc6634C0532925a3b844Bc9e7595f0bEb8\"\n}\n```\n\n### DID Signature\n\n**Additional Fields:**\n| Field | Type | Required | Description |\n|-------|------|----------|-------------|\n| `signature` | object | Yes | JWS (JSON Web Signature) object |\n\n**Signature Object Structure:**\n```typescript\n{\n  payload: string;       // Base64url-encoded payload\n  signatures: [{\n    protected: string;   // Base64url-encoded protected header\n    signature: string;   // Base64url-encoded signature\n  }]\n}\n```\n\n**Example:**\n```json\n{\n  \"previous_verification_hash\": \"0xabc123...\",\n  \"local_timestamp\": \"2024-01-01T12:01:00\",\n  \"revision_type\": \"signature\",\n  \"version\": \"https://aqua-protocol.org/docs/v3/schema_2 | SHA256 | Method: scalar\",\n  \"signature_type\": \"did\",\n  \"signature\": {\n    \"payload\": \"eyJhbGciOiJFZERTQSIsImI2NCI6ZmFsc2UsImNyaXQiOlsiYjY0Il19\",\n    \"signatures\": [{\n      \"protected\": \"eyJhbGciOiJFZERTQSJ9\",\n      \"signature\": \"kKvXJ_qjJRtGQFLpRvQlCdXMFD8sSE4DTlbMmLqg0BJ9FQKLHvX7y_z5Pr8u0xT8D2vCj9qL1KzN4rP2MzKfBQ\"\n    }]\n  }\n}\n```\n\n### P12 Certificate Signature\n\n**Additional Fields:**\n| Field | Type | Required | Description |\n|-------|------|----------|-------------|\n| `signature` | string | Yes | Hex-encoded signature |\n| `signature_public_key` | string | Yes | Hex-encoded DER public key |\n\n**Example:**\n```json\n{\n  \"previous_verification_hash\": \"0xabc123...\",\n  \"local_timestamp\": \"2024-01-01T12:01:00\",\n  \"revision_type\": \"signature\",\n  \"version\": \"https://aqua-protocol.org/docs/v3/schema_2 | SHA256 | Method: scalar\",\n  \"signature_type\": \"p12\",\n  \"signature\": \"0x...\",\n  \"signature_public_key\": \"0x308201a2300d06092a864886f70d01010105000382018f...\"\n}\n```\n\n### Inline Signature\n\nSame as CLI/MetaMask but with pre-computed signature.\n\n### Validation Rules\n\n1. Signature must be verifiable using provided credentials\n2. For CLI/MetaMask: Address must be recoverable from signature\n3. For DID: JWS must be valid and verifiable\n4. For P12: Signature must verify with public key\n5. Signature must be computed over `previous_verification_hash`\n\n---\n\n## Witness Revision\n\nAnchors revision to blockchain or timestamping service.\n\n### Fields\n\n| Field | Type | Required | Description |\n|-------|------|----------|-------------|\n| `previous_verification_hash` | string | Yes | Hash being witnessed |\n| `local_timestamp` | string | Yes | ISO 8601 timestamp |\n| `revision_type` | string | Yes | Must be `\"witness\"` |\n| `version` | string | Yes | Protocol version string |\n| `witness_merkle_root` | string | Yes | Root hash of Merkle tree |\n| `witness_timestamp` | number | Yes | Unix timestamp from witness service |\n| `witness_network` | string | Yes | Network: `\"mainnet\"`, `\"sepolia\"`, `\"holesky\"`, `\"tsa\"`, `\"nostr\"` |\n| `witness_smart_contract_address` | string | Conditional | Required for Ethereum |\n| `witness_transaction_hash` | string | Yes | Transaction or event hash |\n| `witness_sender_account_address` | string | Conditional | Required for Ethereum |\n| `witness_merkle_proof` | string[] | Yes | Merkle proof (empty for single witness) |\n\n### Ethereum Witness Example\n\n```json\n{\n  \"previous_verification_hash\": \"0xabc123...\",\n  \"local_timestamp\": \"2024-01-01T12:02:00\",\n  \"revision_type\": \"witness\",\n  \"version\": \"https://aqua-protocol.org/docs/v3/schema_2 | SHA256 | Method: scalar\",\n  \"witness_merkle_root\": \"0xdef456...\",\n  \"witness_timestamp\": 1704110520,\n  \"witness_network\": \"sepolia\",\n  \"witness_smart_contract_address\": \"0x5FbDB2315678afecb367f032d93F642f64180aa3\",\n  \"witness_transaction_hash\": \"0x9f86d081884c7d659a2feaa0c55ad015a3bf4f1b2b0b822cd15d6c15b0f00a08\",\n  \"witness_sender_account_address\": \"0x742d35Cc6634C0532925a3b844Bc9e7595f0bEb8\",\n  \"witness_merkle_proof\": []\n}\n```\n\n### Batched Witness Example\n\nMultiple revisions witnessed in single transaction:\n\n```json\n{\n  \"previous_verification_hash\": \"0xabc123...\",\n  \"local_timestamp\": \"2024-01-01T12:02:00\",\n  \"revision_type\": \"witness\",\n  \"version\": \"https://aqua-protocol.org/docs/v3/schema_2 | SHA256 | Method: scalar\",\n  \"witness_merkle_root\": \"0xroot...\",\n  \"witness_timestamp\": 1704110520,\n  \"witness_network\": \"mainnet\",\n  \"witness_smart_contract_address\": \"0x5FbDB2315678afecb367f032d93F642f64180aa3\",\n  \"witness_transaction_hash\": \"0x9f86d081...\",\n  \"witness_sender_account_address\": \"0x742d35Cc...\",\n  \"witness_merkle_proof\": [\n    \"0xsibling_hash_1\",\n    \"0xsibling_hash_2\",\n    \"0xsibling_hash_3\"\n  ]\n}\n```\n\n### Nostr Witness Example\n\n```json\n{\n  \"previous_verification_hash\": \"0xabc123...\",\n  \"local_timestamp\": \"2024-01-01T12:02:00\",\n  \"revision_type\": \"witness\",\n  \"version\": \"https://aqua-protocol.org/docs/v3/schema_2 | SHA256 | Method: scalar\",\n  \"witness_merkle_root\": \"0xabc123...\",\n  \"witness_timestamp\": 1704110520,\n  \"witness_network\": \"nostr\",\n  \"witness_smart_contract_address\": \"\",\n  \"witness_transaction_hash\": \"nevent1qqsw...\",\n  \"witness_sender_account_address\": \"npub1...\",\n  \"witness_merkle_proof\": []\n}\n```\n\n### TSA Witness Example\n\n```json\n{\n  \"previous_verification_hash\": \"0xabc123...\",\n  \"local_timestamp\": \"2024-01-01T12:02:00\",\n  \"revision_type\": \"witness\",\n  \"version\": \"https://aqua-protocol.org/docs/v3/schema_2 | SHA256 | Method: scalar\",\n  \"witness_merkle_root\": \"0xabc123...\",\n  \"witness_timestamp\": 1704110520,\n  \"witness_network\": \"tsa\",\n  \"witness_smart_contract_address\": \"https://timestamp.digicert.com\",\n  \"witness_transaction_hash\": \"base64_tsa_response\",\n  \"witness_sender_account_address\": \"\",\n  \"witness_merkle_proof\": []\n}\n```\n\n### Validation Rules\n\n1. For single witness: `witness_merkle_proof` must be empty array\n2. For single witness: `witness_merkle_root` equals `previous_verification_hash`\n3. For batched: Merkle proof must verify back to `witness_merkle_root`\n4. Transaction must exist and be confirmed on specified network\n5. `witness_timestamp` should match blockchain/service timestamp\n6. For Ethereum: Contract address and sender address required\n\n---\n\n## Link Revision\n\nConnects to other AquaTree chains.\n\n### Fields\n\n| Field | Type | Required | Description |\n|-------|------|----------|-------------|\n| `previous_verification_hash` | string | Yes | Previous revision in this chain |\n| `local_timestamp` | string | Yes | ISO 8601 timestamp |\n| `revision_type` | string | Yes | Must be `\"link\"` |\n| `version` | string | Yes | Protocol version string |\n| `link_type` | string | No | Application-specific link type |\n| `link_verification_hashes` | string[] | Yes | Array of hashes from other chains |\n| `link_file_hashes` | string[] | No | Corresponding file hashes |\n\n### Example\n\n```json\n{\n  \"previous_verification_hash\": \"0xabc123...\",\n  \"local_timestamp\": \"2024-01-01T12:03:00\",\n  \"revision_type\": \"link\",\n  \"version\": \"https://aqua-protocol.org/docs/v3/schema_2 | SHA256 | Method: scalar\",\n  \"link_type\": \"dependencies\",\n  \"link_verification_hashes\": [\n    \"0x111222333444555666777888999000aaabbbcccdddeeefff000111222333444\",\n    \"0x222333444555666777888999000aaabbbcccdddeeefff000111222333444555\",\n    \"0x333444555666777888999000aaabbbcccdddeeefff000111222333444555666\"\n  ],\n  \"link_file_hashes\": [\n    \"0xfileHash1...\",\n    \"0xfileHash2...\",\n    \"0xfileHash3...\"\n  ]\n}\n```\n\n### Validation Rules\n\n1. `link_verification_hashes` must be non-empty array\n2. Each hash in array must be valid revision hash\n3. If `link_file_hashes` present, must have same length as `link_verification_hashes`\n4. Referenced revisions should exist (optional strict validation)\n\n---\n\n## Hash Computation\n\n### Scalar Method\n\n1. Serialize revision as canonical JSON (sorted keys)\n2. Compute SHA256 hash of serialized string\n3. Prefix with `0x`\n\n```typescript\nconst canonical = JSON.stringify(sortKeys(revision));\nconst hash = \"0x\" + sha256(canonical).toString('hex');\n```\n\n### Tree Method\n\n1. Extract leaves array from revision\n2. Build Merkle tree from leaves\n3. Root hash becomes verification hash\n\n```typescript\nconst leaves = revision.leaves;\nconst tree = new MerkleTree(leaves, sha256);\nconst hash = \"0x\" + tree.getRoot().toString('hex');\n```\n\n---\n\n## AquaTree Storage Format\n\nComplete AquaTree structure for storage/transmission:\n\n```json\n{\n  \"revisions\": {\n    \"0xgenesis_hash\": {\n      \"previous_verification_hash\": \"\",\n      \"local_timestamp\": \"2024-01-01T12:00:00\",\n      \"revision_type\": \"file\",\n      \"version\": \"https://aqua-protocol.org/docs/v3/schema_2 | SHA256 | Method: scalar\",\n      \"file_hash\": \"0x...\",\n      \"file_nonce\": \"0x...\"\n    },\n    \"0xsignature_hash\": {\n      \"previous_verification_hash\": \"0xgenesis_hash\",\n      \"local_timestamp\": \"2024-01-01T12:01:00\",\n      \"revision_type\": \"signature\",\n      \"version\": \"https://aqua-protocol.org/docs/v3/schema_2 | SHA256 | Method: scalar\",\n      \"signature_type\": \"cli\",\n      \"signature\": \"0x...\",\n      \"signature_wallet_address\": \"0x...\"\n    },\n    \"0xwitness_hash\": {\n      \"previous_verification_hash\": \"0xsignature_hash\",\n      \"local_timestamp\": \"2024-01-01T12:02:00\",\n      \"revision_type\": \"witness\",\n      \"version\": \"https://aqua-protocol.org/docs/v3/schema_2 | SHA256 | Method: scalar\",\n      \"witness_merkle_root\": \"0x...\",\n      \"witness_timestamp\": 1704110520,\n      \"witness_network\": \"sepolia\",\n      \"witness_smart_contract_address\": \"0x...\",\n      \"witness_transaction_hash\": \"0x...\",\n      \"witness_sender_account_address\": \"0x...\",\n      \"witness_merkle_proof\": []\n    }\n  },\n  \"file_index\": {\n    \"0xfile_hash\": \"document.pdf\"\n  },\n  \"tree\": {\n    \"hash\": \"0xgenesis_hash\",\n    \"children\": [\n      {\n        \"hash\": \"0xsignature_hash\",\n        \"children\": [\n          {\n            \"hash\": \"0xwitness_hash\",\n            \"children\": []\n          }\n        ]\n      }\n    ]\n  },\n  \"treeMapping\": {\n    \"paths\": {\n      \"0xgenesis_hash\": [\"0xgenesis_hash\"],\n      \"0xsignature_hash\": [\"0xgenesis_hash\", \"0xsignature_hash\"],\n      \"0xwitness_hash\": [\"0xgenesis_hash\", \"0xsignature_hash\", \"0xwitness_hash\"]\n    },\n    \"latestHash\": \"0xwitness_hash\"\n  }\n}\n```\n\n---\n\n## Field Constraints\n\n### Hashes\n- Format: Lowercase hexadecimal with `0x` prefix\n- Length: 64 characters (32 bytes) + 2-char prefix = 66 total\n- Example: `0x9f86d081884c7d659a2feaa0c55ad015a3bf4f1b2b0b822cd15d6c15b0f00a08`\n\n### Timestamps\n- Format: ISO 8601\n- Pattern: `YYYY-MM-DDTHH:mm:ss`\n- Example: `2024-01-01T12:00:00`\n\n### Ethereum Addresses\n- Format: EIP-55 checksummed\n- Length: 42 characters (20 bytes + 0x)\n- Mixed case for checksum\n- Example: `0x742d35Cc6634C0532925a3b844Bc9e7595f0bEb8`\n\n### Nonces\n- Length: Exactly 16 bytes (32 hex chars + 0x)\n- Format: Lowercase hexadecimal with `0x` prefix\n- Example: `0x3fa8b1c2d3e4f5a67b8c9d0e1f2a3b4c`\n\n---\n\n## Version Compatibility\n\n- **v3.2.x**: Current version, fully compatible\n- **v3.1.x**: Compatible, minor improvements\n- **v3.0.x**: Compatible, initial TypeScript release\n- **v2.x**: Not compatible, different schema\n\n---\n\n## See Also\n\n- [Introduction](/previous_versions/version_3/introduction) - Getting started\n- [Concepts](/previous_versions/version_3/concepts) - Core concepts\n- [Tooling](/previous_versions/version_3/tooling) - SDK API reference\n"])</script><script>self.__next_f.push([1,"23:T3ef3,"])</script><script>self.__next_f.push([1,"\n# Aqua Protocol v3 - Tooling \u0026 SDK\n\nThe Aqua JS SDK (aqua-js-sdk) is a comprehensive TypeScript library for working with Aqua Protocol v3. It provides a complete API for creating, signing, witnessing, and verifying revision chains across multiple platforms.\n\n## Installation\n\n```bash\nnpm install aqua-js-sdk\n```\n\n### Platform-Specific Imports\n\n```typescript\n// Node.js (default)\nimport Aquafier from 'aqua-js-sdk';\n\n// Web Browser\nimport Aquafier from 'aqua-js-sdk/web';\n\n// React Native\nimport Aquafier from 'aqua-js-sdk/react-native';\n```\n\n## Core API\n\n### Aquafier Class\n\nThe main class providing all Aqua Protocol operations.\n\n#### Constructor\n\n```typescript\nconst aquafier = new Aquafier();\n```\n\nNo configuration needed for initialization.\n\n---\n\n### Creating Revisions\n\n#### createGenesisRevision()\n\nCreates the first revision in a new AquaTree.\n\n**Signature:**\n```typescript\nasync createGenesisRevision(\n  fileObject: FileObject,\n  isForm?: boolean,\n  enableContent?: boolean,\n  enableScalar?: boolean\n): Promise\u003cResult\u003cAquaOperationData, LogData[]\u003e\u003e\n```\n\n**Parameters:**\n- `fileObject`: File data to create revision from\n- `isForm`: If true, creates form revision (default: false)\n- `enableContent`: Include file content in revision (default: false)\n- `enableScalar`: Use scalar method instead of tree (default: true)\n\n**Returns:**\n- Success: `AquaOperationData` with new AquaTree\n- Failure: Array of error logs\n\n**Example:**\n```typescript\nconst fileObject: FileObject = {\n  fileName: \"contract.pdf\",\n  fileContent: pdfBuffer, // Uint8Array or string\n  path: \"/documents/contract.pdf\"\n};\n\nconst result = await aquafier.createGenesisRevision(fileObject);\n\nif (result.isErr) {\n  result.data.logData.forEach(log =\u003e console.error(log));\n  return;\n}\n\nconst aquaTree = result.data.aquaTree;\n```\n\n#### createNewRevision()\n\nAdds a new file/form revision to an existing AquaTree.\n\n**Signature:**\n```typescript\nasync createNewRevision(\n  aquaTree: AquaTree,\n  fileObject: FileObject,\n  isForm?: boolean,\n  enableContent?: boolean,\n  enableScalar?: boolean\n): Promise\u003cResult\u003cAquaOperationData, LogData[]\u003e\u003e\n```\n\n**Example:**\n```typescript\nconst result = await aquafier.createNewRevision(\n  existingAquaTree,\n  updatedFileObject,\n  false,  // not a form\n  false,  // don't embed content\n  true    // use scalar method\n);\n```\n\n---\n\n### Signing Revisions\n\n#### signRevision()\n\nSigns the latest revision in an AquaTree.\n\n**Signature:**\n```typescript\nasync signRevision(\n  aquaTree: AquaTree,\n  signType: SignType,\n  credentials?: CredentialsData,\n  inlineOptions?: InlineSignerOptions\n): Promise\u003cResult\u003cAquaOperationData, LogData[]\u003e\u003e\n```\n\n**Parameters:**\n- `signType`: One of `\"cli\"`, `\"metamask\"`, `\"did\"`, `\"p12\"`, `\"inline\"`\n- `credentials`: Credentials for CLI, DID, or P12 signing\n- `inlineOptions`: Pre-computed signature for inline mode\n\n**Sign Types:**\n\n##### CLI Signing\nUses BIP39 mnemonic to derive wallet and sign.\n\n```typescript\nconst credentials: CredentialsData = {\n  mnemonic: \"abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon about\",\n  // ... other fields\n};\n\nconst result = await aquafier.signRevision(\n  aquaTree,\n  \"cli\",\n  credentials\n);\n```\n\n##### MetaMask Signing\nOpens MetaMask for user to sign (browser only).\n\n```typescript\nconst result = await aquafier.signRevision(\n  aquaTree,\n  \"metamask\"\n);\n```\n\n**React Native MetaMask:**\n```typescript\nconst result = await aquafier.signRevision(\n  aquaTree,\n  \"metamask\",\n  undefined,\n  {\n    deepLinkUrl: \"metamask://\",\n    callbackUrl: \"myapp://metamask-callback\",\n    onDeepLinkReady: (url) =\u003e {\n      // Open MetaMask app\n      Linking.openURL(url);\n    }\n  }\n);\n```\n\n##### DID Signing\nSigns with Decentralized Identifier.\n\n```typescript\nconst credentials: CredentialsData = {\n  did_key: \"your-did-key-here\",\n  // ... other fields\n};\n\nconst result = await aquafier.signRevision(\n  aquaTree,\n  \"did\",\n  credentials\n);\n```\n\n##### P12 Certificate Signing\nSigns with P12 certificate.\n\n```typescript\nconst credentials: CredentialsData = {\n  p12_password: \"certificate-password\",\n  p12_content: \"base64-encoded-p12-content\",\n  // ... other fields\n};\n\nconst result = await aquafier.signRevision(\n  aquaTree,\n  \"p12\",\n  credentials\n);\n```\n\n##### Inline Signing\nUse pre-computed signature.\n\n```typescript\nconst inlineOptions: InlineSignerOptions = {\n  walletAddress: \"0x742d35Cc6634C0532925a3b844Bc9e7595f0bEb8\",\n  signature: \"0x8c9d0e1f2a3b4c5d6e7f8a9b0c1d2e3f...\"\n};\n\nconst result = await aquafier.signRevision(\n  aquaTree,\n  \"inline\",\n  undefined,\n  inlineOptions\n);\n```\n\n---\n\n### Witnessing Revisions\n\n#### witnessRevision()\n\nTimestamps a revision via blockchain or TSA.\n\n**Signature:**\n```typescript\nasync witnessRevision(\n  aquaTree: AquaTree,\n  witnessType: WitnessType,\n  witnessConfig: WitnessConfig,\n  credentials?: CredentialsData,\n  witnessPlatform?: WitnessPlatformType,\n  inlineOptions?: InlineWitnessOptions\n): Promise\u003cResult\u003cAquaOperationData, LogData[]\u003e\u003e\n```\n\n**Parameters:**\n- `witnessType`: `\"eth\"`, `\"nostr\"`, or `\"tsa\"`\n- `witnessConfig`: Network and contract configuration\n- `credentials`: Credentials for signing transaction\n- `witnessPlatform`: `\"cli\"` or `\"metamask\"` (Ethereum only)\n- `inlineOptions`: Pre-computed transaction (inline mode)\n\n#### Ethereum Witnessing\n\n**Configuration:**\n```typescript\nconst witnessConfig: WitnessConfig = {\n  witnessEventVerificationHash: latestRevisionHash,\n  witnessNetwork: \"sepolia\",  // or \"mainnet\", \"holesky\"\n  smartContractAddress: \"0x5FbDB2315678afecb367f032d93F642f64180aa3\"\n};\n\nconst credentials: CredentialsData = {\n  mnemonic: \"your mnemonic here\",\n  // ...\n};\n```\n\n**CLI Method** (uses mnemonic):\n```typescript\nconst result = await aquafier.witnessRevision(\n  aquaTree,\n  \"eth\",\n  witnessConfig,\n  credentials,\n  \"cli\"\n);\n```\n\n**MetaMask Method** (prompts user):\n```typescript\nconst result = await aquafier.witnessRevision(\n  aquaTree,\n  \"eth\",\n  witnessConfig,\n  undefined,\n  \"metamask\"\n);\n```\n\n#### Nostr Witnessing\n\n```typescript\nconst witnessConfig: WitnessConfig = {\n  witnessEventVerificationHash: latestRevisionHash,\n  witnessNetwork: \"sepolia\",  // not used for Nostr\n  smartContractAddress: \"\"     // not used for Nostr\n};\n\nconst credentials: CredentialsData = {\n  nostr_sk: \"your-nostr-secret-key\",\n  // ...\n};\n\nconst result = await aquafier.witnessRevision(\n  aquaTree,\n  \"nostr\",\n  witnessConfig,\n  credentials\n);\n```\n\n#### TSA Witnessing\n\n```typescript\nconst result = await aquafier.witnessRevision(\n  aquaTree,\n  \"tsa\",\n  witnessConfig\n);\n```\n\n---\n\n### Linking Revisions\n\n#### linkRevision()\n\nCreates a link revision connecting to other AquaTrees.\n\n**Signature:**\n```typescript\nasync linkRevision(\n  aquaTree: AquaTree,\n  linkedAquaTrees: AquaTree[],\n  linkType?: string\n): Promise\u003cResult\u003cAquaOperationData, LogData[]\u003e\u003e\n```\n\n**Example:**\n```typescript\nconst result = await aquafier.linkRevision(\n  mainAquaTree,\n  [dependency1Tree, dependency2Tree, dependency3Tree],\n  \"dependencies\"\n);\n```\n\n---\n\n### Verification\n\n#### verifyRevisionChain()\n\nVerifies an entire AquaTree chain.\n\n**Signature:**\n```typescript\nasync verifyRevisionChain(\n  aquaTree: AquaTree,\n  credentials?: CredentialsData\n): Promise\u003cVerificationGraphData\u003e\n```\n\n**Parameters:**\n- `aquaTree`: Tree to verify\n- `credentials`: Optional, for Ethereum witness lookup\n\n**Returns:**\n- `VerificationGraphData`: Graph structure with verification results\n\n**Example:**\n```typescript\nconst verificationResult = await aquafier.verifyRevisionChain(aquaTree, credentials);\n\n// Check overall success\nif (verificationResult.isValidationSuccessful) {\n  console.log(\"✓ Chain is valid\");\n} else {\n  console.log(\"✗ Chain validation failed\");\n}\n\n// Traverse verification graph\nfunction printResults(node: VerificationGraphData, depth = 0) {\n  const indent = \"  \".repeat(depth);\n  const status = node.isValidationSuccessful ? \"✓\" : \"✗\";\n  console.log(`${indent}${status} ${node.revisionType}`);\n\n  node.verificationGraphData.forEach(child =\u003e printResults(child, depth + 1));\n}\n\nprintResults(verificationResult);\n```\n\n#### verifyFormRevision()\n\nVerifies form-specific data.\n\n**Signature:**\n```typescript\nasync verifyFormRevision(\n  aquaTree: AquaTree,\n  formData: FormData\n): Promise\u003cFormVerificationResponseData\u003e\n```\n\n---\n\n### Utility Methods\n\n#### removeLastRevision()\n\nRemoves the most recent revision from an AquaTree.\n\n**Signature:**\n```typescript\nremoveLastRevision(\n  aquaTree: AquaTree\n): Result\u003cAquaOperationData, LogData[]\u003e\n```\n\n**Example:**\n```typescript\nconst result = aquafier.removeLastRevision(aquaTree);\n\nif (result.isOk) {\n  const updatedTree = result.data.aquaTree;\n  console.log(\"Revision removed successfully\");\n}\n```\n\n#### checkIfFileAlreadyNotarized()\n\nChecks if a file has already been notarized.\n\n**Signature:**\n```typescript\ncheckIfFileAlreadyNotarized(\n  aquaTree: AquaTree,\n  fileObject: FileObject\n): boolean\n```\n\n#### fetchFilesToBeRead()\n\nGets list of files that need content loaded.\n\n**Signature:**\n```typescript\nfetchFilesToBeRead(aquaTree: AquaTree): string[]\n```\n\n---\n\n## Type Reference\n\n### Core Types\n\n```typescript\ninterface FileObject {\n  fileName: string\n  fileContent: string | AquaTree | Uint8Array | Record\u003cstring, string\u003e | object\n  path: string\n  fileSize?: number\n}\n\ninterface AquaTree {\n  revisions: Revisions\n  file_index: FileIndex\n  tree?: RevisionTree\n  treeMapping?: TreeMapping\n}\n\ninterface Revision {\n  previous_verification_hash: string\n  local_timestamp: string\n  revision_type: RevisionType\n  version: string\n  // ... type-specific fields\n}\n\ntype RevisionType = \"file\" | \"witness\" | \"signature\" | \"form\" | \"link\"\ntype SignType = \"metamask\" | \"cli\" | \"did\" | \"p12\" | \"inline\"\ntype WitnessType = \"tsa\" | \"eth\" | \"nostr\"\ntype WitnessNetwork = \"sepolia\" | \"mainnet\" | \"holesky\"\n```\n\n### Result Type\n\n```typescript\ntype Result\u003cT, E\u003e =\n  | { isOk: true; isErr: false; data: T }\n  | { isOk: false; isErr: true; data: E }\n```\n\n### Configuration Types\n\n```typescript\ninterface CredentialsData {\n  mnemonic: string\n  nostr_sk: string\n  did_key: string\n  alchemy_key: string\n  witness_eth_network: string\n  witness_method: string\n  p12_password?: string\n  p12_content?: string\n}\n\ninterface WitnessConfig {\n  witnessEventVerificationHash: string\n  witnessNetwork: WitnessNetwork\n  smartContractAddress: string\n}\n```\n\n---\n\n## Platform-Specific Notes\n\n### Node.js\n\nFull functionality available:\n- All signing methods\n- All witnessing methods\n- File system access\n- HTTP server for MetaMask callback\n\n```typescript\nimport Aquafier from 'aqua-js-sdk';\nimport fs from 'fs';\n\nconst aquafier = new Aquafier();\n\n// Read file from disk\nconst fileContent = fs.readFileSync('document.pdf');\n\nconst fileObject = {\n  fileName: 'document.pdf',\n  fileContent: fileContent,\n  path: './document.pdf'\n};\n```\n\n### Web Browser\n\nMost functionality available:\n- MetaMask signing (primary method)\n- DID signing\n- Ethereum witnessing via MetaMask\n- Nostr, TSA witnessing\n\n**Limitations:**\n- No P12 signing (requires file system)\n- No CLI signing with mnemonic (security risk in browser)\n\n```typescript\nimport Aquafier from 'aqua-js-sdk/web';\n\nconst aquafier = new Aquafier();\n\n// File from input element\nconst file = document.getElementById('fileInput').files[0];\nconst arrayBuffer = await file.arrayBuffer();\n\nconst fileObject = {\n  fileName: file.name,\n  fileContent: new Uint8Array(arrayBuffer),\n  path: file.name\n};\n```\n\n### React Native\n\nMost functionality with platform adaptations:\n- MetaMask via deep linking\n- DID signing\n- Limited witnessing\n\n**Limitations:**\n- No local HTTP server\n- MetaMask requires custom deep linking\n- File system needs react-native-fs\n\n```typescript\nimport Aquafier from 'aqua-js-sdk/react-native';\nimport RNFS from 'react-native-fs';\n\nconst aquafier = new Aquafier();\n\n// Read file\nconst fileContent = await RNFS.readFile(filePath, 'base64');\n\nconst fileObject = {\n  fileName: 'document.pdf',\n  fileContent: Buffer.from(fileContent, 'base64'),\n  path: filePath\n};\n```\n\n---\n\n## Complete Workflow Examples\n\n### Document Notarization\n\n```typescript\n// 1. Create genesis\nconst fileObject: FileObject = {\n  fileName: \"contract.pdf\",\n  fileContent: pdfBuffer,\n  path: \"/contracts/contract.pdf\"\n};\n\nlet result = await aquafier.createGenesisRevision(fileObject);\nlet aquaTree = result.data.aquaTree;\n\n// 2. Sign with CLI\nconst credentials: CredentialsData = {\n  mnemonic: process.env.MNEMONIC,\n  // ... other fields\n};\n\nresult = await aquafier.signRevision(aquaTree, \"cli\", credentials);\naquaTree = result.data.aquaTree;\n\n// 3. Witness to Ethereum\nconst witnessConfig: WitnessConfig = {\n  witnessEventVerificationHash: Object.keys(aquaTree.revisions)[Object.keys(aquaTree.revisions).length - 1],\n  witnessNetwork: \"sepolia\",\n  smartContractAddress: \"0x5FbDB2315678afecb367f032d93F642f64180aa3\"\n};\n\nresult = await aquafier.witnessRevision(\n  aquaTree,\n  \"eth\",\n  witnessConfig,\n  credentials,\n  \"cli\"\n);\naquaTree = result.data.aquaTree;\n\n// 4. Save\nfs.writeFileSync('contract.aqua.json', JSON.stringify(aquaTree, null, 2));\n```\n\n### Multi-Party Approval\n\n```typescript\n// Party 1: Create and sign\nlet result = await aquafier.createGenesisRevision(fileObject);\nlet aquaTree = result.data.aquaTree;\n\nresult = await aquafier.signRevision(aquaTree, \"cli\", party1Credentials);\naquaTree = result.data.aquaTree;\n\n// Send aquaTree to Party 2\n\n// Party 2: Add signature\nresult = await aquafier.signRevision(aquaTree, \"metamask\");\naquaTree = result.data.aquaTree;\n\n// Send back to Party 1\n\n// Party 1: Witness\nresult = await aquafier.witnessRevision(\n  aquaTree,\n  \"eth\",\n  witnessConfig,\n  party1Credentials,\n  \"cli\"\n);\naquaTree = result.data.aquaTree;\n```\n\n### Form Submission with Verification\n\n```typescript\n// 1. Create form genesis\nconst formData = {\n  name: \"John Doe\",\n  email: \"john@example.com\",\n  status: \"pending\"\n};\n\nconst fileObject: FileObject = {\n  fileName: \"application.json\",\n  fileContent: formData,\n  path: \"/forms/application.json\"\n};\n\nlet result = await aquafier.createGenesisRevision(fileObject, true);  // isForm=true\nlet aquaTree = result.data.aquaTree;\n\n// 2. Sign\nresult = await aquafier.signRevision(aquaTree, \"did\", credentials);\naquaTree = result.data.aquaTree;\n\n// 3. Witness\nresult = await aquafier.witnessRevision(aquaTree, \"nostr\", witnessConfig, credentials);\naquaTree = result.data.aquaTree;\n\n// 4. Verify form\nconst verifyResult = await aquafier.verifyFormRevision(aquaTree, formData);\nconsole.log(\"Form valid:\", verifyResult.isOk);\n```\n\n---\n\n## Error Handling\n\nAll methods return `Result\u003cT, E\u003e` type. Always check for errors:\n\n```typescript\nconst result = await aquafier.createGenesisRevision(fileObject);\n\nif (result.isErr) {\n  // Handle error\n  console.error(\"Failed to create genesis:\");\n  result.data.forEach(log =\u003e {\n    console.error(`[${log.logType}] ${log.log}`);\n  });\n  return;\n}\n\n// Success\nconst aquaTree = result.data.aquaTree;\n```\n\n---\n\n## Best Practices\n\n1. **Always verify results**: Check `isErr` before using data\n2. **Store credentials securely**: Never commit mnemonic/keys\n3. **Use environment variables**: Store sensitive data in `.env`\n4. **Validate inputs**: Check file sizes and formats before processing\n5. **Handle logs**: Display or log all LogData for debugging\n6. **Test on testnets**: Use Sepolia/Holesky before mainnet\n7. **Save AquaTrees**: Persist JSON after each operation\n8. **Verify chains**: Run verification after receiving AquaTrees\n\n---\n\n## Testing\n\nCreate `credentials.json` for testing:\n\n```json\n{\n  \"mnemonic\": \"your test mnemonic\",\n  \"nostr_sk\": \"your nostr secret key\",\n  \"did_key\": \"your did key\",\n  \"alchemy_key\": \"your alchemy api key\",\n  \"witness_eth_network\": \"sepolia\",\n  \"witness_method\": \"cli\"\n}\n```\n\nRun tests:\n```bash\nnpm test\n```\n\nRun specific test file:\n```bash\nnpm test -- ./tests/aquafier.test.ts\n```\n\n---\n\n## See Also\n\n- [Introduction](/previous_versions/version_3/introduction) - Getting started\n- [Concepts](/previous_versions/version_3/concepts) - Core concepts\n- [Schema Reference](/previous_versions/version_3/schema) - Revision specifications\n- [GitHub Repository](https://github.com/inblockio/aqua-verifier-js-lib) - Source code and examples\n"])</script><script>self.__next_f.push([1,"24:T3ef3,"])</script><script>self.__next_f.push([1,"\n# Aqua Protocol v3 - Tooling \u0026 SDK\n\nThe Aqua JS SDK (aqua-js-sdk) is a comprehensive TypeScript library for working with Aqua Protocol v3. It provides a complete API for creating, signing, witnessing, and verifying revision chains across multiple platforms.\n\n## Installation\n\n```bash\nnpm install aqua-js-sdk\n```\n\n### Platform-Specific Imports\n\n```typescript\n// Node.js (default)\nimport Aquafier from 'aqua-js-sdk';\n\n// Web Browser\nimport Aquafier from 'aqua-js-sdk/web';\n\n// React Native\nimport Aquafier from 'aqua-js-sdk/react-native';\n```\n\n## Core API\n\n### Aquafier Class\n\nThe main class providing all Aqua Protocol operations.\n\n#### Constructor\n\n```typescript\nconst aquafier = new Aquafier();\n```\n\nNo configuration needed for initialization.\n\n---\n\n### Creating Revisions\n\n#### createGenesisRevision()\n\nCreates the first revision in a new AquaTree.\n\n**Signature:**\n```typescript\nasync createGenesisRevision(\n  fileObject: FileObject,\n  isForm?: boolean,\n  enableContent?: boolean,\n  enableScalar?: boolean\n): Promise\u003cResult\u003cAquaOperationData, LogData[]\u003e\u003e\n```\n\n**Parameters:**\n- `fileObject`: File data to create revision from\n- `isForm`: If true, creates form revision (default: false)\n- `enableContent`: Include file content in revision (default: false)\n- `enableScalar`: Use scalar method instead of tree (default: true)\n\n**Returns:**\n- Success: `AquaOperationData` with new AquaTree\n- Failure: Array of error logs\n\n**Example:**\n```typescript\nconst fileObject: FileObject = {\n  fileName: \"contract.pdf\",\n  fileContent: pdfBuffer, // Uint8Array or string\n  path: \"/documents/contract.pdf\"\n};\n\nconst result = await aquafier.createGenesisRevision(fileObject);\n\nif (result.isErr) {\n  result.data.logData.forEach(log =\u003e console.error(log));\n  return;\n}\n\nconst aquaTree = result.data.aquaTree;\n```\n\n#### createNewRevision()\n\nAdds a new file/form revision to an existing AquaTree.\n\n**Signature:**\n```typescript\nasync createNewRevision(\n  aquaTree: AquaTree,\n  fileObject: FileObject,\n  isForm?: boolean,\n  enableContent?: boolean,\n  enableScalar?: boolean\n): Promise\u003cResult\u003cAquaOperationData, LogData[]\u003e\u003e\n```\n\n**Example:**\n```typescript\nconst result = await aquafier.createNewRevision(\n  existingAquaTree,\n  updatedFileObject,\n  false,  // not a form\n  false,  // don't embed content\n  true    // use scalar method\n);\n```\n\n---\n\n### Signing Revisions\n\n#### signRevision()\n\nSigns the latest revision in an AquaTree.\n\n**Signature:**\n```typescript\nasync signRevision(\n  aquaTree: AquaTree,\n  signType: SignType,\n  credentials?: CredentialsData,\n  inlineOptions?: InlineSignerOptions\n): Promise\u003cResult\u003cAquaOperationData, LogData[]\u003e\u003e\n```\n\n**Parameters:**\n- `signType`: One of `\"cli\"`, `\"metamask\"`, `\"did\"`, `\"p12\"`, `\"inline\"`\n- `credentials`: Credentials for CLI, DID, or P12 signing\n- `inlineOptions`: Pre-computed signature for inline mode\n\n**Sign Types:**\n\n##### CLI Signing\nUses BIP39 mnemonic to derive wallet and sign.\n\n```typescript\nconst credentials: CredentialsData = {\n  mnemonic: \"abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon about\",\n  // ... other fields\n};\n\nconst result = await aquafier.signRevision(\n  aquaTree,\n  \"cli\",\n  credentials\n);\n```\n\n##### MetaMask Signing\nOpens MetaMask for user to sign (browser only).\n\n```typescript\nconst result = await aquafier.signRevision(\n  aquaTree,\n  \"metamask\"\n);\n```\n\n**React Native MetaMask:**\n```typescript\nconst result = await aquafier.signRevision(\n  aquaTree,\n  \"metamask\",\n  undefined,\n  {\n    deepLinkUrl: \"metamask://\",\n    callbackUrl: \"myapp://metamask-callback\",\n    onDeepLinkReady: (url) =\u003e {\n      // Open MetaMask app\n      Linking.openURL(url);\n    }\n  }\n);\n```\n\n##### DID Signing\nSigns with Decentralized Identifier.\n\n```typescript\nconst credentials: CredentialsData = {\n  did_key: \"your-did-key-here\",\n  // ... other fields\n};\n\nconst result = await aquafier.signRevision(\n  aquaTree,\n  \"did\",\n  credentials\n);\n```\n\n##### P12 Certificate Signing\nSigns with P12 certificate.\n\n```typescript\nconst credentials: CredentialsData = {\n  p12_password: \"certificate-password\",\n  p12_content: \"base64-encoded-p12-content\",\n  // ... other fields\n};\n\nconst result = await aquafier.signRevision(\n  aquaTree,\n  \"p12\",\n  credentials\n);\n```\n\n##### Inline Signing\nUse pre-computed signature.\n\n```typescript\nconst inlineOptions: InlineSignerOptions = {\n  walletAddress: \"0x742d35Cc6634C0532925a3b844Bc9e7595f0bEb8\",\n  signature: \"0x8c9d0e1f2a3b4c5d6e7f8a9b0c1d2e3f...\"\n};\n\nconst result = await aquafier.signRevision(\n  aquaTree,\n  \"inline\",\n  undefined,\n  inlineOptions\n);\n```\n\n---\n\n### Witnessing Revisions\n\n#### witnessRevision()\n\nTimestamps a revision via blockchain or TSA.\n\n**Signature:**\n```typescript\nasync witnessRevision(\n  aquaTree: AquaTree,\n  witnessType: WitnessType,\n  witnessConfig: WitnessConfig,\n  credentials?: CredentialsData,\n  witnessPlatform?: WitnessPlatformType,\n  inlineOptions?: InlineWitnessOptions\n): Promise\u003cResult\u003cAquaOperationData, LogData[]\u003e\u003e\n```\n\n**Parameters:**\n- `witnessType`: `\"eth\"`, `\"nostr\"`, or `\"tsa\"`\n- `witnessConfig`: Network and contract configuration\n- `credentials`: Credentials for signing transaction\n- `witnessPlatform`: `\"cli\"` or `\"metamask\"` (Ethereum only)\n- `inlineOptions`: Pre-computed transaction (inline mode)\n\n#### Ethereum Witnessing\n\n**Configuration:**\n```typescript\nconst witnessConfig: WitnessConfig = {\n  witnessEventVerificationHash: latestRevisionHash,\n  witnessNetwork: \"sepolia\",  // or \"mainnet\", \"holesky\"\n  smartContractAddress: \"0x5FbDB2315678afecb367f032d93F642f64180aa3\"\n};\n\nconst credentials: CredentialsData = {\n  mnemonic: \"your mnemonic here\",\n  // ...\n};\n```\n\n**CLI Method** (uses mnemonic):\n```typescript\nconst result = await aquafier.witnessRevision(\n  aquaTree,\n  \"eth\",\n  witnessConfig,\n  credentials,\n  \"cli\"\n);\n```\n\n**MetaMask Method** (prompts user):\n```typescript\nconst result = await aquafier.witnessRevision(\n  aquaTree,\n  \"eth\",\n  witnessConfig,\n  undefined,\n  \"metamask\"\n);\n```\n\n#### Nostr Witnessing\n\n```typescript\nconst witnessConfig: WitnessConfig = {\n  witnessEventVerificationHash: latestRevisionHash,\n  witnessNetwork: \"sepolia\",  // not used for Nostr\n  smartContractAddress: \"\"     // not used for Nostr\n};\n\nconst credentials: CredentialsData = {\n  nostr_sk: \"your-nostr-secret-key\",\n  // ...\n};\n\nconst result = await aquafier.witnessRevision(\n  aquaTree,\n  \"nostr\",\n  witnessConfig,\n  credentials\n);\n```\n\n#### TSA Witnessing\n\n```typescript\nconst result = await aquafier.witnessRevision(\n  aquaTree,\n  \"tsa\",\n  witnessConfig\n);\n```\n\n---\n\n### Linking Revisions\n\n#### linkRevision()\n\nCreates a link revision connecting to other AquaTrees.\n\n**Signature:**\n```typescript\nasync linkRevision(\n  aquaTree: AquaTree,\n  linkedAquaTrees: AquaTree[],\n  linkType?: string\n): Promise\u003cResult\u003cAquaOperationData, LogData[]\u003e\u003e\n```\n\n**Example:**\n```typescript\nconst result = await aquafier.linkRevision(\n  mainAquaTree,\n  [dependency1Tree, dependency2Tree, dependency3Tree],\n  \"dependencies\"\n);\n```\n\n---\n\n### Verification\n\n#### verifyRevisionChain()\n\nVerifies an entire AquaTree chain.\n\n**Signature:**\n```typescript\nasync verifyRevisionChain(\n  aquaTree: AquaTree,\n  credentials?: CredentialsData\n): Promise\u003cVerificationGraphData\u003e\n```\n\n**Parameters:**\n- `aquaTree`: Tree to verify\n- `credentials`: Optional, for Ethereum witness lookup\n\n**Returns:**\n- `VerificationGraphData`: Graph structure with verification results\n\n**Example:**\n```typescript\nconst verificationResult = await aquafier.verifyRevisionChain(aquaTree, credentials);\n\n// Check overall success\nif (verificationResult.isValidationSuccessful) {\n  console.log(\"✓ Chain is valid\");\n} else {\n  console.log(\"✗ Chain validation failed\");\n}\n\n// Traverse verification graph\nfunction printResults(node: VerificationGraphData, depth = 0) {\n  const indent = \"  \".repeat(depth);\n  const status = node.isValidationSuccessful ? \"✓\" : \"✗\";\n  console.log(`${indent}${status} ${node.revisionType}`);\n\n  node.verificationGraphData.forEach(child =\u003e printResults(child, depth + 1));\n}\n\nprintResults(verificationResult);\n```\n\n#### verifyFormRevision()\n\nVerifies form-specific data.\n\n**Signature:**\n```typescript\nasync verifyFormRevision(\n  aquaTree: AquaTree,\n  formData: FormData\n): Promise\u003cFormVerificationResponseData\u003e\n```\n\n---\n\n### Utility Methods\n\n#### removeLastRevision()\n\nRemoves the most recent revision from an AquaTree.\n\n**Signature:**\n```typescript\nremoveLastRevision(\n  aquaTree: AquaTree\n): Result\u003cAquaOperationData, LogData[]\u003e\n```\n\n**Example:**\n```typescript\nconst result = aquafier.removeLastRevision(aquaTree);\n\nif (result.isOk) {\n  const updatedTree = result.data.aquaTree;\n  console.log(\"Revision removed successfully\");\n}\n```\n\n#### checkIfFileAlreadyNotarized()\n\nChecks if a file has already been notarized.\n\n**Signature:**\n```typescript\ncheckIfFileAlreadyNotarized(\n  aquaTree: AquaTree,\n  fileObject: FileObject\n): boolean\n```\n\n#### fetchFilesToBeRead()\n\nGets list of files that need content loaded.\n\n**Signature:**\n```typescript\nfetchFilesToBeRead(aquaTree: AquaTree): string[]\n```\n\n---\n\n## Type Reference\n\n### Core Types\n\n```typescript\ninterface FileObject {\n  fileName: string\n  fileContent: string | AquaTree | Uint8Array | Record\u003cstring, string\u003e | object\n  path: string\n  fileSize?: number\n}\n\ninterface AquaTree {\n  revisions: Revisions\n  file_index: FileIndex\n  tree?: RevisionTree\n  treeMapping?: TreeMapping\n}\n\ninterface Revision {\n  previous_verification_hash: string\n  local_timestamp: string\n  revision_type: RevisionType\n  version: string\n  // ... type-specific fields\n}\n\ntype RevisionType = \"file\" | \"witness\" | \"signature\" | \"form\" | \"link\"\ntype SignType = \"metamask\" | \"cli\" | \"did\" | \"p12\" | \"inline\"\ntype WitnessType = \"tsa\" | \"eth\" | \"nostr\"\ntype WitnessNetwork = \"sepolia\" | \"mainnet\" | \"holesky\"\n```\n\n### Result Type\n\n```typescript\ntype Result\u003cT, E\u003e =\n  | { isOk: true; isErr: false; data: T }\n  | { isOk: false; isErr: true; data: E }\n```\n\n### Configuration Types\n\n```typescript\ninterface CredentialsData {\n  mnemonic: string\n  nostr_sk: string\n  did_key: string\n  alchemy_key: string\n  witness_eth_network: string\n  witness_method: string\n  p12_password?: string\n  p12_content?: string\n}\n\ninterface WitnessConfig {\n  witnessEventVerificationHash: string\n  witnessNetwork: WitnessNetwork\n  smartContractAddress: string\n}\n```\n\n---\n\n## Platform-Specific Notes\n\n### Node.js\n\nFull functionality available:\n- All signing methods\n- All witnessing methods\n- File system access\n- HTTP server for MetaMask callback\n\n```typescript\nimport Aquafier from 'aqua-js-sdk';\nimport fs from 'fs';\n\nconst aquafier = new Aquafier();\n\n// Read file from disk\nconst fileContent = fs.readFileSync('document.pdf');\n\nconst fileObject = {\n  fileName: 'document.pdf',\n  fileContent: fileContent,\n  path: './document.pdf'\n};\n```\n\n### Web Browser\n\nMost functionality available:\n- MetaMask signing (primary method)\n- DID signing\n- Ethereum witnessing via MetaMask\n- Nostr, TSA witnessing\n\n**Limitations:**\n- No P12 signing (requires file system)\n- No CLI signing with mnemonic (security risk in browser)\n\n```typescript\nimport Aquafier from 'aqua-js-sdk/web';\n\nconst aquafier = new Aquafier();\n\n// File from input element\nconst file = document.getElementById('fileInput').files[0];\nconst arrayBuffer = await file.arrayBuffer();\n\nconst fileObject = {\n  fileName: file.name,\n  fileContent: new Uint8Array(arrayBuffer),\n  path: file.name\n};\n```\n\n### React Native\n\nMost functionality with platform adaptations:\n- MetaMask via deep linking\n- DID signing\n- Limited witnessing\n\n**Limitations:**\n- No local HTTP server\n- MetaMask requires custom deep linking\n- File system needs react-native-fs\n\n```typescript\nimport Aquafier from 'aqua-js-sdk/react-native';\nimport RNFS from 'react-native-fs';\n\nconst aquafier = new Aquafier();\n\n// Read file\nconst fileContent = await RNFS.readFile(filePath, 'base64');\n\nconst fileObject = {\n  fileName: 'document.pdf',\n  fileContent: Buffer.from(fileContent, 'base64'),\n  path: filePath\n};\n```\n\n---\n\n## Complete Workflow Examples\n\n### Document Notarization\n\n```typescript\n// 1. Create genesis\nconst fileObject: FileObject = {\n  fileName: \"contract.pdf\",\n  fileContent: pdfBuffer,\n  path: \"/contracts/contract.pdf\"\n};\n\nlet result = await aquafier.createGenesisRevision(fileObject);\nlet aquaTree = result.data.aquaTree;\n\n// 2. Sign with CLI\nconst credentials: CredentialsData = {\n  mnemonic: process.env.MNEMONIC,\n  // ... other fields\n};\n\nresult = await aquafier.signRevision(aquaTree, \"cli\", credentials);\naquaTree = result.data.aquaTree;\n\n// 3. Witness to Ethereum\nconst witnessConfig: WitnessConfig = {\n  witnessEventVerificationHash: Object.keys(aquaTree.revisions)[Object.keys(aquaTree.revisions).length - 1],\n  witnessNetwork: \"sepolia\",\n  smartContractAddress: \"0x5FbDB2315678afecb367f032d93F642f64180aa3\"\n};\n\nresult = await aquafier.witnessRevision(\n  aquaTree,\n  \"eth\",\n  witnessConfig,\n  credentials,\n  \"cli\"\n);\naquaTree = result.data.aquaTree;\n\n// 4. Save\nfs.writeFileSync('contract.aqua.json', JSON.stringify(aquaTree, null, 2));\n```\n\n### Multi-Party Approval\n\n```typescript\n// Party 1: Create and sign\nlet result = await aquafier.createGenesisRevision(fileObject);\nlet aquaTree = result.data.aquaTree;\n\nresult = await aquafier.signRevision(aquaTree, \"cli\", party1Credentials);\naquaTree = result.data.aquaTree;\n\n// Send aquaTree to Party 2\n\n// Party 2: Add signature\nresult = await aquafier.signRevision(aquaTree, \"metamask\");\naquaTree = result.data.aquaTree;\n\n// Send back to Party 1\n\n// Party 1: Witness\nresult = await aquafier.witnessRevision(\n  aquaTree,\n  \"eth\",\n  witnessConfig,\n  party1Credentials,\n  \"cli\"\n);\naquaTree = result.data.aquaTree;\n```\n\n### Form Submission with Verification\n\n```typescript\n// 1. Create form genesis\nconst formData = {\n  name: \"John Doe\",\n  email: \"john@example.com\",\n  status: \"pending\"\n};\n\nconst fileObject: FileObject = {\n  fileName: \"application.json\",\n  fileContent: formData,\n  path: \"/forms/application.json\"\n};\n\nlet result = await aquafier.createGenesisRevision(fileObject, true);  // isForm=true\nlet aquaTree = result.data.aquaTree;\n\n// 2. Sign\nresult = await aquafier.signRevision(aquaTree, \"did\", credentials);\naquaTree = result.data.aquaTree;\n\n// 3. Witness\nresult = await aquafier.witnessRevision(aquaTree, \"nostr\", witnessConfig, credentials);\naquaTree = result.data.aquaTree;\n\n// 4. Verify form\nconst verifyResult = await aquafier.verifyFormRevision(aquaTree, formData);\nconsole.log(\"Form valid:\", verifyResult.isOk);\n```\n\n---\n\n## Error Handling\n\nAll methods return `Result\u003cT, E\u003e` type. Always check for errors:\n\n```typescript\nconst result = await aquafier.createGenesisRevision(fileObject);\n\nif (result.isErr) {\n  // Handle error\n  console.error(\"Failed to create genesis:\");\n  result.data.forEach(log =\u003e {\n    console.error(`[${log.logType}] ${log.log}`);\n  });\n  return;\n}\n\n// Success\nconst aquaTree = result.data.aquaTree;\n```\n\n---\n\n## Best Practices\n\n1. **Always verify results**: Check `isErr` before using data\n2. **Store credentials securely**: Never commit mnemonic/keys\n3. **Use environment variables**: Store sensitive data in `.env`\n4. **Validate inputs**: Check file sizes and formats before processing\n5. **Handle logs**: Display or log all LogData for debugging\n6. **Test on testnets**: Use Sepolia/Holesky before mainnet\n7. **Save AquaTrees**: Persist JSON after each operation\n8. **Verify chains**: Run verification after receiving AquaTrees\n\n---\n\n## Testing\n\nCreate `credentials.json` for testing:\n\n```json\n{\n  \"mnemonic\": \"your test mnemonic\",\n  \"nostr_sk\": \"your nostr secret key\",\n  \"did_key\": \"your did key\",\n  \"alchemy_key\": \"your alchemy api key\",\n  \"witness_eth_network\": \"sepolia\",\n  \"witness_method\": \"cli\"\n}\n```\n\nRun tests:\n```bash\nnpm test\n```\n\nRun specific test file:\n```bash\nnpm test -- ./tests/aquafier.test.ts\n```\n\n---\n\n## See Also\n\n- [Introduction](/previous_versions/version_3/introduction) - Getting started\n- [Concepts](/previous_versions/version_3/concepts) - Core concepts\n- [Schema Reference](/previous_versions/version_3/schema) - Revision specifications\n- [GitHub Repository](https://github.com/inblockio/aqua-verifier-js-lib) - Source code and examples\n"])</script><script>self.__next_f.push([1,"12:[\"$\",\"$14\",null,{\"fallback\":[\"$\",\"$L1a\",null,{}],\"children\":[[\"$\",\"$L1b\",null,{\"header\":[\"$\",\"$L1c\",null,{\"currentVersion\":\"v3.0.2\",\"versions\":[\"v1.1.0\",\"v2.0.2\",\"v3.0.2\",\"v4.0.0\"],\"config\":\"$0:f:0:1:0:props:children:1:props:children:props:children:props:config\"}],\"docs\":[{\"slug\":\"en/concepts\",\"filePath\":\"concepts\",\"title\":\"Concepts\",\"meta\":{\"title\":\"Concepts\",\"description\":\"Core concepts and terminology for Aqua Protocol v3\",\"content\":\"$1d\",\"reading_time\":9,\"word_count\":1657,\"locale\":\"en\"},\"content\":\"$1e\"},{\"slug\":\"en/introduction\",\"filePath\":\"introduction\",\"title\":\"Aqua Protocol v3\",\"meta\":{\"title\":\"Aqua Protocol v3\",\"description\":\"Introduction to Aqua Protocol version 3 with JavaScript/TypeScript SDK\",\"content\":\"$1f\",\"reading_time\":6,\"word_count\":1069,\"locale\":\"en\"},\"content\":\"$20\"},{\"slug\":\"en/schema\",\"filePath\":\"schema\",\"title\":\"Schema Reference\",\"meta\":{\"title\":\"Schema Reference\",\"description\":\"Detailed schema specifications for Aqua Protocol v3 revisions\",\"redirect_from\":[\"/docs/v3/schema_2\",\"/docs/v3/schema\"],\"content\":\"$21\",\"reading_time\":10,\"word_count\":1903,\"locale\":\"en\"},\"content\":\"$22\"},{\"slug\":\"en/tooling\",\"filePath\":\"tooling\",\"title\":\"Tooling \u0026 SDK\",\"meta\":{\"title\":\"Tooling \u0026 SDK\",\"description\":\"Aqua JS SDK API reference and usage guide\",\"content\":\"$23\",\"reading_time\":9,\"word_count\":1773,\"locale\":\"en\"},\"content\":\"$24\"}],\"version\":\"v3.0.2\",\"children\":\"$L25\",\"toc\":\"$L26\",\"config\":\"$0:f:0:1:0:props:children:1:props:children:props:children:props:config\",\"currentPageTabGroup\":\"$undefined\"}],\"$L27\",\"$L28\",\"$L29\"]}]\n"])</script><script>self.__next_f.push([1,"2d:I[839694,[\"/_next/static/chunks/a423cf2782ee23a6.js\",\"/_next/static/chunks/150ebe81571675a9.js\",\"/_next/static/chunks/4421a3eabdff5f47.js\"],\"TableOfContents\"]\n2e:I[839694,[\"/_next/static/chunks/a423cf2782ee23a6.js\",\"/_next/static/chunks/150ebe81571675a9.js\",\"/_next/static/chunks/4421a3eabdff5f47.js\"],\"MdxHotReload\"]\n2f:I[839694,[\"/_next/static/chunks/a423cf2782ee23a6.js\",\"/_next/static/chunks/150ebe81571675a9.js\",\"/_next/static/chunks/4421a3eabdff5f47.js\"],\"HotReloadIndicator\"]\n30:I[839694,[\"/_next/static/chunks/a423cf2782ee23a6.js\",\"/_next/static/chunks/150ebe81571675a9.js\",\"/_next/static/chunks/4421a3eabdff5f47.js\"],\"DevModeBadge\"]\n"])</script><script>self.__next_f.push([1,"25:[\"$\",\"article\",null,{\"className\":\"flex-1 min-w-0\",\"children\":[[\"$\",\"nav\",null,{\"className\":\"flex items-center gap-2 text-sm text-muted-foreground mb-4\",\"aria-label\":\"Breadcrumb\",\"children\":[[\"$\",\"div\",\"/docs/v3.0.2/en\",{\"className\":\"flex items-center gap-2\",\"children\":[false,[\"$\",\"$L7\",null,{\"href\":\"/docs/v3.0.2/en\",\"className\":\"hover:text-foreground transition-colors\",\"children\":\"Docs\"}]]}],[\"$\",\"div\",\"/docs/v3.0.2/en/tooling\",{\"className\":\"flex items-center gap-2\",\"children\":[[\"$\",\"svg\",null,{\"ref\":\"$undefined\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":24,\"height\":24,\"viewBox\":\"0 0 24 24\",\"fill\":\"none\",\"stroke\":\"currentColor\",\"strokeWidth\":2,\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"className\":\"lucide lucide-chevron-right h-4 w-4\",\"children\":[[\"$\",\"path\",\"mthhwq\",{\"d\":\"m9 18 6-6-6-6\"}],\"$undefined\"]}],[\"$\",\"span\",null,{\"className\":\"text-foreground font-medium\",\"children\":\"Tooling \u0026 SDK\"}]]}]]}],false,[\"$\",\"div\",null,{\"className\":\"mb-8\",\"children\":[[\"$\",\"h1\",null,{\"className\":\"text-4xl font-bold tracking-tight mb-3 text-foreground\",\"children\":\"Tooling \u0026 SDK\"}],[\"$\",\"p\",null,{\"className\":\"text-lg text-muted-foreground leading-relaxed\",\"children\":\"Aqua JS SDK API reference and usage guide\"}]]}],[\"$\",\"div\",null,{\"className\":\"flex flex-wrap items-center gap-4 text-sm text-muted-foreground border-b border-border pb-4 mb-6\",\"children\":[[\"$\",\"div\",null,{\"className\":\"flex items-center gap-1.5\",\"children\":[[\"$\",\"svg\",null,{\"ref\":\"$undefined\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":24,\"height\":24,\"viewBox\":\"0 0 24 24\",\"fill\":\"none\",\"stroke\":\"currentColor\",\"strokeWidth\":2,\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"className\":\"lucide lucide-clock h-4 w-4\",\"children\":[[\"$\",\"circle\",\"1mglay\",{\"cx\":\"12\",\"cy\":\"12\",\"r\":\"10\"}],[\"$\",\"polyline\",\"68esgv\",{\"points\":\"12 6 12 12 16 14\"}],\"$undefined\"]}],[\"$\",\"span\",null,{\"children\":[9,\" min read\"]}]]}],\"$undefined\",false]}],[\"$\",\"div\",null,{\"className\":\"prose prose-slate dark:prose-invert max-w-none prose-headings:scroll-mt-24 prose-headings:font-semibold prose-h1:text-4xl prose-h2:text-3xl prose-h2:mt-12 prose-h2:mb-4 prose-h3:text-2xl prose-h3:mt-8 prose-h3:mb-3 prose-p:text-base prose-p:leading-7 prose-p:text-muted-foreground prose-p:mb-4 prose-a:font-normal prose-a:transition-all prose-code:text-primary prose-code:bg-muted/50 prose-code:px-1.5 prose-code:py-0.5 prose-code:rounded-md prose-code:text-[13px] prose-code:font-mono prose-code:border prose-code:border-border/50 prose-code:before:content-none prose-code:after:content-none prose-pre:bg-transparent prose-pre:p-0 prose-ul:list-disc prose-ul:list-inside prose-ul:space-y-2 prose-ul:mb-4 prose-ol:list-decimal prose-ol:list-inside prose-ol:space-y-2 prose-ol:mb-4 prose-li:leading-7 prose-li:text-muted-foreground prose-strong:text-foreground prose-strong:font-semibold\",\"children\":\"$L2a\"}],\"$undefined\",[\"$\",\"div\",null,{\"className\":\"mt-12 pt-6 border-t border-border flex items-center justify-between\",\"children\":[[\"$\",\"a\",null,{\"href\":\"https://github.com/inblockio/aqua-docs/edit/main/docs/v3.0.2/en/tooling.mdx\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"className\":\"flex items-center gap-2 text-sm text-muted-foreground hover:text-foreground transition-colors\",\"children\":[[\"$\",\"svg\",null,{\"ref\":\"$undefined\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":24,\"height\":24,\"viewBox\":\"0 0 24 24\",\"fill\":\"none\",\"stroke\":\"currentColor\",\"strokeWidth\":2,\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"className\":\"lucide lucide-file-pen h-4 w-4\",\"children\":[[\"$\",\"path\",\"1couwa\",{\"d\":\"M12.5 22H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v9.5\"}],[\"$\",\"path\",\"tnqrlb\",{\"d\":\"M14 2v4a2 2 0 0 0 2 2h4\"}],[\"$\",\"path\",\"1y4qbx\",{\"d\":\"M13.378 15.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z\"}],\"$undefined\"]}],\"Edit this page\"]}],[\"$\",\"a\",null,{\"href\":\"https://github.com/inblockio/issues/new\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"className\":\"flex items-center gap-2 text-sm text-muted-foreground hover:text-foreground transition-colors\",\"children\":[\"$L2b\",\"Report an issue\"]}]]}],\"$L2c\"]}]\n"])</script><script>self.__next_f.push([1,"26:[\"$\",\"$L2d\",null,{\"items\":[{\"id\":\"installation\",\"title\":\"Installation\",\"level\":2},{\"id\":\"platform-specific-imports\",\"title\":\"Platform-Specific Imports\",\"level\":3},{\"id\":\"core-api\",\"title\":\"Core API\",\"level\":2},{\"id\":\"aquafier-class\",\"title\":\"Aquafier Class\",\"level\":3},{\"id\":\"creating-revisions\",\"title\":\"Creating Revisions\",\"level\":3},{\"id\":\"signing-revisions\",\"title\":\"Signing Revisions\",\"level\":3},{\"id\":\"witnessing-revisions\",\"title\":\"Witnessing Revisions\",\"level\":3},{\"id\":\"linking-revisions\",\"title\":\"Linking Revisions\",\"level\":3},{\"id\":\"verification\",\"title\":\"Verification\",\"level\":3},{\"id\":\"utility-methods\",\"title\":\"Utility Methods\",\"level\":3},{\"id\":\"type-reference\",\"title\":\"Type Reference\",\"level\":2},{\"id\":\"core-types\",\"title\":\"Core Types\",\"level\":3},{\"id\":\"result-type\",\"title\":\"Result Type\",\"level\":3},{\"id\":\"configuration-types\",\"title\":\"Configuration Types\",\"level\":3},{\"id\":\"platform-specific-notes\",\"title\":\"Platform-Specific Notes\",\"level\":2},{\"id\":\"nodejs\",\"title\":\"Node.js\",\"level\":3},{\"id\":\"web-browser\",\"title\":\"Web Browser\",\"level\":3},{\"id\":\"react-native\",\"title\":\"React Native\",\"level\":3},{\"id\":\"complete-workflow-examples\",\"title\":\"Complete Workflow Examples\",\"level\":2},{\"id\":\"document-notarization\",\"title\":\"Document Notarization\",\"level\":3},{\"id\":\"multi-party-approval\",\"title\":\"Multi-Party Approval\",\"level\":3},{\"id\":\"form-submission-with-verification\",\"title\":\"Form Submission with Verification\",\"level\":3},{\"id\":\"error-handling\",\"title\":\"Error Handling\",\"level\":2},{\"id\":\"best-practices\",\"title\":\"Best Practices\",\"level\":2},{\"id\":\"testing\",\"title\":\"Testing\",\"level\":2},{\"id\":\"see-also\",\"title\":\"See Also\",\"level\":2}],\"config\":\"$0:f:0:1:0:props:children:1:props:children:props:children:props:config\"}]\n"])</script><script>self.__next_f.push([1,"27:[\"$\",\"$L2e\",null,{}]\n28:[\"$\",\"$L2f\",null,{}]\n29:[\"$\",\"$L30\",null,{}]\n"])</script><script>self.__next_f.push([1,"2b:[\"$\",\"svg\",null,{\"ref\":\"$undefined\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":24,\"height\":24,\"viewBox\":\"0 0 24 24\",\"fill\":\"none\",\"stroke\":\"currentColor\",\"strokeWidth\":2,\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"className\":\"lucide lucide-external-link h-4 w-4\",\"children\":[[\"$\",\"path\",\"1q9fwt\",{\"d\":\"M15 3h6v6\"}],[\"$\",\"path\",\"gplh6r\",{\"d\":\"M10 14 21 3\"}],[\"$\",\"path\",\"a6xqqp\",{\"d\":\"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6\"}],\"$undefined\"]}]\n2c:[\"$\",\"div\",null,{\"className\":\"mt-12 pt-8 border-t border-border grid grid-cols-2 gap-4\",\"children\":[[\"$\",\"$L7\",null,{\"href\":\"/docs/v3.0.2/en/schema\",\"className\":\"group flex flex-col gap-2 p-4 rounded-xl border border-border hover:border-primary/50 hover:bg-muted/50 transition-all\",\"style\":{\"textDecoration\":\"none !important\"},\"children\":[[\"$\",\"div\",null,{\"className\":\"flex items-center gap-2 text-sm text-muted-foreground\",\"children\":[[\"$\",\"svg\",null,{\"ref\":\"$undefined\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":24,\"height\":24,\"viewBox\":\"0 0 24 24\",\"fill\":\"none\",\"stroke\":\"currentColor\",\"strokeWidth\":2,\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"className\":\"lucide lucide-chevron-left h-4 w-4\",\"children\":[[\"$\",\"path\",\"1wnfg3\",{\"d\":\"m15 18-6-6 6-6\"}],\"$undefined\"]}],[\"$\",\"span\",null,{\"children\":\"Previous\"}]]}],[\"$\",\"div\",null,{\"className\":\"text-base font-medium text-foreground group-hover:text-primary transition-colors\",\"children\":\"Schema Reference\"}]]}],[\"$\",\"div\",null,{}]]}]\n"])</script><script>self.__next_f.push([1,"31:I[931024,[\"/_next/static/chunks/a423cf2782ee23a6.js\",\"/_next/static/chunks/150ebe81571675a9.js\",\"/_next/static/chunks/4421a3eabdff5f47.js\"],\"CodeBlock\"]\n"])</script><script>self.__next_f.push([1,"2a:[[\"$\",\"h1\",null,{\"className\":\"text-3xl font-semibold tracking-tight mb-6 text-foreground\",\"children\":\"Aqua Protocol v3 - Tooling \u0026 SDK\"}],\"\\n\",[\"$\",\"p\",null,{\"className\":\"text-base leading-7 text-muted-foreground mb-4\",\"children\":\"The Aqua JS SDK (aqua-js-sdk) is a comprehensive TypeScript library for working with Aqua Protocol v3. It provides a complete API for creating, signing, witnessing, and verifying revision chains across multiple platforms.\"}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"installation\",\"className\":\"text-2xl font-semibold tracking-tight mt-10 mb-4 text-foreground scroll-mt-24\",\"children\":\"Installation\"}],\"\\n\",[\"$\",\"$L31\",null,{\"code\":\"npm install aqua-js-sdk\",\"language\":\"bash\",\"filename\":\"$undefined\"}],\"\\n\",[\"$\",\"h3\",null,{\"id\":\"platform-specific-imports\",\"className\":\"text-xl font-medium tracking-tight mt-8 mb-3 text-foreground scroll-mt-24\",\"children\":\"Platform-Specific Imports\"}],\"\\n\",[\"$\",\"$L31\",null,{\"code\":\"// Node.js (default)\\nimport Aquafier from 'aqua-js-sdk';\\n\\n// Web Browser\\nimport Aquafier from 'aqua-js-sdk/web';\\n\\n// React Native\\nimport Aquafier from 'aqua-js-sdk/react-native';\",\"language\":\"typescript\",\"filename\":\"$undefined\"}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"core-api\",\"className\":\"text-2xl font-semibold tracking-tight mt-10 mb-4 text-foreground scroll-mt-24\",\"children\":\"Core API\"}],\"\\n\",[\"$\",\"h3\",null,{\"id\":\"aquafier-class\",\"className\":\"text-xl font-medium tracking-tight mt-8 mb-3 text-foreground scroll-mt-24\",\"children\":\"Aquafier Class\"}],\"\\n\",[\"$\",\"p\",null,{\"className\":\"text-base leading-7 text-muted-foreground mb-4\",\"children\":\"The main class providing all Aqua Protocol operations.\"}],\"\\n\",[\"$\",\"h4\",null,{\"id\":\"constructor\",\"children\":\"Constructor\"}],\"\\n\",[\"$\",\"$L31\",null,{\"code\":\"const aquafier = new Aquafier();\",\"language\":\"typescript\",\"filename\":\"$undefined\"}],\"\\n\",[\"$\",\"p\",null,{\"className\":\"text-base leading-7 text-muted-foreground mb-4\",\"children\":\"No configuration needed for initialization.\"}],\"\\n\",[\"$\",\"hr\",null,{}],\"\\n\",[\"$\",\"h3\",null,{\"id\":\"creating-revisions\",\"className\":\"text-xl font-medium tracking-tight mt-8 mb-3 text-foreground scroll-mt-24\",\"children\":\"Creating Revisions\"}],\"\\n\",[\"$\",\"h4\",null,{\"id\":\"creategenesisrevision\",\"children\":\"createGenesisRevision()\"}],\"\\n\",[\"$\",\"p\",null,{\"className\":\"text-base leading-7 text-muted-foreground mb-4\",\"children\":\"Creates the first revision in a new AquaTree.\"}],\"\\n\",[\"$\",\"p\",null,{\"className\":\"text-base leading-7 text-muted-foreground mb-4\",\"children\":[\"$\",\"strong\",null,{\"children\":\"Signature:\"}]}],\"\\n\",[\"$\",\"$L31\",null,{\"code\":\"async createGenesisRevision(\\n  fileObject: FileObject,\\n  isForm?: boolean,\\n  enableContent?: boolean,\\n  enableScalar?: boolean\\n): Promise\u003cResult\u003cAquaOperationData, LogData[]\u003e\u003e\",\"language\":\"typescript\",\"filename\":\"$undefined\"}],\"\\n\",[\"$\",\"p\",null,{\"className\":\"text-base leading-7 text-muted-foreground mb-4\",\"children\":[\"$\",\"strong\",null,{\"children\":\"Parameters:\"}]}],\"\\n\",[\"$\",\"ul\",null,{\"className\":\"list-disc list-outside pl-5 space-y-2 mb-4 text-muted-foreground [\u0026_p]:mb-0 [\u0026_p]:inline [\u0026_ul]:ml-6 [\u0026_ol]:ml-6\",\"children\":[\"\\n\",[\"$\",\"li\",null,{\"className\":\"leading-7 [\u0026\u003ep]:mb-0 [\u0026\u003ep]:inline\",\"children\":[[\"$\",\"code\",null,{\"className\":\"px-1.5 py-0.5 rounded-md bg-muted/50 text-primary font-mono text-[13px] border border-border/50\",\"children\":\"fileObject\"}],\": File data to create revision from\"]}],\"\\n\",[\"$\",\"li\",null,{\"className\":\"leading-7 [\u0026\u003ep]:mb-0 [\u0026\u003ep]:inline\",\"children\":[[\"$\",\"code\",null,{\"className\":\"px-1.5 py-0.5 rounded-md bg-muted/50 text-primary font-mono text-[13px] border border-border/50\",\"children\":\"isForm\"}],\": If true, creates form revision (default: false)\"]}],\"\\n\",[\"$\",\"li\",null,{\"className\":\"leading-7 [\u0026\u003ep]:mb-0 [\u0026\u003ep]:inline\",\"children\":[[\"$\",\"code\",null,{\"className\":\"px-1.5 py-0.5 rounded-md bg-muted/50 text-primary font-mono text-[13px] border border-border/50\",\"children\":\"enableContent\"}],\": Include file content in revision (default: false)\"]}],\"\\n\",[\"$\",\"li\",null,{\"className\":\"leading-7 [\u0026\u003ep]:mb-0 [\u0026\u003ep]:inline\",\"children\":[\"$L32\",\": Use scalar method instead of tree (default: true)\"]}],\"\\n\"]}],\"\\n\",\"$L33\",\"\\n\",\"$L34\",\"\\n\",\"$L35\",\"\\n\",\"$L36\",\"\\n\",\"$L37\",\"\\n\",\"$L38\",\"\\n\",\"$L39\",\"\\n\",\"$L3a\",\"\\n\",\"$L3b\",\"\\n\",\"$L3c\",\"\\n\",\"$L3d\",\"\\n\",\"$L3e\",\"\\n\",\"$L3f\",\"\\n\",\"$L40\",\"\\n\",\"$L41\",\"\\n\",\"$L42\",\"\\n\",\"$L43\",\"\\n\",\"$L44\",\"\\n\",\"$L45\",\"\\n\",\"$L46\",\"\\n\",\"$L47\",\"\\n\",\"$L48\",\"\\n\",\"$L49\",\"\\n\",\"$L4a\",\"\\n\",\"$L4b\",\"\\n\",\"$L4c\",\"\\n\",\"$L4d\",\"\\n\",\"$L4e\",\"\\n\",\"$L4f\",\"\\n\",\"$L50\",\"\\n\",\"$L51\",\"\\n\",\"$L52\",\"\\n\",\"$L53\",\"\\n\",\"$L54\",\"\\n\",\"$L55\",\"\\n\",\"$L56\",\"\\n\",\"$L57\",\"\\n\",\"$L58\",\"\\n\",\"$L59\",\"\\n\",\"$L5a\",\"\\n\",\"$L5b\",\"\\n\",\"$L5c\",\"\\n\",\"$L5d\",\"\\n\",\"$L5e\",\"\\n\",\"$L5f\",\"\\n\",\"$L60\",\"\\n\",\"$L61\",\"\\n\",\"$L62\",\"\\n\",\"$L63\",\"\\n\",\"$L64\",\"\\n\",\"$L65\",\"\\n\",\"$L66\",\"\\n\",\"$L67\",\"\\n\",\"$L68\",\"\\n\",\"$L69\",\"\\n\",\"$L6a\",\"\\n\",\"$L6b\",\"\\n\",\"$L6c\",\"\\n\",\"$L6d\",\"\\n\",\"$L6e\",\"\\n\",\"$L6f\",\"\\n\",\"$L70\",\"\\n\",\"$L71\",\"\\n\",\"$L72\",\"\\n\",\"$L73\",\"\\n\",\"$L74\",\"\\n\",\"$L75\",\"\\n\",\"$L76\",\"\\n\",\"$L77\",\"\\n\",\"$L78\",\"\\n\",\"$L79\",\"\\n\",\"$L7a\",\"\\n\",\"$L7b\",\"\\n\",\"$L7c\",\"\\n\",\"$L7d\",\"\\n\",\"$L7e\",\"\\n\",\"$L7f\",\"\\n\",\"$L80\",\"\\n\",\"$L81\",\"\\n\",\"$L82\",\"\\n\",\"$L83\",\"\\n\",\"$L84\",\"\\n\",\"$L85\",\"\\n\",\"$L86\",\"\\n\",\"$L87\",\"\\n\",\"$L88\",\"\\n\",\"$L89\",\"\\n\",\"$L8a\",\"\\n\",\"$L8b\",\"\\n\",\"$L8c\",\"\\n\",\"$L8d\",\"\\n\",\"$L8e\",\"\\n\",\"$L8f\",\"\\n\",\"$L90\",\"\\n\",\"$L91\",\"\\n\",\"$L92\",\"\\n\",\"$L93\",\"\\n\",\"$L94\",\"\\n\",\"$L95\",\"\\n\",\"$L96\",\"\\n\",\"$L97\",\"\\n\",\"$L98\",\"\\n\",\"$L99\",\"\\n\",\"$L9a\",\"\\n\",\"$L9b\",\"\\n\",\"$L9c\",\"\\n\",\"$L9d\",\"\\n\",\"$L9e\",\"\\n\",\"$L9f\",\"\\n\",\"$La0\",\"\\n\",\"$La1\",\"\\n\",\"$La2\",\"\\n\",\"$La3\",\"\\n\",\"$La4\",\"\\n\",\"$La5\",\"\\n\",\"$La6\",\"\\n\",\"$La7\",\"\\n\",\"$La8\",\"\\n\",\"$La9\",\"\\n\",\"$Laa\",\"\\n\",\"$Lab\",\"\\n\",\"$Lac\",\"\\n\",\"$Lad\",\"\\n\",\"$Lae\",\"\\n\",\"$Laf\",\"\\n\",\"$Lb0\",\"\\n\",\"$Lb1\",\"\\n\",\"$Lb2\",\"\\n\",\"$Lb3\",\"\\n\",\"$Lb4\",\"\\n\",\"$Lb5\",\"\\n\",\"$Lb6\",\"\\n\",\"$Lb7\",\"\\n\",\"$Lb8\",\"\\n\",\"$Lb9\",\"\\n\",\"$Lba\",\"\\n\",\"$Lbb\",\"\\n\",\"$Lbc\",\"\\n\",\"$Lbd\",\"\\n\",\"$Lbe\",\"\\n\",\"$Lbf\",\"\\n\",\"$Lc0\",\"\\n\",\"$Lc1\",\"\\n\",\"$Lc2\",\"\\n\",\"$Lc3\",\"\\n\",\"$Lc4\",\"\\n\",\"$Lc5\"]\n"])</script><script>self.__next_f.push([1,"32:[\"$\",\"code\",null,{\"className\":\"px-1.5 py-0.5 rounded-md bg-muted/50 text-primary font-mono text-[13px] border border-border/50\",\"children\":\"enableScalar\"}]\n33:[\"$\",\"p\",null,{\"className\":\"text-base leading-7 text-muted-foreground mb-4\",\"children\":[\"$\",\"strong\",null,{\"children\":\"Returns:\"}]}]\n34:[\"$\",\"ul\",null,{\"className\":\"list-disc list-outside pl-5 space-y-2 mb-4 text-muted-foreground [\u0026_p]:mb-0 [\u0026_p]:inline [\u0026_ul]:ml-6 [\u0026_ol]:ml-6\",\"children\":[\"\\n\",[\"$\",\"li\",null,{\"className\":\"leading-7 [\u0026\u003ep]:mb-0 [\u0026\u003ep]:inline\",\"children\":[\"Success: \",[\"$\",\"code\",null,{\"className\":\"px-1.5 py-0.5 rounded-md bg-muted/50 text-primary font-mono text-[13px] border border-border/50\",\"children\":\"AquaOperationData\"}],\" with new AquaTree\"]}],\"\\n\",[\"$\",\"li\",null,{\"className\":\"leading-7 [\u0026\u003ep]:mb-0 [\u0026\u003ep]:inline\",\"children\":\"Failure: Array of error logs\"}],\"\\n\"]}]\n35:[\"$\",\"p\",null,{\"className\":\"text-base leading-7 text-muted-foreground mb-4\",\"children\":[\"$\",\"strong\",null,{\"children\":\"Example:\"}]}]\n36:[\"$\",\"$L31\",null,{\"code\":\"const fileObject: FileObject = {\\n  fileName: \\\"contract.pdf\\\",\\n  fileContent: pdfBuffer, // Uint8Array or string\\n  path: \\\"/documents/contract.pdf\\\"\\n};\\n\\nconst result = await aquafier.createGenesisRevision(fileObject);\\n\\nif (result.isErr) {\\n  result.data.logData.forEach(log =\u003e console.error(log));\\n  return;\\n}\\n\\nconst aquaTree = result.data.aquaTree;\",\"language\":\"typescript\",\"filename\":\"$undefined\"}]\n37:[\"$\",\"h4\",null,{\"id\":\"createnewrevision\",\"children\":\"createNewRevision()\"}]\n38:[\"$\",\"p\",null,{\"className\":\"text-base leading-7 text-muted-foreground mb-4\",\"children\":\"Adds a new file/form revision to an existing AquaTree.\"}]\n39:[\"$\",\"p\",null,{\"className\":\"text-base leading-7 text-muted-foreground mb-4\",\"children\":[\"$\",\"strong\",null,{\"children\":\"Signature:\"}]}]\n3a:[\"$\",\"$L31\",null,{\"code\":\"async createNewRevision(\\n  aquaTree: AquaTree,\\n  fileObject: FileObject,\\n  isForm?: boolean,\\n  enableContent?: boolean,\\n  enableScalar?: boolean\\n): Promise\u003cResult\u003cAquaOperationData, LogData[]\u003e\u003e\",\"language\":\"typescript\",\"filename\":\"$undefined\"}]\n3b:[\"$\",\"p\",null,{\"className\":\"text-base leading-7 text-muted-foreground mb-4\",\"children\":[\"$\",\"strong\",null,{\"children\":\"Example:\"}]}]\n3c:[\"$\",\"$L31\",null,{\"code\":\"const result = await aquafier.createNewRevision(\\n  existingAquaTree,\\n  updatedFileObject,\\n  false,  // not a form\\n  false,  // don't embed content\\n  true    // use scalar method\\n);\",\"language\":\"typescript\",\"filename\":\"$undefined\"}]\n3d:[\"$\",\"hr\",null,{}]\n3e:[\"$\",\"h3\",null,{\"id\":\"signing-revisions\",\"className\":\"text-xl font-medium tracking-tight mt-8 mb-3 text-foreground scroll-mt-24\",\"children\":\"Signing Revisions\"}]\n3f:[\"$\",\"h4\",null,{\"id\":\"signrevision\",\"children\":\"signRevision()\"}]\n40:[\"$\",\"p\",null,{\"className\":\"text-base leading-7 text-muted-foreground mb-4\",\"children\":\"Signs the latest revision in an AquaTree.\"}]\n41:[\"$\",\"p\",null,{\"className\":\"text-base leading-7 text-muted-foreground mb-4\",\"children\":[\"$\",\"strong\",null,{\"children\":\"Signature:\"}]}]\n42:[\"$\",\"$L31\",null,{\"code\":\"async signRevision(\\n  aquaTree: AquaTree,\\n  signType: SignType,\\n  credentials?: CredentialsData,\\n  inlineOptions?: InlineSignerOptions\\n): Promise\u003cResult\u003cAquaOperationData, LogData[]\u003e\u003e\",\"language\":\"typescript\",\"filename\":\"$undefined\"}]\n43:[\"$\",\"p\",null,{\"className\":\"text-base leading-7 text-muted-foreground mb-4\",\"children\":[\"$\",\"strong\",null,{\"children\":\"Parameters:\"}]}]\n"])</script><script>self.__next_f.push([1,"44:[\"$\",\"ul\",null,{\"className\":\"list-disc list-outside pl-5 space-y-2 mb-4 text-muted-foreground [\u0026_p]:mb-0 [\u0026_p]:inline [\u0026_ul]:ml-6 [\u0026_ol]:ml-6\",\"children\":[\"\\n\",[\"$\",\"li\",null,{\"className\":\"leading-7 [\u0026\u003ep]:mb-0 [\u0026\u003ep]:inline\",\"children\":[[\"$\",\"code\",null,{\"className\":\"px-1.5 py-0.5 rounded-md bg-muted/50 text-primary font-mono text-[13px] border border-border/50\",\"children\":\"signType\"}],\": One of \",[\"$\",\"code\",null,{\"className\":\"px-1.5 py-0.5 rounded-md bg-muted/50 text-primary font-mono text-[13px] border border-border/50\",\"children\":\"\\\"cli\\\"\"}],\", \",[\"$\",\"code\",null,{\"className\":\"px-1.5 py-0.5 rounded-md bg-muted/50 text-primary font-mono text-[13px] border border-border/50\",\"children\":\"\\\"metamask\\\"\"}],\", \",[\"$\",\"code\",null,{\"className\":\"px-1.5 py-0.5 rounded-md bg-muted/50 text-primary font-mono text-[13px] border border-border/50\",\"children\":\"\\\"did\\\"\"}],\", \",[\"$\",\"code\",null,{\"className\":\"px-1.5 py-0.5 rounded-md bg-muted/50 text-primary font-mono text-[13px] border border-border/50\",\"children\":\"\\\"p12\\\"\"}],\", \",[\"$\",\"code\",null,{\"className\":\"px-1.5 py-0.5 rounded-md bg-muted/50 text-primary font-mono text-[13px] border border-border/50\",\"children\":\"\\\"inline\\\"\"}]]}],\"\\n\",[\"$\",\"li\",null,{\"className\":\"leading-7 [\u0026\u003ep]:mb-0 [\u0026\u003ep]:inline\",\"children\":[[\"$\",\"code\",null,{\"className\":\"px-1.5 py-0.5 rounded-md bg-muted/50 text-primary font-mono text-[13px] border border-border/50\",\"children\":\"credentials\"}],\": Credentials for CLI, DID, or P12 signing\"]}],\"\\n\",[\"$\",\"li\",null,{\"className\":\"leading-7 [\u0026\u003ep]:mb-0 [\u0026\u003ep]:inline\",\"children\":[[\"$\",\"code\",null,{\"className\":\"px-1.5 py-0.5 rounded-md bg-muted/50 text-primary font-mono text-[13px] border border-border/50\",\"children\":\"inlineOptions\"}],\": Pre-computed signature for inline mode\"]}],\"\\n\"]}]\n"])</script><script>self.__next_f.push([1,"45:[\"$\",\"p\",null,{\"className\":\"text-base leading-7 text-muted-foreground mb-4\",\"children\":[\"$\",\"strong\",null,{\"children\":\"Sign Types:\"}]}]\n46:[\"$\",\"h5\",null,{\"id\":\"cli-signing\",\"children\":\"CLI Signing\"}]\n47:[\"$\",\"p\",null,{\"className\":\"text-base leading-7 text-muted-foreground mb-4\",\"children\":\"Uses BIP39 mnemonic to derive wallet and sign.\"}]\n48:[\"$\",\"$L31\",null,{\"code\":\"const credentials: CredentialsData = {\\n  mnemonic: \\\"abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon about\\\",\\n  // ... other fields\\n};\\n\\nconst result = await aquafier.signRevision(\\n  aquaTree,\\n  \\\"cli\\\",\\n  credentials\\n);\",\"language\":\"typescript\",\"filename\":\"$undefined\"}]\n49:[\"$\",\"h5\",null,{\"id\":\"metamask-signing\",\"children\":\"MetaMask Signing\"}]\n4a:[\"$\",\"p\",null,{\"className\":\"text-base leading-7 text-muted-foreground mb-4\",\"children\":\"Opens MetaMask for user to sign (browser only).\"}]\n4b:[\"$\",\"$L31\",null,{\"code\":\"const result = await aquafier.signRevision(\\n  aquaTree,\\n  \\\"metamask\\\"\\n);\",\"language\":\"typescript\",\"filename\":\"$undefined\"}]\n4c:[\"$\",\"p\",null,{\"className\":\"text-base leading-7 text-muted-foreground mb-4\",\"children\":[\"$\",\"strong\",null,{\"children\":\"React Native MetaMask:\"}]}]\n4d:[\"$\",\"$L31\",null,{\"code\":\"const result = await aquafier.signRevision(\\n  aquaTree,\\n  \\\"metamask\\\",\\n  undefined,\\n  {\\n    deepLinkUrl: \\\"metamask://\\\",\\n    callbackUrl: \\\"myapp://metamask-callback\\\",\\n    onDeepLinkReady: (url) =\u003e {\\n      // Open MetaMask app\\n      Linking.openURL(url);\\n    }\\n  }\\n);\",\"language\":\"typescript\",\"filename\":\"$undefined\"}]\n4e:[\"$\",\"h5\",null,{\"id\":\"did-signing\",\"children\":\"DID Signing\"}]\n4f:[\"$\",\"p\",null,{\"className\":\"text-base leading-7 text-muted-foreground mb-4\",\"children\":\"Signs with Decentralized Identifier.\"}]\n50:[\"$\",\"$L31\",null,{\"code\":\"const credentials: CredentialsData = {\\n  did_key: \\\"your-did-key-here\\\",\\n  // ... other fields\\n};\\n\\nconst result = await aquafier.signRevision(\\n  aquaTree,\\n  \\\"did\\\",\\n  credentials\\n);\",\"language\":\"typescript\",\"filename\":\"$undefined\"}]\n51:[\"$\",\"h5\",null,{\"id\":\"p12-certificate-signing\",\"children\":\"P12 Certificate Signing\"}]\n52:[\"$\",\"p\",null,{\"className\":\"text-base leading-7 text-muted-foreground mb-4\",\"children\":\"Signs with P12 certificate.\"}]\n53:[\"$\",\"$L31\",null,{\"code\":\"const credentials: CredentialsData = {\\n  p12_password: \\\"certificate-password\\\",\\n  p12_content: \\\"base64-encoded-p12-content\\\",\\n  // ... other fields\\n};\\n\\nconst result = await aquafier.signRevision(\\n  aquaTree,\\n  \\\"p12\\\",\\n  credentials\\n);\",\"language\":\"typescript\",\"filename\":\"$undefined\"}]\n54:[\"$\",\"h5\",null,{\"id\":\"inline-signing\",\"children\":\"Inline Signing\"}]\n55:[\"$\",\"p\",null,{\"className\":\"text-base leading-7 text-muted-foreground mb-4\",\"children\":\"Use pre-computed signature.\"}]\n56:[\"$\",\"$L31\",null,{\"code\":\"const inlineOptions: InlineSignerOptions = {\\n  walletAddress: \\\"0x742d35Cc6634C0532925a3b844Bc9e7595f0bEb8\\\",\\n  signature: \\\"0x8c9d0e1f2a3b4c5d6e7f8a9b0c1d2e3f...\\\"\\n};\\n\\nconst result = await aquafier.signRevision(\\n  aquaTree,\\n  \\\"inline\\\",\\n  undefined,\\n  inlineOptions\\n);\",\"language\":\"typescript\",\"filename\":\"$undefined\"}]\n57:[\"$\",\"hr\",null,{}]\n58:[\"$\",\"h3\",null,{\"id\":\"witnessing-revisions\",\"className\":\"text-xl font-medium tracking-tight mt-8 mb-3 text-foreground scroll-mt-24\",\"children\":\"Witnessing Revisions\"}]\n59:[\"$\",\"h4\",null,{\"id\":\"witnessrevision\",\"children\":\"witnessRevision()\"}]\n5a:[\"$\",\"p\",null,{\"className\":\"text-base leading-7 text-muted-foreground mb-4\",\"children\":\"Timestamps a revision via blockchain or TSA.\"}]\n5b:[\"$\",\"p\",null,{\"className\":\"text-base leading-7 text-muted-foreground mb-4\",\"children\":[\"$\",\"strong\",null,{\"children\":\"Signature:\"}]}]\n5c:[\"$\",\"$L31\",null,{\"code\":\"async witnessRevision(\\n  aquaTree: AquaTree,\\n  witnessType: WitnessType,\\n  witnessConfig: WitnessConfig,\\n  credentials?: CredentialsData,\\n  witnessPlatform?: WitnessPlatformType,\\n  inlineOptions?: InlineWitnessOptions\\n): Promise\u003cResult\u003cAquaOperationData, LogData[]\u003e\u003e\",\"language\":\"typescript\",\"filename\":\"$undefined\"}]\n5d:[\"$\",\"p\",null,{\"className\":\"text-base leading-7 text"])</script><script>self.__next_f.push([1,"-muted-foreground mb-4\",\"children\":[\"$\",\"strong\",null,{\"children\":\"Parameters:\"}]}]\n"])</script><script>self.__next_f.push([1,"5e:[\"$\",\"ul\",null,{\"className\":\"list-disc list-outside pl-5 space-y-2 mb-4 text-muted-foreground [\u0026_p]:mb-0 [\u0026_p]:inline [\u0026_ul]:ml-6 [\u0026_ol]:ml-6\",\"children\":[\"\\n\",[\"$\",\"li\",null,{\"className\":\"leading-7 [\u0026\u003ep]:mb-0 [\u0026\u003ep]:inline\",\"children\":[[\"$\",\"code\",null,{\"className\":\"px-1.5 py-0.5 rounded-md bg-muted/50 text-primary font-mono text-[13px] border border-border/50\",\"children\":\"witnessType\"}],\": \",[\"$\",\"code\",null,{\"className\":\"px-1.5 py-0.5 rounded-md bg-muted/50 text-primary font-mono text-[13px] border border-border/50\",\"children\":\"\\\"eth\\\"\"}],\", \",[\"$\",\"code\",null,{\"className\":\"px-1.5 py-0.5 rounded-md bg-muted/50 text-primary font-mono text-[13px] border border-border/50\",\"children\":\"\\\"nostr\\\"\"}],\", or \",[\"$\",\"code\",null,{\"className\":\"px-1.5 py-0.5 rounded-md bg-muted/50 text-primary font-mono text-[13px] border border-border/50\",\"children\":\"\\\"tsa\\\"\"}]]}],\"\\n\",[\"$\",\"li\",null,{\"className\":\"leading-7 [\u0026\u003ep]:mb-0 [\u0026\u003ep]:inline\",\"children\":[[\"$\",\"code\",null,{\"className\":\"px-1.5 py-0.5 rounded-md bg-muted/50 text-primary font-mono text-[13px] border border-border/50\",\"children\":\"witnessConfig\"}],\": Network and contract configuration\"]}],\"\\n\",[\"$\",\"li\",null,{\"className\":\"leading-7 [\u0026\u003ep]:mb-0 [\u0026\u003ep]:inline\",\"children\":[[\"$\",\"code\",null,{\"className\":\"px-1.5 py-0.5 rounded-md bg-muted/50 text-primary font-mono text-[13px] border border-border/50\",\"children\":\"credentials\"}],\": Credentials for signing transaction\"]}],\"\\n\",[\"$\",\"li\",null,{\"className\":\"leading-7 [\u0026\u003ep]:mb-0 [\u0026\u003ep]:inline\",\"children\":[[\"$\",\"code\",null,{\"className\":\"px-1.5 py-0.5 rounded-md bg-muted/50 text-primary font-mono text-[13px] border border-border/50\",\"children\":\"witnessPlatform\"}],\": \",[\"$\",\"code\",null,{\"className\":\"px-1.5 py-0.5 rounded-md bg-muted/50 text-primary font-mono text-[13px] border border-border/50\",\"children\":\"\\\"cli\\\"\"}],\" or \",[\"$\",\"code\",null,{\"className\":\"px-1.5 py-0.5 rounded-md bg-muted/50 text-primary font-mono text-[13px] border border-border/50\",\"children\":\"\\\"metamask\\\"\"}],\" (Ethereum only)\"]}],\"\\n\",[\"$\",\"li\",null,{\"className\":\"leading-7 [\u0026\u003ep]:mb-0 [\u0026\u003ep]:inline\",\"children\":[[\"$\",\"code\",null,{\"className\":\"px-1.5 py-0.5 rounded-md bg-muted/50 text-primary font-mono text-[13px] border border-border/50\",\"children\":\"inlineOptions\"}],\": Pre-computed transaction (inline mode)\"]}],\"\\n\"]}]\n"])</script><script>self.__next_f.push([1,"5f:[\"$\",\"h4\",null,{\"id\":\"ethereum-witnessing\",\"children\":\"Ethereum Witnessing\"}]\n60:[\"$\",\"p\",null,{\"className\":\"text-base leading-7 text-muted-foreground mb-4\",\"children\":[\"$\",\"strong\",null,{\"children\":\"Configuration:\"}]}]\n61:[\"$\",\"$L31\",null,{\"code\":\"const witnessConfig: WitnessConfig = {\\n  witnessEventVerificationHash: latestRevisionHash,\\n  witnessNetwork: \\\"sepolia\\\",  // or \\\"mainnet\\\", \\\"holesky\\\"\\n  smartContractAddress: \\\"0x5FbDB2315678afecb367f032d93F642f64180aa3\\\"\\n};\\n\\nconst credentials: CredentialsData = {\\n  mnemonic: \\\"your mnemonic here\\\",\\n  // ...\\n};\",\"language\":\"typescript\",\"filename\":\"$undefined\"}]\n62:[\"$\",\"p\",null,{\"className\":\"text-base leading-7 text-muted-foreground mb-4\",\"children\":[[\"$\",\"strong\",null,{\"children\":\"CLI Method\"}],\" (uses mnemonic):\"]}]\n63:[\"$\",\"$L31\",null,{\"code\":\"const result = await aquafier.witnessRevision(\\n  aquaTree,\\n  \\\"eth\\\",\\n  witnessConfig,\\n  credentials,\\n  \\\"cli\\\"\\n);\",\"language\":\"typescript\",\"filename\":\"$undefined\"}]\n64:[\"$\",\"p\",null,{\"className\":\"text-base leading-7 text-muted-foreground mb-4\",\"children\":[[\"$\",\"strong\",null,{\"children\":\"MetaMask Method\"}],\" (prompts user):\"]}]\n65:[\"$\",\"$L31\",null,{\"code\":\"const result = await aquafier.witnessRevision(\\n  aquaTree,\\n  \\\"eth\\\",\\n  witnessConfig,\\n  undefined,\\n  \\\"metamask\\\"\\n);\",\"language\":\"typescript\",\"filename\":\"$undefined\"}]\n66:[\"$\",\"h4\",null,{\"id\":\"nostr-witnessing\",\"children\":\"Nostr Witnessing\"}]\n67:[\"$\",\"$L31\",null,{\"code\":\"const witnessConfig: WitnessConfig = {\\n  witnessEventVerificationHash: latestRevisionHash,\\n  witnessNetwork: \\\"sepolia\\\",  // not used for Nostr\\n  smartContractAddress: \\\"\\\"     // not used for Nostr\\n};\\n\\nconst credentials: CredentialsData = {\\n  nostr_sk: \\\"your-nostr-secret-key\\\",\\n  // ...\\n};\\n\\nconst result = await aquafier.witnessRevision(\\n  aquaTree,\\n  \\\"nostr\\\",\\n  witnessConfig,\\n  credentials\\n);\",\"language\":\"typescript\",\"filename\":\"$undefined\"}]\n68:[\"$\",\"h4\",null,{\"id\":\"tsa-witnessing\",\"children\":\"TSA Witnessing\"}]\n69:[\"$\",\"$L31\",null,{\"code\":\"const result = await aquafier.witnessRevision(\\n  aquaTree,\\n  \\\"tsa\\\",\\n  witnessConfig\\n);\",\"language\":\"typescript\",\"filename\":\"$undefined\"}]\n6a:[\"$\",\"hr\",null,{}]\n6b:[\"$\",\"h3\",null,{\"id\":\"linking-revisions\",\"className\":\"text-xl font-medium tracking-tight mt-8 mb-3 text-foreground scroll-mt-24\",\"children\":\"Linking Revisions\"}]\n6c:[\"$\",\"h4\",null,{\"id\":\"linkrevision\",\"children\":\"linkRevision()\"}]\n6d:[\"$\",\"p\",null,{\"className\":\"text-base leading-7 text-muted-foreground mb-4\",\"children\":\"Creates a link revision connecting to other AquaTrees.\"}]\n6e:[\"$\",\"p\",null,{\"className\":\"text-base leading-7 text-muted-foreground mb-4\",\"children\":[\"$\",\"strong\",null,{\"children\":\"Signature:\"}]}]\n6f:[\"$\",\"$L31\",null,{\"code\":\"async linkRevision(\\n  aquaTree: AquaTree,\\n  linkedAquaTrees: AquaTree[],\\n  linkType?: string\\n): Promise\u003cResult\u003cAquaOperationData, LogData[]\u003e\u003e\",\"language\":\"typescript\",\"filename\":\"$undefined\"}]\n70:[\"$\",\"p\",null,{\"className\":\"text-base leading-7 text-muted-foreground mb-4\",\"children\":[\"$\",\"strong\",null,{\"children\":\"Example:\"}]}]\n71:[\"$\",\"$L31\",null,{\"code\":\"const result = await aquafier.linkRevision(\\n  mainAquaTree,\\n  [dependency1Tree, dependency2Tree, dependency3Tree],\\n  \\\"dependencies\\\"\\n);\",\"language\":\"typescript\",\"filename\":\"$undefined\"}]\n72:[\"$\",\"hr\",null,{}]\n73:[\"$\",\"h3\",null,{\"id\":\"verification\",\"className\":\"text-xl font-medium tracking-tight mt-8 mb-3 text-foreground scroll-mt-24\",\"children\":\"Verification\"}]\n74:[\"$\",\"h4\",null,{\"id\":\"verifyrevisionchain\",\"children\":\"verifyRevisionChain()\"}]\n75:[\"$\",\"p\",null,{\"className\":\"text-base leading-7 text-muted-foreground mb-4\",\"children\":\"Verifies an entire AquaTree chain.\"}]\n76:[\"$\",\"p\",null,{\"className\":\"text-base leading-7 text-muted-foreground mb-4\",\"children\":[\"$\",\"strong\",null,{\"children\":\"Signature:\"}]}]\n77:[\"$\",\"$L31\",null,{\"code\":\"async verifyRevisionChain(\\n  aquaTree: AquaTree,\\n  credentials?: CredentialsData\\n): Promise\u003cVerificationGraphData\u003e\",\"language\":\"typescript\",\"filename\":\"$undefined\"}]\n78:[\"$\",\"p\",null,{\"className\":\"text-base leading-7 text-muted-foreground"])</script><script>self.__next_f.push([1," mb-4\",\"children\":[\"$\",\"strong\",null,{\"children\":\"Parameters:\"}]}]\n79:[\"$\",\"ul\",null,{\"className\":\"list-disc list-outside pl-5 space-y-2 mb-4 text-muted-foreground [\u0026_p]:mb-0 [\u0026_p]:inline [\u0026_ul]:ml-6 [\u0026_ol]:ml-6\",\"children\":[\"\\n\",[\"$\",\"li\",null,{\"className\":\"leading-7 [\u0026\u003ep]:mb-0 [\u0026\u003ep]:inline\",\"children\":[[\"$\",\"code\",null,{\"className\":\"px-1.5 py-0.5 rounded-md bg-muted/50 text-primary font-mono text-[13px] border border-border/50\",\"children\":\"aquaTree\"}],\": Tree to verify\"]}],\"\\n\",[\"$\",\"li\",null,{\"className\":\"leading-7 [\u0026\u003ep]:mb-0 [\u0026\u003ep]:inline\",\"children\":[[\"$\",\"code\",null,{\"className\":\"px-1.5 py-0.5 rounded-md bg-muted/50 text-primary font-mono text-[13px] border border-border/50\",\"children\":\"credentials\"}],\": Optional, for Ethereum witness lookup\"]}],\"\\n\"]}]\n7a:[\"$\",\"p\",null,{\"className\":\"text-base leading-7 text-muted-foreground mb-4\",\"children\":[\"$\",\"strong\",null,{\"children\":\"Returns:\"}]}]\n7b:[\"$\",\"ul\",null,{\"className\":\"list-disc list-outside pl-5 space-y-2 mb-4 text-muted-foreground [\u0026_p]:mb-0 [\u0026_p]:inline [\u0026_ul]:ml-6 [\u0026_ol]:ml-6\",\"children\":[\"\\n\",[\"$\",\"li\",null,{\"className\":\"leading-7 [\u0026\u003ep]:mb-0 [\u0026\u003ep]:inline\",\"children\":[[\"$\",\"code\",null,{\"className\":\"px-1.5 py-0.5 rounded-md bg-muted/50 text-primary font-mono text-[13px] border border-border/50\",\"children\":\"VerificationGraphData\"}],\": Graph structure with verification results\"]}],\"\\n\"]}]\n7c:[\"$\",\"p\",null,{\"className\":\"text-base leading-7 text-muted-foreground mb-4\",\"children\":[\"$\",\"strong\",null,{\"children\":\"Example:\"}]}]\n7d:[\"$\",\"$L31\",null,{\"code\":\"const verificationResult = await aquafier.verifyRevisionChain(aquaTree, credentials);\\n\\n// Check overall success\\nif (verificationResult.isValidationSuccessful) {\\n  console.log(\\\"✓ Chain is valid\\\");\\n} else {\\n  console.log(\\\"✗ Chain validation failed\\\");\\n}\\n\\n// Traverse verification graph\\nfunction printResults(node: VerificationGraphData, depth = 0) {\\n  const indent = \\\"  \\\".repeat(depth);\\n  const status = node.isValidationSuccessful ? \\\"✓\\\" : \\\"✗\\\";\\n  console.log(`${indent}${status} ${node.revisionType}`);\\n\\n  node.verificationGraphData.forEach(child =\u003e printResults(child, depth + 1));\\n}\\n\\nprintResults(verificationResult);\",\"language\":\"typescript\",\"filename\":\"$undefined\"}]\n7e:[\"$\",\"h4\",null,{\"id\":\"verifyformrevision\",\"children\":\"verifyFormRevision()\"}]\n7f:[\"$\",\"p\",null,{\"className\":\"text-base leading-7 text-muted-foreground mb-4\",\"children\":\"Verifies form-specific data.\"}]\n80:[\"$\",\"p\",null,{\"className\":\"text-base leading-7 text-muted-foreground mb-4\",\"children\":[\"$\",\"strong\",null,{\"children\":\"Signature:\"}]}]\n81:[\"$\",\"$L31\",null,{\"code\":\"async verifyFormRevision(\\n  aquaTree: AquaTree,\\n  formData: FormData\\n): Promise\u003cFormVerificationResponseData\u003e\",\"language\":\"typescript\",\"filename\":\"$undefined\"}]\n82:[\"$\",\"hr\",null,{}]\n83:[\"$\",\"h3\",null,{\"id\":\"utility-methods\",\"className\":\"text-xl font-medium tracking-tight mt-8 mb-3 text-foreground scroll-mt-24\",\"children\":\"Utility Methods\"}]\n84:[\"$\",\"h4\",null,{\"id\":\"removelastrevision\",\"children\":\"removeLastRevision()\"}]\n85:[\"$\",\"p\",null,{\"className\":\"text-base leading-7 text-muted-foreground mb-4\",\"children\":\"Removes the most recent revision from an AquaTree.\"}]\n86:[\"$\",\"p\",null,{\"className\":\"text-base leading-7 text-muted-foreground mb-4\",\"children\":[\"$\",\"strong\",null,{\"children\":\"Signature:\"}]}]\n87:[\"$\",\"$L31\",null,{\"code\":\"removeLastRevision(\\n  aquaTree: AquaTree\\n): Result\u003cAquaOperationData, LogData[]\u003e\",\"language\":\"typescript\",\"filename\":\"$undefined\"}]\n88:[\"$\",\"p\",null,{\"className\":\"text-base leading-7 text-muted-foreground mb-4\",\"children\":[\"$\",\"strong\",null,{\"children\":\"Example:\"}]}]\n89:[\"$\",\"$L31\",null,{\"code\":\"const result = aquafier.removeLastRevision(aquaTree);\\n\\nif (result.isOk) {\\n  const updatedTree = result.data.aquaTree;\\n  console.log(\\\"Revision removed successfully\\\");\\n}\",\"language\":\"typescript\",\"filename\":\"$undefined\"}]\n8a:[\"$\",\"h4\",null,{\"id\":\"checkiffilealreadynotarized\",\"children\":\"checkIfFileAlreadyNotarized()\"}]\n8b:[\"$\",\"p\",null,{\"className\":\"text-base leading-7 text-muted-foreground mb-4\",\"children\":\"Checks if a file has already been n"])</script><script>self.__next_f.push([1,"otarized.\"}]\n8c:[\"$\",\"p\",null,{\"className\":\"text-base leading-7 text-muted-foreground mb-4\",\"children\":[\"$\",\"strong\",null,{\"children\":\"Signature:\"}]}]\n8d:[\"$\",\"$L31\",null,{\"code\":\"checkIfFileAlreadyNotarized(\\n  aquaTree: AquaTree,\\n  fileObject: FileObject\\n): boolean\",\"language\":\"typescript\",\"filename\":\"$undefined\"}]\n8e:[\"$\",\"h4\",null,{\"id\":\"fetchfilestoberead\",\"children\":\"fetchFilesToBeRead()\"}]\n8f:[\"$\",\"p\",null,{\"className\":\"text-base leading-7 text-muted-foreground mb-4\",\"children\":\"Gets list of files that need content loaded.\"}]\n90:[\"$\",\"p\",null,{\"className\":\"text-base leading-7 text-muted-foreground mb-4\",\"children\":[\"$\",\"strong\",null,{\"children\":\"Signature:\"}]}]\n91:[\"$\",\"$L31\",null,{\"code\":\"fetchFilesToBeRead(aquaTree: AquaTree): string[]\",\"language\":\"typescript\",\"filename\":\"$undefined\"}]\n92:[\"$\",\"hr\",null,{}]\n93:[\"$\",\"h2\",null,{\"id\":\"type-reference\",\"className\":\"text-2xl font-semibold tracking-tight mt-10 mb-4 text-foreground scroll-mt-24\",\"children\":\"Type Reference\"}]\n94:[\"$\",\"h3\",null,{\"id\":\"core-types\",\"className\":\"text-xl font-medium tracking-tight mt-8 mb-3 text-foreground scroll-mt-24\",\"children\":\"Core Types\"}]\n95:[\"$\",\"$L31\",null,{\"code\":\"interface FileObject {\\n  fileName: string\\n  fileContent: string | AquaTree | Uint8Array | Record\u003cstring, string\u003e | object\\n  path: string\\n  fileSize?: number\\n}\\n\\ninterface AquaTree {\\n  revisions: Revisions\\n  file_index: FileIndex\\n  tree?: RevisionTree\\n  treeMapping?: TreeMapping\\n}\\n\\ninterface Revision {\\n  previous_verification_hash: string\\n  local_timestamp: string\\n  revision_type: RevisionType\\n  version: string\\n  // ... type-specific fields\\n}\\n\\ntype RevisionType = \\\"file\\\" | \\\"witness\\\" | \\\"signature\\\" | \\\"form\\\" | \\\"link\\\"\\ntype SignType = \\\"metamask\\\" | \\\"cli\\\" | \\\"did\\\" | \\\"p12\\\" | \\\"inline\\\"\\ntype WitnessType = \\\"tsa\\\" | \\\"eth\\\" | \\\"nostr\\\"\\ntype WitnessNetwork = \\\"sepolia\\\" | \\\"mainnet\\\" | \\\"holesky\\\"\",\"language\":\"typescript\",\"filename\":\"$undefined\"}]\n96:[\"$\",\"h3\",null,{\"id\":\"result-type\",\"className\":\"text-xl font-medium tracking-tight mt-8 mb-3 text-foreground scroll-mt-24\",\"children\":\"Result Type\"}]\n97:[\"$\",\"$L31\",null,{\"code\":\"type Result\u003cT, E\u003e =\\n  | { isOk: true; isErr: false; data: T }\\n  | { isOk: false; isErr: true; data: E }\",\"language\":\"typescript\",\"filename\":\"$undefined\"}]\n98:[\"$\",\"h3\",null,{\"id\":\"configuration-types\",\"className\":\"text-xl font-medium tracking-tight mt-8 mb-3 text-foreground scroll-mt-24\",\"children\":\"Configuration Types\"}]\n99:[\"$\",\"$L31\",null,{\"code\":\"interface CredentialsData {\\n  mnemonic: string\\n  nostr_sk: string\\n  did_key: string\\n  alchemy_key: string\\n  witness_eth_network: string\\n  witness_method: string\\n  p12_password?: string\\n  p12_content?: string\\n}\\n\\ninterface WitnessConfig {\\n  witnessEventVerificationHash: string\\n  witnessNetwork: WitnessNetwork\\n  smartContractAddress: string\\n}\",\"language\":\"typescript\",\"filename\":\"$undefined\"}]\n9a:[\"$\",\"hr\",null,{}]\n9b:[\"$\",\"h2\",null,{\"id\":\"platform-specific-notes\",\"className\":\"text-2xl font-semibold tracking-tight mt-10 mb-4 text-foreground scroll-mt-24\",\"children\":\"Platform-Specific Notes\"}]\n9c:[\"$\",\"h3\",null,{\"id\":\"nodejs\",\"className\":\"text-xl font-medium tracking-tight mt-8 mb-3 text-foreground scroll-mt-24\",\"children\":\"Node.js\"}]\n9d:[\"$\",\"p\",null,{\"className\":\"text-base leading-7 text-muted-foreground mb-4\",\"children\":\"Full functionality available:\"}]\n9e:[\"$\",\"ul\",null,{\"className\":\"list-disc list-outside pl-5 space-y-2 mb-4 text-muted-foreground [\u0026_p]:mb-0 [\u0026_p]:inline [\u0026_ul]:ml-6 [\u0026_ol]:ml-6\",\"children\":[\"\\n\",[\"$\",\"li\",null,{\"className\":\"leading-7 [\u0026\u003ep]:mb-0 [\u0026\u003ep]:inline\",\"children\":\"All signing methods\"}],\"\\n\",[\"$\",\"li\",null,{\"className\":\"leading-7 [\u0026\u003ep]:mb-0 [\u0026\u003ep]:inline\",\"children\":\"All witnessing methods\"}],\"\\n\",[\"$\",\"li\",null,{\"className\":\"leading-7 [\u0026\u003ep]:mb-0 [\u0026\u003ep]:inline\",\"children\":\"File system access\"}],\"\\n\",[\"$\",\"li\",null,{\"className\":\"leading-7 [\u0026\u003ep]:mb-0 [\u0026\u003ep]:inline\",\"children\":\"HTTP server for MetaMask callback\"}],\"\\n\"]}]\n9f:[\"$\",\"$L31\",null,{\"code\":\"import Aquafier from 'aqua-js-sdk';\\nimport fs from 'fs';\\n\\nconst aquafier = new Aquafier();\\"])</script><script>self.__next_f.push([1,"n\\n// Read file from disk\\nconst fileContent = fs.readFileSync('document.pdf');\\n\\nconst fileObject = {\\n  fileName: 'document.pdf',\\n  fileContent: fileContent,\\n  path: './document.pdf'\\n};\",\"language\":\"typescript\",\"filename\":\"$undefined\"}]\na0:[\"$\",\"h3\",null,{\"id\":\"web-browser\",\"className\":\"text-xl font-medium tracking-tight mt-8 mb-3 text-foreground scroll-mt-24\",\"children\":\"Web Browser\"}]\na1:[\"$\",\"p\",null,{\"className\":\"text-base leading-7 text-muted-foreground mb-4\",\"children\":\"Most functionality available:\"}]\na2:[\"$\",\"ul\",null,{\"className\":\"list-disc list-outside pl-5 space-y-2 mb-4 text-muted-foreground [\u0026_p]:mb-0 [\u0026_p]:inline [\u0026_ul]:ml-6 [\u0026_ol]:ml-6\",\"children\":[\"\\n\",[\"$\",\"li\",null,{\"className\":\"leading-7 [\u0026\u003ep]:mb-0 [\u0026\u003ep]:inline\",\"children\":\"MetaMask signing (primary method)\"}],\"\\n\",[\"$\",\"li\",null,{\"className\":\"leading-7 [\u0026\u003ep]:mb-0 [\u0026\u003ep]:inline\",\"children\":\"DID signing\"}],\"\\n\",[\"$\",\"li\",null,{\"className\":\"leading-7 [\u0026\u003ep]:mb-0 [\u0026\u003ep]:inline\",\"children\":\"Ethereum witnessing via MetaMask\"}],\"\\n\",[\"$\",\"li\",null,{\"className\":\"leading-7 [\u0026\u003ep]:mb-0 [\u0026\u003ep]:inline\",\"children\":\"Nostr, TSA witnessing\"}],\"\\n\"]}]\na3:[\"$\",\"p\",null,{\"className\":\"text-base leading-7 text-muted-foreground mb-4\",\"children\":[\"$\",\"strong\",null,{\"children\":\"Limitations:\"}]}]\na4:[\"$\",\"ul\",null,{\"className\":\"list-disc list-outside pl-5 space-y-2 mb-4 text-muted-foreground [\u0026_p]:mb-0 [\u0026_p]:inline [\u0026_ul]:ml-6 [\u0026_ol]:ml-6\",\"children\":[\"\\n\",[\"$\",\"li\",null,{\"className\":\"leading-7 [\u0026\u003ep]:mb-0 [\u0026\u003ep]:inline\",\"children\":\"No P12 signing (requires file system)\"}],\"\\n\",[\"$\",\"li\",null,{\"className\":\"leading-7 [\u0026\u003ep]:mb-0 [\u0026\u003ep]:inline\",\"children\":\"No CLI signing with mnemonic (security risk in browser)\"}],\"\\n\"]}]\na5:[\"$\",\"$L31\",null,{\"code\":\"import Aquafier from 'aqua-js-sdk/web';\\n\\nconst aquafier = new Aquafier();\\n\\n// File from input element\\nconst file = document.getElementById('fileInput').files[0];\\nconst arrayBuffer = await file.arrayBuffer();\\n\\nconst fileObject = {\\n  fileName: file.name,\\n  fileContent: new Uint8Array(arrayBuffer),\\n  path: file.name\\n};\",\"language\":\"typescript\",\"filename\":\"$undefined\"}]\na6:[\"$\",\"h3\",null,{\"id\":\"react-native\",\"className\":\"text-xl font-medium tracking-tight mt-8 mb-3 text-foreground scroll-mt-24\",\"children\":\"React Native\"}]\na7:[\"$\",\"p\",null,{\"className\":\"text-base leading-7 text-muted-foreground mb-4\",\"children\":\"Most functionality with platform adaptations:\"}]\na8:[\"$\",\"ul\",null,{\"className\":\"list-disc list-outside pl-5 space-y-2 mb-4 text-muted-foreground [\u0026_p]:mb-0 [\u0026_p]:inline [\u0026_ul]:ml-6 [\u0026_ol]:ml-6\",\"children\":[\"\\n\",[\"$\",\"li\",null,{\"className\":\"leading-7 [\u0026\u003ep]:mb-0 [\u0026\u003ep]:inline\",\"children\":\"MetaMask via deep linking\"}],\"\\n\",[\"$\",\"li\",null,{\"className\":\"leading-7 [\u0026\u003ep]:mb-0 [\u0026\u003ep]:inline\",\"children\":\"DID signing\"}],\"\\n\",[\"$\",\"li\",null,{\"className\":\"leading-7 [\u0026\u003ep]:mb-0 [\u0026\u003ep]:inline\",\"children\":\"Limited witnessing\"}],\"\\n\"]}]\na9:[\"$\",\"p\",null,{\"className\":\"text-base leading-7 text-muted-foreground mb-4\",\"children\":[\"$\",\"strong\",null,{\"children\":\"Limitations:\"}]}]\naa:[\"$\",\"ul\",null,{\"className\":\"list-disc list-outside pl-5 space-y-2 mb-4 text-muted-foreground [\u0026_p]:mb-0 [\u0026_p]:inline [\u0026_ul]:ml-6 [\u0026_ol]:ml-6\",\"children\":[\"\\n\",[\"$\",\"li\",null,{\"className\":\"leading-7 [\u0026\u003ep]:mb-0 [\u0026\u003ep]:inline\",\"children\":\"No local HTTP server\"}],\"\\n\",[\"$\",\"li\",null,{\"className\":\"leading-7 [\u0026\u003ep]:mb-0 [\u0026\u003ep]:inline\",\"children\":\"MetaMask requires custom deep linking\"}],\"\\n\",[\"$\",\"li\",null,{\"className\":\"leading-7 [\u0026\u003ep]:mb-0 [\u0026\u003ep]:inline\",\"children\":\"File system needs react-native-fs\"}],\"\\n\"]}]\nab:[\"$\",\"$L31\",null,{\"code\":\"import Aquafier from 'aqua-js-sdk/react-native';\\nimport RNFS from 'react-native-fs';\\n\\nconst aquafier = new Aquafier();\\n\\n// Read file\\nconst fileContent = await RNFS.readFile(filePath, 'base64');\\n\\nconst fileObject = {\\n  fileName: 'document.pdf',\\n  fileContent: Buffer.from(fileContent, 'base64'),\\n  path: filePath\\n};\",\"language\":\"typescript\",\"filename\":\"$undefined\"}]\nac:[\"$\",\"hr\",null,{}]\nad:[\"$\",\"h2\",null,{\"id\":\"complete-workflow-examples\",\"className\":\"text-2xl font-semibold tracking-tight mt-10 mb-4 text-foreground scroll-mt-24\","])</script><script>self.__next_f.push([1,"\"children\":\"Complete Workflow Examples\"}]\nae:[\"$\",\"h3\",null,{\"id\":\"document-notarization\",\"className\":\"text-xl font-medium tracking-tight mt-8 mb-3 text-foreground scroll-mt-24\",\"children\":\"Document Notarization\"}]\naf:[\"$\",\"$L31\",null,{\"code\":\"// 1. Create genesis\\nconst fileObject: FileObject = {\\n  fileName: \\\"contract.pdf\\\",\\n  fileContent: pdfBuffer,\\n  path: \\\"/contracts/contract.pdf\\\"\\n};\\n\\nlet result = await aquafier.createGenesisRevision(fileObject);\\nlet aquaTree = result.data.aquaTree;\\n\\n// 2. Sign with CLI\\nconst credentials: CredentialsData = {\\n  mnemonic: process.env.MNEMONIC,\\n  // ... other fields\\n};\\n\\nresult = await aquafier.signRevision(aquaTree, \\\"cli\\\", credentials);\\naquaTree = result.data.aquaTree;\\n\\n// 3. Witness to Ethereum\\nconst witnessConfig: WitnessConfig = {\\n  witnessEventVerificationHash: Object.keys(aquaTree.revisions)[Object.keys(aquaTree.revisions).length - 1],\\n  witnessNetwork: \\\"sepolia\\\",\\n  smartContractAddress: \\\"0x5FbDB2315678afecb367f032d93F642f64180aa3\\\"\\n};\\n\\nresult = await aquafier.witnessRevision(\\n  aquaTree,\\n  \\\"eth\\\",\\n  witnessConfig,\\n  credentials,\\n  \\\"cli\\\"\\n);\\naquaTree = result.data.aquaTree;\\n\\n// 4. Save\\nfs.writeFileSync('contract.aqua.json', JSON.stringify(aquaTree, null, 2));\",\"language\":\"typescript\",\"filename\":\"$undefined\"}]\nb0:[\"$\",\"h3\",null,{\"id\":\"multi-party-approval\",\"className\":\"text-xl font-medium tracking-tight mt-8 mb-3 text-foreground scroll-mt-24\",\"children\":\"Multi-Party Approval\"}]\nb1:[\"$\",\"$L31\",null,{\"code\":\"// Party 1: Create and sign\\nlet result = await aquafier.createGenesisRevision(fileObject);\\nlet aquaTree = result.data.aquaTree;\\n\\nresult = await aquafier.signRevision(aquaTree, \\\"cli\\\", party1Credentials);\\naquaTree = result.data.aquaTree;\\n\\n// Send aquaTree to Party 2\\n\\n// Party 2: Add signature\\nresult = await aquafier.signRevision(aquaTree, \\\"metamask\\\");\\naquaTree = result.data.aquaTree;\\n\\n// Send back to Party 1\\n\\n// Party 1: Witness\\nresult = await aquafier.witnessRevision(\\n  aquaTree,\\n  \\\"eth\\\",\\n  witnessConfig,\\n  party1Credentials,\\n  \\\"cli\\\"\\n);\\naquaTree = result.data.aquaTree;\",\"language\":\"typescript\",\"filename\":\"$undefined\"}]\nb2:[\"$\",\"h3\",null,{\"id\":\"form-submission-with-verification\",\"className\":\"text-xl font-medium tracking-tight mt-8 mb-3 text-foreground scroll-mt-24\",\"children\":\"Form Submission with Verification\"}]\nb3:[\"$\",\"$L31\",null,{\"code\":\"// 1. Create form genesis\\nconst formData = {\\n  name: \\\"John Doe\\\",\\n  email: \\\"john@example.com\\\",\\n  status: \\\"pending\\\"\\n};\\n\\nconst fileObject: FileObject = {\\n  fileName: \\\"application.json\\\",\\n  fileContent: formData,\\n  path: \\\"/forms/application.json\\\"\\n};\\n\\nlet result = await aquafier.createGenesisRevision(fileObject, true);  // isForm=true\\nlet aquaTree = result.data.aquaTree;\\n\\n// 2. Sign\\nresult = await aquafier.signRevision(aquaTree, \\\"did\\\", credentials);\\naquaTree = result.data.aquaTree;\\n\\n// 3. Witness\\nresult = await aquafier.witnessRevision(aquaTree, \\\"nostr\\\", witnessConfig, credentials);\\naquaTree = result.data.aquaTree;\\n\\n// 4. Verify form\\nconst verifyResult = await aquafier.verifyFormRevision(aquaTree, formData);\\nconsole.log(\\\"Form valid:\\\", verifyResult.isOk);\",\"language\":\"typescript\",\"filename\":\"$undefined\"}]\nb4:[\"$\",\"hr\",null,{}]\nb5:[\"$\",\"h2\",null,{\"id\":\"error-handling\",\"className\":\"text-2xl font-semibold tracking-tight mt-10 mb-4 text-foreground scroll-mt-24\",\"children\":\"Error Handling\"}]\nb6:[\"$\",\"p\",null,{\"className\":\"text-base leading-7 text-muted-foreground mb-4\",\"children\":[\"All methods return \",[\"$\",\"code\",null,{\"className\":\"px-1.5 py-0.5 rounded-md bg-muted/50 text-primary font-mono text-[13px] border border-border/50\",\"children\":\"Result\u003cT, E\u003e\"}],\" type. Always check for errors:\"]}]\nb7:[\"$\",\"$L31\",null,{\"code\":\"const result = await aquafier.createGenesisRevision(fileObject);\\n\\nif (result.isErr) {\\n  // Handle error\\n  console.error(\\\"Failed to create genesis:\\\");\\n  result.data.forEach(log =\u003e {\\n    console.error(`[${log.logType}] ${log.log}`);\\n  });\\n  return;\\n}\\n\\n// Success\\nconst aquaTree = result.data.aquaTree;\",\"language\":\""])</script><script>self.__next_f.push([1,"typescript\",\"filename\":\"$undefined\"}]\nb8:[\"$\",\"hr\",null,{}]\nb9:[\"$\",\"h2\",null,{\"id\":\"best-practices\",\"className\":\"text-2xl font-semibold tracking-tight mt-10 mb-4 text-foreground scroll-mt-24\",\"children\":\"Best Practices\"}]\n"])</script><script>self.__next_f.push([1,"ba:[\"$\",\"ol\",null,{\"className\":\"list-decimal list-outside pl-5 space-y-2 mb-4 text-muted-foreground [\u0026_p]:mb-0 [\u0026_p]:inline [\u0026_ul]:ml-6 [\u0026_ol]:ml-6\",\"children\":[\"\\n\",[\"$\",\"li\",null,{\"className\":\"leading-7 [\u0026\u003ep]:mb-0 [\u0026\u003ep]:inline\",\"children\":[[\"$\",\"strong\",null,{\"children\":\"Always verify results\"}],\": Check \",[\"$\",\"code\",null,{\"className\":\"px-1.5 py-0.5 rounded-md bg-muted/50 text-primary font-mono text-[13px] border border-border/50\",\"children\":\"isErr\"}],\" before using data\"]}],\"\\n\",[\"$\",\"li\",null,{\"className\":\"leading-7 [\u0026\u003ep]:mb-0 [\u0026\u003ep]:inline\",\"children\":[[\"$\",\"strong\",null,{\"children\":\"Store credentials securely\"}],\": Never commit mnemonic/keys\"]}],\"\\n\",[\"$\",\"li\",null,{\"className\":\"leading-7 [\u0026\u003ep]:mb-0 [\u0026\u003ep]:inline\",\"children\":[[\"$\",\"strong\",null,{\"children\":\"Use environment variables\"}],\": Store sensitive data in \",[\"$\",\"code\",null,{\"className\":\"px-1.5 py-0.5 rounded-md bg-muted/50 text-primary font-mono text-[13px] border border-border/50\",\"children\":\".env\"}]]}],\"\\n\",[\"$\",\"li\",null,{\"className\":\"leading-7 [\u0026\u003ep]:mb-0 [\u0026\u003ep]:inline\",\"children\":[[\"$\",\"strong\",null,{\"children\":\"Validate inputs\"}],\": Check file sizes and formats before processing\"]}],\"\\n\",[\"$\",\"li\",null,{\"className\":\"leading-7 [\u0026\u003ep]:mb-0 [\u0026\u003ep]:inline\",\"children\":[[\"$\",\"strong\",null,{\"children\":\"Handle logs\"}],\": Display or log all LogData for debugging\"]}],\"\\n\",[\"$\",\"li\",null,{\"className\":\"leading-7 [\u0026\u003ep]:mb-0 [\u0026\u003ep]:inline\",\"children\":[[\"$\",\"strong\",null,{\"children\":\"Test on testnets\"}],\": Use Sepolia/Holesky before mainnet\"]}],\"\\n\",[\"$\",\"li\",null,{\"className\":\"leading-7 [\u0026\u003ep]:mb-0 [\u0026\u003ep]:inline\",\"children\":[[\"$\",\"strong\",null,{\"children\":\"Save AquaTrees\"}],\": Persist JSON after each operation\"]}],\"\\n\",[\"$\",\"li\",null,{\"className\":\"leading-7 [\u0026\u003ep]:mb-0 [\u0026\u003ep]:inline\",\"children\":[[\"$\",\"strong\",null,{\"children\":\"Verify chains\"}],\": Run verification after receiving AquaTrees\"]}],\"\\n\"]}]\n"])</script><script>self.__next_f.push([1,"bb:[\"$\",\"hr\",null,{}]\nbc:[\"$\",\"h2\",null,{\"id\":\"testing\",\"className\":\"text-2xl font-semibold tracking-tight mt-10 mb-4 text-foreground scroll-mt-24\",\"children\":\"Testing\"}]\nbd:[\"$\",\"p\",null,{\"className\":\"text-base leading-7 text-muted-foreground mb-4\",\"children\":[\"Create \",[\"$\",\"code\",null,{\"className\":\"px-1.5 py-0.5 rounded-md bg-muted/50 text-primary font-mono text-[13px] border border-border/50\",\"children\":\"credentials.json\"}],\" for testing:\"]}]\nbe:[\"$\",\"$L31\",null,{\"code\":\"{\\n  \\\"mnemonic\\\": \\\"your test mnemonic\\\",\\n  \\\"nostr_sk\\\": \\\"your nostr secret key\\\",\\n  \\\"did_key\\\": \\\"your did key\\\",\\n  \\\"alchemy_key\\\": \\\"your alchemy api key\\\",\\n  \\\"witness_eth_network\\\": \\\"sepolia\\\",\\n  \\\"witness_method\\\": \\\"cli\\\"\\n}\",\"language\":\"json\",\"filename\":\"$undefined\"}]\nbf:[\"$\",\"p\",null,{\"className\":\"text-base leading-7 text-muted-foreground mb-4\",\"children\":\"Run tests:\"}]\nc0:[\"$\",\"$L31\",null,{\"code\":\"npm test\",\"language\":\"bash\",\"filename\":\"$undefined\"}]\nc1:[\"$\",\"p\",null,{\"className\":\"text-base leading-7 text-muted-foreground mb-4\",\"children\":\"Run specific test file:\"}]\nc2:[\"$\",\"$L31\",null,{\"code\":\"npm test -- ./tests/aquafier.test.ts\",\"language\":\"bash\",\"filename\":\"$undefined\"}]\nc3:[\"$\",\"hr\",null,{}]\nc4:[\"$\",\"h2\",null,{\"id\":\"see-also\",\"className\":\"text-2xl font-semibold tracking-tight mt-10 mb-4 text-foreground scroll-mt-24\",\"children\":\"See Also\"}]\n"])</script><script>self.__next_f.push([1,"c5:[\"$\",\"ul\",null,{\"className\":\"list-disc list-outside pl-5 space-y-2 mb-4 text-muted-foreground [\u0026_p]:mb-0 [\u0026_p]:inline [\u0026_ul]:ml-6 [\u0026_ol]:ml-6\",\"children\":[\"\\n\",[\"$\",\"li\",null,{\"className\":\"leading-7 [\u0026\u003ep]:mb-0 [\u0026\u003ep]:inline\",\"children\":[[\"$\",\"a\",null,{\"href\":\"/previous_versions/version_3/introduction\",\"className\":\"text-primary hover:underline font-medium\",\"target\":\"$undefined\",\"rel\":\"$undefined\",\"children\":\"Introduction\"}],\" - Getting started\"]}],\"\\n\",[\"$\",\"li\",null,{\"className\":\"leading-7 [\u0026\u003ep]:mb-0 [\u0026\u003ep]:inline\",\"children\":[[\"$\",\"a\",null,{\"href\":\"/previous_versions/version_3/concepts\",\"className\":\"text-primary hover:underline font-medium\",\"target\":\"$undefined\",\"rel\":\"$undefined\",\"children\":\"Concepts\"}],\" - Core concepts\"]}],\"\\n\",[\"$\",\"li\",null,{\"className\":\"leading-7 [\u0026\u003ep]:mb-0 [\u0026\u003ep]:inline\",\"children\":[[\"$\",\"a\",null,{\"href\":\"/previous_versions/version_3/schema\",\"className\":\"text-primary hover:underline font-medium\",\"target\":\"$undefined\",\"rel\":\"$undefined\",\"children\":\"Schema Reference\"}],\" - Revision specifications\"]}],\"\\n\",[\"$\",\"li\",null,{\"className\":\"leading-7 [\u0026\u003ep]:mb-0 [\u0026\u003ep]:inline\",\"children\":[[\"$\",\"a\",null,{\"href\":\"https://github.com/inblockio/aqua-verifier-js-lib\",\"className\":\"text-primary hover:underline font-medium\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"children\":\"GitHub Repository\"}],\" - Source code and examples\"]}],\"\\n\"]}]\n"])</script><script>self.__next_f.push([1,"17:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"meta\",\"1\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\n"])</script><script>self.__next_f.push([1,"c6:I[27201,[\"/_next/static/chunks/d96012bcfc98706a.js\",\"/_next/static/chunks/73e3194f06db260e.js\"],\"IconMark\"]\n15:null\n19:[[\"$\",\"title\",\"0\",{\"children\":\"Tooling \u0026 SDK | Aqua Protocol\"}],[\"$\",\"meta\",\"1\",{\"name\":\"description\",\"content\":\"Aqua JS SDK API reference and usage guide\"}],[\"$\",\"link\",\"2\",{\"rel\":\"canonical\",\"href\":\"https://aqua-protocol.org/docs/v3.0.2/en/tooling\"}],[\"$\",\"meta\",\"3\",{\"property\":\"og:title\",\"content\":\"Tooling \u0026 SDK\"}],[\"$\",\"meta\",\"4\",{\"property\":\"og:description\",\"content\":\"Aqua JS SDK API reference and usage guide\"}],[\"$\",\"meta\",\"5\",{\"property\":\"og:url\",\"content\":\"https://aqua-protocol.org/docs/v3.0.2/en/tooling\"}],[\"$\",\"meta\",\"6\",{\"property\":\"og:site_name\",\"content\":\"Documentation Platform\"}],[\"$\",\"meta\",\"7\",{\"property\":\"og:locale\",\"content\":\"en_US\"}],[\"$\",\"meta\",\"8\",{\"property\":\"og:type\",\"content\":\"article\"}],[\"$\",\"meta\",\"9\",{\"name\":\"twitter:card\",\"content\":\"summary_large_image\"}],[\"$\",\"meta\",\"10\",{\"name\":\"twitter:title\",\"content\":\"Tooling \u0026 SDK\"}],[\"$\",\"meta\",\"11\",{\"name\":\"twitter:description\",\"content\":\"Aqua JS SDK API reference and usage guide\"}],[\"$\",\"link\",\"12\",{\"rel\":\"icon\",\"href\":\"/logo/aqua-logo.png\"}],[\"$\",\"link\",\"13\",{\"rel\":\"apple-touch-icon\",\"href\":\"/apple-icon.png\"}],[\"$\",\"$Lc6\",\"14\",{}]]\n"])</script></body></html>