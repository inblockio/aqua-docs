<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-1.3.2 docs-doc-page docs-doc-id-AccessControl" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.6.3">
<title data-rh="true">Access Control | AQUA Protocol</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://aqua-protocol.org/featured-background.png"><meta data-rh="true" name="twitter:image" content="https://aqua-protocol.org/featured-background.png"><meta data-rh="true" property="og:url" content="https://aqua-protocol.org/docs/v3/AccessControl"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="1.3.2"><meta data-rh="true" name="docusaurus_tag" content="docs-default-1.3.2"><meta data-rh="true" name="docsearch:version" content="1.3.2"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-1.3.2"><meta data-rh="true" property="og:title" content="Access Control | AQUA Protocol"><meta data-rh="true" name="description" content="This document specifies the access control mechanisms in version 3 of the Aqua Protocol, leveraging portable hash-chains (Aqua-Chains) to manage permissions and enforce secure data exchange. Access control is facilitated through structured revisions within Aqua-Chains, enabling authoritative users to grant or negotiate access to resources using cryptographic signatures and optional bilateral agreements."><meta data-rh="true" property="og:description" content="This document specifies the access control mechanisms in version 3 of the Aqua Protocol, leveraging portable hash-chains (Aqua-Chains) to manage permissions and enforce secure data exchange. Access control is facilitated through structured revisions within Aqua-Chains, enabling authoritative users to grant or negotiate access to resources using cryptographic signatures and optional bilateral agreements."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://aqua-protocol.org/docs/v3/AccessControl"><link data-rh="true" rel="alternate" href="https://aqua-protocol.org/docs/v3/AccessControl" hreflang="en"><link data-rh="true" rel="alternate" href="https://aqua-protocol.org/docs/v3/AccessControl" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="AQUA Protocol RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="AQUA Protocol Atom Feed"><link rel="stylesheet" href="/assets/css/styles.22d6e792.css">
<script src="/assets/js/runtime~main.e5809909.js" defer="defer"></script>
<script src="/assets/js/main.34a140c5.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/favicons/android-192x192.png" alt="Aqua Protocol" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/favicons/android-192x192.png" alt="Aqua Protocol" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Aqua Protocol</b></a><div class="navbar__item dropdown dropdown--hoverable"><a aria-current="page" class="navbar__link active" aria-haspopup="true" aria-expanded="false" role="button" href="/docs/v3/AccessControl">v3</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/next/implementations/reference-architecture">Next</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/v3/AccessControl">v3</a></li><li><a class="dropdown__link" href="/docs/v2/prologue">v2</a></li><li><a class="dropdown__link" href="/docs/v1/intro">v1</a></li></ul></div></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/docs/v3/intro">Documentation</a><a class="navbar__item navbar__link" href="/community">Community</a><a href="https://github.com/inblockio" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/v3/intro">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/v3/schema_2">Schema Reference</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/v3/VerifierTests">Verifier Tests</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/v3/RestAPI">Developer Tools</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/docs/v3/AquaIdentity">Security &amp; Identity</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/v3/AquaIdentity">Aqua Identity</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/v3/AccessControl">Access Control</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/v3/Cheque">Use Cases</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Security &amp; Identity</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Access Control</span><meta itemprop="position" content="2"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: v3</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Access Control</h1></header>
<p>This document specifies the access control mechanisms in version 3 of the Aqua Protocol, leveraging portable hash-chains (Aqua-Chains) to manage permissions and enforce secure data exchange. Access control is facilitated through structured revisions within Aqua-Chains, enabling authoritative users to grant or negotiate access to resources using cryptographic signatures and optional bilateral agreements.</p>
<p>The examples below illustrate two primary access control scenarios: unilateral access grants and bilateral access agreements requiring receiver acknowledgment. These use Ethereum-based signatures and SHA256 hashing, with optional timestamping on the Ethereum blockchain for trust.</p>
<p>Context: Prototype for Fire-Wall like systems where prototyped in version 1.2 of the protocol, see <a href="https://github.com/inblockio/aqua-guardian" target="_blank" rel="noopener noreferrer">https://github.com/inblockio/aqua-guardian</a></p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="unilateral-access-grant">Unilateral Access Grant<a href="#unilateral-access-grant" class="hash-link" aria-label="Direct link to Unilateral Access Grant" title="Direct link to Unilateral Access Grant">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="overview">Overview<a href="#overview" class="hash-link" aria-label="Direct link to Overview" title="Direct link to Overview">​</a></h3>
<p>A unilateral access grant allows an authoritative user to permit another party to access a specific resource without requiring additional acknowledgment. The sender must be an authoritative user within the context where the access is interpreted.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="input-json-for-access-grant">Input JSON for Access Grant<a href="#input-json-for-access-grant" class="hash-link" aria-label="Direct link to Input JSON for Access Grant" title="Direct link to Input JSON for Access Grant">​</a></h3>
<p>The input is a JSON form submitted to create an AquaTree revision.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;type&quot;: &quot;access&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;sender&quot;: &quot;0xbdc64c49bf736cfe1b8233b083d3d632f26feb27&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;receiver&quot;: &quot;0x556f9d33Ac143718861bf23C918b50D32ff09F2f&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;resource&quot;: &quot;0x98b736ef2dcdd0402f32748c4312b3226b24be8b8757ccd50b818991f98f93ad&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li><strong><code>type</code></strong>: Specifies the form type as an access grant.</li>
<li><strong><code>sender</code></strong>: Ethereum wallet address of the authoritative user granting access.</li>
<li><strong><code>receiver</code></strong>: Ethereum wallet address of the recipient granted access.</li>
<li><strong><code>resource</code></strong>: Verification hash of the Aqua-Chain revision representing the resource (e.g., a file or dataset).</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="resulting-aqua-chain-revision-datastructure">Resulting Aqua-Chain Revision Datastructure<a href="#resulting-aqua-chain-revision-datastructure" class="hash-link" aria-label="Direct link to Resulting Aqua-Chain Revision Datastructure" title="Direct link to Resulting Aqua-Chain Revision Datastructure">​</a></h3>
<p>The access grant is encoded into an AquaTree with two revisions: a form revision and a signature revision. The signature verifies the sender’s authority.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;0x78daea3f7a0e2a5699489bbdcb205fb829deed50d92883e2cff5204e5684c8fb&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;previous_verification_hash&quot;: &quot;&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;local_timestamp&quot;: &quot;20250305204539&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;revision_type&quot;: &quot;form&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;file_hash&quot;: &quot;625110fe1d0c45174728fa6761029e8790b4323aa98a0aa73203f6e0161bdf85&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;file_nonce&quot;: &quot;18ac9ab5e9c06d73441aa3bdf76461312a8acb0e29da8e3ac6d263b46b1a0948&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;version&quot;: &quot;https://aqua-protocol.org/docs/v3/schema_2 | SHA256 | Method: tree&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;forms_type&quot;: &quot;access&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;forms_sender&quot;: &quot;0xbdc64c49bf736cfe1b8233b083d3d632f26feb27&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;forms_receiver&quot;: &quot;0x556f9d33Ac143718861bf23C918b50D32ff09F2f&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;forms_resource&quot;: &quot;0x98b736ef2dcdd0402f32748c4312b3226b24be8b8757ccd50b818991f98f93ad&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;leaves&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;0ce8e015983856b9aa4bf1b981d4c1190cb3d75e8e672d939acbd99863803fd0&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;a1cc6e765d9443175ba32a450a04106a78391dbc036f8c437bf801744e4db417&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;a93ec79a8b62a91db5927c6b8d231284e3d018527769b21d71d555efbf390dde&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;aa0fb1f2bd8c5ee3169f03983d1c8d4ae50d48898282344ffb2a01ed0a0ce0eb&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;6e44f260490db970aa88fc21969f9018efb09b68e2e105765740fde4c82fff8e&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;0f7937d986689f822e4a296e2832195c19b119f2bb33ed3d01238e7da270fce0&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;356f5f23ac38ad9b94a9f962baee07cadd9212207541b538e19511b096bcf846&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;d781acf7ba880ecae581ffd8debcb4f5cb430bc2f237e27a6098471a9f7ffa60&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;43fcaef3dc4b2a2d0550543b638048edcfb710da9276da109a9e011ed1a53ed1&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;39ccd407bb105ed3be74df4a546d9b10c4f6c80e48b559102b04fa2b29aa83b4&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;0x2b4510a35f731af92fb2fde4dd78d5e325e174f84fb56123c973eaa6b3c57cd0&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;previous_verification_hash&quot;: &quot;0x78daea3f7a0e2a5699489bbdcb205fb829deed50d92883e2cff5204e5684c8fb&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;local_timestamp&quot;: &quot;20250305204619&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;revision_type&quot;: &quot;signature&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;signature&quot;: &quot;0xa8c1b94521428454c96446523719a5a1795ec187e845efe7df5ce1c44dc99ca54d2813eed5e24fd4898bb8e5015fcc1f2df80c3d1b928dd7541b6f82011e419c1c&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;signature_public_key&quot;: &quot;0x03b6ff4b0c45ce230eb48499614538ca7daa43000395e694ac92eaa1e4b805df8a&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;signature_wallet_address&quot;: &quot;0xbdc64c49bf736cfe1b8233b083d3d632f26feb27&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;signature_type&quot;: &quot;ethereum:eip-191&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;version&quot;: &quot;https://aqua-protocol.org/docs/v3/schema_2 | SHA256 | Method: scalar&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="enforcement">Enforcement<a href="#enforcement" class="hash-link" aria-label="Direct link to Enforcement" title="Direct link to Enforcement">​</a></h3>
<p>The protocol requires:</p>
<ol>
<li>Verification of the signature using the sender’s public key.</li>
<li>Confirmation that the sender is an authoritative user within the domain managing the resource.</li>
<li>Permission granted to the receiver to access the resource identified by <code>forms_resource</code>.</li>
</ol>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="bilateral-access-agreement">Bilateral Access Agreement<a href="#bilateral-access-agreement" class="hash-link" aria-label="Direct link to Bilateral Access Agreement" title="Direct link to Bilateral Access Agreement">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="overview-1">Overview<a href="#overview-1" class="hash-link" aria-label="Direct link to Overview" title="Direct link to Overview">​</a></h3>
<p>A bilateral access agreement requires both the sender and receiver to sign an Aqua-Chain, formalizing conditions for data sharing. The receiver’s signature acknowledges the conditions, and the resource is shared only after both signatures are present.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="input-json-for-access-agreement">Input JSON for Access Agreement<a href="#input-json-for-access-agreement" class="hash-link" aria-label="Direct link to Input JSON for Access Agreement" title="Direct link to Input JSON for Access Agreement">​</a></h3>
<p>The input includes conditions that the receiver must acknowledge.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;type&quot;: &quot;access_agreement&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;sender&quot;: &quot;0xbdc64c49bf736cfe1b8233b083d3d632f26feb27&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;receiver&quot;: &quot;0xa2026582B94FEb9124231fbF7b052c39218954C2&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;resource&quot;: &quot;0x98b736ef2dcdd0402f32748c4312b3226b24be8b8757ccd50b818991f98f93ad&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;conditions&quot;: &quot;With signing this access agreement, the receiver agrees to use the resource solely for non-commercial purposes and not to redistribute it without prior consent.&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li><strong><code>conditions</code></strong>: Human-readable and machine-enforceable terms of use</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="resulting-aqua-chain-revision-datastructure-1">Resulting Aqua-Chain Revision Datastructure<a href="#resulting-aqua-chain-revision-datastructure-1" class="hash-link" aria-label="Direct link to Resulting Aqua-Chain Revision Datastructure" title="Direct link to Resulting Aqua-Chain Revision Datastructure">​</a></h3>
<p>The agreement comprises three revisions: the form, the sender’s signature, and the receiver’s signature.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;revisions&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;0xb9bc2f140ae99258eb350aca87f5de0f26f2204fd4dc143683b1d1497f87e6f9&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;previous_verification_hash&quot;: &quot;&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;local_timestamp&quot;: &quot;20250305205355&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;revision_type&quot;: &quot;form&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;file_hash&quot;: &quot;78cbba02860c4e7f376f1b0544b747f1b3e3127d9f3712d2ec98c7fa03ed2e90&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;file_nonce&quot;: &quot;42f43925d31bfdd26ac339c272a547c5d217d5d35ab87f4d337f5be7ce8cff94&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;version&quot;: &quot;https://aqua-protocol.org/docs/v3/schema_2 | SHA256 | Method: tree&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;forms_type&quot;: &quot;access_agreement&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;forms_sender&quot;: &quot;0xbdc64c49bf736cfe1b8233b083d3d632f26feb27&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;forms_receiver&quot;: &quot;0xa2026582B94FEb9124231fbF7b052c39218954C2&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;forms_resource&quot;: &quot;0x98b736ef2dcdd0402f32748c4312b3226b24be8b8757ccd50b818991f98f93ad&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;forms_conditions&quot;: &quot;With signing this access agreement, the receiver agrees to use the resource solely for non-commercial purposes and not to redistribute it without prior consent.&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;leaves&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;d19b134d9445113182f49cb00bdbe1c26876bd05e64155120825530bd799fca8&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;b58f63b8c75ce58b2344b821f5374bd981480e0a12d8fc7135395d3b9ce7501c&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;cf42137b5cf6ae8ddd4b46d6a69abbe4fb6808b82a519b999cf8b3e708a650ec&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;64d1e018b19bf2d17f37a214d090fd307b5fea9be326a4d76ad48de5cb26fea2&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;aa0fb1f2bd8c5ee3169f03983d1c8d4ae50d48898282344ffb2a01ed0a0ce0eb&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;6e44f260490db970aa88fc21969f9018efb09b68e2e105765740fde4c82fff8e&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;91016c1a2a26b2dbab249bf4760062136aa89326028afaf8a69193749f80484f&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;7eb6a8beb0f74cb11e14eeff9ec4d70bafe4cc5739824d5d147580403a8ea466&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;d781acf7ba880ecae581ffd8debcb4f5cb430bc2f237e27a6098471a9f7ffa60&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;43fcaef3dc4b2a2d0550543b638048edcfb710da9276da109a9e011ed1a53ed1&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;0x04e5c695969ab0634e337c9cfc920a6c3d0a8b06f6480daf36ae74a4e6193b56&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;previous_verification_hash&quot;: &quot;0xb9bc2f140ae99258eb350aca87f5de0f26f2204fd4dc143683b1d1497f87e6f9&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;local_timestamp&quot;: &quot;20250305205405&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;revision_type&quot;: &quot;signature&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;signature&quot;: &quot;0x6771333580642308cb18b27869d751e723d6e5a8328e2b5c1a6cb35a0a5d841536817d4b40301d8830a877f55f1869a222380df3432176e76959827811859acc1c&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;signature_public_key&quot;: &quot;0x03b6ff4b0c45ce230eb48499614538ca7daa43000395e694ac92eaa1e4b805df8a&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;signature_wallet_address&quot;: &quot;0xbdc64c49bf736cfe1b8233b083d3d632f26feb27&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;signature_type&quot;: &quot;ethereum:eip-191&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;version&quot;: &quot;https://aqua-protocol.org/docs/v3/schema_2 | SHA256 | Method: scalar&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;0x84cf1e09c51911599d4c2a9e5ad6390027b82f397db929a5468c1cc9b9815119&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;previous_verification_hash&quot;: &quot;0x04e5c695969ab0634e337c9cfc920a6c3d0a8b06f6480daf36ae74a4e6193b56&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;local_timestamp&quot;: &quot;20250305205420&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;revision_type&quot;: &quot;signature&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;signature&quot;: &quot;0xba380c0b07cbcdaefd258cc3bdb21a3f31993a54d9e991ba0b9953e62767f5cc53b03f659dc80466dd9a00e83920fa0eeffa43921a6f5a387e44155547b58f311c&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;signature_public_key&quot;: &quot;0x041518581af65749b3ddc69889df3e5d229bc8ad79279a07ddeb368ade5e1592368c5ff3b69143d7a1e7cf64f7d0774a6724e6eaf138d318d07ddc30f6081ca89a&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;signature_wallet_address&quot;: &quot;0xa2026582B94FEb9124231fbF7b052c39218954C2&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;signature_type&quot;: &quot;ethereum:eip-191&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;version&quot;: &quot;https://aqua-protocol.org/docs/v3/schema_2 | SHA256 | Method: scalar&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="key-fields">Key Fields:<a href="#key-fields" class="hash-link" aria-label="Direct link to Key Fields:" title="Direct link to Key Fields:">​</a></h4>
<ul>
<li><strong><code>forms_conditions</code></strong>: Specifies enforceable terms, stored as part of the Aqua-Chain.</li>
<li><strong><code>signature</code></strong>: Two signatures are required:<!-- -->
<ul>
<li>Sender’s signature authorizes the agreement.</li>
<li>Receiver’s signature acknowledges the conditions.</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="enforcement-workflow">Enforcement Workflow<a href="#enforcement-workflow" class="hash-link" aria-label="Direct link to Enforcement Workflow" title="Direct link to Enforcement Workflow">​</a></h3>
<p>The protocol requires:</p>
<ol>
<li><strong>Sender Initiation</strong>: The sender creates and signs the agreement (revisions 1 and 2).</li>
<li><strong>Receiver Acknowledgment</strong>: The receiver signs the agreement (revision 3).</li>
<li><strong>Validation</strong>: The fully signed Aqua-Chain is verified, ensuring both signatures are valid.
Additional checks: Signature must be authoritative in the context of the sender. Signature of the receiver must be from the account defined by the sender.</li>
<li><strong>Resource Sharing</strong>: The resource is shared with the receiver only after both signatures are confirmed. An option is to share any revision before the referrenced revision to provide verifiable history. Another option could be to define optional policies to allow e.g. access to future revisions (updates) to the AquaTree.</li>
</ol></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/inblockio/versioned_docs/version-1.3.2/AccessControl.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/v3/AquaIdentity"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Aqua Identity</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/v3/Cheque"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">WAVS integration: Digital Cheque</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#unilateral-access-grant" class="table-of-contents__link toc-highlight">Unilateral Access Grant</a><ul><li><a href="#overview" class="table-of-contents__link toc-highlight">Overview</a></li><li><a href="#input-json-for-access-grant" class="table-of-contents__link toc-highlight">Input JSON for Access Grant</a></li><li><a href="#resulting-aqua-chain-revision-datastructure" class="table-of-contents__link toc-highlight">Resulting Aqua-Chain Revision Datastructure</a></li><li><a href="#enforcement" class="table-of-contents__link toc-highlight">Enforcement</a></li></ul></li><li><a href="#bilateral-access-agreement" class="table-of-contents__link toc-highlight">Bilateral Access Agreement</a><ul><li><a href="#overview-1" class="table-of-contents__link toc-highlight">Overview</a></li><li><a href="#input-json-for-access-agreement" class="table-of-contents__link toc-highlight">Input JSON for Access Agreement</a></li><li><a href="#resulting-aqua-chain-revision-datastructure-1" class="table-of-contents__link toc-highlight">Resulting Aqua-Chain Revision Datastructure</a></li><li><a href="#enforcement-workflow" class="table-of-contents__link toc-highlight">Enforcement Workflow</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Documentation</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/v3/intro">Docs</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://matrix.to/#/#aqua-community:matrix.jembawan.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">Matrix<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/aqua" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/inblockio" target="_blank" rel="noopener noreferrer" class="footer__link-item">X<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/inblockio" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">© 2025 AQUA Protocol. All right reserved.</div></div></div></footer></div>
</body>
</html>