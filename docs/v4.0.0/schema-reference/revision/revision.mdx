---
title: "Aqua Protocol Revisions"
description: "What is a revision , what maked up a revision ?"
---

Revisions are content-identifiable envelops in Aqua-Protocol. They are atomic and form a graph structure in a hash-tree. It represents the evolutionary, iterative, and historical essence of the atomic objects in the Aqua Protocol.


- Revision Chaining: Revisions form chains via optional previous_revision (a SHA3-256 hash), marking genesis if absent.
- Type Identification: revision_type specifies the revision's purpose either a reference to a [template](https://www.notion.so/V4-Protocol-Draft-27ae695c0eec801c95fff40830e4c0e4?pvs=21) (32-hex hash) (for [Object](https://www.notion.so/V4-Protocol-Draft-27ae695c0eec801c95fff40830e4c0e4?pvs=21) revisions) or built-in types like "[template](https://www.notion.so/V4-Protocol-Draft-27ae695c0eec801c95fff40830e4c0e4?pvs=21)", "[signature](https://www.notion.so/V4-Protocol-Draft-27ae695c0eec801c95fff40830e4c0e4?pvs=21)", or "[link](https://www.notion.so/V4-Protocol-Draft-27ae695c0eec801c95fff40830e4c0e4?pvs=21)".
- Timing and Entropy: Includes a Unix timestamp (local_timestamp, unsigned 64-bit) and a random nonce (128-bit hex) for ordering and anti-collision.
- Versioning: version points to a protocol schema URL or a hash/custom string (up to 128 chars) for compatibility.
- Canonicalisation Method: method chooses between "scalar" (simple object hash for efficiency) or "tree" (Merkle tree for granular proofs, e.g., selective disclosure).
- Hash Type: identifier of the hashing function to generate the hash ID of the revision
- Schema Integration: Optional schema embeds a full JSON Schema (Draft 2020-12) for validating custom data in templates.


```JSON
{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://aqua-protocol.org/docs/v4/metaschema",
  "title": "Aqua Protocol Metaschema",
  "description": "Schema for metadata in Aqua Protocol revisions",
  "type": "object",
  "properties": {
    "previous_revision": {
      "description": "SHA3-256 hash of the previous revision. If not present, this is a genesis revision.",
      "type": "string",
      "pattern": "^[0-9a-fA-F]{64}$"
    },
    "revision_type": {
      "description": "Non-traversable reference to a template or one of the specified types.",
      "oneOf": [
        {
          "type": "string",
          "pattern": "^[0-9a-fA-F]{32}$"
          "description": "Non-traversable reference to a template revision hash."
        },
        {
          "type": "string",
          "enum": ["template", "signature", "link"]
          "description": "Fundamental revision types within Aqua Protocol"
        }
      ]
    },
    "local_timestamp": {
      "description": "Unsigned 64-bit integer Unix timestamp.",
      "type": "integer",
      "minimum": 0,
      "maximum": 18446744073709551615
    },
    "nonce": {
      "description": "128-bit random bytes for entropy, hex-encoded.",
      "type": "string",
      "pattern": "^[0-9a-fA-F]{32}$"
    },
    "version": {
      "description": "Version identifier: either a specific URL or a SHA256 hash.",
      "oneOf": [
        {
          "type": "string",
          "const": "https://aqua-protocol.org/docs/v4/schema | FIPS_202-SHA3-256"
        },
        {
          "type": "string",
          "pattern": "^{32}"
          "maxLength": 128,
        }
      ]
    },
    "hash_type": {
      "description": "Hash function identifier: either FIPS_202-SHA3-256 or a custom hashing type.",
      "oneOf": [
        {
          "type": "string",
          "const": "FIPS_202-SHA3-256"
        },
        {
          "type": "string",
          "pattern": "^{32}"
          "maxLength": 128,
        }
      ]
    }
    "method": {
      "description": "Method type.",
      "type": "string",
      "enum": ["tree", "scalar"]
      "description": "Scalar: Is a simple hash of the stringified revision object. This is the default method for performance reasons. Tree: Creates a merkle tree of all the values. This allows a more granular verification. This is used for e.g. selective disclosure",
    }
    "schema": {
	    "description": "Schema definition found in template revisions",
	    "type": "object",
	    "$ref": "https://json-schema.org/draft/2020-12/schema"
    }
  },
  "required": ["revision_type", "local_timestamp", "nonce", "version", "hash_type", "method"],
  // This is to allow other revision types like link revision and signature revision
  // Its the responsibility of the implementation to be more or less permissive
  "additionalFields": true
}



```