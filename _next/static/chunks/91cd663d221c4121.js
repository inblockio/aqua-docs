(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,810848,e=>{"use strict";var t=e.i(843476),n=e.i(271645);function l({reverse:e=!1,laneCount:l=5,invertSpeed:o=!1}){let i=(0,n.useRef)(null);return(0,n.useEffect)(()=>{let t,n=i.current;if(!n)return;let s=n.getContext("2d");if(!s)return;let r=n.parentElement;if(!r)return;n.width=r.offsetWidth,n.height=r.offsetHeight;let h=()=>{n.width=r.offsetWidth,n.height=r.offsetHeight,w()};window.addEventListener("resize",h);let f={genesis:[220,40,40],revision:[239,84,1],signature:[40,180,80],witness:[50,130,220]},a=0,d=["revision","signature","witness"],u=[],g=[],c=0,p=[];function x(e){let t=Math.abs(e-n.width/2)/(.75*(n.width/2))-.5;return t<0&&(t=0),t>1&&(t=1),.75*t}function b(e,t){return e+Math.random()*(t-e)}function m(e,t){return Math.floor(b(e,t+1))}function y(e){return e[m(0,e.length-1)]}function w(){a=n.height/l,p=[];for(let e=0;e<l;e++){let t=l>1?e/(l-1):0,n=o?.5+(1-t)*.5:.5+.5*t;p.push({y:a*(e+.5),occupants:[],drift:n})}}function M(){let t=function(){let t=[];for(let l=0;l<p.length;l++){let o=p[l];if(0===o.occupants.length)t.push(o);else if(o.occupants.length<3){let l=!0;for(let t=0;t<o.occupants.length;t++){let i=function(t){let n=e?1/0:-1/0;for(let l=0;l<t.nodes.length;l++)e?t.nodes[l].x<n&&(n=t.nodes[l].x):t.nodes[l].x>n&&(n=t.nodes[l].x);return n}(o.occupants[t]);if(e){if(i<210){l=!1;break}}else if(i>n.width+40-250){l=!1;break}}l&&t.push(o)}}return 0===t.length?null:y(t)}();if(!t)return;let l=e?-40:n.width+40,o=t.occupants.length%2==0?-(.12*a):.12*a,i=t.y+o,s=.45*a,r=s/3,h=b(24,36),f={nodes:[],edges:[],lane:t,branches:[]},x={x:l,y:i,type:"genesis",lineY:i};f.nodes.push(x),f.branches.push({tip:x,lineY:i});let w=m(2,4),M=e?-1:1;for(let e=0;e<w&&!(f.nodes.length>=10);e++){let e=f.branches.length;for(let t=0;t<e&&!(f.nodes.length>=10);t++){let e=f.branches[t],n=y(d),l={x:e.tip.x+M*h,y:e.lineY,type:n,lineY:e.lineY};f.nodes.push(l),f.edges.push({from:e.tip,to:l}),e.tip=l}if(f.nodes.length<10&&.3>Math.random()&&f.branches.length<4){let e=y(f.branches),t=.5>Math.random()?-1:1,n=e.lineY+t*r;n<i-s&&(n=i-s),n>i+s&&(n=i+s);let l=!1;for(let e=0;e<f.branches.length;e++)if(Math.abs(f.branches[e].lineY-n)<.5*r){l=!0;break}if(!l){let t=y(d),l={x:e.tip.x+M*h,y:n,type:t,lineY:n};f.nodes.push(l),f.edges.push({from:e.tip,to:l}),f.branches.push({tip:l,lineY:n})}}}t.occupants.push(f),u.push(f),function(t){let n=Y(t),l=[];for(let e=0;e<u.length-1;e++){let n=Math.abs(u[e].lane.y-t.lane.y);l.push({chain:u[e],dist:n})}l.sort((e,t)=>e.dist-t.dist);for(let o=0;o<l.length;o++){let i=l[o].chain;if(0===i.nodes.length||$(t,i)>=4)continue;let s=1/(1+.3*o),r=Y(i);if(e?r<n?s*=3:s*=.15:r>n?s*=3:s*=.15,Math.random()<s){let e=y(t.nodes),n=v(e,i);g.push({from:e,to:n,birth:c})}}}(f)}function v(e,t){let n=[],l=0;for(let o=0;o<t.nodes.length;o++){let i=t.nodes[o],s=1/(1+Math.abs(i.y-e.y)/40)*("genesis"===i.type?5:1);n.push(s),l+=s}let o=Math.random()*l,i=0;for(let e=0;e<n.length;e++)if(o<=(i+=n[e]))return t.nodes[e];return t.nodes[t.nodes.length-1]}function Y(e){if(0===e.nodes.length)return 0;let t=0;for(let n=0;n<e.nodes.length;n++)t+=e.nodes[n].x;return t/e.nodes.length}function $(e,t){let n=0;for(let l=0;l<g.length;l++){let o=g[l],i=-1!==e.nodes.indexOf(o.from),s=-1!==t.nodes.indexOf(o.to),r=-1!==t.nodes.indexOf(o.from),h=-1!==e.nodes.indexOf(o.to);(i&&s||r&&h)&&n++}return n}w();let T=Math.min(12,p.length);for(let t=0;t<T;t++){M();let l=u[u.length-1];if(l){let o=(T-t)*(n.width/(T+1));for(let t=0;t<l.nodes.length;t++)e?l.nodes[t].x+=o:l.nodes[t].x-=o}}return!function l(){s.clearRect(0,0,n.width,n.height),++c%50==0&&u.length<20&&M(),c%70==35&&u.length>0&&function(t){if(t.nodes.length>=10||!t.branches||0===t.branches.length)return;let n=y(t.branches),l=10-t.nodes.length,o=Math.random()<(l<=1?1:l<=3?.6:.15)?"witness":y(d),i=e?-1:1,s={x:n.tip.x+i*b(24,36),y:n.lineY,type:o,lineY:n.lineY};if(t.nodes.push(s),t.edges.push({from:n.tip,to:s}),n.tip=s,.85>Math.random()&&u.length>1){let n=Y(t),l=null,o=-1/0;for(let i=0;i<u.length;i++){if(u[i]===t||0===u[i].nodes.length||$(t,u[i])>=4)continue;let s=1/(1+Math.abs(u[i].lane.y-t.lane.y)/40),r=Y(u[i]),h=s*(e?r<n?3:.15:r>n?3:.15);h>o&&(o=h,l=u[i])}l&&g.push({from:s,to:v(s,l),birth:c})}}(y(u));for(let t=0;t<u.length;t++){let n=u[t].lane.drift;for(let l=0;l<u[t].nodes.length;l++)e?u[t].nodes[l].x+=n:u[t].nodes[l].x-=n}u=u.filter(t=>{let l;if(e){let e=1/0;for(let n=0;n<t.nodes.length;n++)t.nodes[n].x<e&&(e=t.nodes[n].x);l=e>n.width+80}else{let e=-1/0;for(let n=0;n<t.nodes.length;n++)t.nodes[n].x>e&&(e=t.nodes[n].x);l=e<-80}if(l){let e=t.lane.occupants.indexOf(t);return -1!==e&&t.lane.occupants.splice(e,1),!1}return!0}),g=g.filter(t=>e?t.from.x<n.width+80&&t.to.x<n.width+80:t.from.x>-80&&t.to.x>-80);for(let e=0;e<g.length;e++)!function(e){let t=Math.min(x(e.from.x),x(e.to.x));if(t<.01)return;let n=c-(e.birth||0),l=n<30?1-n/30:0;l>0&&(s.strokeStyle=`rgba(0,0,0,${t*l*.8})`,s.lineWidth=3,s.setLineDash([]),s.beginPath(),s.moveTo(e.from.x,e.from.y),s.lineTo(e.to.x,e.to.y),s.stroke()),s.strokeStyle=`rgba(40,50,100,${t*(.6+.4*l)})`,s.lineWidth=1+1.3*l,s.setLineDash([4,5]),s.beginPath(),s.moveTo(e.from.x,e.from.y),s.lineTo(e.to.x,e.to.y),s.stroke(),s.setLineDash([])}(g[e]);for(let e=0;e<u.length;e++){let t=u[e];for(let e=0;e<t.edges.length;e++)!function(e,t){let n=Math.min(x(e.x),x(t.x));n<.01||(s.strokeStyle=`rgba(20,60,80,${.85*n})`,s.lineWidth=1.6,s.beginPath(),s.moveTo(e.x,e.y),s.lineTo(t.x,t.y),s.stroke())}(t.edges[e].from,t.edges[e].to);for(let e=0;e<t.nodes.length;e++)!function(e){let t=x(e.x);if(t<.01)return;let n=f[e.type];s.fillStyle=`rgba(${n[0]},${n[1]},${n[2]},${t})`,s.beginPath(),s.arc(e.x,e.y,4,0,2*Math.PI),s.fill(),"genesis"===e.type&&t>.15&&(s.fillStyle=`rgba(${n[0]},${n[1]},${n[2]},${.15*t})`,s.beginPath(),s.arc(e.x,e.y,12,0,2*Math.PI),s.fill())}(t.nodes[e])}t=requestAnimationFrame(l)}(),()=>{window.removeEventListener("resize",h),cancelAnimationFrame(t)}},[e,l,o]),(0,t.jsx)("canvas",{ref:i,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",pointerEvents:"none"}})}e.s(["default",()=>l])}]);